function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}define("template",["jquery"],function(e){"use strict";return function(t,n){var r;return r=t||"",e.each(n,function(t,n){var i,a;i=typeof n,a=new RegExp("{{\\s*"+t+"\\s*}}","g"),"object"===i&&null!==n?e.each(n,function(e,n){var i;i=new RegExp("{{\\s*"+t+"."+e+"\\s*}}","g"),r=r.replace(i,n)}):r=r.replace(a,n)}),r}}),define("sfModal",["jquery","template"],function(e,t){"use strict";return function(n){var r,i;if("object"!=typeof n){if("hide"===n)return void e(".sfmodal").modal("hide");if("toggle"===n)return void e(".sfmodal").modal("toggle");n={content:n,hideDone:!0}}r=e.extend({hideTitle:!1,hideFooter:!1,modalSize:"",title:"警告：前方高能！",content:"玩脱了",wrapper:null,$content:null,hideClose:!1,closeText:"取消",closeClass:"btn-default",backdrop:!0,closeFn:function(){},hideDone:!1,doneText:"确认",doneClass:"btn-primary",doneFn:function(){e(".sfmodal").modal("hide")},show:function(){},shown:function(){},hide:function(){},hidden:function(){},loaded:function(){}},n),i='<div class="sfmodal modal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">  <div class="modal-dialog {{modalSize}}">    <div class="modal-content">      '+(r.hideTitle?"":'<div class="modal-header">        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>        <h4 class="modal-title">{{title}}</h4>      </div>')+'<div class="modal-body">        <p class="sfModal-content">          </div>          <div class="modal-footer '+(r.hideFooter?"hidden":"")+'">'+(r.hideClose?"":'<button type="button" class="btn {{closeClass}}" data-dismiss="modal">{{closeText}}</button>')+(r.hideDone?"":'<button type="button" class="btn {{doneClass}} done-btn">{{doneText}}</button>')+"</div>        </div>      </div>    </div>",e(".sfmodal").length>0&&(e(".sfmodal").remove(),e(".modal-backdrop").remove()),r.wrapper?(e(r.wrapper).append(t(i,r)),e(r.wrapper).append('<div class="modal-backdrop in"></div>')):e("body").append(t(i,r)),r.$content?e(".sfmodal .sfModal-content").append(r.$content):e(".sfmodal .sfModal-content").html(r.content),e(".sfmodal").modal({keyboard:!0,backdrop:r.backdrop}),e(".sfmodal").on("show.bs.modal",r.show).on("hide.bs.modal",function(t){r.hide(t),r.wrapper&&e(".modal-backdrop").remove()}).on("hidden.bs.modal",r.hidden).on("loaded.bs.modal",r.loaded).on("shown.bs.modal",r.shown).modal("show"),e(".sfmodal .done-btn").click(function(t){r.doneFn(t),r.wrapper&&e(".modal-backdrop").remove()}),e(".sfmodal .close-btn").click(function(t){r.closeFn(t),r.wrapper&&e(".modal-backdrop").remove()})}}),define("getRelated",["jquery","template","sfModal"],function(e,t,n){"use strict";return function(r,i,a,o,s){var l,c,u;r&&(c=r+"",i=i||'<li class="widget-links__item">                <a href="javascript:void(0);" class="ranks" data-toggle="tooltip" data-placement="top" title="{{ answers }}个回答">{{ answers }}</a>                <a href="{{ url }}">{{ title }}</a>            </li>',u={},l="",16===c.length&&0===c.indexOf("101")?(l="GET",u={"do":"related",id:c}):(l="GET",u={q:c}),e.ajax({url:"/api/question/search",data:u,type:l,dataType:"json"}).done(function(r){var l;if(0!==r.status)n("○|￣|_ 服务器跪了！");else{if(0===r.data.length)return void(o&&(e("#titleSuggest").hide(),e(a).html(o)));s&&(r.data=r.data.slice(0,s)),l="",r.data.forEach(function(e){e.isAccepted?(e.acceptedWord=" | 解决",e.isSolved=" | 已解决"):(e.acceptedWord="",e.isSolved=""),l+=t(i,e)}),e("#titleSuggest").removeClass("hidden").show(),e(a).html(l),e(a).find(".ranks").tooltip()}}))}}),define("mobile",["jquery"],function(e){return window.innerWidth>767?{login:null,signup:null}:(e(".hate, .like").data("toggle","false"),{login:function(){location.href="/user/login"},signup:function(){location.href="/user/register"}})}),function(e){e.fn.hoverIntent=function(t,n,r,i){var a={interval:i||400,sensitivity:5,timeout:600};a="object"==typeof t?e.extend(a,t):e.isFunction(n)?e.extend(a,{over:t,out:n,selector:r}):e.extend(a,{over:t,out:t,selector:n});var o,s,l,c,u=function(e){o=e.pageX,s=e.pageY},d=function(t,n){return n.hoverIntent_t=clearTimeout(n.hoverIntent_t),Math.sqrt((l-o)*(l-o)+(c-s)*(c-s))<a.sensitivity?(e(n).off("mousemove.hoverIntent",u),n.hoverIntent_s=!0,a.over.apply(n,[t])):(l=o,c=s,n.hoverIntent_t=setTimeout(function(){d(t,n)},a.interval),void 0)},f=function(e,t){return t.hoverIntent_t=clearTimeout(t.hoverIntent_t),t.hoverIntent_s=!1,a.out.apply(t,[e])},p=function(t){var n=e.extend({},t),r=this;r.hoverIntent_t&&(r.hoverIntent_t=clearTimeout(r.hoverIntent_t)),"mouseenter"===t.type?(l=n.pageX,c=n.pageY,e(r).on("mousemove.hoverIntent",u),r.hoverIntent_s||(r.hoverIntent_t=setTimeout(function(){d(n,r)},a.interval))):(e(r).off("mousemove.hoverIntent",u),r.hoverIntent_s&&(r.hoverIntent_t=setTimeout(function(){f(n,r)},a.timeout)))};return this.on({"mouseenter.hoverIntent":p,"mouseleave.hoverIntent":p},a.selector)}}(jQuery),define("jquery_hoverIntent",["jquery"],function(e){return function(){var t;return t||e.$.fn.hoverIntent}}(this)),define("sfAjax",["jquery"],function(e){"use strict";e.sfAjax=function(t,n,r,i){var a,o,s,l;o=e.extend({id:t.data("id"),"do":t.data("do"),type:t.data("type")},r),a=o["do"],s=a.indexOf("/cancel")>0?a.replace("/cancel",""):a+"/cancel",l="/api/"+o.type+"/"+o.id+"/"+o["do"],e.post(l,function(e){0===e.status?(t.data("do",s),n?n(e):location.reload()):i&&i(e)})}}),function(e){"function"==typeof define&&define.amd?define("jquery_cookie",["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){function t(e){return s.raw?e:encodeURIComponent(e)}function n(e){return s.raw?e:decodeURIComponent(e)}function r(e){return t(s.json?JSON.stringify(e):String(e))}function i(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(o," ")),s.json?JSON.parse(e):e}catch(t){}}function a(t,n){var r=s.raw?t:i(t);return e.isFunction(n)?n(r):r}var o=/\+/g,s=e.cookie=function(i,o,l){if(void 0!==o&&!e.isFunction(o)){if(l=e.extend({},s.defaults,l),"number"==typeof l.expires){var c=l.expires,u=l.expires=new Date;u.setTime(+u+864e5*c)}return document.cookie=[t(i),"=",r(o),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}for(var d=i?void 0:{},f=document.cookie?document.cookie.split("; "):[],p=0,h=f.length;h>p;p++){var m=f[p].split("="),g=n(m.shift()),v=m.join("=");if(i&&i===g){d=a(v,o);break}i||void 0===(v=a(v))||(d[g]=v)}return d};s.defaults={},e.removeCookie=function(t,n){return void 0===e.cookie(t)?!1:(e.cookie(t,"",e.extend({},n,{expires:-1})),!e.cookie(t))}}),function(e,t,n,r){var i=e(t);e.fn.lazyload=function(a){function o(){var t=0;l.each(function(){var n=e(this);if(!c.skip_invisible||n.is(":visible"))if(e.abovethetop(this,c)||e.leftofbegin(this,c));else if(e.belowthefold(this,c)||e.rightoffold(this,c)){if(++t>c.failure_limit)return!1}else n.trigger("appear"),t=0})}var s,l=this,c={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return a&&(r!==a.failurelimit&&(a.failure_limit=a.failurelimit,delete a.failurelimit),r!==a.effectspeed&&(a.effect_speed=a.effectspeed,delete a.effectspeed),e.extend(c,a)),s=c.container===r||c.container===t?i:e(c.container),0===c.event.indexOf("scroll")&&s.bind(c.event,function(){return o()}),this.each(function(){var t=this,n=e(t);t.loaded=!1,(n.attr("src")===r||n.attr("src")===!1)&&n.is("img")&&n.attr("src",c.placeholder),n.one("appear",function(){if(!this.loaded){if(c.appear){var r=l.length;c.appear.call(t,r,c)}e("<img />").bind("load",function(){var r=n.attr("data-"+c.data_attribute);n.hide(),n.is("img")?n.attr("src",r):n.css("background-image","url('"+r+"')"),n[c.effect](c.effect_speed),t.loaded=!0;var i=e.grep(l,function(e){return!e.loaded});if(l=e(i),c.load){var a=l.length;c.load.call(t,a,c)}}).attr("src",n.attr("data-"+c.data_attribute))}}),0!==c.event.indexOf("scroll")&&n.bind(c.event,function(){t.loaded||n.trigger("appear")})}),i.bind("resize",function(){o()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&i.bind("pageshow",function(t){t.originalEvent&&t.originalEvent.persisted&&l.each(function(){e(this).trigger("appear")})}),e(n).ready(function(){o()}),this},e.belowthefold=function(n,a){var o;return o=a.container===r||a.container===t?(t.innerHeight?t.innerHeight:i.height())+i.scrollTop():e(a.container).offset().top+e(a.container).height(),o<=e(n).offset().top-a.threshold},e.rightoffold=function(n,a){var o;return o=a.container===r||a.container===t?i.width()+i.scrollLeft():e(a.container).offset().left+e(a.container).width(),o<=e(n).offset().left-a.threshold},e.abovethetop=function(n,a){var o;return o=a.container===r||a.container===t?i.scrollTop():e(a.container).offset().top,o>=e(n).offset().top+a.threshold+e(n).height()},e.leftofbegin=function(n,a){var o;return o=a.container===r||a.container===t?i.scrollLeft():e(a.container).offset().left,o>=e(n).offset().left+a.threshold+e(n).width()},e.inviewport=function(t,n){return!(e.rightoffold(t,n)||e.leftofbegin(t,n)||e.belowthefold(t,n)||e.abovethetop(t,n))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(jQuery,window,document),define("jquery_lazyload",["jquery"],function(e){return function(){var t;return t||e.$.fn.lazyload}}(this)),function(){var e=this,t=e._,n=Array.prototype,r=Object.prototype,i=Function.prototype,a=n.push,o=n.slice,s=n.concat,l=r.toString,c=r.hasOwnProperty,u=Array.isArray,d=Object.keys,f=i.bind,p=function(e){return e instanceof p?e:this instanceof p?void(this._wrapped=e):new p(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=p),exports._=p):e._=p,p.VERSION="1.7.0";var h=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,a){return e.call(t,n,r,i,a)}}return function(){return e.apply(t,arguments)}};p.iteratee=function(e,t,n){return null==e?p.identity:p.isFunction(e)?h(e,t,n):p.isObject(e)?p.matches(e):p.property(e)},p.each=p.forEach=function(e,t,n){if(null==e)return e;t=h(t,n);var r,i=e.length;if(i===+i)for(r=0;i>r;r++)t(e[r],r,e);else{var a=p.keys(e);for(r=0,i=a.length;i>r;r++)t(e[a[r]],a[r],e)}return e},p.map=p.collect=function(e,t,n){if(null==e)return[];t=p.iteratee(t,n);for(var r,i=e.length!==+e.length&&p.keys(e),a=(i||e).length,o=Array(a),s=0;a>s;s++)r=i?i[s]:s,o[s]=t(e[r],r,e);return o};var m="Reduce of empty array with no initial value";p.reduce=p.foldl=p.inject=function(e,t,n,r){null==e&&(e=[]),t=h(t,r,4);var i,a=e.length!==+e.length&&p.keys(e),o=(a||e).length,s=0;if(arguments.length<3){if(!o)throw new TypeError(m);n=e[a?a[s++]:s++]}for(;o>s;s++)i=a?a[s]:s,n=t(n,e[i],i,e);return n},p.reduceRight=p.foldr=function(e,t,n,r){null==e&&(e=[]),t=h(t,r,4);var i,a=e.length!==+e.length&&p.keys(e),o=(a||e).length;if(arguments.length<3){if(!o)throw new TypeError(m);n=e[a?a[--o]:--o]}for(;o--;)i=a?a[o]:o,n=t(n,e[i],i,e);return n},p.find=p.detect=function(e,t,n){var r;return t=p.iteratee(t,n),p.some(e,function(e,n,i){return t(e,n,i)?(r=e,!0):void 0}),r},p.filter=p.select=function(e,t,n){var r=[];return null==e?r:(t=p.iteratee(t,n),p.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r)},p.reject=function(e,t,n){return p.filter(e,p.negate(p.iteratee(t)),n)},p.every=p.all=function(e,t,n){if(null==e)return!0;t=p.iteratee(t,n);var r,i,a=e.length!==+e.length&&p.keys(e),o=(a||e).length;for(r=0;o>r;r++)if(i=a?a[r]:r,!t(e[i],i,e))return!1;return!0},p.some=p.any=function(e,t,n){if(null==e)return!1;t=p.iteratee(t,n);var r,i,a=e.length!==+e.length&&p.keys(e),o=(a||e).length;for(r=0;o>r;r++)if(i=a?a[r]:r,t(e[i],i,e))return!0;return!1},p.contains=p.include=function(e,t){return null==e?!1:(e.length!==+e.length&&(e=p.values(e)),p.indexOf(e,t)>=0)},p.invoke=function(e,t){var n=o.call(arguments,2),r=p.isFunction(t);return p.map(e,function(e){return(r?t:e[t]).apply(e,n)})},p.pluck=function(e,t){return p.map(e,p.property(t))},p.where=function(e,t){return p.filter(e,p.matches(t))},p.findWhere=function(e,t){return p.find(e,p.matches(t))},p.max=function(e,t,n){var r,i,a=-1/0,o=-1/0;if(null==t&&null!=e){e=e.length===+e.length?e:p.values(e);for(var s=0,l=e.length;l>s;s++)r=e[s],r>a&&(a=r)}else t=p.iteratee(t,n),p.each(e,function(e,n,r){i=t(e,n,r),(i>o||i===-1/0&&a===-1/0)&&(a=e,o=i)});return a},p.min=function(e,t,n){var r,i,a=1/0,o=1/0;if(null==t&&null!=e){e=e.length===+e.length?e:p.values(e);for(var s=0,l=e.length;l>s;s++)r=e[s],a>r&&(a=r)}else t=p.iteratee(t,n),p.each(e,function(e,n,r){i=t(e,n,r),(o>i||1/0===i&&1/0===a)&&(a=e,o=i)});return a},p.shuffle=function(e){for(var t,n=e&&e.length===+e.length?e:p.values(e),r=n.length,i=Array(r),a=0;r>a;a++)t=p.random(0,a),t!==a&&(i[a]=i[t]),i[t]=n[a];return i},p.sample=function(e,t,n){return null==t||n?(e.length!==+e.length&&(e=p.values(e)),e[p.random(e.length-1)]):p.shuffle(e).slice(0,Math.max(0,t))},p.sortBy=function(e,t,n){return t=p.iteratee(t,n),p.pluck(p.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return e.index-t.index}),"value")};var g=function(e){return function(t,n,r){var i={};return n=p.iteratee(n,r),p.each(t,function(r,a){var o=n(r,a,t);e(i,r,o)}),i}};p.groupBy=g(function(e,t,n){p.has(e,n)?e[n].push(t):e[n]=[t]}),p.indexBy=g(function(e,t,n){e[n]=t}),p.countBy=g(function(e,t,n){p.has(e,n)?e[n]++:e[n]=1}),p.sortedIndex=function(e,t,n,r){n=p.iteratee(n,r,1);for(var i=n(t),a=0,o=e.length;o>a;){var s=a+o>>>1;n(e[s])<i?a=s+1:o=s}return a},p.toArray=function(e){return e?p.isArray(e)?o.call(e):e.length===+e.length?p.map(e,p.identity):p.values(e):[]},p.size=function(e){return null==e?0:e.length===+e.length?e.length:p.keys(e).length},p.partition=function(e,t,n){t=p.iteratee(t,n);var r=[],i=[];return p.each(e,function(e,n,a){(t(e,n,a)?r:i).push(e)}),[r,i]},p.first=p.head=p.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:0>t?[]:o.call(e,0,t)},p.initial=function(e,t,n){return o.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},p.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:o.call(e,Math.max(e.length-t,0))},p.rest=p.tail=p.drop=function(e,t,n){return o.call(e,null==t||n?1:t)},p.compact=function(e){return p.filter(e,p.identity)};var v=function(e,t,n,r){if(t&&p.every(e,p.isArray))return s.apply(r,e);for(var i=0,o=e.length;o>i;i++){var l=e[i];p.isArray(l)||p.isArguments(l)?t?a.apply(r,l):v(l,t,n,r):n||r.push(l)}return r};p.flatten=function(e,t){return v(e,t,!1,[])},p.without=function(e){return p.difference(e,o.call(arguments,1))},p.uniq=p.unique=function(e,t,n,r){if(null==e)return[];p.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=p.iteratee(n,r));for(var i=[],a=[],o=0,s=e.length;s>o;o++){var l=e[o];if(t)o&&a===l||i.push(l),a=l;else if(n){var c=n(l,o,e);p.indexOf(a,c)<0&&(a.push(c),i.push(l))}else p.indexOf(i,l)<0&&i.push(l)}return i},p.union=function(){return p.uniq(v(arguments,!0,!0,[]))},p.intersection=function(e){if(null==e)return[];for(var t=[],n=arguments.length,r=0,i=e.length;i>r;r++){var a=e[r];if(!p.contains(t,a)){for(var o=1;n>o&&p.contains(arguments[o],a);o++);o===n&&t.push(a)}}return t},p.difference=function(e){var t=v(o.call(arguments,1),!0,!0,[]);return p.filter(e,function(e){return!p.contains(t,e)})},p.zip=function(e){if(null==e)return[];for(var t=p.max(arguments,"length").length,n=Array(t),r=0;t>r;r++)n[r]=p.pluck(arguments,r);return n},p.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},p.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return r=p.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,i+n):n}for(;i>r;r++)if(e[r]===t)return r;return-1},p.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=e.length;for("number"==typeof n&&(r=0>n?r+n+1:Math.min(r,n+1));--r>=0;)if(e[r]===t)return r;return-1},p.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),a=0;r>a;a++,e+=n)i[a]=e;return i};var b=function(){};p.bind=function(e,t){var n,r;if(f&&e.bind===f)return f.apply(e,o.call(arguments,1));if(!p.isFunction(e))throw new TypeError("Bind must be called on a function");return n=o.call(arguments,2),r=function(){if(!(this instanceof r))return e.apply(t,n.concat(o.call(arguments)));b.prototype=e.prototype;var i=new b;b.prototype=null;var a=e.apply(i,n.concat(o.call(arguments)));return p.isObject(a)?a:i}},p.partial=function(e){var t=o.call(arguments,1);return function(){for(var n=0,r=t.slice(),i=0,a=r.length;a>i;i++)r[i]===p&&(r[i]=arguments[n++]);for(;n<arguments.length;)r.push(arguments[n++]);return e.apply(this,r)}},p.bindAll=function(e){var t,n,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(t=1;r>t;t++)n=arguments[t],e[n]=p.bind(e[n],e);return e},p.memoize=function(e,t){var n=function(r){var i=n.cache,a=t?t.apply(this,arguments):r;return p.has(i,a)||(i[a]=e.apply(this,arguments)),i[a]};return n.cache={},n},p.delay=function(e,t){var n=o.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},p.defer=function(e){return p.delay.apply(p,[e,1].concat(o.call(arguments,1)))},p.throttle=function(e,t,n){var r,i,a,o=null,s=0;n||(n={});var l=function(){s=n.leading===!1?0:p.now(),o=null,a=e.apply(r,i),o||(r=i=null)};return function(){var c=p.now();s||n.leading!==!1||(s=c);var u=t-(c-s);return r=this,i=arguments,0>=u||u>t?(clearTimeout(o),o=null,s=c,a=e.apply(r,i),o||(r=i=null)):o||n.trailing===!1||(o=setTimeout(l,u)),a}},p.debounce=function(e,t,n){var r,i,a,o,s,l=function(){var c=p.now()-o;t>c&&c>0?r=setTimeout(l,t-c):(r=null,n||(s=e.apply(a,i),r||(a=i=null)))};return function(){a=this,i=arguments,o=p.now();var c=n&&!r;return r||(r=setTimeout(l,t)),c&&(s=e.apply(a,i),a=i=null),s}},p.wrap=function(e,t){return p.partial(t,e)},p.negate=function(e){return function(){return!e.apply(this,arguments)}},p.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},p.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},p.before=function(e,t){var n;return function(){return--e>0?n=t.apply(this,arguments):t=null,n}},p.once=p.partial(p.before,2),p.keys=function(e){if(!p.isObject(e))return[];if(d)return d(e);var t=[];for(var n in e)p.has(e,n)&&t.push(n);return t},p.values=function(e){for(var t=p.keys(e),n=t.length,r=Array(n),i=0;n>i;i++)r[i]=e[t[i]];return r},p.pairs=function(e){for(var t=p.keys(e),n=t.length,r=Array(n),i=0;n>i;i++)r[i]=[t[i],e[t[i]]];return r},p.invert=function(e){for(var t={},n=p.keys(e),r=0,i=n.length;i>r;r++)t[e[n[r]]]=n[r];return t},p.functions=p.methods=function(e){var t=[];for(var n in e)p.isFunction(e[n])&&t.push(n);return t.sort()},p.extend=function(e){if(!p.isObject(e))return e;for(var t,n,r=1,i=arguments.length;i>r;r++){t=arguments[r];for(n in t)c.call(t,n)&&(e[n]=t[n])}return e},p.pick=function(e,t,n){var r,i={};if(null==e)return i;if(p.isFunction(t)){t=h(t,n);for(r in e){var a=e[r];t(a,r,e)&&(i[r]=a)}}else{var l=s.apply([],o.call(arguments,1));e=new Object(e);for(var c=0,u=l.length;u>c;c++)r=l[c],r in e&&(i[r]=e[r])}return i},p.omit=function(e,t,n){if(p.isFunction(t))t=p.negate(t);else{var r=p.map(s.apply([],o.call(arguments,1)),String);t=function(e,t){return!p.contains(r,t)}}return p.pick(e,t,n)},p.defaults=function(e){if(!p.isObject(e))return e;for(var t=1,n=arguments.length;n>t;t++){var r=arguments[t];for(var i in r)void 0===e[i]&&(e[i]=r[i])}return e},p.clone=function(e){return p.isObject(e)?p.isArray(e)?e.slice():p.extend({},e):e},p.tap=function(e,t){return t(e),e};var y=function(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof p&&(e=e._wrapped),t instanceof p&&(t=t._wrapped);var i=l.call(e);if(i!==l.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}if("object"!=typeof e||"object"!=typeof t)return!1;for(var a=n.length;a--;)if(n[a]===e)return r[a]===t;var o=e.constructor,s=t.constructor;if(o!==s&&"constructor"in e&&"constructor"in t&&!(p.isFunction(o)&&o instanceof o&&p.isFunction(s)&&s instanceof s))return!1;n.push(e),r.push(t);var c,u;if("[object Array]"===i){if(c=e.length,u=c===t.length)for(;c--&&(u=y(e[c],t[c],n,r)););}else{var d,f=p.keys(e);if(c=f.length,u=p.keys(t).length===c)for(;c--&&(d=f[c],u=p.has(t,d)&&y(e[d],t[d],n,r)););}return n.pop(),r.pop(),u};p.isEqual=function(e,t){return y(e,t,[],[])},p.isEmpty=function(e){if(null==e)return!0;if(p.isArray(e)||p.isString(e)||p.isArguments(e))return 0===e.length;for(var t in e)if(p.has(e,t))return!1;return!0},p.isElement=function(e){return!(!e||1!==e.nodeType)},p.isArray=u||function(e){return"[object Array]"===l.call(e)},p.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},p.each(["Arguments","Function","String","Number","Date","RegExp"],function(e){p["is"+e]=function(t){return l.call(t)==="[object "+e+"]"}}),p.isArguments(arguments)||(p.isArguments=function(e){return p.has(e,"callee")}),"function"!=typeof/./&&(p.isFunction=function(e){return"function"==typeof e||!1}),p.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},p.isNaN=function(e){return p.isNumber(e)&&e!==+e},p.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===l.call(e)},p.isNull=function(e){return null===e},p.isUndefined=function(e){return void 0===e},p.has=function(e,t){return null!=e&&c.call(e,t)},p.noConflict=function(){return e._=t,this},p.identity=function(e){return e},p.constant=function(e){return function(){return e}},p.noop=function(){},p.property=function(e){return function(t){return t[e]}},p.matches=function(e){var t=p.pairs(e),n=t.length;return function(e){if(null==e)return!n;e=new Object(e);for(var r=0;n>r;r++){var i=t[r],a=i[0];if(i[1]!==e[a]||!(a in e))return!1}return!0}},p.times=function(e,t,n){var r=Array(Math.max(0,e));t=h(t,n,1);for(var i=0;e>i;i++)r[i]=t(i);return r},p.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},p.now=Date.now||function(){return(new Date).getTime()};var _={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},w=p.invert(_),x=function(e){var t=function(t){return e[t]},n="(?:"+p.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};p.escape=x(_),p.unescape=x(w),p.result=function(e,t){if(null!=e){var n=e[t];return p.isFunction(n)?e[t]():n}};var k=0;p.uniqueId=function(e){var t=++k+"";return e?e+t:t},p.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var C=/(.)^/,S={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},T=/\\|'|\r|\n|\u2028|\u2029/g,M=function(e){return"\\"+S[e]};p.template=function(e,t,n){!t&&n&&(t=n),t=p.defaults({},t,p.templateSettings);var r=RegExp([(t.escape||C).source,(t.interpolate||C).source,(t.evaluate||C).source].join("|")+"|$","g"),i=0,a="__p+='";e.replace(r,function(t,n,r,o,s){return a+=e.slice(i,s).replace(T,M),i=s+t.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?a+="'+\n((__t=("+r+"))==null?'':__t)+\n'":o&&(a+="';\n"+o+"\n__p+='"),t}),a+="';\n",t.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var o=new Function(t.variable||"obj","_",a)}catch(s){throw s.source=a,s}var l=function(e){return o.call(this,e,p)},c=t.variable||"obj";return l.source="function("+c+"){\n"+a+"}",l},p.chain=function(e){var t=p(e);return t._chain=!0,t};var E=function(e){return this._chain?p(e).chain():e};p.mixin=function(e){p.each(p.functions(e),function(t){var n=p[t]=e[t];p.prototype[t]=function(){var e=[this._wrapped];return a.apply(e,arguments),E.call(this,n.apply(p,e))}})},p.mixin(p),p.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=n[e];p.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],E.call(this,n)}}),p.each(["concat","join","slice"],function(e){var t=n[e];p.prototype[e]=function(){return E.call(this,t.apply(this._wrapped,arguments))}}),p.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return p})}.call(this),function(e){function t(t,n,r,i){var a={data:i||0===i||i===!1?i:n?n.data:{},_wrap:n?n._wrap:null,tmpl:null,parent:n||null,nodes:[],calls:c,nest:u,wrap:d,html:f,update:p};return t&&e.extend(a,t,{nodes:[],parent:n}),r&&(a.tmpl=r,a._ctnt=a._ctnt||a.tmpl(e,a),a.key=++w,(k.length?y:b)[w]=a),a}function n(t,i,a){var o,s=a?e.map(a,function(e){return"string"==typeof e?t.key?e.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+g+'="'+t.key+'" $2'):e:n(e,t,e._ctnt)}):t;return i?s:(s=s.join(""),s.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(t,n,i,a){o=e(i).get(),l(o),n&&(o=r(n).concat(o)),a&&(o=o.concat(r(a)))}),o?o:r(s))}function r(t){var n=document.createElement("div");return n.innerHTML=t,e.makeArray(n.childNodes)}function i(t){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+e.trim(t).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(t,n,r,i,a,s,l){var c,u,d,f=e.tmpl.tag[r];if(!f)throw"Unknown template tag: "+r;return c=f._default||[],s&&!/\w$/.test(a)&&(a+=s,s=""),a?(a=o(a),l=l?","+o(l)+")":s?")":"",u=s?a.indexOf(".")>-1?a+o(s):"("+a+").call($item"+l:a,d=s?u:"(typeof("+a+")==='function'?("+a+").call($item):("+a+"))"):d=u=c.$1||"null",i=o(i),"');"+f[n?"close":"open"].split("$notnull_1").join(a?"typeof("+a+")!=='undefined' && ("+a+")!=null":"true").split("$1a").join(d).split("$1").join(u).split("$2").join(i||c.$2||"")+"__.push('"})+"');}return __;")}function a(t,r){t._wrap=n(t,!0,e.isArray(r)?r:[v.test(r)?r:e(r).html()]).join("")}function o(e){return e?e.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function s(e){var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}function l(n){function r(n){function r(e){e+=c,o=u[e]=u[e]||t(o,b[o.parent.key+c]||o.parent)}var i,a,o,s,l=n;if(s=n.getAttribute(g)){for(;l.parentNode&&1===(l=l.parentNode).nodeType&&!(i=l.getAttribute(g)););i!==s&&(l=l.parentNode?11===l.nodeType?0:l.getAttribute(g)||0:0,(o=b[s])||(o=y[s],o=t(o,b[l]||y[l]),o.key=++w,b[w]=o),x&&r(s)),n.removeAttribute(g)}else x&&(o=e.data(n,"tmplItem"))&&(r(o.key),b[o.key]=o,l=e.data(n.parentNode,"tmplItem"),l=l?l.key:0);if(o){for(a=o;a&&a.key!=l;)a.nodes.push(n),a=a.parent;delete o._ctnt,delete o._wrap,e.data(n,"tmplItem",o)}}var i,a,o,s,l,c="_"+x,u={};for(o=0,s=n.length;s>o;o++)if(1===(i=n[o]).nodeType){for(a=i.getElementsByTagName("*"),l=a.length-1;l>=0;l--)r(a[l]);r(i)}}function c(e,t,n,r){return e?void k.push({_:e,tmpl:t,item:this,data:n,options:r}):k.pop()}function u(t,n,r){return e.tmpl(e.template(t),n,r,this)}function d(t,n){var r=t.options||{};return r.wrapped=n,e.tmpl(e.template(t.tmpl),t.data,r,t.item)}function f(t,n){var r=this._wrap;return e.map(e(e.isArray(r)?r.join(""):r).filter(t||"*"),function(e){return n?e.innerText||e.textContent:e.outerHTML||s(e)})}function p(){var t=this.nodes;e.tmpl(null,null,null,this).insertBefore(t[0]),e(t).remove()}var h,m=e.fn.domManip,g="_tmplitem",v=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,b={},y={},_={key:0,data:{}},w=0,x=0,k=[];e.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,n){e.fn[t]=function(r){var i,a,o,s,l=[],c=e(r),u=1===this.length&&this[0].parentNode;if(h=b||{},u&&11===u.nodeType&&1===u.childNodes.length&&1===c.length)c[n](this[0]),l=this;else{for(a=0,o=c.length;o>a;a++)x=a,i=(a>0?this.clone(!0):this).get(),e(c[a])[n](i),l=l.concat(i);x=0,l=this.pushStack(l,t,c.selector)}return s=h,h=null,e.tmpl.complete(s),l}}),e.fn.extend({tmpl:function(t,n,r){return e.tmpl(this[0],t,n,r)},tmplItem:function(){return e.tmplItem(this[0])},template:function(t){return e.template(t,this[0])},domManip:function(t,n,r){if(t[0]&&e.isArray(t[0])){for(var i,a=e.makeArray(arguments),o=t[0],s=o.length,l=0;s>l&&!(i=e.data(o[l++],"tmplItem")););i&&x&&(a[2]=function(t){e.tmpl.afterManip(this,t,r)}),m.apply(this,a)}else m.apply(this,arguments);return x=0,!h&&e.tmpl.complete(b),this}}),e.extend({tmpl:function(r,i,o,s){var l,c=!s;if(c)s=_,r=e.template[r]||e.template(null,r),y={};else if(!r)return r=s.tmpl,b[s.key]=s,s.nodes=[],s.wrapped&&a(s,s.wrapped),e(n(s,null,s.tmpl(e,s)));return r?("function"==typeof i&&(i=i.call(s||{})),o&&o.wrapped&&a(o,o.wrapped),l=e.isArray(i)?e.map(i,function(e){return e?t(o,s,r,e):null}):[t(o,s,r,i)],c?e(n(s,null,l)):l):[]},tmplItem:function(t){var n;for(t instanceof e&&(t=t[0]);t&&1===t.nodeType&&!(n=e.data(t,"tmplItem"))&&(t=t.parentNode););return n||_},template:function(t,n){return n?("string"==typeof n?n=i(n):n instanceof e&&(n=n[0]||{}),n.nodeType&&(n=e.data(n,"tmpl")||e.data(n,"tmpl",i(n.innerHTML))),"string"==typeof t?e.template[t]=n:n):t?"string"!=typeof t?e.template(null,t):e.template[t]||e.template(null,v.test(t)?t:e(t)):null},encode:function(e){return(""+e).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}}),e.extend(e.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(){b={}},afterManip:function(t,n,r){var i=11===n.nodeType?e.makeArray(n.childNodes):1===n.nodeType?[n]:[];r.call(t,n),l(i),x++}})}(jQuery),define("jquery_tmpl",["jquery"],function(e){return function(){var t;return t||e.$.fn.tmpl}}(this)),define("typeHelper",["jquery","jquery_tmpl"],function(e){"use strict";var t,n,r,i,a,o,s,l;s='<ul class="dropdown-menu" role="menu"></ul>',i=void 0,t=void 0,r=void 0,n=void 0,a=void 0,o=["gmail.com","qq.com","163.com","hotmail.com","sina.com","126.com","live.com","live.cn","vip.sina.com","vip.qq.com","sina.cn","sohu.com","139.com","wo.com.cn","189.cn","21cn.com"],l='<button class="btn btn-default result" type="button">${result}</button><a href="#" class="i-cancel ml10 delete-result">&times;</a>',e.fn.typeHelperOld=function(c){var u;i=e.extend({data:null,tpl:'<li><a href="#" data-value="${name}">${name}</a></li>',
defaultList:[],showNum:5,remoteData:null,submitKey:null,onlyResult:!0,autoSelect:!0,emailMode:!1,insertHandler:function(){}},c),u=[],n=e(this),0!==n.length&&(n.after(e("<div></div>").addClass("typehelper")).siblings(".typehelper").append(n),t=n.parent().css("position","relative"),e.tmpl(s).insertAfter(n),r=t.find("ul").hide().css("minWidth",n.outerWidth()),e.each(i.defaultList,function(t,n){e.tmpl(i.tpl,n).appendTo(r)}),n.on("focus",function(){i.defaultList.length>0&&e(this).parent().trigger("show.typehelper")}),n.on("input",function(t){e(this).parent().trigger("search.typehelper"),e(this).parent().trigger("show.typehelper")}),n.on("keydown",function(t){e(this).parent().trigger("select.typehelper",t)}),r.delegate("li","mouseover",function(){e(this).siblings("li").removeClass("active"),e(this).addClass("active")}),n.on("blur",function(){var t,n;e(this).parent().trigger("hide.typehelper"),i.autoSelect&&(e(this).siblings("ul").find(".active").length>0?(t=r.find(".active").index(),n=u[t],e(this).parent().trigger("insert.typehelper",[r.find(".active a"),n])):e(this).val(""))}),t.on("show.typehelper",function(){e(this).find("ul").show()}),t.on("hide.typehelper",function(){e(this).find("ul").hide()}),t.on("insert.typehelper",function(a,o,s){t=e(this),n=t.find("input"),r=t.find("ul"),n.val(e(o).data("value")),e(".result",t).length>0&&(e(".result",t).remove(),t.find(".delete-result").remove()),i.onlyResult&&(n.hide(),r.after(e.tmpl(l,{result:n.val()})),i.submitKey&&n.data(i.submitKey,e(o).data(i.submitKey)),t.find(".result").on("click",function(){e(this).siblings(".delete-result").remove(),e(this).remove(),n.show().focus(),t.trigger("search.typehelper")}),t.find(".delete-result").on("click",function(){return e(this).siblings(".result").remove(),e(this).remove(),n.val("").show(),!1})),t.parents(".form-group").next(".form-group").find("input").focus(),i.insertHandler(s)}),t.on("select.typehelper",function(i,a){var o,s,l,c,d,f;if(t=e(this),n=t.find("input"),r=t.find("ul"),o=r.find("li"),a)switch(a.keyCode){case 9:a.shiftKey||(a.preventDefault(),t.parent(".form-group").next(".form-group").find("input").focus());break;case 38:a.preventDefault(),o.length&&(r.find(".active").length?r.find(".active").removeClass("active").prev("li").addClass("active"):o.last().addClass("active"));break;case 40:a.preventDefault(),o.length&&(r.find(".active").length?r.find(".active").removeClass("active").next("li").addClass("active"):o.first().addClass("active"));break;case 13:if(a.stopPropagation(),a.preventDefault(),r.find(".active").length<=0)return;c=r.find(".active").index(),f=u[c],t.trigger("insert.typehelper",[r.find(".active a"),f]),t.trigger("hide.typehelper");break;case 9:s=e(this).parents("form").find("input"),l=s.index(e("input:focus")),-1!==l&&(d=s.slice(l+1),d.length&&d.each(function(){var t,n;return n=e(this).attr("type"),t=["text","email","password","url"],e(this).val()||-1===t.indexOf(n)?void 0:(e(this).focus(),!1)}));break;case 27:a.preventDefault();break;default:return}}),t.on("search.typehelper",function(){var s,l,c,d;if(t=e(this),n=t.find("input"),r=t.find("ul"),n.val().length)if(c=[],i.remoteData)i.remoteData(n.val(),function(t){u=t,c=t,c.length>0&&(r.children().remove(),e.tmpl(i.tpl,c).appendTo(r),1===c.length&&r.children().first().addClass("active"))});else{for(d=0,i.emailMode&&(i.data=[{name:n.val()}],e.each(o,function(e,t){i.data.push({name:n.val().replace(/@.*$/,"")+"@"+t})})),a=i.data.length,l=0;a>l&&(s=i.data[l],!(0===s.name.toLowerCase().indexOf(n.val().toLowerCase())&&(c.push(s),d++,d>=i.showNum)));)l++;c.length>0&&(r.children().remove(),e.tmpl(i.tpl,c).appendTo(r),(1===c.length||i.emailMode)&&r.children().first().addClass("active"))}}),n.val().length>0&&t.trigger("insert.typehelper",n))}}),function(e){"function"==typeof define&&define.amd?define("jquery-mousewheel",["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var o=t||window.event,s=l.call(arguments,1),c=0,d=0,f=0,p=0,h=0,m=0;if(t=e.event.fix(o),t.type="mousewheel","detail"in o&&(f=-1*o.detail),"wheelDelta"in o&&(f=o.wheelDelta),"wheelDeltaY"in o&&(f=o.wheelDeltaY),"wheelDeltaX"in o&&(d=-1*o.wheelDeltaX),"axis"in o&&o.axis===o.HORIZONTAL_AXIS&&(d=-1*f,f=0),c=0===f?d:f,"deltaY"in o&&(f=-1*o.deltaY,c=f),"deltaX"in o&&(d=o.deltaX,0===f&&(c=-1*d)),0!==f||0!==d){if(1===o.deltaMode){var g=e.data(this,"mousewheel-line-height");c*=g,f*=g,d*=g}else if(2===o.deltaMode){var v=e.data(this,"mousewheel-page-height");c*=v,f*=v,d*=v}if(p=Math.max(Math.abs(f),Math.abs(d)),(!a||a>p)&&(a=p,r(o,p)&&(a/=40)),r(o,p)&&(c/=40,d/=40,f/=40),c=Math[c>=1?"floor":"ceil"](c/a),d=Math[d>=1?"floor":"ceil"](d/a),f=Math[f>=1?"floor":"ceil"](f/a),u.settings.normalizeOffset&&this.getBoundingClientRect){var b=this.getBoundingClientRect();h=t.clientX-b.left,m=t.clientY-b.top}return t.deltaX=d,t.deltaY=f,t.deltaFactor=a,t.offsetX=h,t.offsetY=m,t.deltaMode=0,s.unshift(t,c,d,f),i&&clearTimeout(i),i=setTimeout(n,200),(e.event.dispatch||e.event.handle).apply(this,s)}}function n(){a=null}function r(e,t){return u.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var i,a,o=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(e.event.fixHooks)for(var c=o.length;c;)e.event.fixHooks[o[--c]]=e.event.mouseHooks;var u=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=s.length;n;)this.addEventListener(s[--n],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",u.getLineHeight(this)),e.data(this,"mousewheel-page-height",u.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=s.length;n;)this.removeEventListener(s[--n],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var n=e(t),r=n["offsetParent"in e.fn?"offsetParent":"parent"]();return r.length||(r=e("body")),parseInt(r.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),function(e){"undefined"!=typeof module&&module.exports?module.exports=e:e(jQuery,window,document)}(function(e){!function(t){var n="function"==typeof define&&define.amd,r="undefined"!=typeof module&&module.exports,i="https:"==document.location.protocol?"https:":"http:",a="cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.13/jquery.mousewheel.min.js";n||(r?require("jquery-mousewheel")(e):e.event.special.mousewheel||e("head").append(decodeURI("%3Cscript src="+i+"//"+a+"%3E%3C/script%3E"))),t()}(function(){var t,n="mCustomScrollbar",r="mCS",i=".mCustomScrollbar",a={setTop:0,setLeft:0,axis:"y",scrollbarPosition:"inside",scrollInertia:950,autoDraggerLength:!0,alwaysShowScrollbar:0,snapOffset:0,mouseWheel:{enable:!0,scrollAmount:"auto",axis:"y",deltaFactor:"auto",disableOver:["select","option","keygen","datalist","textarea"]},scrollButtons:{scrollType:"stepless",scrollAmount:"auto"},keyboard:{enable:!0,scrollType:"stepless",scrollAmount:"auto"},contentTouchScroll:25,documentTouchScroll:!0,advanced:{autoScrollOnFocus:"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",updateOnContentResize:!0,updateOnImageLoad:"auto",autoUpdateTimeout:60},theme:"light",callbacks:{onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:!0}},o=0,s={},l=window.attachEvent&&!window.addEventListener?1:0,c=!1,u=["mCSB_dragger_onDrag","mCSB_scrollTools_onDrag","mCS_img_loaded","mCS_disabled","mCS_destroyed","mCS_no_scrollbar","mCS-autoHide","mCS-dir-rtl","mCS_no_scrollbar_y","mCS_no_scrollbar_x","mCS_y_hidden","mCS_x_hidden","mCSB_draggerContainer","mCSB_buttonUp","mCSB_buttonDown","mCSB_buttonLeft","mCSB_buttonRight"],d={init:function(t){var t=e.extend(!0,{},a,t),n=f.call(this);if(t.live){var l=t.liveSelector||this.selector||i,c=e(l);if("off"===t.live)return void h(l);s[l]=setTimeout(function(){c.mCustomScrollbar(t),"once"===t.live&&c.length&&h(l)},500)}else h(l);return t.setWidth=t.set_width?t.set_width:t.setWidth,t.setHeight=t.set_height?t.set_height:t.setHeight,t.axis=t.horizontalScroll?"x":m(t.axis),t.scrollInertia=t.scrollInertia>0&&t.scrollInertia<17?17:t.scrollInertia,"object"!=typeof t.mouseWheel&&1==t.mouseWheel&&(t.mouseWheel={enable:!0,scrollAmount:"auto",axis:"y",preventDefault:!1,deltaFactor:"auto",normalizeDelta:!1,invert:!1}),t.mouseWheel.scrollAmount=t.mouseWheelPixels?t.mouseWheelPixels:t.mouseWheel.scrollAmount,t.mouseWheel.normalizeDelta=t.advanced.normalizeMouseWheelDelta?t.advanced.normalizeMouseWheelDelta:t.mouseWheel.normalizeDelta,t.scrollButtons.scrollType=g(t.scrollButtons.scrollType),p(t),e(n).each(function(){var n=e(this);if(!n.data(r)){n.data(r,{idx:++o,opt:t,scrollRatio:{y:null,x:null},overflowed:null,contentReset:{y:null,x:null},bindEvents:!1,tweenRunning:!1,sequential:{},langDir:n.css("direction"),cbOffsets:null,trigger:null,poll:{size:{o:0,n:0},img:{o:0,n:0},change:{o:0,n:0}}});var i=n.data(r),a=i.opt,s=n.data("mcs-axis"),l=n.data("mcs-scrollbar-position"),c=n.data("mcs-theme");s&&(a.axis=s),l&&(a.scrollbarPosition=l),c&&(a.theme=c,p(a)),v.call(this),i&&a.callbacks.onCreate&&"function"==typeof a.callbacks.onCreate&&a.callbacks.onCreate.call(this),e("#mCSB_"+i.idx+"_container img:not(."+u[2]+")").addClass(u[2]),d.update.call(null,n)}})},update:function(t,n){var i=t||f.call(this);return e(i).each(function(){var t=e(this);if(t.data(r)){var i=t.data(r),a=i.opt,o=e("#mCSB_"+i.idx+"_container"),s=e("#mCSB_"+i.idx),l=[e("#mCSB_"+i.idx+"_dragger_vertical"),e("#mCSB_"+i.idx+"_dragger_horizontal")];if(!o.length)return;i.tweenRunning&&V(t),n&&i&&a.callbacks.onBeforeUpdate&&"function"==typeof a.callbacks.onBeforeUpdate&&a.callbacks.onBeforeUpdate.call(this),t.hasClass(u[3])&&t.removeClass(u[3]),t.hasClass(u[4])&&t.removeClass(u[4]),s.css("max-height","none"),s.height()!==t.height()&&s.css("max-height",t.height()),y.call(this),"y"===a.axis||a.advanced.autoExpandHorizontalScroll||o.css("width",b(o)),i.overflowed=C.call(this),E.call(this),a.autoDraggerLength&&w.call(this),x.call(this),T.call(this);var c=[Math.abs(o[0].offsetTop),Math.abs(o[0].offsetLeft)];"x"!==a.axis&&(i.overflowed[0]?l[0].height()>l[0].parent().height()?S.call(this):(K(t,c[0].toString(),{dir:"y",dur:0,overwrite:"none"}),i.contentReset.y=null):(S.call(this),"y"===a.axis?M.call(this):"yx"===a.axis&&i.overflowed[1]&&K(t,c[1].toString(),{dir:"x",dur:0,overwrite:"none"}))),"y"!==a.axis&&(i.overflowed[1]?l[1].width()>l[1].parent().width()?S.call(this):(K(t,c[1].toString(),{dir:"x",dur:0,overwrite:"none"}),i.contentReset.x=null):(S.call(this),"x"===a.axis?M.call(this):"yx"===a.axis&&i.overflowed[0]&&K(t,c[0].toString(),{dir:"y",dur:0,overwrite:"none"}))),n&&i&&(2===n&&a.callbacks.onImageLoad&&"function"==typeof a.callbacks.onImageLoad?a.callbacks.onImageLoad.call(this):3===n&&a.callbacks.onSelectorChange&&"function"==typeof a.callbacks.onSelectorChange?a.callbacks.onSelectorChange.call(this):a.callbacks.onUpdate&&"function"==typeof a.callbacks.onUpdate&&a.callbacks.onUpdate.call(this)),F.call(this)}})},scrollTo:function(t,n){if("undefined"!=typeof t&&null!=t){var i=f.call(this);return e(i).each(function(){var i=e(this);if(i.data(r)){var a=i.data(r),o=a.opt,s={trigger:"external",scrollInertia:o.scrollInertia,scrollEasing:"mcsEaseInOut",moveDragger:!1,timeout:60,callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},l=e.extend(!0,{},s,n),c=P.call(this,t),u=l.scrollInertia>0&&l.scrollInertia<17?17:l.scrollInertia;c[0]=W.call(this,c[0],"y"),c[1]=W.call(this,c[1],"x"),l.moveDragger&&(c[0]*=a.scrollRatio.y,c[1]*=a.scrollRatio.x),l.dur=ne()?0:u,setTimeout(function(){null!==c[0]&&"undefined"!=typeof c[0]&&"x"!==o.axis&&a.overflowed[0]&&(l.dir="y",l.overwrite="all",K(i,c[0].toString(),l)),null!==c[1]&&"undefined"!=typeof c[1]&&"y"!==o.axis&&a.overflowed[1]&&(l.dir="x",l.overwrite="none",K(i,c[1].toString(),l))},l.timeout)}})}},stop:function(){var t=f.call(this);return e(t).each(function(){var t=e(this);t.data(r)&&V(t)})},disable:function(t){var n=f.call(this);return e(n).each(function(){var n=e(this);if(n.data(r)){n.data(r);F.call(this,"remove"),M.call(this),t&&S.call(this),E.call(this,!0),n.addClass(u[3])}})},destroy:function(){var t=f.call(this);return e(t).each(function(){var i=e(this);if(i.data(r)){var a=i.data(r),o=a.opt,s=e("#mCSB_"+a.idx),l=e("#mCSB_"+a.idx+"_container"),c=e(".mCSB_"+a.idx+"_scrollbar");o.live&&h(o.liveSelector||e(t).selector),F.call(this,"remove"),M.call(this),S.call(this),i.removeData(r),Z(this,"mcs"),c.remove(),l.find("img."+u[2]).removeClass(u[2]),s.replaceWith(l.contents()),i.removeClass(n+" _"+r+"_"+a.idx+" "+u[6]+" "+u[7]+" "+u[5]+" "+u[3]).addClass(u[4])}})}},f=function(){return"object"!=typeof e(this)||e(this).length<1?i:this},p=function(t){var n=["rounded","rounded-dark","rounded-dots","rounded-dots-dark"],r=["rounded-dots","rounded-dots-dark","3d","3d-dark","3d-thick","3d-thick-dark","inset","inset-dark","inset-2","inset-2-dark","inset-3","inset-3-dark"],i=["minimal","minimal-dark"],a=["minimal","minimal-dark"],o=["minimal","minimal-dark"];t.autoDraggerLength=e.inArray(t.theme,n)>-1?!1:t.autoDraggerLength,t.autoExpandScrollbar=e.inArray(t.theme,r)>-1?!1:t.autoExpandScrollbar,t.scrollButtons.enable=e.inArray(t.theme,i)>-1?!1:t.scrollButtons.enable,t.autoHideScrollbar=e.inArray(t.theme,a)>-1?!0:t.autoHideScrollbar,t.scrollbarPosition=e.inArray(t.theme,o)>-1?"outside":t.scrollbarPosition},h=function(e){s[e]&&(clearTimeout(s[e]),Z(s,e))},m=function(e){return"yx"===e||"xy"===e||"auto"===e?"yx":"x"===e||"horizontal"===e?"x":"y"},g=function(e){return"stepped"===e||"pixels"===e||"step"===e||"click"===e?"stepped":"stepless"},v=function(){var t=e(this),i=t.data(r),a=i.opt,o=a.autoExpandScrollbar?" "+u[1]+"_expand":"",s=["<div id='mCSB_"+i.idx+"_scrollbar_vertical' class='mCSB_scrollTools mCSB_"+i.idx+"_scrollbar mCS-"+a.theme+" mCSB_scrollTools_vertical"+o+"'><div class='"+u[12]+"'><div id='mCSB_"+i.idx+"_dragger_vertical' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>","<div id='mCSB_"+i.idx+"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_"+i.idx+"_scrollbar mCS-"+a.theme+" mCSB_scrollTools_horizontal"+o+"'><div class='"+u[12]+"'><div id='mCSB_"+i.idx+"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],l="yx"===a.axis?"mCSB_vertical_horizontal":"x"===a.axis?"mCSB_horizontal":"mCSB_vertical",c="yx"===a.axis?s[0]+s[1]:"x"===a.axis?s[1]:s[0],d="yx"===a.axis?"<div id='mCSB_"+i.idx+"_container_wrapper' class='mCSB_container_wrapper' />":"",f=a.autoHideScrollbar?" "+u[6]:"",p="x"!==a.axis&&"rtl"===i.langDir?" "+u[7]:"";a.setWidth&&t.css("width",a.setWidth),a.setHeight&&t.css("height",a.setHeight),a.setLeft="y"!==a.axis&&"rtl"===i.langDir?"989999px":a.setLeft,t.addClass(n+" _"+r+"_"+i.idx+f+p).wrapInner("<div id='mCSB_"+i.idx+"' class='mCustomScrollBox mCS-"+a.theme+" "+l+"'><div id='mCSB_"+i.idx+"_container' class='mCSB_container' style='position:relative; top:"+a.setTop+"; left:"+a.setLeft+";' dir="+i.langDir+" /></div>");var h=e("#mCSB_"+i.idx),m=e("#mCSB_"+i.idx+"_container");"y"===a.axis||a.advanced.autoExpandHorizontalScroll||m.css("width",b(m)),"outside"===a.scrollbarPosition?("static"===t.css("position")&&t.css("position","relative"),t.css("overflow","visible"),h.addClass("mCSB_outside").after(c)):(h.addClass("mCSB_inside").append(c),m.wrap(d)),_.call(this);var g=[e("#mCSB_"+i.idx+"_dragger_vertical"),e("#mCSB_"+i.idx+"_dragger_horizontal")];g[0].css("min-height",g[0].height()),g[1].css("min-width",g[1].width())},b=function(t){var n=[t[0].scrollWidth,Math.max.apply(Math,t.children().map(function(){return e(this).outerWidth(!0)}).get())],r=t.parent().width();return n[0]>r?n[0]:n[1]>r?n[1]:"100%"},y=function(){var t=e(this),n=t.data(r),i=n.opt,a=e("#mCSB_"+n.idx+"_container");if(i.advanced.autoExpandHorizontalScroll&&"y"!==i.axis){a.css({width:"auto","min-width":0,"overflow-x":"scroll"});var o=Math.ceil(a[0].scrollWidth);3===i.advanced.autoExpandHorizontalScroll||2!==i.advanced.autoExpandHorizontalScroll&&o>a.parent().width()?a.css({width:o,"min-width":"100%","overflow-x":"inherit"}):a.css({"overflow-x":"inherit",position:"absolute"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:Math.ceil(a[0].getBoundingClientRect().right+.4)-Math.floor(a[0].getBoundingClientRect().left),"min-width":"100%",position:"relative"}).unwrap()}},_=function(){var t=e(this),n=t.data(r),i=n.opt,a=e(".mCSB_"+n.idx+"_scrollbar:first"),o=ee(i.scrollButtons.tabindex)?"tabindex='"+i.scrollButtons.tabindex+"'":"",s=["<a href='#' class='"+u[13]+"' oncontextmenu='return false;' "+o+" />","<a href='#' class='"+u[14]+"' oncontextmenu='return false;' "+o+" />","<a href='#' class='"+u[15]+"' oncontextmenu='return false;' "+o+" />","<a href='#' class='"+u[16]+"' oncontextmenu='return false;' "+o+" />"],l=["x"===i.axis?s[2]:s[0],"x"===i.axis?s[3]:s[1],s[2],s[3]];i.scrollButtons.enable&&a.prepend(l[0]).append(l[1]).next(".mCSB_scrollTools").prepend(l[2]).append(l[3])},w=function(){var t=e(this),n=t.data(r),i=e("#mCSB_"+n.idx),a=e("#mCSB_"+n.idx+"_container"),o=[e("#mCSB_"+n.idx+"_dragger_vertical"),e("#mCSB_"+n.idx+"_dragger_horizontal")],s=[i.height()/a.outerHeight(!1),i.width()/a.outerWidth(!1)],c=[parseInt(o[0].css("min-height")),Math.round(s[0]*o[0].parent().height()),parseInt(o[1].css("min-width")),Math.round(s[1]*o[1].parent().width())],u=l&&c[1]<c[0]?c[0]:c[1],d=l&&c[3]<c[2]?c[2]:c[3];o[0].css({height:u,"max-height":o[0].parent().height()-10}).find(".mCSB_dragger_bar").css({"line-height":c[0]+"px"}),o[1].css({width:d,"max-width":o[1].parent().width()-10})},x=function(){var t=e(this),n=t.data(r),i=e("#mCSB_"+n.idx),a=e("#mCSB_"+n.idx+"_container"),o=[e("#mCSB_"+n.idx+"_dragger_vertical"),e("#mCSB_"+n.idx+"_dragger_horizontal")],s=[a.outerHeight(!1)-i.height(),a.outerWidth(!1)-i.width()],l=[s[0]/(o[0].parent().height()-o[0].height()),s[1]/(o[1].parent().width()-o[1].width())];n.scrollRatio={y:l[0],x:l[1]}},k=function(e,t,n){var r=n?u[0]+"_expanded":"",i=e.closest(".mCSB_scrollTools");"active"===t?(e.toggleClass(u[0]+" "+r),i.toggleClass(u[1]),e[0]._draggable=e[0]._draggable?0:1):e[0]._draggable||("hide"===t?(e.removeClass(u[0]),i.removeClass(u[1])):(e.addClass(u[0]),i.addClass(u[1])))},C=function(){var t=e(this),n=t.data(r),i=e("#mCSB_"+n.idx),a=e("#mCSB_"+n.idx+"_container"),o=null==n.overflowed?a.height():a.outerHeight(!1),s=null==n.overflowed?a.width():a.outerWidth(!1),l=a[0].scrollHeight,c=a[0].scrollWidth;return l>o&&(o=l),c>s&&(s=c),[o>i.height(),s>i.width()]},S=function(){var t=e(this),n=t.data(r),i=n.opt,a=e("#mCSB_"+n.idx),o=e("#mCSB_"+n.idx+"_container"),s=[e("#mCSB_"+n.idx+"_dragger_vertical"),e("#mCSB_"+n.idx+"_dragger_horizontal")];if(V(t),("x"!==i.axis&&!n.overflowed[0]||"y"===i.axis&&n.overflowed[0])&&(s[0].add(o).css("top",0),K(t,"_resetY")),"y"!==i.axis&&!n.overflowed[1]||"x"===i.axis&&n.overflowed[1]){var l=dx=0;"rtl"===n.langDir&&(l=a.width()-o.outerWidth(!1),dx=Math.abs(l/n.scrollRatio.x)),o.css("left",l),s[1].css("left",dx),K(t,"_resetX")}},T=function(){function t(){o=setTimeout(function(){e.event.special.mousewheel?(clearTimeout(o),A.call(n[0])):t()},100)}var n=e(this),i=n.data(r),a=i.opt;if(!i.bindEvents){if(I.call(this),a.contentTouchScroll&&$.call(this),N.call(this),a.mouseWheel.enable){var o;t()}z.call(this),j.call(this),a.advanced.autoScrollOnFocus&&D.call(this),a.scrollButtons.enable&&R.call(this),a.keyboard.enable&&q.call(this),i.bindEvents=!0}},M=function(){var t=e(this),n=t.data(r),i=n.opt,a=r+"_"+n.idx,o=".mCSB_"+n.idx+"_scrollbar",s=e("#mCSB_"+n.idx+",#mCSB_"+n.idx+"_container,#mCSB_"+n.idx+"_container_wrapper,"+o+" ."+u[12]+",#mCSB_"+n.idx+"_dragger_vertical,#mCSB_"+n.idx+"_dragger_horizontal,"+o+">a"),l=e("#mCSB_"+n.idx+"_container");i.advanced.releaseDraggableSelectors&&s.add(e(i.advanced.releaseDraggableSelectors)),i.advanced.extraDraggableSelectors&&s.add(e(i.advanced.extraDraggableSelectors)),n.bindEvents&&(e(document).add(e(!B()||top.document)).unbind("."+a),s.each(function(){e(this).unbind("."+a)}),clearTimeout(t[0]._focusTimeout),Z(t[0],"_focusTimeout"),clearTimeout(n.sequential.step),Z(n.sequential,"step"),clearTimeout(l[0].onCompleteTimeout),Z(l[0],"onCompleteTimeout"),n.bindEvents=!1)},E=function(t){var n=e(this),i=n.data(r),a=i.opt,o=e("#mCSB_"+i.idx+"_container_wrapper"),s=o.length?o:e("#mCSB_"+i.idx+"_container"),l=[e("#mCSB_"+i.idx+"_scrollbar_vertical"),e("#mCSB_"+i.idx+"_scrollbar_horizontal")],c=[l[0].find(".mCSB_dragger"),l[1].find(".mCSB_dragger")];"x"!==a.axis&&(i.overflowed[0]&&!t?(l[0].add(c[0]).add(l[0].children("a")).css("display","block"),s.removeClass(u[8]+" "+u[10])):(a.alwaysShowScrollbar?(2!==a.alwaysShowScrollbar&&c[0].css("display","none"),s.removeClass(u[10])):(l[0].css("display","none"),s.addClass(u[10])),s.addClass(u[8]))),"y"!==a.axis&&(i.overflowed[1]&&!t?(l[1].add(c[1]).add(l[1].children("a")).css("display","block"),s.removeClass(u[9]+" "+u[11])):(a.alwaysShowScrollbar?(2!==a.alwaysShowScrollbar&&c[1].css("display","none"),s.removeClass(u[11])):(l[1].css("display","none"),s.addClass(u[11])),s.addClass(u[9]))),i.overflowed[0]||i.overflowed[1]?n.removeClass(u[5]):n.addClass(u[5])},L=function(t){var n=t.type,r=t.target.ownerDocument!==document?[e(frameElement).offset().top,e(frameElement).offset().left]:null,i=B()&&t.target.ownerDocument!==top.document?[e(t.view.frameElement).offset().top,e(t.view.frameElement).offset().left]:[0,0];switch(n){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return r?[t.originalEvent.pageY-r[0]+i[0],t.originalEvent.pageX-r[1]+i[1],!1]:[t.originalEvent.pageY,t.originalEvent.pageX,!1];case"touchstart":case"touchmove":case"touchend":var a=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],o=t.originalEvent.touches.length||t.originalEvent.changedTouches.length;return t.target.ownerDocument!==document?[a.screenY,a.screenX,o>1]:[a.pageY,a.pageX,o>1];default:return r?[t.pageY-r[0]+i[0],t.pageX-r[1]+i[1],!1]:[t.pageY,t.pageX,!1]}},I=function(){function t(e){var t=h.find("iframe");if(t.length){var n=e?"auto":"none";t.css("pointer-events",n)}}function n(e,t,n,r){if(h[0].idleTimer=d.scrollInertia<233?250:0,i.attr("id")===p[1])var a="x",o=(i[0].offsetLeft-t+r)*u.scrollRatio.x;else var a="y",o=(i[0].offsetTop-e+n)*u.scrollRatio.y;K(s,o.toString(),{dir:a,drag:!0})}var i,a,o,s=e(this),u=s.data(r),d=u.opt,f=r+"_"+u.idx,p=["mCSB_"+u.idx+"_dragger_vertical","mCSB_"+u.idx+"_dragger_horizontal"],h=e("#mCSB_"+u.idx+"_container"),m=e("#"+p[0]+",#"+p[1]),g=d.advanced.releaseDraggableSelectors?m.add(e(d.advanced.releaseDraggableSelectors)):m,v=d.advanced.extraDraggableSelectors?e(!B()||top.document).add(e(d.advanced.extraDraggableSelectors)):e(!B()||top.document);m.bind("mousedown."+f+" touchstart."+f+" pointerdown."+f+" MSPointerDown."+f,function(n){if(n.stopImmediatePropagation(),n.preventDefault(),Q(n)){c=!0,l&&(document.onselectstart=function(){return!1}),t(!1),V(s),i=e(this);var r=i.offset(),u=L(n)[0]-r.top,f=L(n)[1]-r.left,p=i.height()+r.top,h=i.width()+r.left;p>u&&u>0&&h>f&&f>0&&(a=u,o=f),k(i,"active",d.autoExpandScrollbar)}}).bind("touchmove."+f,function(e){e.stopImmediatePropagation(),e.preventDefault();var t=i.offset(),r=L(e)[0]-t.top,s=L(e)[1]-t.left;n(a,o,r,s)}),e(document).add(v).bind("mousemove."+f+" pointermove."+f+" MSPointerMove."+f,function(e){if(i){var t=i.offset(),r=L(e)[0]-t.top,s=L(e)[1]-t.left;if(a===r&&o===s)return;n(a,o,r,s)}}).add(g).bind("mouseup."+f+" touchend."+f+" pointerup."+f+" MSPointerUp."+f,function(e){i&&(k(i,"active",d.autoExpandScrollbar),i=null),c=!1,l&&(document.onselectstart=null),t(!0)})},$=function(){function n(e){if(!J(e)||c||L(e)[2])return void(t=0);t=1,x=0,k=0,u=1,C.removeClass("mCS_touch_action");var n=I.offset();d=L(e)[0]-n.top,f=L(e)[1]-n.left,D=[L(e)[0],L(e)[1]]}function i(e){if(J(e)&&!c&&!L(e)[2]&&(T.documentTouchScroll||e.preventDefault(),e.stopImmediatePropagation(),(!k||x)&&u)){g=G();var t=E.offset(),n=L(e)[0]-t.top,r=L(e)[1]-t.left,i="mcsLinearOut";if(N.push(n),A.push(r),D[2]=Math.abs(L(e)[0]-D[0]),D[3]=Math.abs(L(e)[1]-D[1]),S.overflowed[0])var a=$[0].parent().height()-$[0].height(),o=d-n>0&&n-d>-(a*S.scrollRatio.y)&&(2*D[3]<D[2]||"yx"===T.axis);if(S.overflowed[1])var s=$[1].parent().width()-$[1].width(),p=f-r>0&&r-f>-(s*S.scrollRatio.x)&&(2*D[2]<D[3]||"yx"===T.axis);o||p?(q||e.preventDefault(),x=1):(k=1,C.addClass("mCS_touch_action")),q&&e.preventDefault(),_="yx"===T.axis?[d-n,f-r]:"x"===T.axis?[null,f-r]:[d-n,null],I[0].idleTimer=250,S.overflowed[0]&&l(_[0],O,i,"y","all",!0),S.overflowed[1]&&l(_[1],O,i,"x",z,!0)}}function a(e){if(!J(e)||c||L(e)[2])return void(t=0);t=1,e.stopImmediatePropagation(),V(C),m=G();var n=E.offset();p=L(e)[0]-n.top,h=L(e)[1]-n.left,N=[],A=[]}function o(e){if(J(e)&&!c&&!L(e)[2]){u=0,e.stopImmediatePropagation(),x=0,k=0,v=G();var t=E.offset(),n=L(e)[0]-t.top,r=L(e)[1]-t.left;if(!(v-g>30)){y=1e3/(v-m);var i="mcsEaseOut",a=2.5>y,o=a?[N[N.length-2],A[A.length-2]]:[0,0];b=a?[n-o[0],r-o[1]]:[n-p,r-h];var d=[Math.abs(b[0]),Math.abs(b[1])];y=a?[Math.abs(b[0]/4),Math.abs(b[1]/4)]:[y,y];var f=[Math.abs(I[0].offsetTop)-b[0]*s(d[0]/y[0],y[0]),Math.abs(I[0].offsetLeft)-b[1]*s(d[1]/y[1],y[1])];_="yx"===T.axis?[f[0],f[1]]:"x"===T.axis?[null,f[1]]:[f[0],null],w=[4*d[0]+T.scrollInertia,4*d[1]+T.scrollInertia];var C=parseInt(T.contentTouchScroll)||0;_[0]=d[0]>C?_[0]:0,_[1]=d[1]>C?_[1]:0,S.overflowed[0]&&l(_[0],w[0],i,"y",z,!1),S.overflowed[1]&&l(_[1],w[1],i,"x",z,!1)}}}function s(e,t){var n=[1.5*t,2*t,t/1.5,t/2];return e>90?t>4?n[0]:n[3]:e>60?t>3?n[3]:n[2]:e>30?t>8?n[1]:t>6?n[0]:t>4?t:n[2]:t>8?t:n[3]}function l(e,t,n,r,i,a){e&&K(C,e.toString(),{dur:t,scrollEasing:n,dir:r,overwrite:i,drag:a})}var u,d,f,p,h,m,g,v,b,y,_,w,x,k,C=e(this),S=C.data(r),T=S.opt,M=r+"_"+S.idx,E=e("#mCSB_"+S.idx),I=e("#mCSB_"+S.idx+"_container"),$=[e("#mCSB_"+S.idx+"_dragger_vertical"),e("#mCSB_"+S.idx+"_dragger_horizontal")],N=[],A=[],O=0,z="yx"===T.axis?"none":"all",D=[],j=I.find("iframe"),R=["touchstart."+M+" pointerdown."+M+" MSPointerDown."+M,"touchmove."+M+" pointermove."+M+" MSPointerMove."+M,"touchend."+M+" pointerup."+M+" MSPointerUp."+M],q=void 0!==document.body.style.touchAction;I.bind(R[0],function(e){n(e)}).bind(R[1],function(e){i(e)}),E.bind(R[0],function(e){a(e)}).bind(R[2],function(e){o(e)}),j.length&&j.each(function(){e(this).load(function(){B(this)&&e(this.contentDocument||this.contentWindow.document).bind(R[0],function(e){n(e),a(e)}).bind(R[1],function(e){i(e)}).bind(R[2],function(e){o(e)})})})},N=function(){function n(){return window.getSelection?window.getSelection().toString():document.selection&&"Control"!=document.selection.type?document.selection.createRange().text:0}function i(e,t,n){u.type=n&&a?"stepped":"stepless",u.scrollAmount=10,H(o,e,t,"mcsLinearOut",n?60:null)}var a,o=e(this),s=o.data(r),l=s.opt,u=s.sequential,d=r+"_"+s.idx,f=e("#mCSB_"+s.idx+"_container"),p=f.parent();f.bind("mousedown."+d,function(e){t||a||(a=1,c=!0)}).add(document).bind("mousemove."+d,function(e){if(!t&&a&&n()){var r=f.offset(),o=L(e)[0]-r.top+f[0].offsetTop,c=L(e)[1]-r.left+f[0].offsetLeft;o>0&&o<p.height()&&c>0&&c<p.width()?u.step&&i("off",null,"stepped"):("x"!==l.axis&&s.overflowed[0]&&(0>o?i("on",38):o>p.height()&&i("on",40)),"y"!==l.axis&&s.overflowed[1]&&(0>c?i("on",37):c>p.width()&&i("on",39)))}}).bind("mouseup."+d+" dragend."+d,function(e){t||(a&&(a=0,i("off",null)),c=!1)})},A=function(){function t(t,r){if(V(n),!O(n,t.target)){var o="auto"!==a.mouseWheel.deltaFactor?parseInt(a.mouseWheel.deltaFactor):l&&t.deltaFactor<100?100:t.deltaFactor||100,u=a.scrollInertia;if("x"===a.axis||"x"===a.mouseWheel.axis)var d="x",f=[Math.round(o*i.scrollRatio.x),parseInt(a.mouseWheel.scrollAmount)],p="auto"!==a.mouseWheel.scrollAmount?f[1]:f[0]>=s.width()?.9*s.width():f[0],h=Math.abs(e("#mCSB_"+i.idx+"_container")[0].offsetLeft),m=c[1][0].offsetLeft,g=c[1].parent().width()-c[1].width(),v=t.deltaX||t.deltaY||r;else var d="y",f=[Math.round(o*i.scrollRatio.y),parseInt(a.mouseWheel.scrollAmount)],p="auto"!==a.mouseWheel.scrollAmount?f[1]:f[0]>=s.height()?.9*s.height():f[0],h=Math.abs(e("#mCSB_"+i.idx+"_container")[0].offsetTop),m=c[0][0].offsetTop,g=c[0].parent().height()-c[0].height(),v=t.deltaY||r;"y"===d&&!i.overflowed[0]||"x"===d&&!i.overflowed[1]||((a.mouseWheel.invert||t.webkitDirectionInvertedFromDevice)&&(v=-v),a.mouseWheel.normalizeDelta&&(v=0>v?-1:1),(v>0&&0!==m||0>v&&m!==g||a.mouseWheel.preventDefault)&&(t.stopImmediatePropagation(),t.preventDefault()),t.deltaFactor<2&&!a.mouseWheel.normalizeDelta&&(p=t.deltaFactor,u=17),K(n,(h-v*p).toString(),{dir:d,dur:u}))}}if(e(this).data(r)){var n=e(this),i=n.data(r),a=i.opt,o=r+"_"+i.idx,s=e("#mCSB_"+i.idx),c=[e("#mCSB_"+i.idx+"_dragger_vertical"),e("#mCSB_"+i.idx+"_dragger_horizontal")],u=e("#mCSB_"+i.idx+"_container").find("iframe");u.length&&u.each(function(){e(this).load(function(){B(this)&&e(this.contentDocument||this.contentWindow.document).bind("mousewheel."+o,function(e,n){t(e,n)})})}),s.bind("mousewheel."+o,function(e,n){t(e,n)})}},B=function(e){var t=null;if(e){try{var n=e.contentDocument||e.contentWindow.document;t=n.body.innerHTML}catch(r){}return null!==t}try{var n=top.document;t=n.body.innerHTML}catch(r){}return null!==t},O=function(t,n){var i=n.nodeName.toLowerCase(),a=t.data(r).opt.mouseWheel.disableOver,o=["select","textarea"];return e.inArray(i,a)>-1&&!(e.inArray(i,o)>-1&&!e(n).is(":focus"))},z=function(){var t,n=e(this),i=n.data(r),a=r+"_"+i.idx,o=e("#mCSB_"+i.idx+"_container"),s=o.parent(),l=e(".mCSB_"+i.idx+"_scrollbar ."+u[12]);l.bind("mousedown."+a+" touchstart."+a+" pointerdown."+a+" MSPointerDown."+a,function(n){c=!0,e(n.target).hasClass("mCSB_dragger")||(t=1)}).bind("touchend."+a+" pointerup."+a+" MSPointerUp."+a,function(e){c=!1}).bind("click."+a,function(r){if(t&&(t=0,e(r.target).hasClass(u[12])||e(r.target).hasClass("mCSB_draggerRail"))){V(n);var a=e(this),l=a.find(".mCSB_dragger");if(a.parent(".mCSB_scrollTools_horizontal").length>0){if(!i.overflowed[1])return;var c="x",d=r.pageX>l.offset().left?-1:1,f=Math.abs(o[0].offsetLeft)-d*(.9*s.width())}else{if(!i.overflowed[0])return;var c="y",d=r.pageY>l.offset().top?-1:1,f=Math.abs(o[0].offsetTop)-d*(.9*s.height())}K(n,f.toString(),{dir:c,scrollEasing:"mcsEaseInOut"})}})},D=function(){var t=e(this),n=t.data(r),i=n.opt,a=r+"_"+n.idx,o=e("#mCSB_"+n.idx+"_container"),s=o.parent();o.bind("focusin."+a,function(n){var r=e(document.activeElement),a=o.find(".mCustomScrollBox").length,l=0;r.is(i.advanced.autoScrollOnFocus)&&(V(t),clearTimeout(t[0]._focusTimeout),t[0]._focusTimer=a?(l+17)*a:0,t[0]._focusTimeout=setTimeout(function(){var e=[te(r)[0],te(r)[1]],n=[o[0].offsetTop,o[0].offsetLeft],a=[n[0]+e[0]>=0&&n[0]+e[0]<s.height()-r.outerHeight(!1),n[1]+e[1]>=0&&n[0]+e[1]<s.width()-r.outerWidth(!1)],c="yx"!==i.axis||a[0]||a[1]?"all":"none";"x"===i.axis||a[0]||K(t,e[0].toString(),{dir:"y",scrollEasing:"mcsEaseInOut",overwrite:c,dur:l}),"y"===i.axis||a[1]||K(t,e[1].toString(),{dir:"x",scrollEasing:"mcsEaseInOut",overwrite:c,dur:l})},t[0]._focusTimer))})},j=function(){var t=e(this),n=t.data(r),i=r+"_"+n.idx,a=e("#mCSB_"+n.idx+"_container").parent();a.bind("scroll."+i,function(t){(0!==a.scrollTop()||0!==a.scrollLeft())&&e(".mCSB_"+n.idx+"_scrollbar").css("visibility","hidden")})},R=function(){var t=e(this),n=t.data(r),i=n.opt,a=n.sequential,o=r+"_"+n.idx,s=".mCSB_"+n.idx+"_scrollbar",l=e(s+">a");l.bind("mousedown."+o+" touchstart."+o+" pointerdown."+o+" MSPointerDown."+o+" mouseup."+o+" touchend."+o+" pointerup."+o+" MSPointerUp."+o+" mouseout."+o+" pointerout."+o+" MSPointerOut."+o+" click."+o,function(r){
function o(e,n){a.scrollAmount=i.scrollButtons.scrollAmount,H(t,e,n)}if(r.preventDefault(),Q(r)){var s=e(this).attr("class");switch(a.type=i.scrollButtons.scrollType,r.type){case"mousedown":case"touchstart":case"pointerdown":case"MSPointerDown":if("stepped"===a.type)return;c=!0,n.tweenRunning=!1,o("on",s);break;case"mouseup":case"touchend":case"pointerup":case"MSPointerUp":case"mouseout":case"pointerout":case"MSPointerOut":if("stepped"===a.type)return;c=!1,a.dir&&o("off",s);break;case"click":if("stepped"!==a.type||n.tweenRunning)return;o("on",s)}}})},q=function(){function t(t){function r(e,t){o.type=a.keyboard.scrollType,o.scrollAmount=a.keyboard.scrollAmount,"stepped"===o.type&&i.tweenRunning||H(n,e,t)}switch(t.type){case"blur":i.tweenRunning&&o.dir&&r("off",null);break;case"keydown":case"keyup":var s=t.keyCode?t.keyCode:t.which,l="on";if("x"!==a.axis&&(38===s||40===s)||"y"!==a.axis&&(37===s||39===s)){if((38===s||40===s)&&!i.overflowed[0]||(37===s||39===s)&&!i.overflowed[1])return;"keyup"===t.type&&(l="off"),e(document.activeElement).is(d)||(t.preventDefault(),t.stopImmediatePropagation(),r(l,s))}else if(33===s||34===s){if((i.overflowed[0]||i.overflowed[1])&&(t.preventDefault(),t.stopImmediatePropagation()),"keyup"===t.type){V(n);var f=34===s?-1:1;if("x"===a.axis||"yx"===a.axis&&i.overflowed[1]&&!i.overflowed[0])var p="x",h=Math.abs(c[0].offsetLeft)-f*(.9*u.width());else var p="y",h=Math.abs(c[0].offsetTop)-f*(.9*u.height());K(n,h.toString(),{dir:p,scrollEasing:"mcsEaseInOut"})}}else if((35===s||36===s)&&!e(document.activeElement).is(d)&&((i.overflowed[0]||i.overflowed[1])&&(t.preventDefault(),t.stopImmediatePropagation()),"keyup"===t.type)){if("x"===a.axis||"yx"===a.axis&&i.overflowed[1]&&!i.overflowed[0])var p="x",h=35===s?Math.abs(u.width()-c.outerWidth(!1)):0;else var p="y",h=35===s?Math.abs(u.height()-c.outerHeight(!1)):0;K(n,h.toString(),{dir:p,scrollEasing:"mcsEaseInOut"})}}}var n=e(this),i=n.data(r),a=i.opt,o=i.sequential,s=r+"_"+i.idx,l=e("#mCSB_"+i.idx),c=e("#mCSB_"+i.idx+"_container"),u=c.parent(),d="input,textarea,select,datalist,keygen,[contenteditable='true']",f=c.find("iframe"),p=["blur."+s+" keydown."+s+" keyup."+s];f.length&&f.each(function(){e(this).load(function(){B(this)&&e(this.contentDocument||this.contentWindow.document).bind(p[0],function(e){t(e)})})}),l.attr("tabindex","0").bind(p[0],function(e){t(e)})},H=function(t,n,i,a,o){function s(e){d.snapAmount&&(f.scrollAmount=d.snapAmount instanceof Array?"x"===f.dir[0]?d.snapAmount[1]:d.snapAmount[0]:d.snapAmount);var n="stepped"!==f.type,r=o?o:e?n?m/1.5:g:1e3/60,i=e?n?7.5:40:2.5,l=[Math.abs(p[0].offsetTop),Math.abs(p[0].offsetLeft)],u=[c.scrollRatio.y>10?10:c.scrollRatio.y,c.scrollRatio.x>10?10:c.scrollRatio.x],h="x"===f.dir[0]?l[1]+f.dir[1]*(u[1]*i):l[0]+f.dir[1]*(u[0]*i),v="x"===f.dir[0]?l[1]+f.dir[1]*parseInt(f.scrollAmount):l[0]+f.dir[1]*parseInt(f.scrollAmount),b="auto"!==f.scrollAmount?v:h,y=a?a:e?n?"mcsLinearOut":"mcsEaseInOut":"mcsLinear",_=e?!0:!1;return e&&17>r&&(b="x"===f.dir[0]?l[1]:l[0]),K(t,b.toString(),{dir:f.dir[0],scrollEasing:y,dur:r,onComplete:_}),e?void(f.dir=!1):(clearTimeout(f.step),void(f.step=setTimeout(function(){s()},r)))}function l(){clearTimeout(f.step),Z(f,"step"),V(t)}var c=t.data(r),d=c.opt,f=c.sequential,p=e("#mCSB_"+c.idx+"_container"),h="stepped"===f.type?!0:!1,m=d.scrollInertia<26?26:d.scrollInertia,g=d.scrollInertia<1?17:d.scrollInertia;switch(n){case"on":if(f.dir=[i===u[16]||i===u[15]||39===i||37===i?"x":"y",i===u[13]||i===u[15]||38===i||37===i?-1:1],V(t),ee(i)&&"stepped"===f.type)return;s(h);break;case"off":l(),(h||c.tweenRunning&&f.dir)&&s(!0)}},P=function(t){var n=e(this).data(r).opt,i=[];return"function"==typeof t&&(t=t()),t instanceof Array?i=t.length>1?[t[0],t[1]]:"x"===n.axis?[null,t[0]]:[t[0],null]:(i[0]=t.y?t.y:t.x||"x"===n.axis?null:t,i[1]=t.x?t.x:t.y||"y"===n.axis?null:t),"function"==typeof i[0]&&(i[0]=i[0]()),"function"==typeof i[1]&&(i[1]=i[1]()),i},W=function(t,n){if(null!=t&&"undefined"!=typeof t){var i=e(this),a=i.data(r),o=a.opt,s=e("#mCSB_"+a.idx+"_container"),l=s.parent(),c=typeof t;n||(n="x"===o.axis?"x":"y");var u="x"===n?s.outerWidth(!1):s.outerHeight(!1),f="x"===n?s[0].offsetLeft:s[0].offsetTop,p="x"===n?"left":"top";switch(c){case"function":return t();case"object":var h=t.jquery?t:e(t);if(!h.length)return;return"x"===n?te(h)[1]:te(h)[0];case"string":case"number":if(ee(t))return Math.abs(t);if(-1!==t.indexOf("%"))return Math.abs(u*parseInt(t)/100);if(-1!==t.indexOf("-="))return Math.abs(f-parseInt(t.split("-=")[1]));if(-1!==t.indexOf("+=")){var m=f+parseInt(t.split("+=")[1]);return m>=0?0:Math.abs(m)}if(-1!==t.indexOf("px")&&ee(t.split("px")[0]))return Math.abs(t.split("px")[0]);if("top"===t||"left"===t)return 0;if("bottom"===t)return Math.abs(l.height()-s.outerHeight(!1));if("right"===t)return Math.abs(l.width()-s.outerWidth(!1));if("first"===t||"last"===t){var h=s.find(":"+t);return"x"===n?te(h)[1]:te(h)[0]}return e(t).length?"x"===n?te(e(t))[1]:te(e(t))[0]:(s.css(p,t),void d.update.call(null,i[0]))}}},F=function(t){function n(){return clearTimeout(f[0].autoUpdate),0===s.parents("html").length?void(s=null):void(f[0].autoUpdate=setTimeout(function(){return c.advanced.updateOnSelectorChange&&(l.poll.change.n=a(),l.poll.change.n!==l.poll.change.o)?(l.poll.change.o=l.poll.change.n,void o(3)):c.advanced.updateOnContentResize&&(l.poll.size.n=s[0].scrollHeight+s[0].scrollWidth+f[0].offsetHeight+s[0].offsetHeight+s[0].offsetWidth,l.poll.size.n!==l.poll.size.o)?(l.poll.size.o=l.poll.size.n,void o(1)):!c.advanced.updateOnImageLoad||"auto"===c.advanced.updateOnImageLoad&&"y"===c.axis||(l.poll.img.n=f.find("img").length,l.poll.img.n===l.poll.img.o)?void((c.advanced.updateOnSelectorChange||c.advanced.updateOnContentResize||c.advanced.updateOnImageLoad)&&n()):(l.poll.img.o=l.poll.img.n,void f.find("img").each(function(){i(this)}))},c.advanced.autoUpdateTimeout))}function i(t){function n(e,t){return function(){return t.apply(e,arguments)}}function r(){this.onload=null,e(t).addClass(u[2]),o(2)}if(e(t).hasClass(u[2]))return void o();var i=new Image;i.onload=n(i,r),i.src=t.src}function a(){c.advanced.updateOnSelectorChange===!0&&(c.advanced.updateOnSelectorChange="*");var e=0,t=f.find(c.advanced.updateOnSelectorChange);return c.advanced.updateOnSelectorChange&&t.length>0&&t.each(function(){e+=this.offsetHeight+this.offsetWidth}),e}function o(e){clearTimeout(f[0].autoUpdate),d.update.call(null,s[0],e)}var s=e(this),l=s.data(r),c=l.opt,f=e("#mCSB_"+l.idx+"_container");return t?(clearTimeout(f[0].autoUpdate),void Z(f[0],"autoUpdate")):void n()},U=function(e,t,n){return Math.round(e/t)*t-n},V=function(t){var n=t.data(r),i=e("#mCSB_"+n.idx+"_container,#mCSB_"+n.idx+"_container_wrapper,#mCSB_"+n.idx+"_dragger_vertical,#mCSB_"+n.idx+"_dragger_horizontal");i.each(function(){Y.call(this)})},K=function(t,n,i){function a(e){return l&&c.callbacks[e]&&"function"==typeof c.callbacks[e]}function o(){return[c.callbacks.alwaysTriggerOffsets||_>=w[0]+C,c.callbacks.alwaysTriggerOffsets||-S>=_]}function s(){var e=[p[0].offsetTop,p[0].offsetLeft],n=[b[0].offsetTop,b[0].offsetLeft],r=[p.outerHeight(!1),p.outerWidth(!1)],a=[f.height(),f.width()];t[0].mcs={content:p,top:e[0],left:e[1],draggerTop:n[0],draggerLeft:n[1],topPct:Math.round(100*Math.abs(e[0])/(Math.abs(r[0])-a[0])),leftPct:Math.round(100*Math.abs(e[1])/(Math.abs(r[1])-a[1])),direction:i.dir}}var l=t.data(r),c=l.opt,u={trigger:"internal",dir:"y",scrollEasing:"mcsEaseOut",drag:!1,dur:c.scrollInertia,overwrite:"all",callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},i=e.extend(u,i),d=[i.dur,i.drag?0:i.dur],f=e("#mCSB_"+l.idx),p=e("#mCSB_"+l.idx+"_container"),h=p.parent(),m=c.callbacks.onTotalScrollOffset?P.call(t,c.callbacks.onTotalScrollOffset):[0,0],g=c.callbacks.onTotalScrollBackOffset?P.call(t,c.callbacks.onTotalScrollBackOffset):[0,0];if(l.trigger=i.trigger,(0!==h.scrollTop()||0!==h.scrollLeft())&&(e(".mCSB_"+l.idx+"_scrollbar").css("visibility","visible"),h.scrollTop(0).scrollLeft(0)),"_resetY"!==n||l.contentReset.y||(a("onOverflowYNone")&&c.callbacks.onOverflowYNone.call(t[0]),l.contentReset.y=1),"_resetX"!==n||l.contentReset.x||(a("onOverflowXNone")&&c.callbacks.onOverflowXNone.call(t[0]),l.contentReset.x=1),"_resetY"!==n&&"_resetX"!==n){if(!l.contentReset.y&&t[0].mcs||!l.overflowed[0]||(a("onOverflowY")&&c.callbacks.onOverflowY.call(t[0]),l.contentReset.x=null),!l.contentReset.x&&t[0].mcs||!l.overflowed[1]||(a("onOverflowX")&&c.callbacks.onOverflowX.call(t[0]),l.contentReset.x=null),c.snapAmount){var v=c.snapAmount instanceof Array?"x"===i.dir?c.snapAmount[1]:c.snapAmount[0]:c.snapAmount;n=U(n,v,c.snapOffset)}switch(i.dir){case"x":var b=e("#mCSB_"+l.idx+"_dragger_horizontal"),y="left",_=p[0].offsetLeft,w=[f.width()-p.outerWidth(!1),b.parent().width()-b.width()],x=[n,0===n?0:n/l.scrollRatio.x],C=m[1],S=g[1],T=C>0?C/l.scrollRatio.x:0,M=S>0?S/l.scrollRatio.x:0;break;case"y":var b=e("#mCSB_"+l.idx+"_dragger_vertical"),y="top",_=p[0].offsetTop,w=[f.height()-p.outerHeight(!1),b.parent().height()-b.height()],x=[n,0===n?0:n/l.scrollRatio.y],C=m[0],S=g[0],T=C>0?C/l.scrollRatio.y:0,M=S>0?S/l.scrollRatio.y:0}x[1]<0||0===x[0]&&0===x[1]?x=[0,0]:x[1]>=w[1]?x=[w[0],w[1]]:x[0]=-x[0],t[0].mcs||(s(),a("onInit")&&c.callbacks.onInit.call(t[0])),clearTimeout(p[0].onCompleteTimeout),X(b[0],y,Math.round(x[1]),d[1],i.scrollEasing),(l.tweenRunning||!(0===_&&x[0]>=0||_===w[0]&&x[0]<=w[0]))&&X(p[0],y,Math.round(x[0]),d[0],i.scrollEasing,i.overwrite,{onStart:function(){i.callbacks&&i.onStart&&!l.tweenRunning&&(a("onScrollStart")&&(s(),c.callbacks.onScrollStart.call(t[0])),l.tweenRunning=!0,k(b),l.cbOffsets=o())},onUpdate:function(){i.callbacks&&i.onUpdate&&a("whileScrolling")&&(s(),c.callbacks.whileScrolling.call(t[0]))},onComplete:function(){if(i.callbacks&&i.onComplete){"yx"===c.axis&&clearTimeout(p[0].onCompleteTimeout);var e=p[0].idleTimer||0;p[0].onCompleteTimeout=setTimeout(function(){a("onScroll")&&(s(),c.callbacks.onScroll.call(t[0])),a("onTotalScroll")&&x[1]>=w[1]-T&&l.cbOffsets[0]&&(s(),c.callbacks.onTotalScroll.call(t[0])),a("onTotalScrollBack")&&x[1]<=M&&l.cbOffsets[1]&&(s(),c.callbacks.onTotalScrollBack.call(t[0])),l.tweenRunning=!1,p[0].idleTimer=0,k(b,"hide")},e)}}})}},X=function(e,t,n,r,i,a,o){function s(){w.stop||(b||h.call(),b=G()-v,l(),b>=w.time&&(w.time=b>w.time?b+f-(b-w.time):b+f-1,w.time<b+1&&(w.time=b+1)),w.time<r?w.id=p(s):g.call())}function l(){r>0?(w.currVal=d(w.time,y,x,r,i),_[t]=Math.round(w.currVal)+"px"):_[t]=n+"px",m.call()}function c(){f=1e3/60,w.time=b+f,p=window.requestAnimationFrame?window.requestAnimationFrame:function(e){return l(),setTimeout(e,.01)},w.id=p(s)}function u(){null!=w.id&&(window.requestAnimationFrame?window.cancelAnimationFrame(w.id):clearTimeout(w.id),w.id=null)}function d(e,t,n,r,i){switch(i){case"linear":case"mcsLinear":return n*e/r+t;case"mcsLinearOut":return e/=r,e--,n*Math.sqrt(1-e*e)+t;case"easeInOutSmooth":return e/=r/2,1>e?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t);case"easeInOutStrong":return e/=r/2,1>e?n/2*Math.pow(2,10*(e-1))+t:(e--,n/2*(-Math.pow(2,-10*e)+2)+t);case"easeInOut":case"mcsEaseInOut":return e/=r/2,1>e?n/2*e*e*e+t:(e-=2,n/2*(e*e*e+2)+t);case"easeOutSmooth":return e/=r,e--,-n*(e*e*e*e-1)+t;case"easeOutStrong":return n*(-Math.pow(2,-10*e/r)+1)+t;case"easeOut":case"mcsEaseOut":default:var a=(e/=r)*e,o=a*e;return t+n*(.499999999999997*o*a+-2.5*a*a+5.5*o+-6.5*a+4*e)}}e._mTween||(e._mTween={top:{},left:{}});var f,p,o=o||{},h=o.onStart||function(){},m=o.onUpdate||function(){},g=o.onComplete||function(){},v=G(),b=0,y=e.offsetTop,_=e.style,w=e._mTween[t];"left"===t&&(y=e.offsetLeft);var x=n-y;w.stop=0,"none"!==a&&u(),c()},G=function(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()},Y=function(){var e=this;e._mTween||(e._mTween={top:{},left:{}});for(var t=["top","left"],n=0;n<t.length;n++){var r=t[n];e._mTween[r].id&&(window.requestAnimationFrame?window.cancelAnimationFrame(e._mTween[r].id):clearTimeout(e._mTween[r].id),e._mTween[r].id=null,e._mTween[r].stop=1)}},Z=function(e,t){try{delete e[t]}catch(n){e[t]=null}},Q=function(e){return!(e.which&&1!==e.which)},J=function(e){var t=e.originalEvent.pointerType;return!(t&&"touch"!==t&&2!==t)},ee=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},te=function(e){var t=e.parents(".mCSB_container");return[e.offset().top-t.offset().top,e.offset().left-t.offset().left]},ne=function(){function e(){var e=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var t=0;t<e.length;t++)if(e[t]+"Hidden"in document)return e[t]+"Hidden";return null}var t=e();return t?document[t]:!1};e.fn[n]=function(t){return d[t]?d[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist"):d.init.apply(this,arguments)},e[n]=function(t){return d[t]?d[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist"):d.init.apply(this,arguments)},e[n].defaults=a,window[n]=!0,e(window).load(function(){e(i)[n](),e.extend(e.expr[":"],{mcsInView:e.expr[":"].mcsInView||function(t){var n,r,i=e(t),a=i.parents(".mCSB_container");if(a.length)return n=a.parent(),r=[a[0].offsetTop,a[0].offsetLeft],r[0]+te(i)[0]>=0&&r[0]+te(i)[0]<n.height()-i.outerHeight(!1)&&r[1]+te(i)[1]>=0&&r[1]+te(i)[1]<n.width()-i.outerWidth(!1)},mcsOverflow:e.expr[":"].mcsOverflow||function(t){var n=e(t).data(r);if(n)return n.overflowed[0]||n.overflowed[1]}})})})}),define("mCustomScrollbar",function(){}),define("main",["jquery","sfModal","mobile","jquery_hoverIntent","sfAjax","bootstrap","jquery_cookie","jquery_lazyload","underscore","typeHelper","jquery-mousewheel","mCustomScrollbar"],function(e,t,n){var r,i,a,o,s,l,c,u;return e(".js-content-restore").on("click",function(){var t,n,r,i;return t=e(this),i=t.data("type"),r=t.data("id"),n="/api/"+i+"/"+r+"/delete/cancel",confirm("真的要恢复吗?")?e.post(n,function(e){return location.reload()}):void 0}),e(".mCustomScrollbar").length>0&&e(".mCustomScrollbar").mCustomScrollbar(),s=function(){return e.get("/api/notifications",function(t){var n,r,i;return t.status?void 0:(t.data=null!=(n=t.data)?n:[],r={data:t.data,unread:{general:_.filter(t.data.general,function(e){return 0===parseInt(e.viewed)}).length,ranked:_.filter(t.data.ranked,function(e){return 0===parseInt(e.viewed)}).length,followed:_.filter(t.data.followed,function(e){return 0===parseInt(e.viewed)}).length}},i=_.reduce(r.unread,function(e,t){return e+t},0),i>0&&e(".message-ingore-all").removeClass("hide"),_.each(r.unread,function(t,n){return t>0?e(".notice-dot-"+n).removeClass("hide"):void 0}),e("#messageGeneral").html(_.template(e("#messageGeneralTpl").html())(r.data)),e("#messageRanked").html(_.template(e("#messageRankedTpl").html())(r.data)),e("#messageFollowed").html(_.template(e("#messageFollowedTpl").html())(r.data)),e(".opts__item--message-loading").remove(),e(".mCustomScrollbar").mCustomScrollbar())})},e(".message-ingore-all").on("click",function(){var t;return t=e(this),e.post("/api/notifications/all/view",function(n){return s(),e(".notice-dot").addClass("hide"),t.addClass("hide")})}),e(".opts__item--message").on("click",".message__btn--follow",function(){var t,n;return t=e(this),n=t.data("id"),t.addClass("disabled"),e.post("/api/user/"+n+"/follow",function(e){return s(),t.removeClass("disabled")})}),e(".opts__item--message").on("click",".message__btn--unfollow",function(){var t,n;return t=e(this),n=t.data("id"),t.addClass("disabled"),e.post("/api/user/"+n+"/follow/cancel",function(e){return s(),t.removeClass("disabled")})}),e(".has-unread").on("click",function(t){var n;return n=e(".opts__item--message"),0===e(t.target).closest(".opts__item--message").length?"none"!==n.css("display")?n.addClass("hide"):(n.removeClass("hide"),s()):void 0}),e(".opts__item--message .btn-group>.btn").on("click",function(){var t;return e(".opts__item--message .btn-group>.btn.active").removeClass("active"),e(this).addClass("active"),t=e(this).attr("href"),"#messageRanked"!==t||e(this).find(".notice-dot").hasClass("hide")||e.post("/api/notifications/all/view?type=ranked"),"#messageFollowed"!==t||e(this).find(".notice-dot").hasClass("hide")?void 0:e.post("/api/notifications/all/view?type=followed")}),e("body").on("click",function(t){return"none"!==e(".opts__item--message").css("display")&&0===e(t.target).closest(".has-unread").length?e(".opts__item--message").addClass("hide"):void 0}),"/tags"===e(".nav__item--more>a").attr("href")||(e("body").on("click",function(t){return"none"!==e(".tag-mgr__box").css("display")&&0===e(t.target).closest(".nav__item--more").length&&0===e(t.target).closest(".tag-mgr__box").length?e(".nav__item--more").trigger("click"):void 0}),e(".tag-mgr__query").on("keyup",function(t){var n,r,i,a;return n=e(this),a=n.data("tags"),r=e(this).val(),i=function(t){var n,i,o;return o='<li><a href="<%= url %>"><%= name %></a></li>',n=_.filter(a,function(e){return-1!==e.name.search(t)}),i=_.reduce(n,function(e,t){return e+_.template(o)(t)},""),e(".tag-mgr__list").html(i),e(".tag-mgr__list li").length>0&&r.length>0?e(".tag-mgr__list li:first-child").addClass("active"):void 0},c.inputT&&clearTimeout(c.inputT),c.inputT=setTimeout(function(){return i(r)},300)}),e(".tag-mgr__list").on("mouseover",function(){return e(".tag-mgr__list li").length>1?e(".tag-mgr__list li.active").removeClass("active"):void 0}),c={inputT:0,t:0},e(".nav__item--more").on("click",function(){var t,n,r;return n=e(this),t=e(".tag-mgr__box"),r=Number(n.data("open")),r?t.addClass("hide"):(t.removeClass("hide"),e(".tag-mgr__query").focus()),e(this).data("open",Number(!r))})),e("body").on("click",".reloadCaptcha",function(){return e(this).find("img").attr("src","/user/captcha?w=240&h=50")}),e(".js__action--complain").on("click",function(){return t({title:"我要申诉",content:_.template(e("#js__action--complain-tpl").html()),doneFn:function(){return e(".complain__form").submit()}})}),e(".js__view--selector").on("click",function(){var t;return t=e(this).data("action"),e.cookie("view",t),location.reload()}),e.cookie("view")&&e(".js__view--selector").removeClass("hidden-sm").removeClass("hidden-md").removeClass("hidden-lg"),a=function(){var e,t,n;n="test",t=window.sessionStorage;try{return t.setItem(n,"1"),t.removeItem(n),!0}catch(r){return e=r,!1}},u=function(t){var n;if(a()&&!(t>500))return localStorage&&(n=localStorage.getItem("show-app-promotion-bar"),n=n||!0,n!==!0?e(".app-promotion-bar").hide():e(".app-promotion-bar").show()),e("body").on("click",".close",function(){return e(".app-promotion-bar").hide(),localStorage.setItem("show-app-promotion-bar",!1)}),e("body").on("click",".icon",function(){return e(".app-promotion-bar").hide(),localStorage.setItem("show-app-promotion-bar",!1)})},u(document.body.clientWidth),i=function(e){var t,n;switch(n="",t=new Date(e),t.getDay()){case 0:n="周日";break;case 1:n="周一";break;case 2:n="周二";break;case 3:n="周三";break;case 4:n="周四";break;case 5:n="周五";break;case 6:n="周六"}return n},o=function(){t({modalSize:"modal-lg",title:"登录",doneText:"登录",hideClose:!0,hideDone:!0,hideFooter:!0,content:e("#loginModal").text(),show:function(){return e("[name=mail]").first().focus(),e("#loginShowMore").click(function(t){t.preventDefault(),e(this).hide(),e(this).siblings().removeClass("hidden")}),e(".sfmodal .widget-login a").click(function(t){t.preventDefault(),window.open(e(this).attr("href"),"_blank","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=500")}),e("#loginReloadCaptcha").click(function(){e(this).find("img").attr("src","/user/captcha?w=240&h=50")})}}),e(".register-mail").typeHelperOld({emailMode:!0,onlyResult:!1})},e(".addWeek").each(function(t,n){e(this).append(" "+i(e(this).html()))}),e('[data-toggle="tooltip"]').tooltip({container:"body"}),e("img.lazy").lazyload({effect:"fadeIn"}),window.oauthLogin=function(e){-1!==location.hostname.indexOf("segmentfault")?location.reload():location.href="/"},window.oauthRegister=function(e){location.href="/user/bind"},r={_:window.SF.token,staticUrl:window.SF.staticUrl,userId:e("#SFUserId").attr("value"),userRank:e("#SFUserRank").attr("value"),login:n.login||o},e(document).ajaxError(function(t,n,r){413===n.status?(e("#uploading")&&e("#uploading").text(""),alert("文件大小或尺寸超出限制，请修改后重新上传！")):console.log("Ajax "+n.status+": ",r.url)}),e(document).ajaxSend(function(e,t,n){-1===n.url.indexOf("?")?n.url=n.url+"?_="+r._:n.url=n.url+"&_="+r._}),e(document).ajaxComplete(function(n,i,a){var o,s,l,c,u,d,f;window.captchaPostData=null!=(l=window.captchaPostData)?l:{},i.responseText&&(-1!==i.responseText.indexOf("<br />")||-1!==i.responseText.indexOf("<pre>exception ")?console.log("警告：前方高能！",i.responseText):i.responseJSON&&1===i.responseJSON.status&&(f=i.responseJSON,-1===a.url.indexOf("/user/stat")&&"login"===f.data[0]?r.login():"form"===f.data[0]&&f.data[1].hasOwnProperty("captcha")&&1===_.keys(f.data[1]).length?(captchaPostData.api=a.url,captchaPostData.data=a.data,t({modalSize:"modal-sm",title:f.data[1].captcha,content:"<div id='captchaPostForm' ><div class='reloadCaptcha'><img title='点击切换验证码'  src='/user/captcha?w=240&h=50' ></div><div class='form-group'><input class='form-action form-control' name='captcha'></div></div>",hideClose:!0,doneText:"确认并提交",doneFn:function(){var t;return t=e("#captchaPostForm").find("input[name=captcha]"),captchaPostData.captcha=t.val(),e.post("/api/captcha/check",{captcha:captchaPostData.captcha},function(n){return n.status?void 0:n.data?e.post(captchaPostData.api,captchaPostData.data+"&captcha="+captchaPostData.captcha,function(e){return window.captchaPostData={},e.data.hasOwnProperty("url")?location.href=e.data.url:location.reload()}):(t.addClass("error"),console.log("验证码错误"),e(".reloadCaptcha").trigger("click"))})}})):"robot"===f.data[0]?location.href="/stop-robot":"unactivated"===f.data[0]?e("#activate").modal("show"):"form"===f.data[0]?(d=a.url.split("/")[2],d=d.split("?")[0],c=new RegExp("[?&]_="+r._),u=a.url.replace(c,""),o=!0,e.each(f.data[1],function(t,n){var r,i,a,s;return"captcha"===t&&(e("[name=captcha]").parents(".form-group").show(),e(".captcha").parent("a").click()),a=t.toLowerCase().replace(/\b[a-z]/g,function(e){return e.toUpperCase()}),s="#"+d+a,0===e(s).length&&(s="#"+d.replace(/s$/,"")+a),i=e("form#"+d+" *[name="+t+"]").not("[type=hidden]").parents(".form-group"),0===i.length&&(i=e("form#"+d.replace(/s$/,"")+" *[name="+t+"]").not("[type=hidden]").parents(".form-group")),r=e('form[action="'+u+'"] *[name='+t+"]").not("[type=hidden]").parents(".form-group"),r.length||(r=e("form *[name="+t+"]").not("[type=hidden]").parents(".form-group")),e(s).length?e(s).addClass("error").attr("data-error",n).after('<span class="error--msg">'+n+"</span>"):i.length?(i.find(".help-block.err").remove(),i.addClass("has-error"),i.find("[name="+t+"]").not("[type=hidden]").after('<span class="help-block err">'+n+"</span>")):r.length?(r.find(".help-block").remove(),r.addClass("has-error"),r.find(".input-group").length>0?r.find(".input-group").after('<span class="help-block err">'+n+"</span>"):r.find(".bootstrap-tagsinput").length?r.find(".bootstrap-tagsinput").addClass("error").after('<span class="help-block err">'+n+"</span>"):r.find("[name="+t+"]").not("[type=hidden]").after('<span class="help-block err">'+n+"</span>")):(e("form#"+d+" *[name="+t+"]").not("[type=hidden]").siblings(".error--msg").remove(),e("form#"+d+" *[name="+t+"]").not("[type=hidden]").addClass("error").attr("data-error",n).after('<span class="error--msg">'+n+"</span>")),o?e(s).length?e(s).focus():(r.length&&r.find("[name="+t+"]").not("[type=hidden]").focus(),i.length&&i.find("[name="+t+"]").not("[type=hidden]").focus(),o=!1):void 0})):(s=["limit","lock","author","rank","account"],_.find(s,function(e){return e===f.data[0]})&&e.get("/api/errorMessage",{type:f.data[0],key:f.data[1]},function(e){return e.data?t({title:e.data[0],content:e.data[1],hideClose:!0}):void 0}))))}),e("body").delegate("form","submit",function(t){var n;n=e(this),n.attr("method")&&n.attr("action")&&(t.preventDefault(),n.find("button[type=submit]").attr("disabled","disabled"),e.ajax({url:n.attr("action"),type:n.attr("method"),data:n.serialize(),success:function(e){n.find("button[type=submit]").removeAttr("disabled"),0===e.status&&("/api/user?do=login"===n.attr("action")&&"/user/login"!==location.pathname?window.location.reload():/^\//.test(e.data)?window.location=e.data:window.location.reload())}}))}),e("body").delegate("form input, form textarea","keydown",function(t){e(this).removeClass("error"),e(this).parents(".form-group").removeClass("has-error"),e(this).next(".help-block.err").remove(),e(this).next(".error--msg").remove()}),e("#backtop").click(function(){return e("body,html").animate({scrollTop:0}),!1}),e(document).scroll(function(){e(this).scrollTop()>720?e("#backtop").removeClass("hidden"):e("#backtop").addClass("hidden")}),e(".topframe").length&&e(".topframe .close").click(function(t){e(this).parent().remove(),0!==e(".topframe").length&&e(".topframe .content").text()||e("body").removeClass("have-notify")}),window.SFHacker={setOldVersion:function(){e.cookie("v","old"),window.location.reload()},unSetOldVersion:function(){e.removeCookie("v",{path:"/"}),window.location.reload()},makePureTextarea:function(){e.cookie("typemode","native"),window.location.reload()},unMakePureTextarea:function(){e.removeCookie("typemode",{path:"/"}),window.location.reload()}},e(".SFLogin").click(function(e){e.preventDefault(),r.login()}),e(".3rdLogin").click(function(t){t.preventDefault(),window.open(e(this).attr("href"),"_blank","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=500")}),e(".hoverDropdown").hoverIntent(function(){e(this).hasClass("open")||e(this).find(".dropdownBtn").dropdown("toggle")},function(){e(this).hasClass("open")&&e(this).find(".dropdownBtn").dropdown("toggle")},null,1),e(".dropdownBtn").click(function(t){var n;e(this).parent(".hoverDropdown").hasClass("open")&&(t.preventDefault(),n=e(this).attr("href"),t.ctrlKey||t.metaKey?window.open(n):location.href=n)}),l=function(t,n,r,i){var a;return a=t,a.length>0&&e(".write-btns a").each(function(t,n){e(this).click(function(e){return a.modal("show"),!1})}),e(".activate-change",a).click(function(t){e(".activate-showmail").hide(),e(".activate-form").show()}),e(".activate-cancel",a).click(function(t){e(".activate-showmail").show(),e(".activate-form").hide()}),a.find(".activate-form").on("submit",function(t){var n;return t.preventDefault(),n=e(this),e.post(r,{mail:n.find(".mail").val()},function(t){0===t.status&&(n.parent().find(".session-mail").text(n.find(".mail").val()),e(".activate-showmail").show(),e(".activate-form").hide(),location.reload())}),!1}),a.find(".activate-resend",a).click(function(t){var r,a,o,s;a=e(this),r=a.siblings("span").find("span"),o=void 0,s=void 0,o=120,o--,e.post(n,function(t){var n,l;0===t.status?(e(".company-activete-tips").length&&e(".company-activete-tips").html(null!=(n='<div class="alert alert-success">'+t.message)?n:t.data[1]+"</div>"),i&&i(),s=setInterval(function(){return 0===o?(clearInterval(s),a.show(),void a.siblings("span").hide()):void r.text(o--)},1e3)):(e(".company-activete-tips").length&&e(".company-activete-tips").html(null!=(l='<div class="alert alert-danger">'+t.message)?l:t.data[1]+"</div>"),setTimeout(function(){e(".company-activete-tips").length&&e(".company-activete-tips").html('<div class="alert alert-success">激活邮件已发送 （<span>120</span>）</div>'),a.show()},9e5))})})},l(e("#activate"),"/api/user/reactivate","/api/user/activate/mail"),l(e("#companyActivate"),"/api/company/reactivate","/api/settings/mail/edit"),e(".side-ask [class*=btn-sn-]").click(function(t){t.preventDefault(),window.open(e(this).attr("href"),"_blank","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=500")}),r}),!function(e){"undefined"!=typeof exports?e(exports):(window.hljs=e({}),"function"==typeof define&&define.amd&&define("highlightjs",[],function(){return window.hljs}))}(function(e){function t(e){return e.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;")}function n(e){return e.nodeName.toLowerCase()}function r(e,t){var n=e&&e.exec(t);return n&&0==n.index}function i(e){var t=(e.className+" "+(e.parentNode?e.parentNode.className:"")).split(/\s+/);return t=t.map(function(e){return e.replace(/^lang(uage)?-/,"")}),t.filter(function(e){return y(e)||/no(-?)highlight/.test(e)})[0]}function a(e,t){var n={};for(var r in e)n[r]=e[r];if(t)for(var r in t)n[r]=t[r];return n}function o(e){var t=[];return function r(e,i){for(var a=e.firstChild;a;a=a.nextSibling)3==a.nodeType?i+=a.nodeValue.length:1==a.nodeType&&(t.push({event:"start",offset:i,node:a}),i=r(a,i),n(a).match(/br|hr|img|input/)||t.push({event:"stop",offset:i,node:a}));return i}(e,0),t}function s(e,r,i){function a(){return e.length&&r.length?e[0].offset!=r[0].offset?e[0].offset<r[0].offset?e:r:"start"==r[0].event?e:r:e.length?e:r}function o(e){function r(e){return" "+e.nodeName+'="'+t(e.value)+'"'}u+="<"+n(e)+Array.prototype.map.call(e.attributes,r).join("")+">"}function s(e){u+="</"+n(e)+">"}function l(e){("start"==e.event?o:s)(e.node)}for(var c=0,u="",d=[];e.length||r.length;){var f=a();if(u+=t(i.substr(c,f[0].offset-c)),c=f[0].offset,f==e){d.reverse().forEach(s);do l(f.splice(0,1)[0]),f=a();while(f==e&&f.length&&f[0].offset==c);d.reverse().forEach(o)}else"start"==f[0].event?d.push(f[0].node):d.pop(),l(f.splice(0,1)[0])}return u+t(i.substr(c))}function l(e){function t(e){return e&&e.source||e}function n(n,r){return RegExp(t(n),"m"+(e.cI?"i":"")+(r?"g":""))}function r(i,o){if(!i.compiled){if(i.compiled=!0,i.k=i.k||i.bK,i.k){var s={},l=function(t,n){e.cI&&(n=n.toLowerCase()),n.split(" ").forEach(function(e){var n=e.split("|");s[n[0]]=[t,n[1]?Number(n[1]):1]})};"string"==typeof i.k?l("keyword",i.k):Object.keys(i.k).forEach(function(e){l(e,i.k[e])}),i.k=s}i.lR=n(i.l||/\b[A-Za-z0-9_]+\b/,!0),o&&(i.bK&&(i.b="\\b("+i.bK.split(" ").join("|")+")\\b"),i.b||(i.b=/\B|\b/),i.bR=n(i.b),i.e||i.eW||(i.e=/\B|\b/),i.e&&(i.eR=n(i.e)),i.tE=t(i.e)||"",i.eW&&o.tE&&(i.tE+=(i.e?"|":"")+o.tE)),i.i&&(i.iR=n(i.i)),void 0===i.r&&(i.r=1),i.c||(i.c=[]);var c=[];i.c.forEach(function(e){e.v?e.v.forEach(function(t){c.push(a(e,t))}):c.push("self"==e?i:e)}),i.c=c,i.c.forEach(function(e){r(e,i)}),i.starts&&r(i.starts,o);var u=i.c.map(function(e){return e.bK?"\\.?("+e.b+")\\.?":e.b}).concat([i.tE,i.i]).map(t).filter(Boolean);i.t=u.length?n(u.join("|"),!0):{exec:function(){return null}}}}r(e)}function c(e,n,i,a){function o(e,t){for(var n=0;n<t.c.length;n++)if(r(t.c[n].bR,e))return t.c[n]}function s(e,t){return r(e.eR,t)?e:e.eW?s(e.parent,t):void 0}function d(e,t){return!i&&r(t.iR,e)}function f(e,t){var n=x.cI?t[0].toLowerCase():t[0];return e.k.hasOwnProperty(n)&&e.k[n]}function p(e,t,n,r){var i=r?"":_.classPrefix,a='<span class="'+i,o=n?"":"</span>";return a+=e+'">',a+t+o}function h(){if(!k.k)return t(M);var e="",n=0;k.lR.lastIndex=0;for(var r=k.lR.exec(M);r;){e+=t(M.substr(n,r.index-n));var i=f(k,r);i?(E+=i[1],e+=p(i[0],t(r[0]))):e+=t(r[0]),n=k.lR.lastIndex,r=k.lR.exec(M)}return e+t(M.substr(n))}function m(){if(k.sL&&!w[k.sL])return t(M);var e=k.sL?c(k.sL,M,!0,C[k.sL]):u(M);return k.r>0&&(E+=e.r),"continuous"==k.subLanguageMode&&(C[k.sL]=e.top),p(e.language,e.value,!1,!0)}function g(){return void 0!==k.sL?m():h()}function v(e,n){var r=e.cN?p(e.cN,"",!0):"";e.rB?(S+=r,M=""):e.eB?(S+=t(n)+r,M=""):(S+=r,M=n),k=Object.create(e,{parent:{value:k}})}function b(e,n){if(M+=e,void 0===n)return S+=g(),0;var r=o(n,k);if(r)return S+=g(),v(r,n),r.rB?0:n.length;var i=s(k,n);if(i){var a=k;a.rE||a.eE||(M+=n),S+=g();do k.cN&&(S+="</span>"),E+=k.r,k=k.parent;while(k!=i.parent);return a.eE&&(S+=t(n)),M="",i.starts&&v(i.starts,""),a.rE?0:n.length}if(d(n,k))throw new Error('Illegal lexeme "'+n+'" for mode "'+(k.cN||"<unnamed>")+'"');return M+=n,n.length||1}var x=y(e);if(!x)throw new Error('Unknown language: "'+e+'"');
l(x);for(var k=a||x,C={},S="",T=k;T!=x;T=T.parent)T.cN&&(S=p(T.cN,"",!0)+S);var M="",E=0;try{for(var L,I,$=0;k.t.lastIndex=$,L=k.t.exec(n),L;)I=b(n.substr($,L.index-$),L[0]),$=L.index+I;b(n.substr($));for(var T=k;T.parent;T=T.parent)T.cN&&(S+="</span>");return{r:E,value:S,language:e,top:k}}catch(N){if(-1!=N.message.indexOf("Illegal"))return{r:0,value:t(n)};throw N}}function u(e,n){n=n||_.languages||Object.keys(w);var r={r:0,value:t(e)},i=r;return n.forEach(function(t){if(y(t)){var n=c(t,e,!1);n.language=t,n.r>i.r&&(i=n),n.r>r.r&&(i=r,r=n)}}),i.language&&(r.second_best=i),r}function d(e){return _.tabReplace&&(e=e.replace(/^((<[^>]+>|\t)+)/gm,function(e,t){return t.replace(/\t/g,_.tabReplace)})),_.useBR&&(e=e.replace(/\n/g,"<br>")),e}function f(e,t,n){var r=t?x[t]:n,i=[e.trim()];return e.match(/(\s|^)hljs(\s|$)/)||i.push("hljs"),r&&i.push(r),i.join(" ").trim()}function p(e){var t=i(e);if(!/no(-?)highlight/.test(t)){var n;_.useBR?(n=document.createElementNS("http://www.w3.org/1999/xhtml","div"),n.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n")):n=e;var r=n.textContent,a=t?c(t,r,!0):u(r),l=o(n);if(l.length){var p=document.createElementNS("http://www.w3.org/1999/xhtml","div");p.innerHTML=a.value,a.value=s(l,o(p),r)}a.value=d(a.value),e.innerHTML=a.value,e.className=f(e.className,t,a.language),e.result={language:a.language,re:a.r},a.second_best&&(e.second_best={language:a.second_best.language,re:a.second_best.r})}}function h(e){_=a(_,e)}function m(){if(!m.called){m.called=!0;var e=document.querySelectorAll("pre code");Array.prototype.forEach.call(e,p)}}function g(){addEventListener("DOMContentLoaded",m,!1),addEventListener("load",m,!1)}function v(t,n){var r=w[t]=n(e);r.aliases&&r.aliases.forEach(function(e){x[e]=t})}function b(){return Object.keys(w)}function y(e){return w[e]||w[x[e]]}var _={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0},w={},x={};return e.highlight=c,e.highlightAuto=u,e.fixMarkup=d,e.highlightBlock=p,e.configure=h,e.initHighlighting=m,e.initHighlightingOnLoad=g,e.registerLanguage=v,e.listLanguages=b,e.getLanguage=y,e.inherit=a,e.IR="[a-zA-Z][a-zA-Z0-9_]*",e.UIR="[a-zA-Z_][a-zA-Z0-9_]*",e.NR="\\b\\d+(\\.\\d+)?",e.CNR="(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",e.BNR="\\b(0b[01]+)",e.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",e.BE={b:"\\\\[\\s\\S]",r:0},e.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[e.BE]},e.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[e.BE]},e.PWM={b:/\b(a|an|the|are|I|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such)\b/},e.CLCM={cN:"comment",b:"//",e:"$",c:[e.PWM]},e.CBCM={cN:"comment",b:"/\\*",e:"\\*/",c:[e.PWM]},e.HCM={cN:"comment",b:"#",e:"$",c:[e.PWM]},e.NM={cN:"number",b:e.NR,r:0},e.CNM={cN:"number",b:e.CNR,r:0},e.BNM={cN:"number",b:e.BNR,r:0},e.CSSNM={cN:"number",b:e.NR+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",r:0},e.RM={cN:"regexp",b:/\//,e:/\/[gimuy]*/,i:/\n/,c:[e.BE,{b:/\[/,e:/\]/,r:0,c:[e.BE]}]},e.TM={cN:"title",b:e.IR,r:0},e.UTM={cN:"title",b:e.UIR,r:0},e}),hljs.registerLanguage("coffeescript",function(e){var t={keyword:"in if for while finally new do return else break catch instanceof throw try this switch continue typeof delete debugger super then unless until loop of by when and or is isnt not",literal:"true false null undefined yes no on off",reserved:"case default function var void with const let enum export import native __hasProp __extends __slice __bind __indexOf",built_in:"npm require console print module global window document"},n="[A-Za-z$_][0-9A-Za-z$_]*",r={cN:"subst",b:/#\{/,e:/}/,k:t},i=[e.BNM,e.inherit(e.CNM,{starts:{e:"(\\s*/)?",r:0}}),{cN:"string",v:[{b:/'''/,e:/'''/,c:[e.BE]},{b:/'/,e:/'/,c:[e.BE]},{b:/"""/,e:/"""/,c:[e.BE,r]},{b:/"/,e:/"/,c:[e.BE,r]}]},{cN:"regexp",v:[{b:"///",e:"///",c:[r,e.HCM]},{b:"//[gim]*",r:0},{b:/\/(?![ *])(\\\/|.)*?\/[gim]*(?=\W|$)/}]},{cN:"property",b:"@"+n},{b:"`",e:"`",eB:!0,eE:!0,sL:"javascript"}];r.c=i;var a=e.inherit(e.TM,{b:n}),o="(\\(.*\\))?\\s*\\B[-=]>",s={cN:"params",b:"\\([^\\(]",rB:!0,c:[{b:/\(/,e:/\)/,k:t,c:["self"].concat(i)}]};return{aliases:["coffee","cson","iced"],k:t,i:/\/\*/,c:i.concat([{cN:"comment",b:"###",e:"###",c:[e.PWM]},e.HCM,{cN:"function",b:"^\\s*"+n+"\\s*=\\s*"+o,e:"[-=]>",rB:!0,c:[a,s]},{b:/[:\(,=]\s*/,r:0,c:[{cN:"function",b:o,e:"[-=]>",rB:!0,c:[s]}]},{cN:"class",bK:"class",e:"$",i:/[:="\[\]]/,c:[{bK:"extends",eW:!0,i:/[:="\[\]]/,c:[a]},a]},{cN:"attribute",b:n+":",e:":",rB:!0,rE:!0,r:0}])}}),hljs.registerLanguage("apache",function(e){var t={cN:"number",b:"[\\$%]\\d+"};return{aliases:["apacheconf"],cI:!0,c:[e.HCM,{cN:"tag",b:"</?",e:">"},{cN:"keyword",b:/\w+/,r:0,k:{common:"order deny allow setenv rewriterule rewriteengine rewritecond documentroot sethandler errordocument loadmodule options header listen serverroot servername"},starts:{e:/$/,r:0,k:{literal:"on off all"},c:[{cN:"sqbracket",b:"\\s\\[",e:"\\]$"},{cN:"cbracket",b:"[\\$%]\\{",e:"\\}",c:["self",t]},t,e.QSM]}}],i:/\S/}}),hljs.registerLanguage("http",function(){return{i:"\\S",c:[{cN:"status",b:"^HTTP/[0-9\\.]+",e:"$",c:[{cN:"number",b:"\\b\\d{3}\\b"}]},{cN:"request",b:"^[A-Z]+ (.*?) HTTP/[0-9\\.]+$",rB:!0,e:"$",c:[{cN:"string",b:" ",e:" ",eB:!0,eE:!0}]},{cN:"attribute",b:"^\\w",e:": ",eE:!0,i:"\\n|\\s|=",starts:{cN:"string",e:"$"}},{b:"\\n\\n",starts:{sL:"",eW:!0}}]}}),hljs.registerLanguage("cs",function(e){var t="abstract as base bool break byte case catch char checked const continue decimal default delegate do double else enum event explicit extern false finally fixed float for foreach goto if implicit in int interface internal is lock long null object operator out override params private protected public readonly ref sbyte sealed short sizeof stackalloc static string struct switch this true try typeof uint ulong unchecked unsafe ushort using virtual volatile void while async protected public private internal ascending descending from get group into join let orderby partial select set value var where yield",n=e.IR+"(<"+e.IR+">)?";return{aliases:["csharp"],k:t,i:/::/,c:[{cN:"comment",b:"///",e:"$",rB:!0,c:[{cN:"xmlDocTag",v:[{b:"///",r:0},{b:"<!--|-->"},{b:"</?",e:">"}]}]},e.CLCM,e.CBCM,{cN:"preprocessor",b:"#",e:"$",k:"if else elif endif define undef warning error line region endregion pragma checksum"},{cN:"string",b:'@"',e:'"',c:[{b:'""'}]},e.ASM,e.QSM,e.CNM,{bK:"class namespace interface",e:/[{;=]/,i:/[^\s:]/,c:[e.TM,e.CLCM,e.CBCM]},{bK:"new return throw await",r:0},{cN:"function",b:"("+n+"\\s+)+"+e.IR+"\\s*\\(",rB:!0,e:/[{;=]/,eE:!0,k:t,c:[{b:e.IR+"\\s*\\(",rB:!0,c:[e.TM],r:0},{cN:"params",b:/\(/,e:/\)/,k:t,r:0,c:[e.ASM,e.QSM,e.CNM,e.CBCM]},e.CLCM,e.CBCM]}]}}),hljs.registerLanguage("java",function(e){var t=e.UIR+"(<"+e.UIR+">)?",n="false synchronized int abstract float private char boolean static null if const for true while long strictfp finally protected import native final void enum else break transient catch instanceof byte super volatile case assert short package default double public try this switch continue throws protected public private",r="(\\b(0b[01_]+)|\\b0[xX][a-fA-F0-9_]+|(\\b[\\d_]+(\\.[\\d_]*)?|\\.[\\d_]+)([eE][-+]?\\d+)?)[lLfF]?",i={cN:"number",b:r,r:0};return{aliases:["jsp"],k:n,i:/<\//,c:[{cN:"javadoc",b:"/\\*\\*",e:"\\*/",r:0,c:[{cN:"javadoctag",b:"(^|\\s)@[A-Za-z]+"}]},e.CLCM,e.CBCM,e.ASM,e.QSM,{cN:"class",bK:"class interface",e:/[{;=]/,eE:!0,k:"class interface",i:/[:"\[\]]/,c:[{bK:"extends implements"},e.UTM]},{bK:"new throw return",r:0},{cN:"function",b:"("+t+"\\s+)+"+e.UIR+"\\s*\\(",rB:!0,e:/[{;=]/,eE:!0,k:n,c:[{b:e.UIR+"\\s*\\(",rB:!0,r:0,c:[e.UTM]},{cN:"params",b:/\(/,e:/\)/,k:n,r:0,c:[e.ASM,e.QSM,e.CNM,e.CBCM]},e.CLCM,e.CBCM]},i,{cN:"annotation",b:"@[A-Za-z]+"}]}}),hljs.registerLanguage("sql",function(e){var t={cN:"comment",b:"--",e:"$"};return{cI:!0,i:/[<>]/,c:[{cN:"operator",bK:"begin end start commit rollback savepoint lock alter create drop rename call delete do handler insert load replace select truncate update set show pragma grant merge describe use explain help declare prepare execute deallocate savepoint release unlock purge reset change stop analyze cache flush optimize repair kill install uninstall checksum restore check backup",e:/;/,eW:!0,k:{keyword:"abs absolute acos action add adddate addtime aes_decrypt aes_encrypt after aggregate all allocate alter analyze and any are as asc ascii asin assertion at atan atan2 atn2 authorization authors avg backup before begin benchmark between bin binlog bit_and bit_count bit_length bit_or bit_xor both by cache call cascade cascaded case cast catalog ceil ceiling chain change changed char_length character_length charindex charset check checksum checksum_agg choose close coalesce coercibility collate collation collationproperty column columns columns_updated commit compress concat concat_ws concurrent connect connection connection_id consistent constraint constraints continue contributors conv convert convert_tz corresponding cos cot count count_big crc32 create cross cume_dist curdate current current_date current_time current_timestamp current_user cursor curtime data database databases datalength date_add date_format date_sub dateadd datediff datefromparts datename datepart datetime2fromparts datetimeoffsetfromparts day dayname dayofmonth dayofweek dayofyear deallocate declare decode default deferrable deferred degrees delayed delete des_decrypt des_encrypt des_key_file desc describe descriptor diagnostics difference disconnect distinct distinctrow div do domain double drop dumpfile each else elt enclosed encode encrypt end end-exec engine engines eomonth errors escape escaped event eventdata events except exception exec execute exists exp explain export_set extended external extract fast fetch field fields find_in_set first first_value floor flush for force foreign format found found_rows from from_base64 from_days from_unixtime full function get get_format get_lock getdate getutcdate global go goto grant grants greatest group group_concat grouping grouping_id gtid_subset gtid_subtract handler having help hex high_priority hosts hour ident_current ident_incr ident_seed identified identity if ifnull ignore iif ilike immediate in index indicator inet6_aton inet6_ntoa inet_aton inet_ntoa infile initially inner innodb input insert install instr intersect into is is_free_lock is_ipv4 is_ipv4_compat is_ipv4_mapped is_not is_not_null is_used_lock isdate isnull isolation join key kill language last last_day last_insert_id last_value lcase lead leading least leaves left len lenght level like limit lines ln load load_file local localtime localtimestamp locate lock log log10 log2 logfile logs low_priority lower lpad ltrim make_set makedate maketime master master_pos_wait match matched max md5 medium merge microsecond mid min minute mod mode module month monthname mutex name_const names national natural nchar next no no_write_to_binlog not now nullif nvarchar oct octet_length of old_password on only open optimize option optionally or ord order outer outfile output pad parse partial partition password patindex percent_rank percentile_cont percentile_disc period_add period_diff pi plugin position pow power pragma precision prepare preserve primary prior privileges procedure procedure_analyze processlist profile profiles public publishingservername purge quarter query quick quote quotename radians rand read references regexp relative relaylog release release_lock rename repair repeat replace replicate reset restore restrict return returns reverse revoke right rlike rollback rollup round row row_count rows rpad rtrim savepoint schema scroll sec_to_time second section select serializable server session session_user set sha sha1 sha2 share show sign sin size slave sleep smalldatetimefromparts snapshot some soname soundex sounds_like space sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sql_variant_property sqlstate sqrt square start starting status std stddev stddev_pop stddev_samp stdev stdevp stop str str_to_date straight_join strcmp string stuff subdate substr substring subtime subtring_index sum switchoffset sysdate sysdatetime sysdatetimeoffset system_user sysutcdatetime table tables tablespace tan temporary terminated tertiary_weights then time time_format time_to_sec timediff timefromparts timestamp timestampadd timestampdiff timezone_hour timezone_minute to to_base64 to_days to_seconds todatetimeoffset trailing transaction translation trigger trigger_nestlevel triggers trim truncate try_cast try_convert try_parse ucase uncompress uncompressed_length unhex unicode uninstall union unique unix_timestamp unknown unlock update upgrade upped upper usage use user user_resources using utc_date utc_time utc_timestamp uuid uuid_short validate_password_strength value values var var_pop var_samp variables variance varp version view warnings week weekday weekofyear weight_string when whenever where with work write xml xor year yearweek zon",literal:"true false null",built_in:"array bigint binary bit blob boolean char character date dec decimal float int integer interval number numeric real serial smallint varchar varying int8 serial8 text"},c:[{cN:"string",b:"'",e:"'",c:[e.BE,{b:"''"}]},{cN:"string",b:'"',e:'"',c:[e.BE,{b:'""'}]},{cN:"string",b:"`",e:"`",c:[e.BE]},e.CNM,e.CBCM,t]},e.CBCM,t]}}),hljs.registerLanguage("nginx",function(e){var t={cN:"variable",v:[{b:/\$\d+/},{b:/\$\{/,e:/}/},{b:"[\\$\\@]"+e.UIR}]},n={eW:!0,l:"[a-z/_]+",k:{built_in:"on off yes no true false none blocked debug info notice warn error crit select break last permanent redirect kqueue rtsig epoll poll /dev/poll"},r:0,i:"=>",c:[e.HCM,{cN:"string",c:[e.BE,t],v:[{b:/"/,e:/"/},{b:/'/,e:/'/}]},{cN:"url",b:"([a-z]+):/",e:"\\s",eW:!0,eE:!0,c:[t]},{cN:"regexp",c:[e.BE,t],v:[{b:"\\s\\^",e:"\\s|{|;",rE:!0},{b:"~\\*?\\s+",e:"\\s|{|;",rE:!0},{b:"\\*(\\.[a-z\\-]+)+"},{b:"([a-z\\-]+\\.)+\\*"}]},{cN:"number",b:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{cN:"number",b:"\\b\\d+[kKmMgGdshdwy]*\\b",r:0},t]};return{aliases:["nginxconf"],c:[e.HCM,{b:e.UIR+"\\s",e:";|{",rB:!0,c:[{cN:"title",b:e.UIR,starts:n}],r:0}],i:"[^\\s\\}]"}}),hljs.registerLanguage("xml",function(){var e="[A-Za-z0-9\\._:-]+",t={b:/<\?(php)?(?!\w)/,e:/\?>/,sL:"php",subLanguageMode:"continuous"},n={eW:!0,i:/</,r:0,c:[t,{cN:"attribute",b:e,r:0},{b:"=",r:0,c:[{cN:"value",c:[t],v:[{b:/"/,e:/"/},{b:/'/,e:/'/},{b:/[^\s\/>]+/}]}]}]};return{aliases:["html","xhtml","rss","atom","xsl","plist"],cI:!0,c:[{cN:"doctype",b:"<!DOCTYPE",e:">",r:10,c:[{b:"\\[",e:"\\]"}]},{cN:"comment",b:"<!--",e:"-->",r:10},{cN:"cdata",b:"<\\!\\[CDATA\\[",e:"\\]\\]>",r:10},{cN:"tag",b:"<style(?=\\s|>|$)",e:">",k:{title:"style"},c:[n],starts:{e:"</style>",rE:!0,sL:"css"}},{cN:"tag",b:"<script(?=\\s|>|$)",e:">",k:{title:"script"},c:[n],starts:{e:"</script>",rE:!0,sL:"javascript"}},t,{cN:"pi",b:/<\?\w+/,e:/\?>/,r:10},{cN:"tag",b:"</?",e:"/?>",c:[{cN:"title",b:/[^ \/><\n\t]+/,r:0},n]}]}}),hljs.registerLanguage("diff",function(){return{aliases:["patch"],c:[{cN:"chunk",r:10,v:[{b:/^\@\@ +\-\d+,\d+ +\+\d+,\d+ +\@\@$/},{b:/^\*\*\* +\d+,\d+ +\*\*\*\*$/},{b:/^\-\-\- +\d+,\d+ +\-\-\-\-$/}]},{cN:"header",v:[{b:/Index: /,e:/$/},{b:/=====/,e:/=====$/},{b:/^\-\-\-/,e:/$/},{b:/^\*{3} /,e:/$/},{b:/^\+\+\+/,e:/$/},{b:/\*{5}/,e:/\*{5}$/}]},{cN:"addition",b:"^\\+",e:"$"},{cN:"deletion",b:"^\\-",e:"$"},{cN:"change",b:"^\\!",e:"$"}]}}),hljs.registerLanguage("javascript",function(e){return{aliases:["js"],k:{keyword:"in if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const class",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document"},c:[{cN:"pi",r:10,v:[{b:/^\s*('|")use strict('|")/},{b:/^\s*('|")use asm('|")/}]},e.ASM,e.QSM,e.CLCM,e.CBCM,e.CNM,{b:"("+e.RSR+"|\\b(case|return|throw)\\b)\\s*",k:"return throw case",c:[e.CLCM,e.CBCM,e.RM,{b:/</,e:/>;/,r:0,sL:"xml"}],r:0},{cN:"function",bK:"function",e:/\{/,eE:!0,c:[e.inherit(e.TM,{b:/[A-Za-z$_][0-9A-Za-z$_]*/}),{cN:"params",b:/\(/,e:/\)/,c:[e.CLCM,e.CBCM],i:/["'\(]/}],i:/\[|%/},{b:/\$[(.]/},{b:"\\."+e.IR,r:0}]}}),hljs.registerLanguage("bash",function(e){var t={cN:"variable",v:[{b:/\$[\w\d#@][\w\d_]*/},{b:/\$\{(.*?)\}/}]},n={cN:"string",b:/"/,e:/"/,c:[e.BE,t,{cN:"variable",b:/\$\(/,e:/\)/,c:[e.BE]}]},r={cN:"string",b:/'/,e:/'/};return{aliases:["sh","zsh"],l:/-?[a-z\.]+/,k:{keyword:"if then else elif fi for while in do done case esac function",literal:"true false",built_in:"break cd continue eval exec exit export getopts hash pwd readonly return shift test times trap umask unset alias bind builtin caller command declare echo enable help let local logout mapfile printf read readarray source type typeset ulimit unalias set shopt autoload bg bindkey bye cap chdir clone comparguments compcall compctl compdescribe compfiles compgroups compquote comptags comptry compvalues dirs disable disown echotc echoti emulate fc fg float functions getcap getln history integer jobs kill limit log noglob popd print pushd pushln rehash sched setcap setopt stat suspend ttyctl unfunction unhash unlimit unsetopt vared wait whence where which zcompile zformat zftp zle zmodload zparseopts zprof zpty zregexparse zsocket zstyle ztcp",operator:"-ne -eq -lt -gt -f -d -e -s -l -a"},c:[{cN:"shebang",b:/^#![^\n]+sh\s*$/,r:10},{cN:"function",b:/\w[\w\d_]*\s*\(\s*\)\s*\{/,rB:!0,c:[e.inherit(e.TM,{b:/\w[\w\d_]*/})],r:0},e.HCM,e.NM,n,r,t]}}),hljs.registerLanguage("objectivec",function(e){var t={keyword:"int float while char export sizeof typedef const struct for union unsigned long volatile static bool mutable if do return goto void enum else break extern asm case short default double register explicit signed typename this switch continue wchar_t inline readonly assign readwrite self @synchronized id typeof nonatomic super unichar IBOutlet IBAction strong weak copy in out inout bycopy byref oneway __strong __weak __block __autoreleasing @private @protected @public @try @property @end @throw @catch @finally @autoreleasepool @synthesize @dynamic @selector @optional @required",literal:"false true FALSE TRUE nil YES NO NULL",built_in:"NSString NSData NSDictionary CGRect CGPoint UIButton UILabel UITextView UIWebView MKMapView NSView NSViewController NSWindow NSWindowController NSSet NSUUID NSIndexSet UISegmentedControl NSObject UITableViewDelegate UITableViewDataSource NSThread UIActivityIndicator UITabbar UIToolBar UIBarButtonItem UIImageView NSAutoreleasePool UITableView BOOL NSInteger CGFloat NSException NSLog NSMutableString NSMutableArray NSMutableDictionary NSURL NSIndexPath CGSize UITableViewCell UIView UIViewController UINavigationBar UINavigationController UITabBarController UIPopoverController UIPopoverControllerDelegate UIImage NSNumber UISearchBar NSFetchedResultsController NSFetchedResultsChangeType UIScrollView UIScrollViewDelegate UIEdgeInsets UIColor UIFont UIApplication NSNotFound NSNotificationCenter NSNotification UILocalNotification NSBundle NSFileManager NSTimeInterval NSDate NSCalendar NSUserDefaults UIWindow NSRange NSArray NSError NSURLRequest NSURLConnection NSURLSession NSURLSessionDataTask NSURLSessionDownloadTask NSURLSessionUploadTask NSURLResponseUIInterfaceOrientation MPMoviePlayerController dispatch_once_t dispatch_queue_t dispatch_sync dispatch_async dispatch_once"},n=/[a-zA-Z@][a-zA-Z0-9_]*/,r="@interface @class @protocol @implementation";return{aliases:["m","mm","objc","obj-c"],k:t,l:n,i:"</",c:[e.CLCM,e.CBCM,e.CNM,e.QSM,{cN:"string",v:[{b:'@"',e:'"',i:"\\n",c:[e.BE]},{b:"'",e:"[^\\\\]'",i:"[^\\\\][^']"}]},{cN:"preprocessor",b:"#",e:"$",c:[{cN:"title",v:[{b:'"',e:'"'},{b:"<",e:">"}]}]},{cN:"class",b:"("+r.split(" ").join("|")+")\\b",e:"({|$)",eE:!0,k:r,l:n,c:[e.UTM]},{cN:"variable",b:"\\."+e.UIR,r:0}]}}),hljs.registerLanguage("markdown",function(){return{aliases:["md","mkdown","mkd"],c:[{cN:"header",v:[{b:"^#{1,6}",e:"$"},{b:"^.+?\\n[=-]{2,}$"}]},{b:"<",e:">",sL:"xml",r:0},{cN:"bullet",b:"^([*+-]|(\\d+\\.))\\s+"},{cN:"strong",b:"[*_]{2}.+?[*_]{2}"},{cN:"emphasis",v:[{b:"\\*.+?\\*"},{b:"_.+?_",r:0}]},{cN:"blockquote",b:"^>\\s+",e:"$"},{cN:"code",v:[{b:"`.+?`"},{b:"^( {4}|	)",e:"$",r:0}]},{cN:"horizontal_rule",b:"^[-\\*]{3,}",e:"$"},{b:"\\[.+?\\][\\(\\[].*?[\\)\\]]",rB:!0,c:[{cN:"link_label",b:"\\[",e:"\\]",eB:!0,rE:!0,r:0},{cN:"link_url",b:"\\]\\(",e:"\\)",eB:!0,eE:!0},{cN:"link_reference",b:"\\]\\[",e:"\\]",eB:!0,eE:!0}],r:10},{b:"^\\[.+\\]:",rB:!0,c:[{cN:"link_reference",b:"\\[",e:"\\]:",eB:!0,eE:!0,starts:{cN:"link_url",e:"$"}}]}]}}),hljs.registerLanguage("json",function(e){var t={literal:"true false null"},n=[e.QSM,e.CNM],r={cN:"value",e:",",eW:!0,eE:!0,c:n,k:t},i={b:"{",e:"}",c:[{cN:"attribute",b:'\\s*"',e:'"\\s*:\\s*',eB:!0,eE:!0,c:[e.BE],i:"\\n",starts:r}],i:"\\S"},a={b:"\\[",e:"\\]",c:[e.inherit(r,{cN:null})],i:"\\S"};return n.splice(n.length,0,i,a),{c:n,k:t,i:"\\S"}}),hljs.registerLanguage("python",function(e){var t={cN:"prompt",b:/^(>>>|\.\.\.) /},n={cN:"string",c:[e.BE],v:[{b:/(u|b)?r?'''/,e:/'''/,c:[t],r:10},{b:/(u|b)?r?"""/,e:/"""/,c:[t],r:10},{b:/(u|r|ur)'/,e:/'/,r:10},{b:/(u|r|ur)"/,e:/"/,r:10},{b:/(b|br)'/,e:/'/},{b:/(b|br)"/,e:/"/},e.ASM,e.QSM]},r={cN:"number",r:0,v:[{b:e.BNR+"[lLjJ]?"},{b:"\\b(0o[0-7]+)[lLjJ]?"},{b:e.CNR+"[lLjJ]?"}]},i={cN:"params",b:/\(/,e:/\)/,c:["self",t,r,n]};return{aliases:["py","gyp"],k:{keyword:"and elif is global as in if from raise for except finally print import pass return exec else break not with class assert yield try while continue del or def lambda nonlocal|10 None True False",built_in:"Ellipsis NotImplemented"},i:/(<\/|->|\?)/,c:[t,r,n,e.HCM,{v:[{cN:"function",bK:"def",r:10},{cN:"class",bK:"class"}],e:/:/,i:/[${=;\n]/,c:[e.UTM,i]},{cN:"decorator",b:/@/,e:/$/},{b:/\b(print|exec)\(/}]}}),hljs.registerLanguage("ruby",function(e){var t="[a-zA-Z_]\\w*[!?=]?|[-+~]\\@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?",n="and false then defined module in return redo if BEGIN retry end for true self when next until do begin unless END rescue nil else break undef not super class case require yield alias while ensure elsif or include attr_reader attr_writer attr_accessor",r={cN:"yardoctag",b:"@[A-Za-z]+"},i={cN:"value",b:"#<",e:">"},a={cN:"comment",v:[{b:"#",e:"$",c:[r]},{b:"^\\=begin",e:"^\\=end",c:[r],r:10},{b:"^__END__",e:"\\n$"}]},o={cN:"subst",b:"#\\{",e:"}",k:n},s={cN:"string",c:[e.BE,o],v:[{b:/'/,e:/'/},{b:/"/,e:/"/},{b:/`/,e:/`/},{b:"%[qQwWx]?\\(",e:"\\)"},{b:"%[qQwWx]?\\[",e:"\\]"},{b:"%[qQwWx]?{",e:"}"},{b:"%[qQwWx]?<",e:">"},{b:"%[qQwWx]?/",e:"/"},{b:"%[qQwWx]?%",e:"%"},{b:"%[qQwWx]?-",e:"-"},{b:"%[qQwWx]?\\|",e:"\\|"},{b:/\B\?(\\\d{1,3}|\\x[A-Fa-f0-9]{1,2}|\\u[A-Fa-f0-9]{4}|\\?\S)\b/}]},l={cN:"params",b:"\\(",e:"\\)",k:n},c=[s,i,a,{cN:"class",bK:"class module",e:"$|;",i:/=/,c:[e.inherit(e.TM,{b:"[A-Za-z_]\\w*(::\\w+)*(\\?|\\!)?"}),{cN:"inheritance",b:"<\\s*",c:[{cN:"parent",b:"("+e.IR+"::)?"+e.IR}]},a]},{cN:"function",bK:"def",e:" |$|;",r:0,c:[e.inherit(e.TM,{b:t}),l,a]},{cN:"constant",b:"(::)?(\\b[A-Z]\\w*(::)?)+",r:0},{cN:"symbol",b:e.UIR+"(\\!|\\?)?:",r:0},{cN:"symbol",b:":",c:[s,{b:t}],r:0},{cN:"number",b:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",r:0},{cN:"variable",b:"(\\$\\W)|((\\$|\\@\\@?)(\\w+))"},{b:"("+e.RSR+")\\s*",c:[i,a,{cN:"regexp",c:[e.BE,o],i:/\n/,v:[{b:"/",e:"/[a-z]*"},{b:"%r{",e:"}[a-z]*"},{b:"%r\\(",e:"\\)[a-z]*"},{b:"%r!",e:"![a-z]*"},{b:"%r\\[",e:"\\][a-z]*"}]}],r:0}];o.c=c,l.c=c;var u="[>?]>",d="[\\w#]+\\(\\w+\\):\\d+:\\d+>",f="(\\w+-)?\\d+\\.\\d+\\.\\d(p\\d+)?[^>]+>",p=[{b:/^\s*=>/,cN:"status",starts:{e:"$",c:c}},{cN:"prompt",b:"^("+u+"|"+d+"|"+f+")",starts:{e:"$",c:c}}];return{aliases:["rb","gemspec","podspec","thor","irb"],k:n,c:[a].concat(p).concat(c)}}),hljs.registerLanguage("cpp",function(e){var t={keyword:"false int float while private char catch export virtual operator sizeof dynamic_cast|10 typedef const_cast|10 const struct for static_cast|10 union namespace unsigned long volatile static protected bool template mutable if public friend do goto auto void enum else break extern using true class asm case typeid short reinterpret_cast|10 default double register explicit signed typename try this switch continue wchar_t inline delete alignof char16_t char32_t constexpr decltype noexcept nullptr static_assert thread_local restrict _Bool complex _Complex _Imaginaryintmax_t uintmax_t int8_t uint8_t int16_t uint16_t int32_t uint32_t  int64_t uint64_tint_least8_t uint_least8_t int_least16_t uint_least16_t int_least32_t uint_least32_tint_least64_t uint_least64_t int_fast8_t uint_fast8_t int_fast16_t uint_fast16_t int_fast32_tuint_fast32_t int_fast64_t uint_fast64_t intptr_t uintptr_t atomic_bool atomic_char atomic_scharatomic_uchar atomic_short atomic_ushort atomic_int atomic_uint atomic_long atomic_ulong atomic_llongatomic_ullong atomic_wchar_t atomic_char16_t atomic_char32_t atomic_intmax_t atomic_uintmax_tatomic_intptr_t atomic_uintptr_t atomic_size_t atomic_ptrdiff_t atomic_int_least8_t atomic_int_least16_tatomic_int_least32_t atomic_int_least64_t atomic_uint_least8_t atomic_uint_least16_t atomic_uint_least32_tatomic_uint_least64_t atomic_int_fast8_t atomic_int_fast16_t atomic_int_fast32_t atomic_int_fast64_tatomic_uint_fast8_t atomic_uint_fast16_t atomic_uint_fast32_t atomic_uint_fast64_t",built_in:"std string cin cout cerr clog stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap array shared_ptr abort abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf"};return{aliases:["c","h","c++","h++"],k:t,i:"</",c:[e.CLCM,e.CBCM,e.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},e.CNM,{cN:"preprocessor",b:"#",e:"$",k:"if else elif endif define undef warning error line pragma",c:[{b:'include\\s*[<"]',e:'[>"]',k:"include",i:"\\n"},e.CLCM]},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:t,c:["self"]},{b:e.IR+"::"},{bK:"new throw return",r:0},{cN:"function",b:"("+e.IR+"\\s+)+"+e.IR+"\\s*\\(",rB:!0,e:/[{;=]/,eE:!0,k:t,c:[{b:e.IR+"\\s*\\(",rB:!0,c:[e.TM],r:0},{cN:"params",b:/\(/,e:/\)/,k:t,r:0,c:[e.CBCM]},e.CLCM,e.CBCM]}]}}),hljs.registerLanguage("css",function(e){var t="[a-zA-Z-][a-zA-Z0-9_-]*",n={cN:"function",b:t+"\\(",rB:!0,eE:!0,e:"\\("};return{cI:!0,i:"[=/|']",c:[e.CBCM,{cN:"id",b:"\\#[A-Za-z0-9_-]+"},{cN:"class",b:"\\.[A-Za-z0-9_-]+",r:0},{cN:"attr_selector",b:"\\[",e:"\\]",i:"$"},{cN:"pseudo",b:":(:)?[a-zA-Z0-9\\_\\-\\+\\(\\)\\\"\\']+"},{cN:"at_rule",b:"@(font-face|page)",l:"[a-z-]+",k:"font-face page"},{cN:"at_rule",b:"@",e:"[{;]",c:[{cN:"keyword",b:/\S+/},{b:/\s/,eW:!0,eE:!0,r:0,c:[n,e.ASM,e.QSM,e.CSSNM]}]},{cN:"tag",b:t,r:0},{cN:"rules",b:"{",e:"}",i:"[^\\s]",r:0,c:[e.CBCM,{cN:"rule",b:"[^\\s]",rB:!0,e:";",eW:!0,c:[{cN:"attribute",b:"[A-Z\\_\\.\\-]+",e:":",eE:!0,i:"[^\\s]",starts:{cN:"value",eW:!0,eE:!0,c:[n,e.CSSNM,e.QSM,e.ASM,e.CBCM,{cN:"hexcolor",b:"#[0-9A-Fa-f]+"},{cN:"important",b:"!important"}]}}]}]}]}}),hljs.registerLanguage("php",function(e){var t={cN:"variable",b:"\\$+[a-zA-Z_-ÿ][a-zA-Z0-9_-ÿ]*"},n={cN:"preprocessor",b:/<\?(php)?|\?>/},r={cN:"string",c:[e.BE,n],v:[{b:'b"',e:'"'},{b:"b'",e:"'"},e.inherit(e.ASM,{i:null}),e.inherit(e.QSM,{i:null})]},i={v:[e.BNM,e.CNM]};return{aliases:["php3","php4","php5","php6"],cI:!0,k:"and include_once list abstract global private echo interface as static endswitch array null if endwhile or const for endforeach self var while isset public protected exit foreach throw elseif include __FILE__ empty require_once do xor return parent clone use __CLASS__ __LINE__ else break print eval new catch __METHOD__ case exception default die require __FUNCTION__ enddeclare final try switch continue endfor endif declare unset true false trait goto instanceof insteadof __DIR__ __NAMESPACE__ yield finally",c:[e.CLCM,e.HCM,{cN:"comment",b:"/\\*",e:"\\*/",c:[{cN:"phpdoc",b:"\\s@[A-Za-z]+"},n]},{cN:"comment",b:"__halt_compiler.+?;",eW:!0,k:"__halt_compiler",l:e.UIR},{cN:"string",b:"<<<['\"]?\\w+['\"]?$",e:"^\\w+;",c:[e.BE]},n,t,{b:/->+[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/},{cN:"function",bK:"function",e:/[;{]/,eE:!0,i:"\\$|\\[|%",c:[e.UTM,{cN:"params",b:"\\(",e:"\\)",c:["self",t,e.CBCM,r,i]}]},{cN:"class",bK:"class interface",e:"{",eE:!0,i:/[:\(\$"]/,c:[{bK:"extends implements"},e.UTM]},{bK:"namespace",e:";",i:/[\.']/,c:[e.UTM]},{bK:"use",e:";",c:[e.UTM]},{b:"=>"},r,i]}}),hljs.registerLanguage("perl",function(e){var t="getpwent getservent quotemeta msgrcv scalar kill dbmclose undef lc ma syswrite tr send umask sysopen shmwrite vec qx utime local oct semctl localtime readpipe do return format read sprintf dbmopen pop getpgrp not getpwnam rewinddir qqfileno qw endprotoent wait sethostent bless s|0 opendir continue each sleep endgrent shutdown dump chomp connect getsockname die socketpair close flock exists index shmgetsub for endpwent redo lstat msgctl setpgrp abs exit select print ref gethostbyaddr unshift fcntl syscall goto getnetbyaddr join gmtime symlink semget splice x|0 getpeername recv log setsockopt cos last reverse gethostbyname getgrnam study formline endhostent times chop length gethostent getnetent pack getprotoent getservbyname rand mkdir pos chmod y|0 substr endnetent printf next open msgsnd readdir use unlink getsockopt getpriority rindex wantarray hex system getservbyport endservent int chr untie rmdir prototype tell listen fork shmread ucfirst setprotoent else sysseek link getgrgid shmctl waitpid unpack getnetbyname reset chdir grep split require caller lcfirst until warn while values shift telldir getpwuid my getprotobynumber delete and sort uc defined srand accept package seekdir getprotobyname semop our rename seek if q|0 chroot sysread setpwent no crypt getc chown sqrt write setnetent setpriority foreach tie sin msgget map stat getlogin unless elsif truncate exec keys glob tied closedirioctl socket readlink eval xor readline binmode setservent eof ord bind alarm pipe atan2 getgrent exp time push setgrent gt lt or ne m|0 break given say state when",n={cN:"subst",b:"[$@]\\{",e:"\\}",k:t},r={b:"->{",e:"}"},i={cN:"variable",v:[{b:/\$\d/},{b:/[\$\%\@](\^\w\b|#\w+(\:\:\w+)*|{\w+}|\w+(\:\:\w*)*)/},{b:/[\$\%\@][^\s\w{]/,r:0}]},a={cN:"comment",b:"^(__END__|__DATA__)",e:"\\n$",r:5},o=[e.BE,n,i],s=[i,e.HCM,a,{cN:"comment",b:"^\\=\\w",e:"\\=cut",eW:!0},r,{cN:"string",c:o,v:[{b:"q[qwxr]?\\s*\\(",e:"\\)",r:5},{b:"q[qwxr]?\\s*\\[",e:"\\]",r:5},{b:"q[qwxr]?\\s*\\{",e:"\\}",r:5},{b:"q[qwxr]?\\s*\\|",e:"\\|",r:5},{b:"q[qwxr]?\\s*\\<",e:"\\>",r:5},{b:"qw\\s+q",e:"q",r:5},{b:"'",e:"'",c:[e.BE]},{b:'"',e:'"'},{b:"`",e:"`",c:[e.BE]},{b:"{\\w+}",c:[],r:0},{b:"-?\\w+\\s*\\=\\>",c:[],r:0}]},{cN:"number",b:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",r:0},{b:"(\\/\\/|"+e.RSR+"|\\b(split|return|print|reverse|grep)\\b)\\s*",
k:"split return print reverse grep",r:0,c:[e.HCM,a,{cN:"regexp",b:"(s|tr|y)/(\\\\.|[^/])*/(\\\\.|[^/])*/[a-z]*",r:10},{cN:"regexp",b:"(m|qr)?/",e:"/[a-z]*",c:[e.BE],r:0}]},{cN:"sub",bK:"sub",e:"(\\s*\\(.*?\\))?[;{]",r:5},{cN:"operator",b:"-\\w\\b",r:0}];return n.c=s,r.c=s,{aliases:["pl"],k:t,c:s}}),hljs.registerLanguage("ini",function(e){return{cI:!0,i:/\S/,c:[{cN:"comment",b:";",e:"$"},{cN:"title",b:"^\\[",e:"\\]"},{cN:"setting",b:"^[a-z0-9\\[\\]_-]+[ \\t]*=[ \\t]*",e:"$",c:[{cN:"value",eW:!0,k:"on off true false yes no",c:[e.QSM,e.NM],r:0}]}]}}),hljs.registerLanguage("makefile",function(e){var t={cN:"variable",b:/\$\(/,e:/\)/,c:[e.BE]};return{aliases:["mk","mak"],c:[e.HCM,{b:/^\w+\s*\W*=/,rB:!0,r:0,starts:{cN:"constant",e:/\s*\W*=/,eE:!0,starts:{e:/$/,r:0,c:[t]}}},{cN:"title",b:/^[\w]+:\s*$/},{cN:"phony",b:/^\.PHONY:/,e:/$/,k:".PHONY",l:/[\.\w]+/},{b:/^\t+/,e:/$/,r:0,c:[e.QSM,t]}]}}),define("math",["jquery","main"],function(e,t){"use strict";return function(n){var r,i;r=n||e(".fmt"),"undefined"!=typeof MathJax?r.each(function(){MathJax.Hub.Queue(["Typeset",MathJax.Hub,e(this).get(0)])}):(i=t.staticUrl+"/3rd/MathJax/MathJax.js?config=TeX-MML-AM_CHTML",e.getScript(i,function(){MathJax.Hub.Config({extensions:["tex2jax.js"],jax:["input/TeX","output/HTML-CSS"],tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0}}),r.each(function(){MathJax.Hub.Queue(["Typeset",MathJax.Hub,e(this).get(0)])})}))}}),define("flowChart",[],function(){"use strict";return function(e,t){require(["jquery","Raphael","flow_diagram"],function(n,r,i){var a;a=i.parse(e),a.drawSVG(t)})}}),define("sequenceChart",[],function(){"use strict";return function(e){require(["jquery","Raphael","underscore","sequence_diagram"],function(t,n,r,i){e.sequenceDiagram({theme:"simple"})})}}),function(e,t){"use strict";var n,r,i=e,a=i.document,o=i.navigator,s=i.setTimeout,l=i.encodeURIComponent,c=i.ActiveXObject,u=(i.Error,i.Number.parseInt||i.parseInt),d=i.Number.parseFloat||i.parseFloat,f=i.Number.isNaN||i.isNaN,p=i.Math.round,h=i.Date.now,m=i.Object.keys,g=i.Object.defineProperty,v=i.Object.prototype.hasOwnProperty,b=i.Array.prototype.slice,y=function(){var e=function(e){return e};if("function"==typeof i.wrap&&"function"==typeof i.unwrap)try{var t=a.createElement("div"),n=i.unwrap(t);1===t.nodeType&&n&&1===n.nodeType&&(e=i.unwrap)}catch(r){}return e}(),_=function(e){return b.call(e,0)},w=function(){var e,n,r,i,a,o,s=_(arguments),l=s[0]||{};for(e=1,n=s.length;n>e;e++)if(null!=(r=s[e]))for(i in r)v.call(r,i)&&(a=l[i],o=r[i],l!==o&&o!==t&&(l[i]=o));return l},x=function(e){var t,n,r,i;if("object"!=typeof e||null==e)t=e;else if("number"==typeof e.length)for(t=[],n=0,r=e.length;r>n;n++)v.call(e,n)&&(t[n]=x(e[n]));else{t={};for(i in e)v.call(e,i)&&(t[i]=x(e[i]))}return t},k=function(e,t){for(var n={},r=0,i=t.length;i>r;r++)t[r]in e&&(n[t[r]]=e[t[r]]);return n},C=function(e,t){var n={};for(var r in e)-1===t.indexOf(r)&&(n[r]=e[r]);return n},S=function(e){if(e)for(var t in e)v.call(e,t)&&delete e[t];return e},T=function(e,t){if(e&&1===e.nodeType&&e.ownerDocument&&t&&(1===t.nodeType&&t.ownerDocument&&t.ownerDocument===e.ownerDocument||9===t.nodeType&&!t.ownerDocument&&t===e.ownerDocument))do{if(e===t)return!0;e=e.parentNode}while(e);return!1},M=function(){var e=SF.staticUrl+"/3rd/zeroclipboard/dist/";return e+"ZeroClipboard.swf"},E={bridge:null,version:"0.0.0",pluginType:"unknown",disabled:null,outdated:null,unavailable:null,deactivated:null,overdue:null,ready:null},L="11.0.0",I={},$={},N=null,A={ready:"Flash communication is established",error:{"flash-disabled":"Flash is disabled or not installed","flash-outdated":"Flash is too outdated to support ZeroClipboard","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate","flash-overdue":"Flash communication was established but NOT within the acceptable time limit"}},B={swfPath:M(),trustedDomains:e.location.host?[e.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:3e4,autoActivate:!0,bubbleEvents:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",forceHandCursor:!1,title:null,zIndex:999999999},O=function(e){if("object"==typeof e&&null!==e)for(var t in e)if(v.call(e,t))if(/^(?:forceHandCursor|title|zIndex|bubbleEvents)$/.test(t))B[t]=e[t];else if(null==E.bridge)if("containerId"===t||"swfObjectId"===t){if(!Y(e[t]))throw new Error("The specified `"+t+"` value is not valid as an HTML4 Element ID");B[t]=e[t]}else B[t]=e[t];{if("string"!=typeof e||!e)return x(B);if(v.call(B,e))return B[e]}},z=function(){return{browser:k(o,["userAgent","platform","appName"]),flash:C(E,["bridge"]),zeroclipboard:{version:Se.version,config:Se.config()}}},D=function(){return!!(E.disabled||E.outdated||E.unavailable||E.deactivated)},j=function(e,t){var n,r,i,a={};if("string"==typeof e&&e)i=e.toLowerCase().split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof t)for(n in e)v.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&Se.on(n,e[n]);if(i&&i.length){for(n=0,r=i.length;r>n;n++)e=i[n].replace(/^on/,""),a[e]=!0,I[e]||(I[e]=[]),I[e].push(t);if(a.ready&&E.ready&&Se.emit({type:"ready"}),a.error){var o=["disabled","outdated","unavailable","deactivated","overdue"];for(n=0,r=o.length;r>n;n++)if(E[o[n]]===!0){Se.emit({type:"error",name:"flash-"+o[n]});break}}}return Se},R=function(e,t){var n,r,i,a,o;if(0===arguments.length)a=m(I);else if("string"==typeof e&&e)a=e.split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof t)for(n in e)v.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&Se.off(n,e[n]);if(a&&a.length)for(n=0,r=a.length;r>n;n++)if(e=a[n].toLowerCase().replace(/^on/,""),o=I[e],o&&o.length)if(t)for(i=o.indexOf(t);-1!==i;)o.splice(i,1),i=o.indexOf(t,i);else o.length=0;return Se},q=function(e){var t;return t="string"==typeof e&&e?x(I[e])||null:x(I)},H=function(e){var t,n,r;return e=Z(e),e&&!re(e)?"ready"===e.type&&E.overdue===!0?Se.emit({type:"error",name:"flash-overdue"}):(t=w({},e),ne.call(this,t),"copy"===e.type&&(r=ce($),n=r.data,N=r.formatMap),n):void 0},P=function(){if("boolean"!=typeof E.ready&&(E.ready=!1),!Se.isFlashUnusable()&&null===E.bridge){var e=B.flashLoadTimeout;"number"==typeof e&&e>=0&&s(function(){"boolean"!=typeof E.deactivated&&(E.deactivated=!0),E.deactivated===!0&&Se.emit({type:"error",name:"flash-deactivated"})},e),E.overdue=!1,se()}},W=function(){Se.clearData(),Se.blur(),Se.emit("destroy"),le(),Se.off()},F=function(e,t){var n;if("object"==typeof e&&e&&"undefined"==typeof t)n=e,Se.clearData();else{if("string"!=typeof e||!e)return;n={},n[e]=t}for(var r in n)"string"==typeof r&&r&&v.call(n,r)&&"string"==typeof n[r]&&n[r]&&($[r]=n[r])},U=function(e){"undefined"==typeof e?(S($),N=null):"string"==typeof e&&v.call($,e)&&delete $[e]},V=function(e){return"undefined"==typeof e?x($):"string"==typeof e&&v.call($,e)?$[e]:void 0},K=function(e){if(e&&1===e.nodeType){n&&(ve(n,B.activeClass),n!==e&&ve(n,B.hoverClass)),n=e,ge(e,B.hoverClass);var t=e.getAttribute("title")||B.title;if("string"==typeof t&&t){var r=oe(E.bridge);r&&r.setAttribute("title",t)}var i=B.forceHandCursor===!0||"pointer"===be(e,"cursor");xe(i),we()}},X=function(){var e=oe(E.bridge);e&&(e.removeAttribute("title"),e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.top="1px"),n&&(ve(n,B.hoverClass),ve(n,B.activeClass),n=null)},G=function(){return n||null},Y=function(e){return"string"==typeof e&&e&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(e)},Z=function(e){var t;if("string"==typeof e&&e?(t=e,e={}):"object"==typeof e&&e&&"string"==typeof e.type&&e.type&&(t=e.type),t){!e.target&&/^(copy|aftercopy|_click)$/.test(t.toLowerCase())&&(e.target=r),w(e,{type:t.toLowerCase(),target:e.target||n||null,relatedTarget:e.relatedTarget||null,currentTarget:E&&E.bridge||null,timeStamp:e.timeStamp||h()||null});var i=A[e.type];return"error"===e.type&&e.name&&i&&(i=i[e.name]),i&&(e.message=i),"ready"===e.type&&w(e,{target:null,version:E.version}),"error"===e.type&&(/^flash-(disabled|outdated|unavailable|deactivated|overdue)$/.test(e.name)&&w(e,{target:null,minimumVersion:L}),/^flash-(outdated|unavailable|deactivated|overdue)$/.test(e.name)&&w(e,{version:E.version})),"copy"===e.type&&(e.clipboardData={setData:Se.setData,clearData:Se.clearData}),"aftercopy"===e.type&&(e=ue(e,N)),e.target&&!e.relatedTarget&&(e.relatedTarget=Q(e.target)),e=J(e)}},Q=function(e){var t=e&&e.getAttribute&&e.getAttribute("data-clipboard-target");return t?a.getElementById(t):null},J=function(e){if(e&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type)){var n=e.target,r="_mouseover"===e.type&&e.relatedTarget?e.relatedTarget:t,o="_mouseout"===e.type&&e.relatedTarget?e.relatedTarget:t,s=_e(n),l=i.screenLeft||i.screenX||0,c=i.screenTop||i.screenY||0,u=a.body.scrollLeft+a.documentElement.scrollLeft,d=a.body.scrollTop+a.documentElement.scrollTop,f=s.left+("number"==typeof e._stageX?e._stageX:0),p=s.top+("number"==typeof e._stageY?e._stageY:0),h=f-u,m=p-d,g=l+h,v=c+m,b="number"==typeof e.movementX?e.movementX:0,y="number"==typeof e.movementY?e.movementY:0;delete e._stageX,delete e._stageY,w(e,{srcElement:n,fromElement:r,toElement:o,screenX:g,screenY:v,pageX:f,pageY:p,clientX:h,clientY:m,x:h,y:m,movementX:b,movementY:y,offsetX:0,offsetY:0,layerX:0,layerY:0})}return e},ee=function(e){var t=e&&"string"==typeof e.type&&e.type||"";return!/^(?:(?:before)?copy|destroy)$/.test(t)},te=function(e,t,n,r){r?s(function(){e.apply(t,n)},0):e.apply(t,n)},ne=function(e){if("object"==typeof e&&e&&e.type){var t=ee(e),n=I["*"]||[],r=I[e.type]||[],a=n.concat(r);if(a&&a.length){var o,s,l,c,u,d=this;for(o=0,s=a.length;s>o;o++)l=a[o],c=d,"string"==typeof l&&"function"==typeof i[l]&&(l=i[l]),"object"==typeof l&&l&&"function"==typeof l.handleEvent&&(c=l,l=l.handleEvent),"function"==typeof l&&(u=w({},e),te(l,c,[u],t))}return this}},re=function(e){var t=e.target||n||null,i="swf"===e._source;delete e._source;var a=["flash-disabled","flash-outdated","flash-unavailable","flash-deactivated","flash-overdue"];switch(e.type){case"error":-1!==a.indexOf(e.name)&&w(E,{disabled:"flash-disabled"===e.name,outdated:"flash-outdated"===e.name,unavailable:"flash-unavailable"===e.name,deactivated:"flash-deactivated"===e.name,overdue:"flash-overdue"===e.name,ready:!1});break;case"ready":var o=E.deactivated===!0;w(E,{disabled:!1,outdated:!1,unavailable:!1,deactivated:!1,overdue:o,ready:!o});break;case"beforecopy":r=t;break;case"copy":var s,l,c=e.relatedTarget;!$["text/html"]&&!$["text/plain"]&&c&&(l=c.value||c.outerHTML||c.innerHTML)&&(s=c.value||c.textContent||c.innerText)?(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",s),l!==s&&e.clipboardData.setData("text/html",l)):!$["text/plain"]&&e.target&&(s=e.target.getAttribute("data-clipboard-text"))&&(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",s));break;case"aftercopy":Se.clearData(),t&&t!==me()&&t.focus&&t.focus();break;case"_mouseover":Se.focus(t),B.bubbleEvents===!0&&i&&(t&&t!==e.relatedTarget&&!T(e.relatedTarget,t)&&ie(w({},e,{type:"mouseenter",bubbles:!1,cancelable:!1})),ie(w({},e,{type:"mouseover"})));break;case"_mouseout":Se.blur(),B.bubbleEvents===!0&&i&&(t&&t!==e.relatedTarget&&!T(e.relatedTarget,t)&&ie(w({},e,{type:"mouseleave",bubbles:!1,cancelable:!1})),ie(w({},e,{type:"mouseout"})));break;case"_mousedown":ge(t,B.activeClass),B.bubbleEvents===!0&&i&&ie(w({},e,{type:e.type.slice(1)}));break;case"_mouseup":ve(t,B.activeClass),B.bubbleEvents===!0&&i&&ie(w({},e,{type:e.type.slice(1)}));break;case"_click":r=null,B.bubbleEvents===!0&&i&&ie(w({},e,{type:e.type.slice(1)}));break;case"_mousemove":B.bubbleEvents===!0&&i&&ie(w({},e,{type:e.type.slice(1)}))}return/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type)?!0:void 0},ie=function(e){if(e&&"string"==typeof e.type&&e){var t,n=e.target||null,r=n&&n.ownerDocument||a,o={view:r.defaultView||i,canBubble:!0,cancelable:!0,detail:"click"===e.type?1:0,button:"number"==typeof e.which?e.which-1:"number"==typeof e.button?e.button:r.createEvent?0:1},s=w(o,e);n&&r.createEvent&&n.dispatchEvent&&(s=[s.type,s.canBubble,s.cancelable,s.view,s.detail,s.screenX,s.screenY,s.clientX,s.clientY,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.button,s.relatedTarget],t=r.createEvent("MouseEvents"),t.initMouseEvent&&(t.initMouseEvent.apply(t,s),t._source="js",n.dispatchEvent(t)))}},ae=function(){var e=a.createElement("div");return e.id=B.containerId,e.className=B.containerClass,e.style.position="absolute",e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.height="1px",e.style.zIndex=""+ke(B.zIndex),e},oe=function(e){for(var t=e&&e.parentNode;t&&"OBJECT"===t.nodeName&&t.parentNode;)t=t.parentNode;return t||null},se=function(){var e,t=E.bridge,n=oe(t);if(!t){var r=he(i.location.host,B),o="never"===r?"none":"all",s=fe(B),l=B.swfPath+de(B.swfPath,B);n=ae();var c=a.createElement("div");n.appendChild(c),a.body.appendChild(n);var u=a.createElement("div"),d="activex"===E.pluginType;u.innerHTML='<object id="'+B.swfObjectId+'" name="'+B.swfObjectId+'" width="100%" height="100%" '+(d?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+l+'"')+">"+(d?'<param name="movie" value="'+l+'"/>':"")+'<param name="allowScriptAccess" value="'+r+'"/><param name="allowNetworking" value="'+o+'"/><param name="menu" value="false"/><param name="wmode" value="transparent"/><param name="flashvars" value="'+s+'"/></object>',t=u.firstChild,u=null,y(t).ZeroClipboard=Se,n.replaceChild(t,c)}return t||(t=a[B.swfObjectId],t&&(e=t.length)&&(t=t[e-1]),!t&&n&&(t=n.firstChild)),E.bridge=t||null,t},le=function(){var e=E.bridge;if(e){var t=oe(e);t&&("activex"===E.pluginType&&"readyState"in e?(e.style.display="none",function n(){if(4===e.readyState){for(var r in e)"function"==typeof e[r]&&(e[r]=null);e.parentNode&&e.parentNode.removeChild(e),t.parentNode&&t.parentNode.removeChild(t)}else s(n,10)}()):(e.parentNode&&e.parentNode.removeChild(e),t.parentNode&&t.parentNode.removeChild(t))),E.ready=null,E.bridge=null,E.deactivated=null}},ce=function(e){var t={},n={};if("object"==typeof e&&e){for(var r in e)if(r&&v.call(e,r)&&"string"==typeof e[r]&&e[r])switch(r.toLowerCase()){case"text/plain":case"text":case"air:text":case"flash:text":t.text=e[r],n.text=r;break;case"text/html":case"html":case"air:html":case"flash:html":t.html=e[r],n.html=r;break;case"application/rtf":case"text/rtf":case"rtf":case"richtext":case"air:rtf":case"flash:rtf":t.rtf=e[r],n.rtf=r}return{data:t,formatMap:n}}},ue=function(e,t){if("object"!=typeof e||!e||"object"!=typeof t||!t)return e;var n={};for(var r in e)if(v.call(e,r)){if("success"!==r&&"data"!==r){n[r]=e[r];continue}n[r]={};var i=e[r];for(var a in i)a&&v.call(i,a)&&v.call(t,a)&&(n[r][t[a]]=i[a])}return n},de=function(e,t){var n=null==t||t&&t.cacheBust===!0;return n?(-1===e.indexOf("?")?"?":"&")+"noCache="+h():""},fe=function(e){var t,n,r,a,o="",s=[];if(e.trustedDomains&&("string"==typeof e.trustedDomains?a=[e.trustedDomains]:"object"==typeof e.trustedDomains&&"length"in e.trustedDomains&&(a=e.trustedDomains)),a&&a.length)for(t=0,n=a.length;n>t;t++)if(v.call(a,t)&&a[t]&&"string"==typeof a[t]){if(r=pe(a[t]),!r)continue;if("*"===r){s.length=0,s.push(r);break}s.push.apply(s,[r,"//"+r,i.location.protocol+"//"+r])}return s.length&&(o+="trustedOrigins="+l(s.join(","))),e.forceEnhancedClipboard===!0&&(o+=(o?"&":"")+"forceEnhancedClipboard=true"),"string"==typeof e.swfObjectId&&e.swfObjectId&&(o+=(o?"&":"")+"swfObjectId="+l(e.swfObjectId)),o},pe=function(e){if(null==e||""===e)return null;if(e=e.replace(/^\s+|\s+$/g,""),""===e)return null;var t=e.indexOf("//");e=-1===t?e:e.slice(t+2);var n=e.indexOf("/");return e=-1===n?e:-1===t||0===n?null:e.slice(0,n),e&&".swf"===e.slice(-4).toLowerCase()?null:e||null},he=function(){var e=function(e){var t,n,r,i=[];if("string"==typeof e&&(e=[e]),"object"!=typeof e||!e||"number"!=typeof e.length)return i;for(t=0,n=e.length;n>t;t++)if(v.call(e,t)&&(r=pe(e[t]))){if("*"===r){i.length=0,i.push("*");break}-1===i.indexOf(r)&&i.push(r)}return i};return function(t,n){var r=pe(n.swfPath);null===r&&(r=t);var i=e(n.trustedDomains),a=i.length;if(a>0){if(1===a&&"*"===i[0])return"always";if(-1!==i.indexOf(t))return 1===a&&t===r?"sameDomain":"always"}return"never"}}(),me=function(){try{return a.activeElement}catch(e){return null}},ge=function(e,t){if(!e||1!==e.nodeType)return e;if(e.classList)return e.classList.contains(t)||e.classList.add(t),e;if(t&&"string"==typeof t){var n=(t||"").split(/\s+/);if(1===e.nodeType)if(e.className){for(var r=" "+e.className+" ",i=e.className,a=0,o=n.length;o>a;a++)r.indexOf(" "+n[a]+" ")<0&&(i+=" "+n[a]);e.className=i.replace(/^\s+|\s+$/g,"")}else e.className=t}return e},ve=function(e,t){if(!e||1!==e.nodeType)return e;if(e.classList)return e.classList.contains(t)&&e.classList.remove(t),e;if("string"==typeof t&&t){var n=t.split(/\s+/);if(1===e.nodeType&&e.className){for(var r=(" "+e.className+" ").replace(/[\n\t]/g," "),i=0,a=n.length;a>i;i++)r=r.replace(" "+n[i]+" "," ");e.className=r.replace(/^\s+|\s+$/g,"")}}return e},be=function(e,t){var n=i.getComputedStyle(e,null).getPropertyValue(t);return"cursor"!==t||n&&"auto"!==n||"A"!==e.nodeName?n:"pointer"},ye=function(){var e,t,n,r=1;return"function"==typeof a.body.getBoundingClientRect&&(e=a.body.getBoundingClientRect(),t=e.right-e.left,n=a.body.offsetWidth,r=p(t/n*100)/100),r},_e=function(e){var t={left:0,top:0,width:0,height:0};if(e.getBoundingClientRect){var n,r,o,s=e.getBoundingClientRect();"pageXOffset"in i&&"pageYOffset"in i?(n=i.pageXOffset,r=i.pageYOffset):(o=ye(),n=p(a.documentElement.scrollLeft/o),r=p(a.documentElement.scrollTop/o));var l=a.documentElement.clientLeft||0,c=a.documentElement.clientTop||0;t.left=s.left+n-l,t.top=s.top+r-c,t.width="width"in s?s.width:s.right-s.left,t.height="height"in s?s.height:s.bottom-s.top}return t},we=function(){var e;if(n&&(e=oe(E.bridge))){var t=_e(n);w(e.style,{width:t.width+"px",height:t.height+"px",top:t.top+"px",left:t.left+"px",zIndex:""+ke(B.zIndex)})}},xe=function(e){E.ready===!0&&(E.bridge&&"function"==typeof E.bridge.setHandCursor?E.bridge.setHandCursor(e):E.ready=!1)},ke=function(e){if(/^(?:auto|inherit)$/.test(e))return e;var t;return"number"!=typeof e||f(e)?"string"==typeof e&&(t=ke(u(e,10))):t=e,"number"==typeof t?t:"auto"},Ce=function(e){function t(e){var t=e.match(/[\d]+/g);return t.length=3,t.join(".")}function n(e){return!!e&&(e=e.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(e)||"chrome.plugin"===e.slice(-13))}function r(e){e&&(l=!0,e.version&&(f=t(e.version)),!f&&e.description&&(f=t(e.description)),e.filename&&(u=n(e.filename)))}var i,a,s,l=!1,c=!1,u=!1,f="";if(o.plugins&&o.plugins.length)i=o.plugins["Shockwave Flash"],r(i),o.plugins["Shockwave Flash 2.0"]&&(l=!0,f="2.0.0.11");else if(o.mimeTypes&&o.mimeTypes.length)s=o.mimeTypes["application/x-shockwave-flash"],i=s&&s.enabledPlugin,r(i);else if("undefined"!=typeof e){c=!0;try{a=new e("ShockwaveFlash.ShockwaveFlash.7"),l=!0,f=t(a.GetVariable("$version"))}catch(p){try{a=new e("ShockwaveFlash.ShockwaveFlash.6"),l=!0,f="6.0.21"}catch(h){try{a=new e("ShockwaveFlash.ShockwaveFlash"),l=!0,f=t(a.GetVariable("$version"))}catch(m){c=!1}}}}E.disabled=l!==!0,E.outdated=f&&d(f)<d(L),E.version=f||"0.0.0",E.pluginType=u?"pepper":c?"activex":l?"netscape":"unknown"};Ce(c);var Se=function(){return this instanceof Se?void("function"==typeof Se._createClient&&Se._createClient.apply(this,_(arguments))):new Se};g(Se,"version",{value:"2.1.6",writable:!1,configurable:!0,enumerable:!0}),Se.config=function(){return O.apply(this,_(arguments))},Se.state=function(){return z.apply(this,_(arguments))},Se.isFlashUnusable=function(){return D.apply(this,_(arguments))},Se.on=function(){return j.apply(this,_(arguments))},Se.off=function(){return R.apply(this,_(arguments))},Se.handlers=function(){return q.apply(this,_(arguments))},Se.emit=function(){return H.apply(this,_(arguments))},Se.create=function(){return P.apply(this,_(arguments))},Se.destroy=function(){return W.apply(this,_(arguments))},Se.setData=function(){return F.apply(this,_(arguments))},Se.clearData=function(){return U.apply(this,_(arguments))},Se.getData=function(){return V.apply(this,_(arguments))},Se.focus=Se.activate=function(){return K.apply(this,_(arguments))},Se.blur=Se.deactivate=function(){return X.apply(this,_(arguments))},Se.activeElement=function(){return G.apply(this,_(arguments))};var Te=0,Me={},Ee=0,Le={},Ie={};w(B,{autoActivate:!0});var $e=function(e){var t=this;t.id=""+Te++,Me[t.id]={instance:t,elements:[],handlers:{}},e&&t.clip(e),Se.on("*",function(e){return t.emit(e)}),Se.on("destroy",function(){t.destroy()}),Se.create()},Ne=function(e,t){var n,r,i,a={},o=Me[this.id]&&Me[this.id].handlers;if("string"==typeof e&&e)i=e.toLowerCase().split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof t)for(n in e)v.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&this.on(n,e[n]);if(i&&i.length){for(n=0,r=i.length;r>n;n++)e=i[n].replace(/^on/,""),a[e]=!0,o[e]||(o[e]=[]),o[e].push(t);if(a.ready&&E.ready&&this.emit({type:"ready",client:this}),a.error){var s=["disabled","outdated","unavailable","deactivated","overdue"];for(n=0,r=s.length;r>n;n++)if(E[s[n]]){this.emit({type:"error",name:"flash-"+s[n],client:this});break}}}return this},Ae=function(e,t){var n,r,i,a,o,s=Me[this.id]&&Me[this.id].handlers;if(0===arguments.length)a=m(s);else if("string"==typeof e&&e)a=e.split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof t)for(n in e)v.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&this.off(n,e[n]);if(a&&a.length)for(n=0,r=a.length;r>n;n++)if(e=a[n].toLowerCase().replace(/^on/,""),o=s[e],o&&o.length)if(t)for(i=o.indexOf(t);-1!==i;)o.splice(i,1),i=o.indexOf(t,i);else o.length=0;return this},Be=function(e){var t=null,n=Me[this.id]&&Me[this.id].handlers;return n&&(t="string"==typeof e&&e?n[e]?n[e].slice(0):[]:x(n)),t},Oe=function(e){if(qe.call(this,e)){"object"==typeof e&&e&&"string"==typeof e.type&&e.type&&(e=w({},e));var t=w({},Z(e),{client:this});He.call(this,t)}return this},ze=function(e){e=Pe(e);for(var t=0;t<e.length;t++)if(v.call(e,t)&&e[t]&&1===e[t].nodeType){e[t].zcClippingId?-1===Le[e[t].zcClippingId].indexOf(this.id)&&Le[e[t].zcClippingId].push(this.id):(e[t].zcClippingId="zcClippingId_"+Ee++,Le[e[t].zcClippingId]=[this.id],B.autoActivate===!0&&We(e[t]));var n=Me[this.id]&&Me[this.id].elements;-1===n.indexOf(e[t])&&n.push(e[t])}return this},De=function(e){var t=Me[this.id];if(!t)return this;var n,r=t.elements;e="undefined"==typeof e?r.slice(0):Pe(e);for(var i=e.length;i--;)if(v.call(e,i)&&e[i]&&1===e[i].nodeType){for(n=0;-1!==(n=r.indexOf(e[i],n));)r.splice(n,1);var a=Le[e[i].zcClippingId];if(a){for(n=0;-1!==(n=a.indexOf(this.id,n));)a.splice(n,1);0===a.length&&(B.autoActivate===!0&&Fe(e[i]),delete e[i].zcClippingId)}}return this},je=function(){var e=Me[this.id];return e&&e.elements?e.elements.slice(0):[]},Re=function(){this.unclip(),this.off(),delete Me[this.id]},qe=function(e){if(!e||!e.type)return!1;if(e.client&&e.client!==this)return!1;var t=Me[this.id]&&Me[this.id].elements,n=!!t&&t.length>0,r=!e.target||n&&-1!==t.indexOf(e.target),i=e.relatedTarget&&n&&-1!==t.indexOf(e.relatedTarget),a=e.client&&e.client===this;return r||i||a?!0:!1},He=function(e){if("object"==typeof e&&e&&e.type){var t=ee(e),n=Me[this.id]&&Me[this.id].handlers["*"]||[],r=Me[this.id]&&Me[this.id].handlers[e.type]||[],a=n.concat(r);if(a&&a.length){var o,s,l,c,u,d=this;for(o=0,s=a.length;s>o;o++)l=a[o],c=d,"string"==typeof l&&"function"==typeof i[l]&&(l=i[l]),"object"==typeof l&&l&&"function"==typeof l.handleEvent&&(c=l,l=l.handleEvent),"function"==typeof l&&(u=w({},e),te(l,c,[u],t))}return this}},Pe=function(e){return"string"==typeof e&&(e=[]),"number"!=typeof e.length?[e]:e},We=function(e){if(e&&1===e.nodeType){var t=function(e){(e||(e=i.event))&&("js"!==e._source&&(e.stopImmediatePropagation(),e.preventDefault()),delete e._source)},n=function(n){(n||(n=i.event))&&(t(n),Se.focus(e))};e.addEventListener("mouseover",n,!1),e.addEventListener("mouseout",t,!1),e.addEventListener("mouseenter",t,!1),e.addEventListener("mouseleave",t,!1),e.addEventListener("mousemove",t,!1),Ie[e.zcClippingId]={mouseover:n,mouseout:t,mouseenter:t,mouseleave:t,mousemove:t}}},Fe=function(e){if(e&&1===e.nodeType){var t=Ie[e.zcClippingId];if("object"==typeof t&&t){for(var n,r,i=["move","leave","enter","out","over"],a=0,o=i.length;o>a;a++)n="mouse"+i[a],r=t[n],"function"==typeof r&&e.removeEventListener(n,r,!1);delete Ie[e.zcClippingId]}}};Se._createClient=function(){$e.apply(this,_(arguments))},Se.prototype.on=function(){return Ne.apply(this,_(arguments))},Se.prototype.off=function(){return Ae.apply(this,_(arguments))},Se.prototype.handlers=function(){return Be.apply(this,_(arguments))},Se.prototype.emit=function(){return Oe.apply(this,_(arguments))},Se.prototype.clip=function(){return ze.apply(this,_(arguments))},Se.prototype.unclip=function(){return De.apply(this,_(arguments))},Se.prototype.elements=function(){return je.apply(this,_(arguments))},Se.prototype.destroy=function(){return Re.apply(this,_(arguments))},Se.prototype.setText=function(e){return Se.setData("text/plain",e),this},Se.prototype.setHtml=function(e){return Se.setData("text/html",e),this},Se.prototype.setRichText=function(e){return Se.setData("application/rtf",e),this},Se.prototype.setData=function(){return Se.setData.apply(this,_(arguments)),this},Se.prototype.clearData=function(){return Se.clearData.apply(this,_(arguments)),this},Se.prototype.getData=function(){return Se.getData.apply(this,_(arguments))},"function"==typeof define&&define.amd?define("ZeroClipboard",[],function(){return Se}):"object"==typeof module&&module&&"object"==typeof module.exports&&module.exports?module.exports=Se:e.ZeroClipboard=Se}(function(){return this||window}()),function(e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else{if("function"==typeof define&&define.amd)return define("codemirror/lib/codemirror",[],e);this.CodeMirror=e()}}(function(){"use strict";function e(n,r){if(!(this instanceof e))return new e(n,r);this.options=r=r||{},ai(ba,r,!1),h(r);var i=r.value;"string"==typeof i&&(i=new Pa(i,r.mode)),this.doc=i;var a=this.display=new t(n,i);a.wrapper.CodeMirror=this,u(this),l(this),r.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),r.autofocus&&!Zi&&ht(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new Qr},qi&&11>Hi&&setTimeout(oi(pt,this,!0),20),vt(this),_i();var o=this;Ze(this,function(){o.curOp.forceUpdate=!0,yr(o,i),r.autofocus&&!Zi||hi()==a.input?setTimeout(oi(qt,o),20):Ht(o);for(var e in ya)ya.hasOwnProperty(e)&&ya[e](o,r[e],_a);for(var t=0;t<Ca.length;++t)Ca[t](o)})}function t(e,t){var n=this,r=n.input=ui("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");Pi?r.style.width="1000px":r.setAttribute("wrap","off"),Yi&&(r.style.border="1px solid black"),r.setAttribute("autocorrect","off"),r.setAttribute("autocapitalize","off"),r.setAttribute("spellcheck","false"),n.inputDiv=ui("div",[r],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),n.scrollbarH=ui("div",[ui("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar"),n.scrollbarV=ui("div",[ui("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),n.scrollbarFiller=ui("div",null,"CodeMirror-scrollbar-filler"),n.gutterFiller=ui("div",null,"CodeMirror-gutter-filler"),n.lineDiv=ui("div",null,"CodeMirror-code"),n.selectionDiv=ui("div",null,null,"position: relative; z-index: 1"),n.cursorDiv=ui("div",null,"CodeMirror-cursors"),n.measure=ui("div",null,"CodeMirror-measure"),n.lineMeasure=ui("div",null,"CodeMirror-measure"),n.lineSpace=ui("div",[n.measure,n.lineMeasure,n.selectionDiv,n.cursorDiv,n.lineDiv],null,"position: relative; outline: none"),n.mover=ui("div",[ui("div",[n.lineSpace],"CodeMirror-lines")],null,"position: relative"),n.sizer=ui("div",[n.mover],"CodeMirror-sizer"),n.heightForcer=ui("div",null,null,"position: absolute; height: "+Ja+"px; width: 1px;"),n.gutters=ui("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=ui("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=ui("div",[n.inputDiv,n.scrollbarH,n.scrollbarV,n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),qi&&8>Hi&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),Yi&&(r.style.width="0px"),Pi||(n.scroller.draggable=!0),Ki&&(n.inputDiv.style.height="1px",n.inputDiv.style.position="absolute"),qi&&8>Hi&&(n.scrollbarH.style.minHeight=n.scrollbarV.style.minWidth="18px"),e.appendChild?e.appendChild(n.wrapper):e(n.wrapper),n.viewFrom=n.viewTo=t.first,n.view=[],n.externalMeasured=null,n.viewOffset=0,n.lastSizeC=0,n.updateLineNumbers=null,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.prevInput="",n.alignWidgets=!1,n.pollingFast=!1,n.poll=new Qr,n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.inaccurateSelection=!1,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n.shift=!1,n.selForContextMenu=null}function n(t){t.doc.mode=e.getMode(t.options,t.doc.modeOption),r(t)}function r(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,ye(e,100),e.state.modeGen++,e.curOp&&rt(e)}function i(e){e.options.lineWrapping?(vi(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth=""):(gi(e.display.wrapper,"CodeMirror-wrap"),p(e)),o(e),rt(e),ze(e),setTimeout(function(){v(e)},100)}function a(e){var t=Ke(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/Xe(e.display)-3);return function(i){if(Vn(e.doc,i))return 0;var a=0;if(i.widgets)for(var o=0;o<i.widgets.length;o++)i.widgets[o].height&&(a+=i.widgets[o].height);return n?a+(Math.ceil(i.text.length/r)||1)*t:a+t}}function o(e){var t=e.doc,n=a(e);t.iter(function(e){var t=n(e);t!=e.height&&kr(e,t)})}function s(e){var t=La[e.options.keyMap],n=t.style;e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(n?" cm-keymap-"+n:"")}function l(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),ze(e)}function c(e){u(e),rt(e),setTimeout(function(){y(e)},20)}function u(e){var t=e.display.gutters,n=e.options.gutters;di(t);for(var r=0;r<n.length;++r){var i=n[r],a=t.appendChild(ui("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&(e.display.lineGutter=a,a.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=r?"":"none",d(e)}function d(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px",e.display.scrollbarH.style.left=e.options.fixedGutter?t+"px":0}function f(e){if(0==e.height)return 0;for(var t,n=e.text.length,r=e;t=Rn(r);){var i=t.find(0,!0);r=i.from.line,n+=i.from.ch-i.to.ch}for(r=e;t=qn(r);){var i=t.find(0,!0);n-=r.text.length-i.from.ch,r=i.to.line,n+=r.text.length-i.to.ch}return n}function p(e){var t=e.display,n=e.doc;t.maxLine=_r(n,n.first),t.maxLineLength=f(t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var n=f(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)})}function h(e){var t=ni(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function m(e){return e.display.scroller.clientHeight-e.display.wrapper.clientHeight<Ja-3}function g(e){var t=e.display.scroller;return{clientHeight:t.clientHeight,barHeight:e.display.scrollbarV.clientHeight,
scrollWidth:t.scrollWidth,clientWidth:t.clientWidth,hScrollbarTakesSpace:m(e),barWidth:e.display.scrollbarH.clientWidth,docHeight:Math.round(e.doc.height+Ce(e.display))}}function v(e,t){t||(t=g(e));var n=e.display,r=xi(n.measure),i=t.docHeight+Ja,a=t.scrollWidth>t.clientWidth;a&&t.scrollWidth<=t.clientWidth+1&&r>0&&!t.hScrollbarTakesSpace&&(a=!1);var o=i>t.clientHeight;if(o?(n.scrollbarV.style.display="block",n.scrollbarV.style.bottom=a?r+"px":"0",n.scrollbarV.firstChild.style.height=Math.max(0,i-t.clientHeight+(t.barHeight||n.scrollbarV.clientHeight))+"px"):(n.scrollbarV.style.display="",n.scrollbarV.firstChild.style.height="0"),a?(n.scrollbarH.style.display="block",n.scrollbarH.style.right=o?r+"px":"0",n.scrollbarH.firstChild.style.width=t.scrollWidth-t.clientWidth+(t.barWidth||n.scrollbarH.clientWidth)+"px"):(n.scrollbarH.style.display="",n.scrollbarH.firstChild.style.width="0"),a&&o?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=n.scrollbarFiller.style.width=r+"px"):n.scrollbarFiller.style.display="",a&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r+"px",n.gutterFiller.style.width=n.gutters.offsetWidth+"px"):n.gutterFiller.style.display="",!e.state.checkedOverlayScrollbar&&t.clientHeight>0){if(0===r){var s=Qi&&!Xi?"12px":"18px";n.scrollbarV.style.minWidth=n.scrollbarH.style.minHeight=s;var l=function(t){Fr(t)!=n.scrollbarV&&Fr(t)!=n.scrollbarH&&Qe(e,wt)(t)};Ga(n.scrollbarV,"mousedown",l),Ga(n.scrollbarH,"mousedown",l)}e.state.checkedOverlayScrollbar=!0}}function b(e,t,n){var r=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-ke(e));var i=n&&null!=n.bottom?n.bottom:r+e.wrapper.clientHeight,a=Sr(t,r),o=Sr(t,i);if(n&&n.ensure){var s=n.ensure.from.line,l=n.ensure.to.line;if(a>s)return{from:s,to:Sr(t,Tr(_r(t,s))+e.wrapper.clientHeight)};if(Math.min(l,t.lastLine())>=o)return{from:Sr(t,Tr(_r(t,l))-e.wrapper.clientHeight),to:l}}return{from:a,to:Math.max(o,a+1)}}function y(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=x(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,a=r+"px",o=0;o<n.length;o++)if(!n[o].hidden){e.options.fixedGutter&&n[o].gutter&&(n[o].gutter.style.left=a);var s=n[o].alignable;if(s)for(var l=0;l<s.length;l++)s[l].style.left=a}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}}function _(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=w(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(ui("div",[ui("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),a=i.firstChild.offsetWidth,o=i.offsetWidth-a;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(a,r.lineGutter.offsetWidth-o),r.lineNumWidth=r.lineNumInnerWidth+o,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",d(e),!0}return!1}function w(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function x(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function k(e,t,n){for(var r,i=e.display.viewFrom,a=e.display.viewTo,o=b(e.display,e.doc,t),s=!0;;s=!1){var l=e.display.scroller.clientWidth;if(!C(e,o,n))break;r=!0,e.display.maxLineChanged&&!e.options.lineWrapping&&S(e);var c=g(e);if(me(e),T(e,c),v(e,c),Pi&&e.options.lineWrapping&&M(e,c),Pi&&c.scrollWidth>c.clientWidth&&c.scrollWidth<c.clientWidth+1&&!m(e)&&v(e),s&&e.options.lineWrapping&&l!=e.display.scroller.clientWidth)n=!0;else if(n=!1,t&&null!=t.top&&(t={top:Math.min(c.docHeight-Ja-c.clientHeight,t.top)}),o=b(e.display,e.doc,t),o.from>=e.display.viewFrom&&o.to<=e.display.viewTo)break}return e.display.updateLineNumbers=null,r&&(Vr(e,"update",e),(e.display.viewFrom!=i||e.display.viewTo!=a)&&Vr(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo)),r}function C(e,t,n){var r=e.display,i=e.doc;if(!r.wrapper.offsetWidth)return void at(e);if(!(!n&&t.from>=r.viewFrom&&t.to<=r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo)&&0==ct(e))){_(e)&&at(e);var a=I(e),o=i.first+i.size,s=Math.max(t.from-e.options.viewportMargin,i.first),l=Math.min(o,t.to+e.options.viewportMargin);r.viewFrom<s&&s-r.viewFrom<20&&(s=Math.max(i.first,r.viewFrom)),r.viewTo>l&&r.viewTo-l<20&&(l=Math.min(o,r.viewTo)),ia&&(s=Fn(e.doc,s),l=Un(e.doc,l));var c=s!=r.viewFrom||l!=r.viewTo||r.lastSizeC!=r.wrapper.clientHeight;lt(e,s,l),r.viewOffset=Tr(_r(e.doc,r.viewFrom)),e.display.mover.style.top=r.viewOffset+"px";var u=ct(e);if(c||0!=u||n){var d=hi();return u>4&&(r.lineDiv.style.display="none"),$(e,r.updateLineNumbers,a),u>4&&(r.lineDiv.style.display=""),d&&hi()!=d&&d.offsetHeight&&d.focus(),di(r.cursorDiv),di(r.selectionDiv),c&&(r.lastSizeC=r.wrapper.clientHeight,ye(e,400)),E(e),!0}}}function S(e){var t=e.display,n=Le(e,t.maxLine,t.maxLine.text.length).left;t.maxLineChanged=!1;var r=Math.max(0,n+3),i=Math.max(0,t.sizer.offsetLeft+r+Ja-t.scroller.clientWidth);t.sizer.style.minWidth=r+"px",i<e.doc.scrollLeft&&It(e,Math.min(t.scroller.scrollLeft,i),!0)}function T(e,t){e.display.sizer.style.minHeight=e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=Math.max(t.docHeight,t.clientHeight-Ja)+"px"}function M(e,t){e.display.sizer.offsetWidth+e.display.gutters.offsetWidth<e.display.scroller.clientWidth-1&&(e.display.sizer.style.minHeight=e.display.heightForcer.style.top="0px",e.display.gutters.style.height=t.docHeight+"px")}function E(e){for(var t=e.display,n=t.lineDiv.offsetTop,r=0;r<t.view.length;r++){var i,a=t.view[r];if(!a.hidden){if(qi&&8>Hi){var o=a.node.offsetTop+a.node.offsetHeight;i=o-n,n=o}else{var s=a.node.getBoundingClientRect();i=s.bottom-s.top}var l=a.line.height-i;if(2>i&&(i=Ke(t)),(l>.001||-.001>l)&&(kr(a.line,i),L(a.line),a.rest))for(var c=0;c<a.rest.length;c++)L(a.rest[c])}}}function L(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.offsetHeight}function I(e){for(var t=e.display,n={},r={},i=t.gutters.firstChild,a=0;i;i=i.nextSibling,++a)n[e.options.gutters[a]]=i.offsetLeft,r[e.options.gutters[a]]=i.offsetWidth;return{fixedPos:x(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function $(e,t,n){function r(t){var n=t.nextSibling;return Pi&&Qi&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var i=e.display,a=e.options.lineNumbers,o=i.lineDiv,s=o.firstChild,l=i.view,c=i.viewFrom,u=0;u<l.length;u++){var d=l[u];if(d.hidden);else if(d.node){for(;s!=d.node;)s=r(s);var f=a&&null!=t&&c>=t&&d.lineNumber;d.changes&&(ni(d.changes,"gutter")>-1&&(f=!1),N(e,d,c,n)),f&&(di(d.lineNumber),d.lineNumber.appendChild(document.createTextNode(w(e.options,c)))),s=d.node.nextSibling}else{var p=q(e,d,c,n);o.insertBefore(p,s)}c+=d.size}for(;s;)s=r(s)}function N(e,t,n,r){for(var i=0;i<t.changes.length;i++){var a=t.changes[i];"text"==a?z(e,t):"gutter"==a?j(e,t,n,r):"class"==a?D(t):"widget"==a&&R(t,r)}t.changes=null}function A(e){return e.node==e.text&&(e.node=ui("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),qi&&8>Hi&&(e.node.style.zIndex=2)),e.node}function B(e){var t=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(t&&(t+=" CodeMirror-linebackground"),e.background)t?e.background.className=t:(e.background.parentNode.removeChild(e.background),e.background=null);else if(t){var n=A(e);e.background=n.insertBefore(ui("div",null,t),n.firstChild)}}function O(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):sr(e,t)}function z(e,t){var n=t.text.className,r=O(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,D(t)):n&&(t.text.className=n)}function D(e){B(e),e.line.wrapClass?A(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var t=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=t||""}function j(e,t,n,r){t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null);var i=t.line.gutterMarkers;if(e.options.lineNumbers||i){var a=A(t),o=t.gutter=a.insertBefore(ui("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px"),t.text);if(!e.options.lineNumbers||i&&i["CodeMirror-linenumbers"]||(t.lineNumber=o.appendChild(ui("div",w(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),i)for(var s=0;s<e.options.gutters.length;++s){var l=e.options.gutters[s],c=i.hasOwnProperty(l)&&i[l];c&&o.appendChild(ui("div",[c],"CodeMirror-gutter-elt","left: "+r.gutterLeft[l]+"px; width: "+r.gutterWidth[l]+"px"))}}}function R(e,t){e.alignable&&(e.alignable=null);for(var n,r=e.node.firstChild;r;r=n){var n=r.nextSibling;"CodeMirror-linewidget"==r.className&&e.node.removeChild(r)}H(e,t)}function q(e,t,n,r){var i=O(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),D(t),j(e,t,n,r),H(t,r),t.node}function H(e,t){if(P(e.line,e,t,!0),e.rest)for(var n=0;n<e.rest.length;n++)P(e.rest[n],e,t,!1)}function P(e,t,n,r){if(e.widgets)for(var i=A(t),a=0,o=e.widgets;a<o.length;++a){var s=o[a],l=ui("div",[s.node],"CodeMirror-linewidget");s.handleMouseEvents||(l.ignoreEvents=!0),W(s,l,t,n),r&&s.above?i.insertBefore(l,t.gutter||t.text):i.appendChild(l),Vr(s,"redraw")}}function W(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function F(e){return aa(e.line,e.ch)}function U(e,t){return oa(e,t)<0?t:e}function V(e,t){return oa(e,t)<0?e:t}function K(e,t){this.ranges=e,this.primIndex=t}function X(e,t){this.anchor=e,this.head=t}function G(e,t){var n=e[t];e.sort(function(e,t){return oa(e.from(),t.from())}),t=ni(e,n);for(var r=1;r<e.length;r++){var i=e[r],a=e[r-1];if(oa(a.to(),i.from())>=0){var o=V(a.from(),i.from()),s=U(a.to(),i.to()),l=a.empty()?i.from()==i.head:a.from()==a.head;t>=r&&--t,e.splice(--r,2,new X(l?s:o,l?o:s))}}return new K(e,t)}function Y(e,t){return new K([new X(e,t||e)],0)}function Z(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Q(e,t){if(t.line<e.first)return aa(e.first,0);var n=e.first+e.size-1;return t.line>n?aa(n,_r(e,n).text.length):J(t,_r(e,t.line).text.length)}function J(e,t){var n=e.ch;return null==n||n>t?aa(e.line,t):0>n?aa(e.line,0):e}function ee(e,t){return t>=e.first&&t<e.first+e.size}function te(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=Q(e,t[r]);return n}function ne(e,t,n,r){if(e.cm&&e.cm.display.shift||e.extend){var i=t.anchor;if(r){var a=oa(n,i)<0;a!=oa(r,i)<0?(i=n,n=r):a!=oa(n,r)<0&&(n=r)}return new X(i,n)}return new X(r||n,n)}function re(e,t,n,r){ce(e,new K([ne(e,e.sel.primary(),t,n)],0),r)}function ie(e,t,n){for(var r=[],i=0;i<e.sel.ranges.length;i++)r[i]=ne(e,e.sel.ranges[i],t[i],null);var a=G(r,e.sel.primIndex);ce(e,a,n)}function ae(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,ce(e,G(i,e.sel.primIndex),r)}function oe(e,t,n,r){ce(e,Y(t,n),r)}function se(e,t){var n={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new X(Q(e,t[n].anchor),Q(e,t[n].head))}};return Za(e,"beforeSelectionChange",e,n),e.cm&&Za(e.cm,"beforeSelectionChange",e.cm,n),n.ranges!=t.ranges?G(n.ranges,n.ranges.length-1):t}function le(e,t,n){var r=e.history.done,i=ti(r);i&&i.ranges?(r[r.length-1]=t,ue(e,t,n)):ce(e,t,n)}function ce(e,t,n){ue(e,t,n),Br(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function ue(e,t,n){(Yr(e,"beforeSelectionChange")||e.cm&&Yr(e.cm,"beforeSelectionChange"))&&(t=se(e,t));var r=n&&n.bias||(oa(t.primary().head,e.sel.primary().head)<0?-1:1);de(e,pe(e,t,r,!0)),n&&n.scroll===!1||!e.cm||ln(e.cm)}function de(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,Gr(e.cm)),Vr(e,"cursorActivity",e))}function fe(e){de(e,pe(e,e.sel,null,!1),to)}function pe(e,t,n,r){for(var i,a=0;a<t.ranges.length;a++){var o=t.ranges[a],s=he(e,o.anchor,n,r),l=he(e,o.head,n,r);(i||s!=o.anchor||l!=o.head)&&(i||(i=t.ranges.slice(0,a)),i[a]=new X(s,l))}return i?G(i,t.primIndex):t}function he(e,t,n,r){var i=!1,a=t,o=n||1;e.cantEdit=!1;e:for(;;){var s=_r(e,a.line);if(s.markedSpans)for(var l=0;l<s.markedSpans.length;++l){var c=s.markedSpans[l],u=c.marker;if((null==c.from||(u.inclusiveLeft?c.from<=a.ch:c.from<a.ch))&&(null==c.to||(u.inclusiveRight?c.to>=a.ch:c.to>a.ch))){if(r&&(Za(u,"beforeCursorEnter"),u.explicitlyCleared)){if(s.markedSpans){--l;continue}break}if(!u.atomic)continue;var d=u.find(0>o?-1:1);if(0==oa(d,a)&&(d.ch+=o,d.ch<0?d=d.line>e.first?Q(e,aa(d.line-1)):null:d.ch>s.text.length&&(d=d.line<e.first+e.size-1?aa(d.line+1,0):null),!d)){if(i)return r?(e.cantEdit=!0,aa(e.first,0)):he(e,t,n,!0);i=!0,d=t,o=-o}a=d;continue e}}return a}}function me(e){for(var t=e.display,n=e.doc,r=document.createDocumentFragment(),i=document.createDocumentFragment(),a=0;a<n.sel.ranges.length;a++){var o=n.sel.ranges[a],s=o.empty();(s||e.options.showCursorWhenSelecting)&&ge(e,o,r),s||ve(e,o,i)}if(e.options.moveInputWithCursor){var l=Pe(e,n.sel.primary().head,"div"),c=t.wrapper.getBoundingClientRect(),u=t.lineDiv.getBoundingClientRect(),d=Math.max(0,Math.min(t.wrapper.clientHeight-10,l.top+u.top-c.top)),f=Math.max(0,Math.min(t.wrapper.clientWidth-10,l.left+u.left-c.left));t.inputDiv.style.top=d+"px",t.inputDiv.style.left=f+"px"}fi(t.cursorDiv,r),fi(t.selectionDiv,i)}function ge(e,t,n){var r=Pe(e,t.head,"div",null,null,!e.options.singleCursorHeightPerLine),i=n.appendChild(ui("div"," ","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",r.other){var a=n.appendChild(ui("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));a.style.display="",a.style.left=r.other.left+"px",a.style.top=r.other.top+"px",a.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function ve(e,t,n){function r(e,t,n,r){0>t&&(t=0),t=Math.round(t),r=Math.round(r),s.appendChild(ui("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==n?u-e:n)+"px; height: "+(r-t)+"px"))}function i(t,n,i){function a(n,r){return He(e,aa(t,n),"div",d,r)}var s,l,d=_r(o,t),f=d.text.length;return Si(Mr(d),n||0,null==i?f:i,function(e,t,o){var d,p,h,m=a(e,"left");if(e==t)d=m,p=h=m.left;else{if(d=a(t-1,"right"),"rtl"==o){var g=m;m=d,d=g}p=m.left,h=d.right}null==n&&0==e&&(p=c),d.top-m.top>3&&(r(p,m.top,null,m.bottom),p=c,m.bottom<d.top&&r(p,m.bottom,null,d.top)),null==i&&t==f&&(h=u),(!s||m.top<s.top||m.top==s.top&&m.left<s.left)&&(s=m),(!l||d.bottom>l.bottom||d.bottom==l.bottom&&d.right>l.right)&&(l=d),c+1>p&&(p=c),r(p,d.top,h-p,d.bottom)}),{start:s,end:l}}var a=e.display,o=e.doc,s=document.createDocumentFragment(),l=Se(e.display),c=l.left,u=a.lineSpace.offsetWidth-l.right,d=t.from(),f=t.to();if(d.line==f.line)i(d.line,d.ch,f.ch);else{var p=_r(o,d.line),h=_r(o,f.line),m=Pn(p)==Pn(h),g=i(d.line,d.ch,m?p.text.length+1:null).end,v=i(f.line,m?0:null,f.ch).start;m&&(g.top<v.top-2?(r(g.right,g.top,null,g.bottom),r(c,v.top,v.left,v.bottom)):r(g.right,g.top,v.left-g.right,g.bottom)),g.bottom<v.top&&r(c,g.bottom,null,v.top)}n.appendChild(s)}function be(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function ye(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,oi(_e,e))}function _e(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,r=Ta(t.mode,xe(e,t.frontier));Ze(e,function(){t.iter(t.frontier,Math.min(t.first+t.size,e.display.viewTo+500),function(i){if(t.frontier>=e.display.viewFrom){var a=i.styles,o=rr(e,i,r,!0);i.styles=o.styles;var s=i.styleClasses,l=o.classes;l?i.styleClasses=l:s&&(i.styleClasses=null);for(var c=!a||a.length!=i.styles.length||s!=l&&(!s||!l||s.bgClass!=l.bgClass||s.textClass!=l.textClass),u=0;!c&&u<a.length;++u)c=a[u]!=i.styles[u];c&&it(e,t.frontier,"text"),i.stateAfter=Ta(t.mode,r)}else ar(e,i.text,r),i.stateAfter=t.frontier%5==0?Ta(t.mode,r):null;return++t.frontier,+new Date>n?(ye(e,e.options.workDelay),!0):void 0})})}}function we(e,t,n){for(var r,i,a=e.doc,o=n?-1:t-(e.doc.mode.innerMode?1e3:100),s=t;s>o;--s){if(s<=a.first)return a.first;var l=_r(a,s-1);if(l.stateAfter&&(!n||s<=a.frontier))return s;var c=io(l.text,null,e.options.tabSize);(null==i||r>c)&&(i=s-1,r=c)}return i}function xe(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return!0;var a=we(e,t,n),o=a>r.first&&_r(r,a-1).stateAfter;return o=o?Ta(r.mode,o):Ma(r.mode),r.iter(a,t,function(n){ar(e,n.text,o);var s=a==t-1||a%5==0||a>=i.viewFrom&&a<i.viewTo;n.stateAfter=s?Ta(r.mode,o):null,++a}),n&&(r.frontier=a),o}function ke(e){return e.lineSpace.offsetTop}function Ce(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Se(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=fi(e.measure,ui("pre","x")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(e.cachedPaddingH=r),r}function Te(e,t,n){var r=e.options.lineWrapping,i=r&&e.display.scroller.clientWidth;if(!t.measure.heights||r&&t.measure.width!=i){var a=t.measure.heights=[];if(r){t.measure.width=i;for(var o=t.text.firstChild.getClientRects(),s=0;s<o.length-1;s++){var l=o[s],c=o[s+1];Math.abs(l.bottom-c.bottom)>2&&a.push((l.bottom+c.top)/2-n.top)}}a.push(n.bottom-n.top)}}function Me(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var r=0;r<e.rest.length;r++)if(Cr(e.rest[r])>n)return{map:e.measure.maps[r],cache:e.measure.caches[r],before:!0}}function Ee(e,t){t=Pn(t);var n=Cr(t),r=e.display.externalMeasured=new tt(e.doc,t,n);r.lineN=n;var i=r.built=sr(e,r);return r.text=i.pre,fi(e.display.lineMeasure,i.pre),r}function Le(e,t,n,r){return Ne(e,$e(e,t),n,r)}function Ie(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[ot(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function $e(e,t){var n=Cr(t),r=Ie(e,n);r&&!r.text?r=null:r&&r.changes&&N(e,r,n,I(e)),r||(r=Ee(e,t));var i=Me(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function Ne(e,t,n,r,i){t.before&&(n=-1);var a,o=n+(r||"");return t.cache.hasOwnProperty(o)?a=t.cache[o]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(Te(e,t.view,t.rect),t.hasHeights=!0),a=Ae(e,t,n,r),a.bogus||(t.cache[o]=a)),{left:a.left,right:a.right,top:i?a.rtop:a.top,bottom:i?a.rbottom:a.bottom}}function Ae(e,t,n,r){for(var i,a,o,s,l=t.map,c=0;c<l.length;c+=3){var u=l[c],d=l[c+1];if(u>n?(a=0,o=1,s="left"):d>n?(a=n-u,o=a+1):(c==l.length-3||n==d&&l[c+3]>n)&&(o=d-u,a=o-1,n>=d&&(s="right")),null!=a){if(i=l[c+2],u==d&&r==(i.insertLeft?"left":"right")&&(s=r),"left"==r&&0==a)for(;c&&l[c-2]==l[c-3]&&l[c-1].insertLeft;)i=l[(c-=3)+2],s="left";if("right"==r&&a==d-u)for(;c<l.length-3&&l[c+3]==l[c+4]&&!l[c+5].insertLeft;)i=l[(c+=3)+2],s="right";break}}var f;if(3==i.nodeType){for(;a&&ci(t.line.text.charAt(u+a));)--a;for(;d>u+o&&ci(t.line.text.charAt(u+o));)++o;if(qi&&9>Hi&&0==a&&o==d-u)f=i.parentNode.getBoundingClientRect();else if(qi&&e.options.lineWrapping){var p=so(i,a,o).getClientRects();f=p.length?p["right"==r?p.length-1:0]:ua}else f=so(i,a,o).getBoundingClientRect()||ua}else{a>0&&(s=r="right");var p;f=e.options.lineWrapping&&(p=i.getClientRects()).length>1?p["right"==r?p.length-1:0]:i.getBoundingClientRect()}if(qi&&9>Hi&&!a&&(!f||!f.left&&!f.right)){var h=i.parentNode.getClientRects()[0];f=h?{left:h.left,right:h.left+Xe(e.display),top:h.top,bottom:h.bottom}:ua}for(var m=f.top-t.rect.top,g=f.bottom-t.rect.top,v=(m+g)/2,b=t.view.measure.heights,c=0;c<b.length-1&&!(v<b[c]);c++);var y=c?b[c-1]:0,_=b[c],w={left:("right"==s?f.right:f.left)-t.rect.left,right:("left"==s?f.left:f.right)-t.rect.left,top:y,bottom:_};return f.left||f.right||(w.bogus=!0),e.options.singleCursorHeightPerLine||(w.rtop=m,w.rbottom=g),w}function Be(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Oe(e){e.display.externalMeasure=null,di(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Be(e.display.view[t])}function ze(e){Oe(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function De(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function je(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function Re(e,t,n,r){if(t.widgets)for(var i=0;i<t.widgets.length;++i)if(t.widgets[i].above){var a=Gn(t.widgets[i]);n.top+=a,n.bottom+=a}if("line"==r)return n;r||(r="local");var o=Tr(t);if("local"==r?o+=ke(e.display):o-=e.display.viewOffset,"page"==r||"window"==r){var s=e.display.lineSpace.getBoundingClientRect();o+=s.top+("window"==r?0:je());var l=s.left+("window"==r?0:De());n.left+=l,n.right+=l}return n.top+=o,n.bottom+=o,n}function qe(e,t,n){if("div"==n)return t;var r=t.left,i=t.top;if("page"==n)r-=De(),i-=je();else if("local"==n||!n){var a=e.display.sizer.getBoundingClientRect();r+=a.left,i+=a.top}var o=e.display.lineSpace.getBoundingClientRect();return{left:r-o.left,top:i-o.top}}function He(e,t,n,r,i){return r||(r=_r(e.doc,t.line)),Re(e,r,Le(e,r,t.ch,i),n)}function Pe(e,t,n,r,i,a){function o(t,o){var s=Ne(e,i,t,o?"right":"left",a);return o?s.left=s.right:s.right=s.left,Re(e,r,s,n)}function s(e,t){var n=l[t],r=n.level%2;return e==Ti(n)&&t&&n.level<l[t-1].level?(n=l[--t],e=Mi(n)-(n.level%2?0:1),r=!0):e==Mi(n)&&t<l.length-1&&n.level<l[t+1].level&&(n=l[++t],e=Ti(n)-n.level%2,r=!1),r&&e==n.to&&e>n.from?o(e-1):o(e,r)}r=r||_r(e.doc,t.line),i||(i=$e(e,r));var l=Mr(r),c=t.ch;if(!l)return o(c);var u=Ai(l,c),d=s(c,u);return null!=wo&&(d.other=s(c,wo)),d}function We(e,t){var n=0,t=Q(e.doc,t);e.options.lineWrapping||(n=Xe(e.display)*t.ch);var r=_r(e.doc,t.line),i=Tr(r)+ke(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function Fe(e,t,n,r){var i=aa(e,t);return i.xRel=r,n&&(i.outside=!0),i}function Ue(e,t,n){var r=e.doc;if(n+=e.display.viewOffset,0>n)return Fe(r.first,0,!0,-1);var i=Sr(r,n),a=r.first+r.size-1;if(i>a)return Fe(r.first+r.size-1,_r(r,a).text.length,!0,1);0>t&&(t=0);for(var o=_r(r,i);;){var s=Ve(e,o,i,t,n),l=qn(o),c=l&&l.find(0,!0);if(!l||!(s.ch>c.from.ch||s.ch==c.from.ch&&s.xRel>0))return s;i=Cr(o=c.to.line)}}function Ve(e,t,n,r,i){function a(r){var i=Pe(e,aa(n,r),"line",t,c);return s=!0,o>i.bottom?i.left-l:o<i.top?i.left+l:(s=!1,i.left)}var o=i-Tr(t),s=!1,l=2*e.display.wrapper.clientWidth,c=$e(e,t),u=Mr(t),d=t.text.length,f=Ei(t),p=Li(t),h=a(f),m=s,g=a(p),v=s;if(r>g)return Fe(n,p,v,1);for(;;){if(u?p==f||p==Oi(t,f,1):1>=p-f){for(var b=h>r||g-r>=r-h?f:p,y=r-(b==f?h:g);ci(t.text.charAt(b));)++b;var _=Fe(n,b,b==f?m:v,-1>y?-1:y>1?1:0);return _}var w=Math.ceil(d/2),x=f+w;if(u){x=f;for(var k=0;w>k;++k)x=Oi(t,x,1)}var C=a(x);C>r?(p=x,g=C,(v=s)&&(g+=1e3),d=w):(f=x,h=C,m=s,d-=w)}}function Ke(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==sa){sa=ui("pre");for(var t=0;49>t;++t)sa.appendChild(document.createTextNode("x")),sa.appendChild(ui("br"));sa.appendChild(document.createTextNode("x"))}fi(e.measure,sa);var n=sa.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),di(e.measure),n||1}function Xe(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=ui("span","xxxxxxxxxx"),n=ui("pre",[t]);fi(e.measure,n);var r=t.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function Ge(e){e.curOp={viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++da},Qa++||(Ua=[])}function Ye(e){var t=e.curOp,n=e.doc,r=e.display;if(e.curOp=null,t.updateMaxLine&&p(e),t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<r.viewFrom||t.scrollToPos.to.line>=r.viewTo)||r.maxLineChanged&&e.options.lineWrapping){var i=k(e,{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate);e.display.scroller.offsetHeight&&(e.doc.scrollTop=e.display.scroller.scrollTop)}if(!i&&t.selectionChanged&&me(e),i||t.startHeight==e.doc.height||v(e),null==r.wheelStartX||null==t.scrollTop&&null==t.scrollLeft&&!t.scrollToPos||(r.wheelStartX=r.wheelStartY=null),null!=t.scrollTop&&r.scroller.scrollTop!=t.scrollTop){var a=Math.max(0,Math.min(r.scroller.scrollHeight-r.scroller.clientHeight,t.scrollTop));r.scroller.scrollTop=r.scrollbarV.scrollTop=n.scrollTop=a}if(null!=t.scrollLeft&&r.scroller.scrollLeft!=t.scrollLeft){var o=Math.max(0,Math.min(r.scroller.scrollWidth-r.scroller.clientWidth,t.scrollLeft));r.scroller.scrollLeft=r.scrollbarH.scrollLeft=n.scrollLeft=o,y(e)}if(t.scrollToPos){var s=rn(e,Q(e.doc,t.scrollToPos.from),Q(e.doc,t.scrollToPos.to),t.scrollToPos.margin);t.scrollToPos.isCursor&&e.state.focused&&nn(e,s)}t.selectionChanged&&be(e),e.state.focused&&t.updateInput&&pt(e,t.typing);var l=t.maybeHiddenMarkers,c=t.maybeUnhiddenMarkers;if(l)for(var u=0;u<l.length;++u)l[u].lines.length||Za(l[u],"hide");if(c)for(var u=0;u<c.length;++u)c[u].lines.length&&Za(c[u],"unhide");var d;if(--Qa||(d=Ua,Ua=null),t.changeObjs&&Za(e,"changes",e,t.changeObjs),d)for(var u=0;u<d.length;++u)d[u]();if(t.cursorActivityHandlers)for(var u=0;u<t.cursorActivityHandlers.length;u++)t.cursorActivityHandlers[u](e)}function Ze(e,t){if(e.curOp)return t();Ge(e);try{return t()}finally{Ye(e)}}function Qe(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Ge(e);try{return t.apply(e,arguments)}finally{Ye(e)}}}function Je(e){return function(){if(this.curOp)return e.apply(this,arguments);Ge(this);try{return e.apply(this,arguments)}finally{Ye(this)}}}function et(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Ge(t);try{return e.apply(this,arguments)}finally{Ye(t)}}}function tt(e,t,n){this.line=t,this.rest=Wn(t),this.size=this.rest?Cr(ti(this.rest))-n+1:1,this.node=this.text=null,this.hidden=Vn(e,t)}function nt(e,t,n){for(var r,i=[],a=t;n>a;a=r){var o=new tt(e.doc,_r(e.doc,a),a);r=a+o.size,i.push(o)}return i}function rt(e,t,n,r){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),r||(r=0);var i=e.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)ia&&Fn(e.doc,t)<i.viewTo&&at(e);else if(n<=i.viewFrom)ia&&Un(e.doc,n+r)>i.viewFrom?at(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)at(e);else if(t<=i.viewFrom){var a=st(e,n,n+r,1);a?(i.view=i.view.slice(a.index),i.viewFrom=a.lineN,i.viewTo+=r):at(e)}else if(n>=i.viewTo){var a=st(e,t,t,-1);a?(i.view=i.view.slice(0,a.index),i.viewTo=a.lineN):at(e)}else{var o=st(e,t,t,-1),s=st(e,n,n+r,1);o&&s?(i.view=i.view.slice(0,o.index).concat(nt(e,o.lineN,s.lineN)).concat(i.view.slice(s.index)),i.viewTo+=r):at(e)}var l=i.externalMeasured;l&&(n<l.lineN?l.lineN+=r:t<l.lineN+l.size&&(i.externalMeasured=null))}function it(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var a=r.view[ot(e,t)];if(null!=a.node){var o=a.changes||(a.changes=[]);-1==ni(o,n)&&o.push(n)}}}function at(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function ot(e,t){if(t>=e.display.viewTo)return null;if(t-=e.display.viewFrom,0>t)return null;for(var n=e.display.view,r=0;r<n.length;r++)if(t-=n[r].size,0>t)return r}function st(e,t,n,r){var i,a=ot(e,t),o=e.display.view;if(!ia||n==e.doc.first+e.doc.size)return{index:a,lineN:n};for(var s=0,l=e.display.viewFrom;a>s;s++)l+=o[s].size;if(l!=t){if(r>0){if(a==o.length-1)return null;i=l+o[a].size-t,a++}else i=l-t;t+=i,n+=i}for(;Fn(e.doc,n)!=n;){if(a==(0>r?0:o.length-1))return null;n+=r*o[a-(0>r?1:0)].size,a+=r}return{index:a,lineN:n}}function lt(e,t,n){var r=e.display,i=r.view;0==i.length||t>=r.viewTo||n<=r.viewFrom?(r.view=nt(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=nt(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(ot(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(nt(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,ot(e,n)))),r.viewTo=n}function ct(e){for(var t=e.display.view,n=0,r=0;r<t.length;r++){var i=t[r];i.hidden||i.node&&!i.changes||++n}return n}function ut(e){e.display.pollingFast||e.display.poll.set(e.options.pollInterval,function(){ft(e),e.state.focused&&ut(e)})}function dt(e){function t(){var r=ft(e);r||n?(e.display.pollingFast=!1,ut(e)):(n=!0,e.display.poll.set(60,t))}var n=!1;e.display.pollingFast=!0,e.display.poll.set(20,t)}function ft(e){var t=e.display.input,n=e.display.prevInput,r=e.doc;if(!e.state.focused||bo(t)&&!n||gt(e)||e.options.disableInput)return!1;e.state.pasteIncoming&&e.state.fakedLastChar&&(t.value=t.value.substring(0,t.value.length-1),e.state.fakedLastChar=!1);var i=t.value;if(i==n&&!e.somethingSelected())return!1;if(qi&&Hi>=9&&e.display.inputHasSelection===i)return pt(e),!1;var a=!e.curOp;a&&Ge(e),e.display.shift=!1,8203!=i.charCodeAt(0)||r.sel!=e.display.selForContextMenu||n||(n="​");for(var o=0,s=Math.min(n.length,i.length);s>o&&n.charCodeAt(o)==i.charCodeAt(o);)++o;for(var l=i.slice(o),c=vo(l),u=e.state.pasteIncoming&&c.length>1&&r.sel.ranges.length==c.length,d=r.sel.ranges.length-1;d>=0;d--){var f=r.sel.ranges[d],p=f.from(),h=f.to();o<n.length?p=aa(p.line,p.ch-(n.length-o)):e.state.overwrite&&f.empty()&&!e.state.pasteIncoming&&(h=aa(h.line,Math.min(_r(r,h.line).text.length,h.ch+ti(c).length)));var m=e.curOp.updateInput,g={from:p,to:h,text:u?[c[d]]:c,origin:e.state.pasteIncoming?"paste":e.state.cutIncoming?"cut":"+input"};if(Gt(e.doc,g),Vr(e,"inputRead",e,g),l&&!e.state.pasteIncoming&&e.options.electricChars&&e.options.smartIndent&&f.head.ch<100&&(!d||r.sel.ranges[d-1].head.line!=f.head.line)){var v=e.getModeAt(f.head);if(v.electricChars){for(var b=0;b<v.electricChars.length;b++)if(l.indexOf(v.electricChars.charAt(b))>-1){un(e,f.head.line,"smart");break}}else if(v.electricInput){var y=va(g);v.electricInput.test(_r(r,y.line).text.slice(0,y.ch))&&un(e,f.head.line,"smart")}}}return ln(e),e.curOp.updateInput=m,e.curOp.typing=!0,i.length>1e3||i.indexOf("\n")>-1?t.value=e.display.prevInput="":e.display.prevInput=i,a&&Ye(e),e.state.pasteIncoming=e.state.cutIncoming=!1,!0}function pt(e,t){var n,r,i=e.doc;if(e.somethingSelected()){e.display.prevInput="";var a=i.sel.primary();n=yo&&(a.to().line-a.from().line>100||(r=e.getSelection()).length>1e3);var o=n?"-":r||e.getSelection();e.display.input.value=o,e.state.focused&&oo(e.display.input),qi&&Hi>=9&&(e.display.inputHasSelection=o)}else t||(e.display.prevInput=e.display.input.value="",qi&&Hi>=9&&(e.display.inputHasSelection=null));e.display.inaccurateSelection=n}function ht(e){"nocursor"==e.options.readOnly||Zi&&hi()==e.display.input||e.display.input.focus()}function mt(e){e.state.focused||(ht(e),qt(e))}function gt(e){return e.options.readOnly||e.doc.cantEdit}function vt(e){function t(){e.state.focused&&setTimeout(oi(ht,e),0)}function n(t){Xr(e,t)||Xa(t);
}function r(t){if(e.somethingSelected())i.inaccurateSelection&&(i.prevInput="",i.inaccurateSelection=!1,i.input.value=e.getSelection(),oo(i.input));else{for(var n="",r=[],a=0;a<e.doc.sel.ranges.length;a++){var o=e.doc.sel.ranges[a].head.line,s={anchor:aa(o,0),head:aa(o+1,0)};r.push(s),n+=e.getRange(s.anchor,s.head)}"cut"==t.type?e.setSelections(r,null,to):(i.prevInput="",i.input.value=n,oo(i.input))}"cut"==t.type&&(e.state.cutIncoming=!0)}var i=e.display;Ga(i.scroller,"mousedown",Qe(e,wt)),qi&&11>Hi?Ga(i.scroller,"dblclick",Qe(e,function(t){if(!Xr(e,t)){var n=_t(e,t);if(n&&!Tt(e,t)&&!yt(e.display,t)){Va(t);var r=mn(e,n);re(e.doc,r.anchor,r.head)}}})):Ga(i.scroller,"dblclick",function(t){Xr(e,t)||Va(t)}),Ga(i.lineSpace,"selectstart",function(e){yt(i,e)||Va(e)}),na||Ga(i.scroller,"contextmenu",function(t){Pt(e,t)}),Ga(i.scroller,"scroll",function(){i.scroller.clientHeight&&(Lt(e,i.scroller.scrollTop),It(e,i.scroller.scrollLeft,!0),Za(e,"scroll",e))}),Ga(i.scrollbarV,"scroll",function(){i.scroller.clientHeight&&Lt(e,i.scrollbarV.scrollTop)}),Ga(i.scrollbarH,"scroll",function(){i.scroller.clientHeight&&It(e,i.scrollbarH.scrollLeft)}),Ga(i.scroller,"mousewheel",function(t){$t(e,t)}),Ga(i.scroller,"DOMMouseScroll",function(t){$t(e,t)}),Ga(i.scrollbarH,"mousedown",t),Ga(i.scrollbarV,"mousedown",t),Ga(i.wrapper,"scroll",function(){i.wrapper.scrollTop=i.wrapper.scrollLeft=0}),Ga(i.input,"keyup",Qe(e,jt)),Ga(i.input,"input",function(){qi&&Hi>=9&&e.display.inputHasSelection&&(e.display.inputHasSelection=null),dt(e)}),Ga(i.input,"keydown",Qe(e,zt)),Ga(i.input,"keypress",Qe(e,Rt)),Ga(i.input,"focus",oi(qt,e)),Ga(i.input,"blur",oi(Ht,e)),e.options.dragDrop&&(Ga(i.scroller,"dragstart",function(t){Et(e,t)}),Ga(i.scroller,"dragenter",n),Ga(i.scroller,"dragover",n),Ga(i.scroller,"drop",Qe(e,Mt))),Ga(i.scroller,"paste",function(t){yt(i,t)||(e.state.pasteIncoming=!0,ht(e),dt(e))}),Ga(i.input,"paste",function(){if(Pi&&!e.state.fakedLastChar&&!(new Date-e.state.lastMiddleDown<200)){var t=i.input.selectionStart,n=i.input.selectionEnd;i.input.value+="$",i.input.selectionEnd=n,i.input.selectionStart=t,e.state.fakedLastChar=!0}e.state.pasteIncoming=!0,dt(e)}),Ga(i.input,"cut",r),Ga(i.input,"copy",r),Ki&&Ga(i.sizer,"mouseup",function(){hi()==i.input&&i.input.blur(),ht(e)})}function bt(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,e.setSize()}function yt(e,t){for(var n=Fr(t);n!=e.wrapper;n=n.parentNode)if(!n||n.ignoreEvents||n.parentNode==e.sizer&&n!=e.mover)return!0}function _t(e,t,n,r){var i=e.display;if(!n){var a=Fr(t);if(a==i.scrollbarH||a==i.scrollbarV||a==i.scrollbarFiller||a==i.gutterFiller)return null}var o,s,l=i.lineSpace.getBoundingClientRect();try{o=t.clientX-l.left,s=t.clientY-l.top}catch(t){return null}var c,u=Ue(e,o,s);if(r&&1==u.xRel&&(c=_r(e.doc,u.line).text).length==u.ch){var d=io(c,c.length,e.options.tabSize)-c.length;u=aa(u.line,Math.max(0,Math.round((o-Se(e.display).left)/Xe(e.display))-d))}return u}function wt(e){if(!Xr(this,e)){var t=this,n=t.display;if(n.shift=e.shiftKey,yt(n,e))return void(Pi||(n.scroller.draggable=!1,setTimeout(function(){n.scroller.draggable=!0},100)));if(!Tt(t,e)){var r=_t(t,e);switch(window.focus(),Ur(e)){case 1:r?xt(t,e,r):Fr(e)==n.scroller&&Va(e);break;case 2:Pi&&(t.state.lastMiddleDown=+new Date),r&&re(t.doc,r),setTimeout(oi(ht,t),20),Va(e);break;case 3:na&&Pt(t,e)}}}}function xt(e,t,n){setTimeout(oi(mt,e),0);var r,i=+new Date;ca&&ca.time>i-400&&0==oa(ca.pos,n)?r="triple":la&&la.time>i-400&&0==oa(la.pos,n)?(r="double",ca={time:i,pos:n}):(r="single",la={time:i,pos:n});var a=e.doc.sel,o=Qi?t.metaKey:t.ctrlKey;e.options.dragDrop&&go&&!gt(e)&&"single"==r&&a.contains(n)>-1&&a.somethingSelected()?kt(e,t,n,o):Ct(e,t,n,r,o)}function kt(e,t,n,r){var i=e.display,a=Qe(e,function(o){Pi&&(i.scroller.draggable=!1),e.state.draggingText=!1,Ya(document,"mouseup",a),Ya(i.scroller,"drop",a),Math.abs(t.clientX-o.clientX)+Math.abs(t.clientY-o.clientY)<10&&(Va(o),r||re(e.doc,n),ht(e),qi&&9==Hi&&setTimeout(function(){document.body.focus(),ht(e)},20))});Pi&&(i.scroller.draggable=!0),e.state.draggingText=a,i.scroller.dragDrop&&i.scroller.dragDrop(),Ga(document,"mouseup",a),Ga(i.scroller,"drop",a)}function Ct(e,t,n,r,i){function a(t){if(0!=oa(m,t))if(m=t,"rect"==r){for(var i=[],a=e.options.tabSize,o=io(_r(c,n.line).text,n.ch,a),s=io(_r(c,t.line).text,t.ch,a),l=Math.min(o,s),p=Math.max(o,s),h=Math.min(n.line,t.line),g=Math.min(e.lastLine(),Math.max(n.line,t.line));g>=h;h++){var v=_r(c,h).text,b=Jr(v,l,a);l==p?i.push(new X(aa(h,b),aa(h,b))):v.length>b&&i.push(new X(aa(h,b),aa(h,Jr(v,p,a))))}i.length||i.push(new X(n,n)),ce(c,G(f.ranges.slice(0,d).concat(i),d),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var y=u,_=y.anchor,w=t;if("single"!=r){if("double"==r)var x=mn(e,t);else var x=new X(aa(t.line,0),Q(c,aa(t.line+1,0)));oa(x.anchor,_)>0?(w=x.head,_=V(y.from(),x.anchor)):(w=x.anchor,_=U(y.to(),x.head))}var i=f.ranges.slice(0);i[d]=new X(Q(c,_),w),ce(c,G(i,d),no)}}function o(t){var n=++v,i=_t(e,t,!0,"rect"==r);if(i)if(0!=oa(i,m)){mt(e),a(i);var s=b(l,c);(i.line>=s.to||i.line<s.from)&&setTimeout(Qe(e,function(){v==n&&o(t)}),150)}else{var u=t.clientY<g.top?-20:t.clientY>g.bottom?20:0;u&&setTimeout(Qe(e,function(){v==n&&(l.scroller.scrollTop+=u,o(t))}),50)}}function s(t){v=1/0,Va(t),ht(e),Ya(document,"mousemove",y),Ya(document,"mouseup",_),c.history.lastSelOrigin=null}var l=e.display,c=e.doc;Va(t);var u,d,f=c.sel;if(i&&!t.shiftKey?(d=c.sel.contains(n),u=d>-1?c.sel.ranges[d]:new X(n,n)):u=c.sel.primary(),t.altKey)r="rect",i||(u=new X(n,n)),n=_t(e,t,!0,!0),d=-1;else if("double"==r){var p=mn(e,n);u=e.display.shift||c.extend?ne(c,u,p.anchor,p.head):p}else if("triple"==r){var h=new X(aa(n.line,0),Q(c,aa(n.line+1,0)));u=e.display.shift||c.extend?ne(c,u,h.anchor,h.head):h}else u=ne(c,u,n);i?d>-1?ae(c,d,u,no):(d=c.sel.ranges.length,ce(c,G(c.sel.ranges.concat([u]),d),{scroll:!1,origin:"*mouse"})):(d=0,ce(c,new K([u],0),no),f=c.sel);var m=n,g=l.wrapper.getBoundingClientRect(),v=0,y=Qe(e,function(e){Ur(e)?o(e):s(e)}),_=Qe(e,s);Ga(document,"mousemove",y),Ga(document,"mouseup",_)}function St(e,t,n,r,i){try{var a=t.clientX,o=t.clientY}catch(t){return!1}if(a>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&Va(t);var s=e.display,l=s.lineDiv.getBoundingClientRect();if(o>l.bottom||!Yr(e,n))return Wr(t);o-=l.top-s.viewOffset;for(var c=0;c<e.options.gutters.length;++c){var u=s.gutters.childNodes[c];if(u&&u.getBoundingClientRect().right>=a){var d=Sr(e.doc,o),f=e.options.gutters[c];return i(e,n,e,d,f,t),Wr(t)}}}function Tt(e,t){return St(e,t,"gutterClick",!0,Vr)}function Mt(e){var t=this;if(!Xr(t,e)&&!yt(t.display,e)){Va(e),qi&&(fa=+new Date);var n=_t(t,e,!0),r=e.dataTransfer.files;if(n&&!gt(t))if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,a=Array(i),o=0,s=function(e,r){var s=new FileReader;s.onload=Qe(t,function(){if(a[r]=s.result,++o==i){n=Q(t.doc,n);var e={from:n,to:n,text:vo(a.join("\n")),origin:"paste"};Gt(t.doc,e),le(t.doc,Y(n,va(e)))}}),s.readAsText(e)},l=0;i>l;++l)s(r[l],l);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout(oi(ht,t),20);try{var a=e.dataTransfer.getData("Text");if(a){if(t.state.draggingText&&!(Qi?e.metaKey:e.ctrlKey))var c=t.listSelections();if(ue(t.doc,Y(n,n)),c)for(var l=0;l<c.length;++l)tn(t.doc,"",c[l].anchor,c[l].head,"drag");t.replaceSelection(a,"around","paste"),ht(t)}}catch(e){}}}}function Et(e,t){if(qi&&(!e.state.draggingText||+new Date-fa<100))return void Xa(t);if(!Xr(e,t)&&!yt(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.setDragImage&&!Vi)){var n=ui("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",Ui&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),Ui&&n.parentNode.removeChild(n)}}function Lt(e,t){Math.abs(e.doc.scrollTop-t)<2||(e.doc.scrollTop=t,Di||k(e,{top:t}),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbarV.scrollTop!=t&&(e.display.scrollbarV.scrollTop=t),Di&&k(e),ye(e,100))}function It(e,t,n){(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,y(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbarH.scrollLeft!=t&&(e.display.scrollbarH.scrollLeft=t))}function $t(e,t){var n=t.wheelDeltaX,r=t.wheelDeltaY;null==n&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(n=t.detail),null==r&&t.detail&&t.axis==t.VERTICAL_AXIS?r=t.detail:null==r&&(r=t.wheelDelta);var i=e.display,a=i.scroller;if(n&&a.scrollWidth>a.clientWidth||r&&a.scrollHeight>a.clientHeight){if(r&&Qi&&Pi)e:for(var o=t.target,s=i.view;o!=a;o=o.parentNode)for(var l=0;l<s.length;l++)if(s[l].node==o){e.display.currentWheelTarget=o;break e}if(n&&!Di&&!Ui&&null!=ha)return r&&Lt(e,Math.max(0,Math.min(a.scrollTop+r*ha,a.scrollHeight-a.clientHeight))),It(e,Math.max(0,Math.min(a.scrollLeft+n*ha,a.scrollWidth-a.clientWidth))),Va(t),void(i.wheelStartX=null);if(r&&null!=ha){var c=r*ha,u=e.doc.scrollTop,d=u+i.wrapper.clientHeight;0>c?u=Math.max(0,u+c-50):d=Math.min(e.doc.height,d+c+50),k(e,{top:u,bottom:d})}20>pa&&(null==i.wheelStartX?(i.wheelStartX=a.scrollLeft,i.wheelStartY=a.scrollTop,i.wheelDX=n,i.wheelDY=r,setTimeout(function(){if(null!=i.wheelStartX){var e=a.scrollLeft-i.wheelStartX,t=a.scrollTop-i.wheelStartY,n=t&&i.wheelDY&&t/i.wheelDY||e&&i.wheelDX&&e/i.wheelDX;i.wheelStartX=i.wheelStartY=null,n&&(ha=(ha*pa+n)/(pa+1),++pa)}},200)):(i.wheelDX+=n,i.wheelDY+=r))}}function Nt(e,t,n){if("string"==typeof t&&(t=Ea[t],!t))return!1;e.display.pollingFast&&ft(e)&&(e.display.pollingFast=!1);var r=e.display.shift,i=!1;try{gt(e)&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=eo}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}function At(e){var t=e.state.keyMaps.slice(0);return e.options.extraKeys&&t.push(e.options.extraKeys),t.push(e.options.keyMap),t}function Bt(e,t){var n=vn(e.options.keyMap),r=n.auto;clearTimeout(ma),r&&!$a(t)&&(ma=setTimeout(function(){vn(e.options.keyMap)==n&&(e.options.keyMap=r.call?r.call(null,e):r,s(e))},50));var i=Na(t,!0),a=!1;if(!i)return!1;var o=At(e);return a=t.shiftKey?Ia("Shift-"+i,o,function(t){return Nt(e,t,!0)})||Ia(i,o,function(t){return("string"==typeof t?/^go[A-Z]/.test(t):t.motion)?Nt(e,t):void 0}):Ia(i,o,function(t){return Nt(e,t)}),a&&(Va(t),be(e),Vr(e,"keyHandled",e,i,t)),a}function Ot(e,t,n){var r=Ia("'"+n+"'",At(e),function(t){return Nt(e,t,!0)});return r&&(Va(t),be(e),Vr(e,"keyHandled",e,"'"+n+"'",t)),r}function zt(e){var t=this;if(mt(t),!Xr(t,e)){qi&&11>Hi&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var r=Bt(t,e);Ui&&(ga=r?n:null,!r&&88==n&&!yo&&(Qi?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=n||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||Dt(t)}}function Dt(e){function t(e){18!=e.keyCode&&e.altKey||(gi(n,"CodeMirror-crosshair"),Ya(document,"keyup",t),Ya(document,"mouseover",t))}var n=e.display.lineDiv;vi(n,"CodeMirror-crosshair"),Ga(document,"keyup",t),Ga(document,"mouseover",t)}function jt(e){Xr(this,e)||16==e.keyCode&&(this.doc.sel.shift=!1)}function Rt(e){var t=this;if(!(Xr(t,e)||e.ctrlKey||Qi&&e.metaKey)){var n=e.keyCode,r=e.charCode;if(Ui&&n==ga)return ga=null,void Va(e);if(!(Ui&&(!e.which||e.which<10)||Ki)||!Bt(t,e)){var i=String.fromCharCode(null==r?n:r);Ot(t,e,i)||(qi&&Hi>=9&&(t.display.inputHasSelection=null),dt(t))}}}function qt(e){"nocursor"!=e.options.readOnly&&(e.state.focused||(Za(e,"focus",e),e.state.focused=!0,vi(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(pt(e),Pi&&setTimeout(oi(pt,e,!0),0))),ut(e),be(e))}function Ht(e){e.state.focused&&(Za(e,"blur",e),e.state.focused=!1,gi(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150)}function Pt(e,t){function n(){if(null!=i.input.selectionStart){var t=e.somethingSelected(),n=i.input.value="​"+(t?i.input.value:"");i.prevInput=t?"":"​",i.input.selectionStart=1,i.input.selectionEnd=n.length,i.selForContextMenu=e.doc.sel}}function r(){if(i.inputDiv.style.position="relative",i.input.style.cssText=l,qi&&9>Hi&&(i.scrollbarV.scrollTop=i.scroller.scrollTop=o),ut(e),null!=i.input.selectionStart){(!qi||qi&&9>Hi)&&n();var t=0,r=function(){i.selForContextMenu==e.doc.sel&&0==i.input.selectionStart?Qe(e,Ea.selectAll)(e):t++<10?i.detectingSelectAll=setTimeout(r,500):pt(e)};i.detectingSelectAll=setTimeout(r,200)}}if(!Xr(e,t,"contextmenu")){var i=e.display;if(!yt(i,t)&&!Wt(e,t)){var a=_t(e,t),o=i.scroller.scrollTop;if(a&&!Ui){var s=e.options.resetSelectionOnContextMenu;s&&-1==e.doc.sel.contains(a)&&Qe(e,ce)(e.doc,Y(a),to);var l=i.input.style.cssText;if(i.inputDiv.style.position="absolute",i.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(t.clientY-5)+"px; left: "+(t.clientX-5)+"px; z-index: 1000; background: "+(qi?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",ht(e),pt(e),e.somethingSelected()||(i.input.value=i.prevInput=" "),i.selForContextMenu=e.doc.sel,clearTimeout(i.detectingSelectAll),qi&&Hi>=9&&n(),na){Xa(t);var c=function(){Ya(window,"mouseup",c),setTimeout(r,20)};Ga(window,"mouseup",c)}else setTimeout(r,50)}}}}function Wt(e,t){return Yr(e,"gutterContextMenu")?St(e,t,"gutterContextMenu",!1,Za):!1}function Ft(e,t){if(oa(e,t.from)<0)return e;if(oa(e,t.to)<=0)return va(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=va(t).ch-t.to.ch),aa(n,r)}function Ut(e,t){for(var n=[],r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new X(Ft(i.anchor,t),Ft(i.head,t)))}return G(n,e.sel.primIndex)}function Vt(e,t,n){return e.line==t.line?aa(n.line,e.ch-t.ch+n.ch):aa(n.line+(e.line-t.line),e.ch)}function Kt(e,t,n){for(var r=[],i=aa(e.first,0),a=i,o=0;o<t.length;o++){var s=t[o],l=Vt(s.from,i,a),c=Vt(va(s),i,a);if(i=s.to,a=c,"around"==n){var u=e.sel.ranges[o],d=oa(u.head,u.anchor)<0;r[o]=new X(d?c:l,d?l:c)}else r[o]=new X(l,l)}return new K(r,e.sel.primIndex)}function Xt(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return n&&(r.update=function(t,n,r,i){t&&(this.from=Q(e,t)),n&&(this.to=Q(e,n)),r&&(this.text=r),void 0!==i&&(this.origin=i)}),Za(e,"beforeChange",e,r),e.cm&&Za(e.cm,"beforeChange",e.cm,r),r.canceled?null:{from:r.from,to:r.to,text:r.text,origin:r.origin}}function Gt(e,t,n){if(e.cm){if(!e.cm.curOp)return Qe(e.cm,Gt)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(Yr(e,"beforeChange")||e.cm&&Yr(e.cm,"beforeChange"))||(t=Xt(e,t,!0))){var r=ra&&!n&&Nn(e,t.from,t.to);if(r)for(var i=r.length-1;i>=0;--i)Yt(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text});else Yt(e,t)}}function Yt(e,t){if(1!=t.text.length||""!=t.text[0]||0!=oa(t.from,t.to)){var n=Ut(e,t);Nr(e,t,n,e.cm?e.cm.curOp.id:NaN),Jt(e,t,n,Ln(e,t));var r=[];br(e,function(e,n){n||-1!=ni(r,e.history)||(Pr(e.history,t),r.push(e.history)),Jt(e,t,null,Ln(e,t))})}}function Zt(e,t,n){if(!e.cm||!e.cm.state.suppressEdits){for(var r,i=e.history,a=e.sel,o="undo"==t?i.done:i.undone,s="undo"==t?i.undone:i.done,l=0;l<o.length&&(r=o[l],n?!r.ranges||r.equals(e.sel):r.ranges);l++);if(l!=o.length){for(i.lastOrigin=i.lastSelOrigin=null;r=o.pop(),r.ranges;){if(Or(r,s),n&&!r.equals(e.sel))return void ce(e,r,{clearRedo:!1});a=r}var c=[];Or(a,s),s.push({changes:c,generation:i.generation}),i.generation=r.generation||++i.maxGeneration;for(var u=Yr(e,"beforeChange")||e.cm&&Yr(e.cm,"beforeChange"),l=r.changes.length-1;l>=0;--l){var d=r.changes[l];if(d.origin=t,u&&!Xt(e,d,!1))return void(o.length=0);c.push(Lr(e,d));var f=l?Ut(e,d,null):ti(o);Jt(e,d,f,$n(e,d)),!l&&e.cm&&e.cm.scrollIntoView(d);var p=[];br(e,function(e,t){t||-1!=ni(p,e.history)||(Pr(e.history,d),p.push(e.history)),Jt(e,d,null,$n(e,d))})}}}}function Qt(e,t){if(0!=t&&(e.first+=t,e.sel=new K(ri(e.sel.ranges,function(e){return new X(aa(e.anchor.line+t,e.anchor.ch),aa(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){rt(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)it(e.cm,r,"gutter")}}function Jt(e,t,n,r){if(e.cm&&!e.cm.curOp)return Qe(e.cm,Jt)(e,t,n,r);if(t.to.line<e.first)return void Qt(e,t.text.length-1-(t.to.line-t.from.line));if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);Qt(e,i),t={from:aa(e.first,0),to:aa(t.to.line+i,t.to.ch),text:[ti(t.text)],origin:t.origin}}var a=e.lastLine();t.to.line>a&&(t={from:t.from,to:aa(a,_r(e,a).text.length),text:[t.text[0]],origin:t.origin}),t.removed=wr(e,t.from,t.to),n||(n=Ut(e,t,null)),e.cm?en(e.cm,t,r):mr(e,t,r),ue(e,n,to)}}function en(e,t,n){var r=e.doc,i=e.display,o=t.from,s=t.to,l=!1,c=o.line;e.options.lineWrapping||(c=Cr(Pn(_r(r,o.line))),r.iter(c,s.line+1,function(e){return e==i.maxLine?(l=!0,!0):void 0})),r.sel.contains(t.from,t.to)>-1&&Gr(e),mr(r,t,n,a(e)),e.options.lineWrapping||(r.iter(c,o.line+t.text.length,function(e){var t=f(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,l=!1)}),l&&(e.curOp.updateMaxLine=!0)),r.frontier=Math.min(r.frontier,o.line),ye(e,400);var u=t.text.length-(s.line-o.line)-1;o.line!=s.line||1!=t.text.length||hr(e.doc,t)?rt(e,o.line,s.line+1,u):it(e,o.line,"text");var d=Yr(e,"changes"),p=Yr(e,"change");if(p||d){var h={from:o,to:s,text:t.text,removed:t.removed,origin:t.origin};p&&Vr(e,"change",e,h),d&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(h)}e.display.selForContextMenu=null}function tn(e,t,n,r,i){if(r||(r=n),oa(r,n)<0){var a=r;r=n,n=a}"string"==typeof t&&(t=vo(t)),Gt(e,{from:n,to:r,text:t,origin:i})}function nn(e,t){var n=e.display,r=n.sizer.getBoundingClientRect(),i=null;if(t.top+r.top<0?i=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!Gi){var a=ui("div","​",null,"position: absolute; top: "+(t.top-n.viewOffset-ke(e.display))+"px; height: "+(t.bottom-t.top+Ja)+"px; left: "+t.left+"px; width: 2px;");e.display.lineSpace.appendChild(a),a.scrollIntoView(i),e.display.lineSpace.removeChild(a)}}function rn(e,t,n,r){for(null==r&&(r=0);;){var i=!1,a=Pe(e,t),o=n&&n!=t?Pe(e,n):a,s=on(e,Math.min(a.left,o.left),Math.min(a.top,o.top)-r,Math.max(a.left,o.left),Math.max(a.bottom,o.bottom)+r),l=e.doc.scrollTop,c=e.doc.scrollLeft;if(null!=s.scrollTop&&(Lt(e,s.scrollTop),Math.abs(e.doc.scrollTop-l)>1&&(i=!0)),null!=s.scrollLeft&&(It(e,s.scrollLeft),Math.abs(e.doc.scrollLeft-c)>1&&(i=!0)),!i)return a}}function an(e,t,n,r,i){var a=on(e,t,n,r,i);null!=a.scrollTop&&Lt(e,a.scrollTop),null!=a.scrollLeft&&It(e,a.scrollLeft)}function on(e,t,n,r,i){var a=e.display,o=Ke(e.display);0>n&&(n=0);var s=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:a.scroller.scrollTop,l=a.scroller.clientHeight-Ja,c={},u=e.doc.height+Ce(a),d=o>n,f=i>u-o;if(s>n)c.scrollTop=d?0:n;else if(i>s+l){var p=Math.min(n,(f?u:i)-l);p!=s&&(c.scrollTop=p)}var h=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:a.scroller.scrollLeft,m=a.scroller.clientWidth-Ja;t+=a.gutters.offsetWidth,r+=a.gutters.offsetWidth;var g=a.gutters.offsetWidth,v=g+10>t;return h+g>t||v?(v&&(t=0),c.scrollLeft=Math.max(0,t-10-g)):r>m+h-3&&(c.scrollLeft=r+10-m),c}function sn(e,t,n){(null!=t||null!=n)&&cn(e),null!=t&&(e.curOp.scrollLeft=(null==e.curOp.scrollLeft?e.doc.scrollLeft:e.curOp.scrollLeft)+t),null!=n&&(e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+n)}function ln(e){cn(e);var t=e.getCursor(),n=t,r=t;e.options.lineWrapping||(n=t.ch?aa(t.line,t.ch-1):t,r=aa(t.line,t.ch+1)),e.curOp.scrollToPos={from:n,to:r,margin:e.options.cursorScrollMargin,isCursor:!0}}function cn(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var n=We(e,t.from),r=We(e,t.to),i=on(e,Math.min(n.left,r.left),Math.min(n.top,r.top)-t.margin,Math.max(n.right,r.right),Math.max(n.bottom,r.bottom)+t.margin);e.scrollTo(i.scrollLeft,i.scrollTop)}}function un(e,t,n,r){var i,a=e.doc;null==n&&(n="add"),"smart"==n&&(e.doc.mode.indent?i=xe(e,t):n="prev");var o=e.options.tabSize,s=_r(a,t),l=io(s.text,null,o);s.stateAfter&&(s.stateAfter=null);var c,u=s.text.match(/^\s*/)[0];if(r||/\S/.test(s.text)){if("smart"==n&&(c=e.doc.mode.indent(i,s.text.slice(u.length),s.text),c==eo)){if(!r)return;n="prev"}}else c=0,n="not";"prev"==n?c=t>a.first?io(_r(a,t-1).text,null,o):0:"add"==n?c=l+e.options.indentUnit:"subtract"==n?c=l-e.options.indentUnit:"number"==typeof n&&(c=l+n),c=Math.max(0,c);var d="",f=0;if(e.options.indentWithTabs)for(var p=Math.floor(c/o);p;--p)f+=o,d+="	";if(c>f&&(d+=ei(c-f)),d!=u)tn(e.doc,d,aa(t,0),aa(t,u.length),"+input");else for(var p=0;p<a.sel.ranges.length;p++){var h=a.sel.ranges[p];if(h.head.line==t&&h.head.ch<u.length){var f=aa(t,u.length);ae(a,p,new X(f,f));break}}s.stateAfter=null}function dn(e,t,n,r){var i=t,a=t;return"number"==typeof t?a=_r(e,Z(e,t)):i=Cr(t),null==i?null:(r(a,i)&&e.cm&&it(e.cm,i,n),a)}function fn(e,t){for(var n=e.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var a=t(n[i]);r.length&&oa(a.from,ti(r).to)<=0;){var o=r.pop();if(oa(o.from,a.from)<0){a.from=o.from;break}}r.push(a)}Ze(e,function(){for(var t=r.length-1;t>=0;t--)tn(e.doc,"",r[t].from,r[t].to,"+delete");ln(e)})}function pn(e,t,n,r,i){function a(){var t=s+n;return t<e.first||t>=e.first+e.size?d=!1:(s=t,u=_r(e,t))}function o(e){var t=(i?Oi:zi)(u,l,n,!0);if(null==t){if(e||!a())return d=!1;l=i?(0>n?Li:Ei)(u):0>n?u.text.length:0}else l=t;return!0}var s=t.line,l=t.ch,c=n,u=_r(e,s),d=!0;if("char"==r)o();else if("column"==r)o(!0);else if("word"==r||"group"==r)for(var f=null,p="group"==r,h=e.cm&&e.cm.getHelper(t,"wordChars"),m=!0;!(0>n)||o(!m);m=!1){var g=u.text.charAt(l)||"\n",v=si(g,h)?"w":p&&"\n"==g?"n":!p||/\s/.test(g)?null:"p";if(!p||m||v||(v="s"),f&&f!=v){0>n&&(n=1,o());break}if(v&&(f=v),n>0&&!o(!m))break}var b=he(e,aa(s,l),c,!0);return d||(b.hitSide=!0),b}function hn(e,t,n,r){var i,a=e.doc,o=t.left;if("page"==r){var s=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);i=t.top+n*(s-(0>n?1.5:.5)*Ke(e.display))}else"line"==r&&(i=n>0?t.bottom+3:t.top-3);for(;;){var l=Ue(e,o,i);if(!l.outside)break;if(0>n?0>=i:i>=a.height){l.hitSide=!0;break}i+=5*n}return l}function mn(e,t){var n=e.doc,r=_r(n,t.line).text,i=t.ch,a=t.ch;if(r){var o=e.getHelper(t,"wordChars");(t.xRel<0||a==r.length)&&i?--i:++a;for(var s=r.charAt(i),l=si(s,o)?function(e){return si(e,o)}:/\s/.test(s)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!si(e)};i>0&&l(r.charAt(i-1));)--i;for(;a<r.length&&l(r.charAt(a));)++a}return new X(aa(t.line,i),aa(t.line,a))}function gn(t,n,r,i){e.defaults[t]=n,r&&(ya[t]=i?function(e,t,n){n!=_a&&r(e,t,n)}:r)}function vn(e){return"string"==typeof e?La[e]:e}function bn(e,t,n,r,i){if(r&&r.shared)return yn(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return Qe(e.cm,bn)(e,t,n,r,i);var a=new Ba(e,i),o=oa(t,n);if(r&&ai(r,a,!1),o>0||0==o&&a.clearWhenEmpty!==!1)return a;if(a.replacedWith&&(a.collapsed=!0,a.widgetNode=ui("span",[a.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||(a.widgetNode.ignoreEvents=!0),r.insertLeft&&(a.widgetNode.insertLeft=!0)),a.collapsed){if(Hn(e,t.line,t,n,a)||t.line!=n.line&&Hn(e,n.line,t,n,a))throw new Error("Inserting collapsed marker partially overlapping an existing one");ia=!0}a.addToHistory&&Nr(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var s,l=t.line,c=e.cm;if(e.iter(l,n.line+1,function(e){c&&a.collapsed&&!c.options.lineWrapping&&Pn(e)==c.display.maxLine&&(s=!0),a.collapsed&&l!=t.line&&kr(e,0),Tn(e,new kn(a,l==t.line?t.ch:null,l==n.line?n.ch:null)),++l}),a.collapsed&&e.iter(t.line,n.line+1,function(t){Vn(e,t)&&kr(t,0)}),a.clearOnEnter&&Ga(a,"beforeCursorEnter",function(){a.clear()}),a.readOnly&&(ra=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),a.collapsed&&(a.id=++Oa,a.atomic=!0),c){if(s&&(c.curOp.updateMaxLine=!0),a.collapsed)rt(c,t.line,n.line+1);else if(a.className||a.title||a.startStyle||a.endStyle)for(var u=t.line;u<=n.line;u++)it(c,u,"text");a.atomic&&fe(c.doc),Vr(c,"markerAdded",c,a)}return a}function yn(e,t,n,r,i){r=ai(r),r.shared=!1;var a=[bn(e,t,n,r,i)],o=a[0],s=r.widgetNode;return br(e,function(e){s&&(r.widgetNode=s.cloneNode(!0)),a.push(bn(e,Q(e,t),Q(e,n),r,i));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;o=ti(a)}),new za(a,o)}function _n(e){return e.findMarks(aa(e.first,0),e.clipPos(aa(e.lastLine())),function(e){return e.parent})}function wn(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),a=e.clipPos(i.from),o=e.clipPos(i.to);if(oa(a,o)){var s=bn(e,a,o,r.primary,r.primary.type);r.markers.push(s),s.parent=r}}}function xn(e){for(var t=0;t<e.length;t++){var n=e[t],r=[n.primary.doc];br(n.primary.doc,function(e){r.push(e)});for(var i=0;i<n.markers.length;i++){var a=n.markers[i];-1==ni(r,a.doc)&&(a.parent=null,n.markers.splice(i--,1))}}}function kn(e,t,n){this.marker=e,this.from=t,this.to=n}function Cn(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function Sn(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function Tn(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function Mn(e,t,n){if(e)for(var r,i=0;i<e.length;++i){var a=e[i],o=a.marker,s=null==a.from||(o.inclusiveLeft?a.from<=t:a.from<t);if(s||a.from==t&&"bookmark"==o.type&&(!n||!a.marker.insertLeft)){var l=null==a.to||(o.inclusiveRight?a.to>=t:a.to>t);(r||(r=[])).push(new kn(o,a.from,l?null:a.to))}}return r}function En(e,t,n){if(e)for(var r,i=0;i<e.length;++i){var a=e[i],o=a.marker,s=null==a.to||(o.inclusiveRight?a.to>=t:a.to>t);if(s||a.from==t&&"bookmark"==o.type&&(!n||a.marker.insertLeft)){var l=null==a.from||(o.inclusiveLeft?a.from<=t:a.from<t);(r||(r=[])).push(new kn(o,l?null:a.from-t,null==a.to?null:a.to-t))}}return r}function Ln(e,t){var n=ee(e,t.from.line)&&_r(e,t.from.line).markedSpans,r=ee(e,t.to.line)&&_r(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,a=t.to.ch,o=0==oa(t.from,t.to),s=Mn(n,i,o),l=En(r,a,o),c=1==t.text.length,u=ti(t.text).length+(c?i:0);if(s)for(var d=0;d<s.length;++d){var f=s[d];if(null==f.to){var p=Cn(l,f.marker);p?c&&(f.to=null==p.to?null:p.to+u):f.to=i}}if(l)for(var d=0;d<l.length;++d){var f=l[d];if(null!=f.to&&(f.to+=u),null==f.from){var p=Cn(s,f.marker);p||(f.from=u,c&&(s||(s=[])).push(f))}else f.from+=u,c&&(s||(s=[])).push(f)}s&&(s=In(s)),l&&l!=s&&(l=In(l));var h=[s];if(!c){var m,g=t.text.length-2;if(g>0&&s)for(var d=0;d<s.length;++d)null==s[d].to&&(m||(m=[])).push(new kn(s[d].marker,null,null));for(var d=0;g>d;++d)h.push(m);h.push(l)}return h}function In(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&n.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function $n(e,t){var n=jr(e,t),r=Ln(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var a=n[i],o=r[i];if(a&&o)e:for(var s=0;s<o.length;++s){for(var l=o[s],c=0;c<a.length;++c)if(a[c].marker==l.marker)continue e;a.push(l)}else o&&(n[i]=o)}return n}function Nn(e,t,n){var r=null;if(e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||r&&-1!=ni(r,n)||(r||(r=[])).push(n)}}),!r)return null;for(var i=[{from:t,to:n}],a=0;a<r.length;++a)for(var o=r[a],s=o.find(0),l=0;l<i.length;++l){var c=i[l];if(!(oa(c.to,s.from)<0||oa(c.from,s.to)>0)){var u=[l,1],d=oa(c.from,s.from),f=oa(c.to,s.to);(0>d||!o.inclusiveLeft&&!d)&&u.push({from:c.from,to:s.from}),(f>0||!o.inclusiveRight&&!f)&&u.push({from:s.to,to:c.to}),i.splice.apply(i,u),l+=u.length-1}}return i}function An(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function Bn(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function On(e){return e.inclusiveLeft?-1:0}function zn(e){return e.inclusiveRight?1:0}function Dn(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var r=e.find(),i=t.find(),a=oa(r.from,i.from)||On(e)-On(t);if(a)return-a;var o=oa(r.to,i.to)||zn(e)-zn(t);return o?o:t.id-e.id}function jn(e,t){var n,r=ia&&e.markedSpans;if(r)for(var i,a=0;a<r.length;++a)i=r[a],i.marker.collapsed&&null==(t?i.from:i.to)&&(!n||Dn(n,i.marker)<0)&&(n=i.marker);return n}function Rn(e){return jn(e,!0)}function qn(e){return jn(e,!1)}function Hn(e,t,n,r,i){var a=_r(e,t),o=ia&&a.markedSpans;if(o)for(var s=0;s<o.length;++s){var l=o[s];if(l.marker.collapsed){var c=l.marker.find(0),u=oa(c.from,n)||On(l.marker)-On(i),d=oa(c.to,r)||zn(l.marker)-zn(i);if(!(u>=0&&0>=d||0>=u&&d>=0)&&(0>=u&&(oa(c.to,n)>0||l.marker.inclusiveRight&&i.inclusiveLeft)||u>=0&&(oa(c.from,r)<0||l.marker.inclusiveLeft&&i.inclusiveRight)))return!0}}}function Pn(e){for(var t;t=Rn(e);)e=t.find(-1,!0).line;return e}function Wn(e){for(var t,n;t=qn(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}function Fn(e,t){var n=_r(e,t),r=Pn(n);return n==r?t:Cr(r)}function Un(e,t){if(t>e.lastLine())return t;var n,r=_r(e,t);if(!Vn(e,r))return t;for(;n=qn(r);)r=n.find(1,!0).line;return Cr(r)+1}function Vn(e,t){var n=ia&&t.markedSpans;if(n)for(var r,i=0;i<n.length;++i)if(r=n[i],r.marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&Kn(e,t,r))return!0}}function Kn(e,t,n){if(null==n.to){var r=n.marker.find(1,!0);return Kn(e,r.line,Cn(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i,a=0;a<t.markedSpans.length;++a)if(i=t.markedSpans[a],i.marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&Kn(e,t,i))return!0}function Xn(e,t,n){Tr(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&sn(e,null,n)}function Gn(e){if(null!=e.height)return e.height;if(!pi(document.body,e.node)){var t="position: relative;";e.coverGutter&&(t+="margin-left: -"+e.cm.getGutterElement().offsetWidth+"px;"),fi(e.cm.display.measure,ui("div",[e.node],null,t))}return e.height=e.node.offsetHeight}function Yn(e,t,n,r){var i=new Da(e,n,r);return i.noHScroll&&(e.display.alignWidgets=!0),dn(e.doc,t,"widget",function(t){var n=t.widgets||(t.widgets=[]);if(null==i.insertAt?n.push(i):n.splice(Math.min(n.length-1,Math.max(0,i.insertAt)),0,i),i.line=t,!Vn(e.doc,t)){var r=Tr(t)<e.doc.scrollTop;kr(t,t.height+Gn(i)),r&&sn(e,null,i.height),e.curOp.forceUpdate=!0}return!0}),i}function Zn(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),An(e),Bn(e,n);var i=r?r(e):1;i!=e.height&&kr(e,i)}function Qn(e){e.parent=null,An(e)}function Jn(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==t[r]?t[r]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(t[r])||(t[r]+=" "+n[2])}return e}function er(t,n){if(t.blankLine)return t.blankLine(n);if(t.innerMode){var r=e.innerMode(t,n);return r.mode.blankLine?r.mode.blankLine(r.state):void 0}}function tr(e,t,n){for(var r=0;10>r;r++){var i=e.token(t,n);if(t.pos>t.start)return i}throw new Error("Mode "+e.name+" failed to advance stream.")}function nr(t,n,r,i,a,o,s){var l=r.flattenSpans;null==l&&(l=t.options.flattenSpans);var c,u=0,d=null,f=new Aa(n,t.options.tabSize);for(""==n&&Jn(er(r,i),o);!f.eol();){if(f.pos>t.options.maxHighlightLength?(l=!1,s&&ar(t,n,i,f.pos),f.pos=n.length,c=null):c=Jn(tr(r,f,i),o),t.options.addModeClass){var p=e.innerMode(r,i).mode.name;p&&(c="m-"+(c?p+" "+c:p))}l&&d==c||(u<f.start&&a(f.start,d),u=f.start,d=c),f.start=f.pos}for(;u<f.pos;){var h=Math.min(f.pos,u+5e4);a(h,d),u=h}}function rr(e,t,n,r){var i=[e.state.modeGen],a={};nr(e,t.text,e.doc.mode,n,function(e,t){i.push(e,t)},a,r);for(var o=0;o<e.state.overlays.length;++o){var s=e.state.overlays[o],l=1,c=0;nr(e,t.text,s.mode,!0,function(e,t){
for(var n=l;e>c;){var r=i[l];r>e&&i.splice(l,1,e,i[l+1],r),l+=2,c=Math.min(e,r)}if(t)if(s.opaque)i.splice(n,l-n,e,"cm-overlay "+t),l=n+2;else for(;l>n;n+=2){var a=i[n+1];i[n+1]=(a?a+" ":"")+"cm-overlay "+t}},a)}return{styles:i,classes:a.bgClass||a.textClass?a:null}}function ir(e,t){if(!t.styles||t.styles[0]!=e.state.modeGen){var n=rr(e,t,t.stateAfter=xe(e,Cr(t)));t.styles=n.styles,n.classes?t.styleClasses=n.classes:t.styleClasses&&(t.styleClasses=null)}return t.styles}function ar(e,t,n,r){var i=e.doc.mode,a=new Aa(t,e.options.tabSize);for(a.start=a.pos=r||0,""==t&&er(i,n);!a.eol()&&a.pos<=e.options.maxHighlightLength;)tr(i,a,n),a.start=a.pos}function or(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?qa:Ra;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function sr(e,t){var n=ui("span",null,null,Pi?"padding-right: .1px":null),r={pre:ui("pre",[n]),content:n,col:0,pos:0,cm:e};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var a,o=i?t.rest[i-1]:t.line;r.pos=0,r.addToken=cr,(qi||Pi)&&e.getOption("lineWrapping")&&(r.addToken=ur(r.addToken)),Ci(e.display.measure)&&(a=Mr(o))&&(r.addToken=dr(r.addToken,a)),r.map=[],pr(o,r,ir(e,o)),o.styleClasses&&(o.styleClasses.bgClass&&(r.bgClass=bi(o.styleClasses.bgClass,r.bgClass||"")),o.styleClasses.textClass&&(r.textClass=bi(o.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(ki(e.display.measure))),0==i?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}return Za(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=bi(r.pre.className,r.textClass||"")),r}function lr(e){var t=ui("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t}function cr(e,t,n,r,i,a){if(t){var o=e.cm.options.specialChars,s=!1;if(o.test(t))for(var l=document.createDocumentFragment(),c=0;;){o.lastIndex=c;var u=o.exec(t),d=u?u.index-c:t.length-c;if(d){var f=document.createTextNode(t.slice(c,c+d));qi&&9>Hi?l.appendChild(ui("span",[f])):l.appendChild(f),e.map.push(e.pos,e.pos+d,f),e.col+=d,e.pos+=d}if(!u)break;if(c+=d+1,"	"==u[0]){var p=e.cm.options.tabSize,h=p-e.col%p,f=l.appendChild(ui("span",ei(h),"cm-tab"));e.col+=h}else{var f=e.cm.options.specialCharPlaceholder(u[0]);qi&&9>Hi?l.appendChild(ui("span",[f])):l.appendChild(f),e.col+=1}e.map.push(e.pos,e.pos+1,f),e.pos++}else{e.col+=t.length;var l=document.createTextNode(t);e.map.push(e.pos,e.pos+t.length,l),qi&&9>Hi&&(s=!0),e.pos+=t.length}if(n||r||i||s){var m=n||"";r&&(m+=r),i&&(m+=i);var g=ui("span",[l],m);return a&&(g.title=a),e.content.appendChild(g)}e.content.appendChild(l)}}function ur(e){function t(e){for(var t=" ",n=0;n<e.length-2;++n)t+=n%2?" ":" ";return t+=" "}return function(n,r,i,a,o,s){e(n,r.replace(/ {3,}/g,t),i,a,o,s)}}function dr(e,t){return function(n,r,i,a,o,s){i=i?i+" cm-force-border":"cm-force-border";for(var l=n.pos,c=l+r.length;;){for(var u=0;u<t.length;u++){var d=t[u];if(d.to>l&&d.from<=l)break}if(d.to>=c)return e(n,r,i,a,o,s);e(n,r.slice(0,d.to-l),i,a,null,s),a=null,r=r.slice(d.to-l),l=d.to}}}function fr(e,t,n,r){var i=!r&&n.widgetNode;i&&(e.map.push(e.pos,e.pos+t,i),e.content.appendChild(i)),e.pos+=t}function pr(e,t,n){var r=e.markedSpans,i=e.text,a=0;if(r)for(var o,s,l,c,u,d,f=i.length,p=0,h=1,m="",g=0;;){if(g==p){s=l=c=u="",d=null,g=1/0;for(var v=[],b=0;b<r.length;++b){var y=r[b],_=y.marker;y.from<=p&&(null==y.to||y.to>p)?(null!=y.to&&g>y.to&&(g=y.to,l=""),_.className&&(s+=" "+_.className),_.startStyle&&y.from==p&&(c+=" "+_.startStyle),_.endStyle&&y.to==g&&(l+=" "+_.endStyle),_.title&&!u&&(u=_.title),_.collapsed&&(!d||Dn(d.marker,_)<0)&&(d=y)):y.from>p&&g>y.from&&(g=y.from),"bookmark"==_.type&&y.from==p&&_.widgetNode&&v.push(_)}if(d&&(d.from||0)==p&&(fr(t,(null==d.to?f+1:d.to)-p,d.marker,null==d.from),null==d.to))return;if(!d&&v.length)for(var b=0;b<v.length;++b)fr(t,0,v[b])}if(p>=f)break;for(var w=Math.min(f,g);;){if(m){var x=p+m.length;if(!d){var k=x>w?m.slice(0,w-p):m;t.addToken(t,k,o?o+s:s,c,p+k.length==g?l:"",u)}if(x>=w){m=m.slice(w-p),p=w;break}p=x,c=""}m=i.slice(a,a=n[h++]),o=or(n[h++],t.cm.options)}}else for(var h=1;h<n.length;h+=2)t.addToken(t,i.slice(a,a=n[h]),or(n[h+1],t.cm.options))}function hr(e,t){return 0==t.from.ch&&0==t.to.ch&&""==ti(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function mr(e,t,n,r){function i(e){return n?n[e]:null}function a(e,n,i){Zn(e,n,i,r),Vr(e,"change",e,t)}var o=t.from,s=t.to,l=t.text,c=_r(e,o.line),u=_r(e,s.line),d=ti(l),f=i(l.length-1),p=s.line-o.line;if(hr(e,t)){for(var h=0,m=[];h<l.length-1;++h)m.push(new ja(l[h],i(h),r));a(u,u.text,f),p&&e.remove(o.line,p),m.length&&e.insert(o.line,m)}else if(c==u)if(1==l.length)a(c,c.text.slice(0,o.ch)+d+c.text.slice(s.ch),f);else{for(var m=[],h=1;h<l.length-1;++h)m.push(new ja(l[h],i(h),r));m.push(new ja(d+c.text.slice(s.ch),f,r)),a(c,c.text.slice(0,o.ch)+l[0],i(0)),e.insert(o.line+1,m)}else if(1==l.length)a(c,c.text.slice(0,o.ch)+l[0]+u.text.slice(s.ch),i(0)),e.remove(o.line+1,p);else{a(c,c.text.slice(0,o.ch)+l[0],i(0)),a(u,d+u.text.slice(s.ch),f);for(var h=1,m=[];h<l.length-1;++h)m.push(new ja(l[h],i(h),r));p>1&&e.remove(o.line+1,p-1),e.insert(o.line+1,m)}Vr(e,"change",e,t)}function gr(e){this.lines=e,this.parent=null;for(var t=0,n=0;t<e.length;++t)e[t].parent=this,n+=e[t].height;this.height=n}function vr(e){this.children=e;for(var t=0,n=0,r=0;r<e.length;++r){var i=e[r];t+=i.chunkSize(),n+=i.height,i.parent=this}this.size=t,this.height=n,this.parent=null}function br(e,t,n){function r(e,i,a){if(e.linked)for(var o=0;o<e.linked.length;++o){var s=e.linked[o];if(s.doc!=i){var l=a&&s.sharedHist;(!n||l)&&(t(s.doc,l),r(s.doc,e,l))}}}r(e,null,!0)}function yr(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,o(e),n(e),e.options.lineWrapping||p(e),e.options.mode=t.modeOption,rt(e)}function _r(e,t){if(t-=e.first,0>t||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],a=i.chunkSize();if(a>t){n=i;break}t-=a}return n.lines[t]}function wr(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,function(e){var a=e.text;i==n.line&&(a=a.slice(0,n.ch)),i==t.line&&(a=a.slice(t.ch)),r.push(a),++i}),r}function xr(e,t,n){var r=[];return e.iter(t,n,function(e){r.push(e.text)}),r}function kr(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function Cr(e){if(null==e.parent)return null;for(var t=e.parent,n=ni(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var i=0;r.children[i]!=t;++i)n+=r.children[i].chunkSize();return n+t.first}function Sr(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],a=i.height;if(a>t){e=i;continue e}t-=a,n+=i.chunkSize()}return n}while(!e.lines);for(var r=0;r<e.lines.length;++r){var o=e.lines[r],s=o.height;if(s>t)break;t-=s}return n+r}function Tr(e){e=Pn(e);for(var t=0,n=e.parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var a=n.parent;a;n=a,a=n.parent)for(var r=0;r<a.children.length;++r){var o=a.children[r];if(o==n)break;t+=o.height}return t}function Mr(e){var t=e.order;return null==t&&(t=e.order=xo(e.text)),t}function Er(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Lr(e,t){var n={from:F(t.from),to:va(t),text:wr(e,t.from,t.to)};return zr(e,n,t.from.line,t.to.line+1),br(e,function(e){zr(e,n,t.from.line,t.to.line+1)},!0),n}function Ir(e){for(;e.length;){var t=ti(e);if(!t.ranges)break;e.pop()}}function $r(e,t){return t?(Ir(e.done),ti(e.done)):e.done.length&&!ti(e.done).ranges?ti(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),ti(e.done)):void 0}function Nr(e,t,n,r){var i=e.history;i.undone.length=0;var a,o=+new Date;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&i.lastModTime>o-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(a=$r(i,i.lastOp==r))){var s=ti(a.changes);0==oa(t.from,t.to)&&0==oa(t.from,s.to)?s.to=va(t):a.changes.push(Lr(e,t))}else{var l=ti(i.done);for(l&&l.ranges||Or(e.sel,i.done),a={changes:[Lr(e,t)],generation:i.generation},i.done.push(a);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=o,i.lastOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,s||Za(e,"historyAdded")}function Ar(e,t,n,r){var i=t.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function Br(e,t,n,r){var i=e.history,a=r&&r.origin;n==i.lastOp||a&&i.lastSelOrigin==a&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==a||Ar(e,a,ti(i.done),t))?i.done[i.done.length-1]=t:Or(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=a,i.lastOp=n,r&&r.clearRedo!==!1&&Ir(i.undone)}function Or(e,t){var n=ti(t);n&&n.ranges&&n.equals(e)||t.push(e)}function zr(e,t,n,r){var i=t["spans_"+e.id],a=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),function(n){n.markedSpans&&((i||(i=t["spans_"+e.id]={}))[a]=n.markedSpans),++a})}function Dr(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function jr(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=0,i=[];r<t.text.length;++r)i.push(Dr(n[r]));return i}function Rr(e,t,n){for(var r=0,i=[];r<e.length;++r){var a=e[r];if(a.ranges)i.push(n?K.prototype.deepCopy.call(a):a);else{var o=a.changes,s=[];i.push({changes:s});for(var l=0;l<o.length;++l){var c,u=o[l];if(s.push({from:u.from,to:u.to,text:u.text}),t)for(var d in u)(c=d.match(/^spans_(\d+)$/))&&ni(t,Number(c[1]))>-1&&(ti(s)[d]=u[d],delete u[d])}}}return i}function qr(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function Hr(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i],o=!0;if(a.ranges){a.copied||(a=e[i]=a.deepCopy(),a.copied=!0);for(var s=0;s<a.ranges.length;s++)qr(a.ranges[s].anchor,t,n,r),qr(a.ranges[s].head,t,n,r)}else{for(var s=0;s<a.changes.length;++s){var l=a.changes[s];if(n<l.from.line)l.from=aa(l.from.line+r,l.from.ch),l.to=aa(l.to.line+r,l.to.ch);else if(t<=l.to.line){o=!1;break}}o||(e.splice(0,i+1),i=0)}}}function Pr(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;Hr(e.done,n,r,i),Hr(e.undone,n,r,i)}function Wr(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function Fr(e){return e.target||e.srcElement}function Ur(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),Qi&&e.ctrlKey&&1==t&&(t=3),t}function Vr(e,t){function n(e){return function(){e.apply(null,i)}}var r=e._handlers&&e._handlers[t];if(r){var i=Array.prototype.slice.call(arguments,2);Ua||(++Qa,Ua=[],setTimeout(Kr,0));for(var a=0;a<r.length;++a)Ua.push(n(r[a]))}}function Kr(){--Qa;var e=Ua;Ua=null;for(var t=0;t<e.length;++t)e[t]()}function Xr(e,t,n){return Za(e,n||t.type,e,t),Wr(t)||t.codemirrorIgnore}function Gr(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)-1==ni(n,t[r])&&n.push(t[r])}function Yr(e,t){var n=e._handlers&&e._handlers[t];return n&&n.length>0}function Zr(e){e.prototype.on=function(e,t){Ga(this,e,t)},e.prototype.off=function(e,t){Ya(this,e,t)}}function Qr(){this.id=null}function Jr(e,t,n){for(var r=0,i=0;;){var a=e.indexOf("	",r);-1==a&&(a=e.length);var o=a-r;if(a==e.length||i+o>=t)return r+Math.min(o,t-i);if(i+=a-r,i+=n-i%n,r=a+1,i>=t)return r}}function ei(e){for(;ao.length<=e;)ao.push(ti(ao)+" ");return ao[e]}function ti(e){return e[e.length-1]}function ni(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}function ri(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function ii(e,t){var n;if(Object.create)n=Object.create(e);else{var r=function(){};r.prototype=e,n=new r}return t&&ai(t,n),n}function ai(e,t,n){t||(t={});for(var r in e)!e.hasOwnProperty(r)||n===!1&&t.hasOwnProperty(r)||(t[r]=e[r]);return t}function oi(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function si(e,t){return t?t.source.indexOf("\\w")>-1&&co(e)?!0:t.test(e):co(e)}function li(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function ci(e){return e.charCodeAt(0)>=768&&uo.test(e)}function ui(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var a=0;a<t.length;++a)i.appendChild(t[a]);return i}function di(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function fi(e,t){return di(e).appendChild(t)}function pi(e,t){if(e.contains)return e.contains(t);for(;t=t.parentNode;)if(t==e)return!0}function hi(){return document.activeElement}function mi(e){return new RegExp("\\b"+e+"\\b\\s*")}function gi(e,t){var n=mi(t);n.test(e.className)&&(e.className=e.className.replace(n,""))}function vi(e,t){mi(t).test(e.className)||(e.className+=" "+t)}function bi(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)n[r]&&!mi(n[r]).test(t)&&(t+=" "+n[r]);return t}function yi(e){if(document.body.getElementsByClassName)for(var t=document.body.getElementsByClassName("CodeMirror"),n=0;n<t.length;n++){var r=t[n].CodeMirror;r&&e(r)}}function _i(){mo||(wi(),mo=!0)}function wi(){var e;Ga(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,fo=null,yi(bt)},100))}),Ga(window,"blur",function(){yi(Ht)})}function xi(e){if(null!=fo)return fo;var t=ui("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return fi(e,t),t.offsetWidth&&(fo=t.offsetHeight-t.clientHeight),fo||0}function ki(e){if(null==po){var t=ui("span","​");fi(e,ui("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(po=t.offsetWidth<=1&&t.offsetHeight>2&&!(qi&&8>Hi))}return po?ui("span","​"):ui("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}function Ci(e){if(null!=ho)return ho;var t=fi(e,document.createTextNode("AخA")),n=so(t,0,1).getBoundingClientRect();if(n.left==n.right)return!1;var r=so(t,1,2).getBoundingClientRect();return ho=r.right-n.right<3}function Si(e,t,n,r){if(!e)return r(t,n,"ltr");for(var i=!1,a=0;a<e.length;++a){var o=e[a];(o.from<n&&o.to>t||t==n&&o.to==t)&&(r(Math.max(o.from,t),Math.min(o.to,n),1==o.level?"rtl":"ltr"),i=!0)}i||r(t,n,"ltr")}function Ti(e){return e.level%2?e.to:e.from}function Mi(e){return e.level%2?e.from:e.to}function Ei(e){var t=Mr(e);return t?Ti(t[0]):0}function Li(e){var t=Mr(e);return t?Mi(ti(t)):e.text.length}function Ii(e,t){var n=_r(e.doc,t),r=Pn(n);r!=n&&(t=Cr(r));var i=Mr(r),a=i?i[0].level%2?Li(r):Ei(r):0;return aa(t,a)}function $i(e,t){for(var n,r=_r(e.doc,t);n=qn(r);)r=n.find(1,!0).line,t=null;var i=Mr(r),a=i?i[0].level%2?Ei(r):Li(r):r.text.length;return aa(null==t?Cr(r):t,a)}function Ni(e,t,n){var r=e[0].level;return t==r?!0:n==r?!1:n>t}function Ai(e,t){wo=null;for(var n,r=0;r<e.length;++r){var i=e[r];if(i.from<t&&i.to>t)return r;if(i.from==t||i.to==t){if(null!=n)return Ni(e,i.level,e[n].level)?(i.from!=i.to&&(wo=n),r):(i.from!=i.to&&(wo=r),n);n=r}}return n}function Bi(e,t,n,r){if(!r)return t+n;do t+=n;while(t>0&&ci(e.text.charAt(t)));return t}function Oi(e,t,n,r){var i=Mr(e);if(!i)return zi(e,t,n,r);for(var a=Ai(i,t),o=i[a],s=Bi(e,t,o.level%2?-n:n,r);;){if(s>o.from&&s<o.to)return s;if(s==o.from||s==o.to)return Ai(i,s)==a?s:(o=i[a+=n],n>0==o.level%2?o.to:o.from);if(o=i[a+=n],!o)return null;s=n>0==o.level%2?Bi(e,o.to,-1,r):Bi(e,o.from,1,r)}}function zi(e,t,n,r){var i=t+n;if(r)for(;i>0&&ci(e.text.charAt(i));)i+=n;return 0>i||i>e.text.length?null:i}var Di=/gecko\/\d/i.test(navigator.userAgent),ji=/MSIE \d/.test(navigator.userAgent),Ri=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),qi=ji||Ri,Hi=qi&&(ji?document.documentMode||6:Ri[1]),Pi=/WebKit\//.test(navigator.userAgent),Wi=Pi&&/Qt\/\d+\.\d+/.test(navigator.userAgent),Fi=/Chrome\//.test(navigator.userAgent),Ui=/Opera\//.test(navigator.userAgent),Vi=/Apple Computer/.test(navigator.vendor),Ki=/KHTML\//.test(navigator.userAgent),Xi=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),Gi=/PhantomJS/.test(navigator.userAgent),Yi=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Zi=Yi||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),Qi=Yi||/Mac/.test(navigator.platform),Ji=/win/i.test(navigator.platform),ea=Ui&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);ea&&(ea=Number(ea[1])),ea&&ea>=15&&(Ui=!1,Pi=!0);var ta=Qi&&(Wi||Ui&&(null==ea||12.11>ea)),na=Di||qi&&Hi>=9,ra=!1,ia=!1,aa=e.Pos=function(e,t){return this instanceof aa?(this.line=e,void(this.ch=t)):new aa(e,t)},oa=e.cmpPos=function(e,t){return e.line-t.line||e.ch-t.ch};K.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(0!=oa(n.anchor,r.anchor)||0!=oa(n.head,r.head))return!1}return!0},deepCopy:function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new X(F(this.ranges[t].anchor),F(this.ranges[t].head));return new K(e,this.primIndex)},somethingSelected:function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},contains:function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(oa(t,r.from())>=0&&oa(e,r.to())<=0)return n}return-1}},X.prototype={from:function(){return V(this.anchor,this.head)},to:function(){return U(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var sa,la,ca,ua={left:0,right:0,top:0,bottom:0},da=0,fa=0,pa=0,ha=null;qi?ha=-.53:Di?ha=15:Fi?ha=-.7:Vi&&(ha=-1/3);var ma,ga=null,va=e.changeEnd=function(e){return e.text?aa(e.from.line+e.text.length-1,ti(e.text).length+(1==e.text.length?e.from.ch:0)):e.to};e.prototype={constructor:e,focus:function(){window.focus(),ht(this),dt(this)},setOption:function(e,t){var n=this.options,r=n[e];(n[e]!=t||"mode"==e)&&(n[e]=t,ya.hasOwnProperty(e)&&Qe(this,ya[e])(this,t,r))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](e)},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||"string"!=typeof t[n]&&t[n].name==e)return t.splice(n,1),!0},addOverlay:Je(function(t,n){var r=t.token?t:e.getMode(this.options,t);if(r.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:r,modeSpec:t,opaque:n&&n.opaque}),this.state.modeGen++,rt(this)}),removeOverlay:Je(function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var r=t[n].modeSpec;if(r==e||"string"==typeof e&&r.name==e)return t.splice(n,1),this.state.modeGen++,void rt(this)}}),indentLine:Je(function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),ee(this.doc,e)&&un(this,e,t,n)}),indentSelection:Je(function(e){for(var t=this.doc.sel.ranges,n=-1,r=0;r<t.length;r++){var i=t[r];if(i.empty())i.head.line>n&&(un(this,i.head.line,e,!0),n=i.head.line,r==this.doc.sel.primIndex&&ln(this));else{var a=Math.max(n,i.from().line),o=i.to();n=Math.min(this.lastLine(),o.line-(o.ch?0:1))+1;for(var s=a;n>s;++s)un(this,s,e)}}}),getTokenAt:function(e,t){var n=this.doc;e=Q(n,e);for(var r=xe(this,e.line,t),i=this.doc.mode,a=_r(n,e.line),o=new Aa(a.text,this.options.tabSize);o.pos<e.ch&&!o.eol();){o.start=o.pos;var s=tr(i,o,r)}return{start:o.start,end:o.pos,string:o.current(),type:s||null,state:r}},getTokenTypeAt:function(e){e=Q(this.doc,e);var t,n=ir(this,_r(this.doc,e.line)),r=0,i=(n.length-1)/2,a=e.ch;if(0==a)t=n[2];else for(;;){var o=r+i>>1;if((o?n[2*o-1]:0)>=a)i=o;else{if(!(n[2*o+1]<a)){t=n[2*o+2];break}r=o+1}}var s=t?t.indexOf("cm-overlay "):-1;return 0>s?t:0==s?null:t.slice(0,s-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var n=[];if(!Sa.hasOwnProperty(t))return Sa;var r=Sa[t],i=this.getModeAt(e);if("string"==typeof i[t])r[i[t]]&&n.push(r[i[t]]);else if(i[t])for(var a=0;a<i[t].length;a++){var o=r[i[t][a]];o&&n.push(o)}else i.helperType&&r[i.helperType]?n.push(r[i.helperType]):r[i.name]&&n.push(r[i.name]);for(var a=0;a<r._global.length;a++){var s=r._global[a];s.pred(i,this)&&-1==ni(n,s.val)&&n.push(s.val)}return n},getStateAfter:function(e,t){var n=this.doc;return e=Z(n,null==e?n.first+n.size-1:e),xe(this,e+1,t)},cursorCoords:function(e,t){var n,r=this.doc.sel.primary();return n=null==e?r.head:"object"==typeof e?Q(this.doc,e):e?r.from():r.to(),Pe(this,n,t||"page")},charCoords:function(e,t){return He(this,Q(this.doc,e),t||"page")},coordsChar:function(e,t){return e=qe(this,e,t||"page"),Ue(this,e.left,e.top)},lineAtHeight:function(e,t){return e=qe(this,{top:e,left:0},t||"page").top,Sr(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var n=!1,r=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>r&&(e=r,n=!0);var i=_r(this.doc,e);return Re(this,i,{top:0,left:0},t||"page").top+(n?this.doc.height-Tr(i):0)},defaultTextHeight:function(){return Ke(this.display)},defaultCharWidth:function(){return Xe(this.display)},setGutterMarker:Je(function(e,t,n){return dn(this.doc,e,"gutter",function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&li(r)&&(e.gutterMarkers=null),!0})}),clearGutter:Je(function(e){var t=this,n=t.doc,r=n.first;n.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&(n.gutterMarkers[e]=null,it(t,r,"gutter"),li(n.gutterMarkers)&&(n.gutterMarkers=null)),++r})}),addLineWidget:Je(function(e,t,n){return Yn(this,e,t,n)}),removeLineWidget:function(e){e.clear()},lineInfo:function(e){if("number"==typeof e){if(!ee(this.doc,e))return null;var t=e;if(e=_r(this.doc,e),!e)return null}else{var t=Cr(e);if(null==t)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,r,i){var a=this.display;e=Pe(this,Q(this.doc,e));var o=e.bottom,s=e.left;if(t.style.position="absolute",a.sizer.appendChild(t),"over"==r)o=e.top;else if("above"==r||"near"==r){var l=Math.max(a.wrapper.clientHeight,this.doc.height),c=Math.max(a.sizer.clientWidth,a.lineSpace.clientWidth);("above"==r||e.bottom+t.offsetHeight>l)&&e.top>t.offsetHeight?o=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=l&&(o=e.bottom),s+t.offsetWidth>c&&(s=c-t.offsetWidth)}t.style.top=o+"px",t.style.left=t.style.right="","right"==i?(s=a.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?s=0:"middle"==i&&(s=(a.sizer.clientWidth-t.offsetWidth)/2),t.style.left=s+"px"),n&&an(this,s,o,s+t.offsetWidth,o+t.offsetHeight)},triggerOnKeyDown:Je(zt),triggerOnKeyPress:Je(Rt),triggerOnKeyUp:Je(jt),execCommand:function(e){return Ea.hasOwnProperty(e)?Ea[e](this):void 0},findPosH:function(e,t,n,r){var i=1;0>t&&(i=-1,t=-t);for(var a=0,o=Q(this.doc,e);t>a&&(o=pn(this.doc,o,i,n,r),!o.hitSide);++a);return o},moveH:Je(function(e,t){var n=this;n.extendSelectionsBy(function(r){return n.display.shift||n.doc.extend||r.empty()?pn(n.doc,r.head,e,t,n.options.rtlMoveVisually):0>e?r.from():r.to()},ro)}),deleteH:Je(function(e,t){var n=this.doc.sel,r=this.doc;n.somethingSelected()?r.replaceSelection("",null,"+delete"):fn(this,function(n){var i=pn(r,n.head,e,t,!1);return 0>e?{from:i,to:n.head}:{from:n.head,to:i}})}),findPosV:function(e,t,n,r){var i=1,a=r;0>t&&(i=-1,t=-t);for(var o=0,s=Q(this.doc,e);t>o;++o){var l=Pe(this,s,"div");if(null==a?a=l.left:l.left=a,s=hn(this,l,i,n),s.hitSide)break}return s},moveV:Je(function(e,t){var n=this,r=this.doc,i=[],a=!n.display.shift&&!r.extend&&r.sel.somethingSelected();if(r.extendSelectionsBy(function(o){if(a)return 0>e?o.from():o.to();var s=Pe(n,o.head,"div");null!=o.goalColumn&&(s.left=o.goalColumn),i.push(s.left);var l=hn(n,s,e,t);return"page"==t&&o==r.sel.primary()&&sn(n,null,He(n,l,"div").top-s.top),l},ro),i.length)for(var o=0;o<r.sel.ranges.length;o++)r.sel.ranges[o].goalColumn=i[o]}),toggleOverwrite:function(e){(null==e||e!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?vi(this.display.cursorDiv,"CodeMirror-overwrite"):gi(this.display.cursorDiv,"CodeMirror-overwrite"),Za(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return hi()==this.display.input},scrollTo:Je(function(e,t){(null!=e||null!=t)&&cn(this),null!=e&&(this.curOp.scrollLeft=e),null!=t&&(this.curOp.scrollTop=t)}),getScrollInfo:function(){var e=this.display.scroller,t=Ja;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-t,width:e.scrollWidth-t,clientHeight:e.clientHeight-t,clientWidth:e.clientWidth-t}},scrollIntoView:Je(function(e,t){if(null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:aa(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line)cn(this),this.curOp.scrollToPos=e;else{var n=on(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin);this.scrollTo(n.scrollLeft,n.scrollTop)}}),setSize:Je(function(e,t){function n(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}var r=this;null!=e&&(r.display.wrapper.style.width=n(e)),null!=t&&(r.display.wrapper.style.height=n(t)),r.options.lineWrapping&&Oe(this);var i=r.display.viewFrom;r.doc.iter(i,r.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){it(r,i,"widget");break}++i}),r.curOp.forceUpdate=!0,Za(r,"refresh",this)}),operation:function(e){return Ze(this,e)},refresh:Je(function(){var e=this.display.cachedTextHeight;rt(this),this.curOp.forceUpdate=!0,ze(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),d(this),(null==e||Math.abs(e-Ke(this.display))>.5)&&o(this),Za(this,"refresh",this)}),swapDoc:Je(function(e){var t=this.doc;return t.cm=null,yr(this,e),ze(this),pt(this),this.scrollTo(e.scrollLeft,e.scrollTop),Vr(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Zr(e);var ba=e.defaults={},ya=e.optionHandlers={},_a=e.Init={toString:function(){return"CodeMirror.Init"}};gn("value","",function(e,t){e.setValue(t)},!0),gn("mode",null,function(e,t){e.doc.modeOption=t,n(e)},!0),gn("indentUnit",2,n,!0),gn("indentWithTabs",!1),gn("smartIndent",!0),gn("tabSize",4,function(e){r(e),ze(e),rt(e)},!0),gn("specialChars",/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\ufeff]/g,function(e,t){e.options.specialChars=new RegExp(t.source+(t.test("	")?"":"|	"),"g"),e.refresh()},!0),gn("specialCharPlaceholder",lr,function(e){e.refresh()},!0),gn("electricChars",!0),gn("rtlMoveVisually",!Ji),gn("wholeLineUpdateBefore",!0),gn("theme","default",function(e){l(e),c(e)},!0),gn("keyMap","default",s),gn("extraKeys",null),gn("lineWrapping",!1,i,!0),gn("gutters",[],function(e){h(e.options),c(e)},!0),gn("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?x(e.display)+"px":"0",e.refresh()},!0),gn("coverGutterNextToScrollbar",!1,v,!0),gn("lineNumbers",!1,function(e){h(e.options),c(e)},!0),gn("firstLineNumber",1,c,!0),gn("lineNumberFormatter",function(e){return e},c,!0),gn("showCursorWhenSelecting",!1,me,!0),gn("resetSelectionOnContextMenu",!0),gn("readOnly",!1,function(e,t){"nocursor"==t?(Ht(e),e.display.input.blur(),e.display.disabled=!0):(e.display.disabled=!1,t||pt(e))}),gn("disableInput",!1,function(e,t){t||pt(e)},!0),gn("dragDrop",!0),gn("cursorBlinkRate",530),gn("cursorScrollMargin",0),gn("cursorHeight",1,me,!0),gn("singleCursorHeightPerLine",!0,me,!0),gn("workTime",100),gn("workDelay",100),gn("flattenSpans",!0,r,!0),gn("addModeClass",!1,r,!0),gn("pollInterval",100),gn("undoDepth",200,function(e,t){e.doc.history.undoDepth=t}),gn("historyEventDelay",1250),gn("viewportMargin",10,function(e){e.refresh()},!0),gn("maxHighlightLength",1e4,r,!0),gn("moveInputWithCursor",!0,function(e,t){t||(e.display.inputDiv.style.top=e.display.inputDiv.style.left=0)}),gn("tabindex",null,function(e,t){e.display.input.tabIndex=t||""}),gn("autofocus",null);var wa=e.modes={},xa=e.mimeModes={};e.defineMode=function(t,n){if(e.defaults.mode||"null"==t||(e.defaults.mode=t),arguments.length>2){n.dependencies=[];for(var r=2;r<arguments.length;++r)n.dependencies.push(arguments[r])}wa[t]=n},e.defineMIME=function(e,t){xa[e]=t},e.resolveMode=function(t){if("string"==typeof t&&xa.hasOwnProperty(t))t=xa[t];else if(t&&"string"==typeof t.name&&xa.hasOwnProperty(t.name)){var n=xa[t.name];"string"==typeof n&&(n={name:n}),t=ii(n,t),t.name=n.name}else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,n){var n=e.resolveMode(n),r=wa[n.name];if(!r)return e.getMode(t,"text/plain");var i=r(t,n);if(ka.hasOwnProperty(n.name)){var a=ka[n.name];for(var o in a)a.hasOwnProperty(o)&&(i.hasOwnProperty(o)&&(i["_"+o]=i[o]),i[o]=a[o])}if(i.name=n.name,n.helperType&&(i.helperType=n.helperType),n.modeProps)for(var o in n.modeProps)i[o]=n.modeProps[o];return i},e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var ka=e.modeExtensions={};e.extendMode=function(e,t){var n=ka.hasOwnProperty(e)?ka[e]:ka[e]={};ai(t,n)},e.defineExtension=function(t,n){e.prototype[t]=n},e.defineDocExtension=function(e,t){Pa.prototype[e]=t},e.defineOption=gn;var Ca=[];e.defineInitHook=function(e){Ca.push(e)};var Sa=e.helpers={};e.registerHelper=function(t,n,r){Sa.hasOwnProperty(t)||(Sa[t]=e[t]={_global:[]}),Sa[t][n]=r},e.registerGlobalHelper=function(t,n,r,i){e.registerHelper(t,n,i),Sa[t]._global.push({pred:r,val:i})};var Ta=e.copyState=function(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n},Ma=e.startState=function(e,t,n){return e.startState?e.startState(t,n):!0};e.innerMode=function(e,t){for(;e.innerMode;){var n=e.innerMode(t);if(!n||n.mode==e)break;t=n.state,e=n.mode}return n||{mode:e,state:t}};var Ea=e.commands={selectAll:function(e){e.setSelection(aa(e.firstLine(),0),aa(e.lastLine()),to)},singleSelection:function(e){e.setSelection(e.getCursor("anchor"),e.getCursor("head"),to)},killLine:function(e){fn(e,function(t){if(t.empty()){var n=_r(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:aa(t.head.line+1,0)}:{from:t.head,to:aa(t.head.line,n)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){fn(e,function(t){return{from:aa(t.from().line,0),to:Q(e.doc,aa(t.to().line+1,0))}})},delLineLeft:function(e){fn(e,function(e){return{from:aa(e.from().line,0),to:e.from()}})},undo:function(e){e.undo()},redo:function(e){e.redo()},undoSelection:function(e){e.undoSelection()},redoSelection:function(e){e.redoSelection()},goDocStart:function(e){e.extendSelection(aa(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(aa(e.lastLine()))},goLineStart:function(e){e.extendSelectionsBy(function(t){return Ii(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){e.extendSelectionsBy(function(t){var n=Ii(e,t.head.line),r=e.getLineHandle(n.line),i=Mr(r);if(!i||0==i[0].level){var a=Math.max(0,r.text.search(/\S/)),o=t.head.line==n.line&&t.head.ch<=a&&t.head.ch;return aa(n.line,o?0:a)}return n},{origin:"+move",bias:1})},goLineEnd:function(e){e.extendSelectionsBy(function(t){
return $i(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},ro)},goLineLeft:function(e){e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},ro)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),r=e.options.tabSize,i=0;i<n.length;i++){var a=n[i].from(),o=io(e.getLine(a.line),a.ch,r);t.push(new Array(r-o%r+1).join(" "))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){Ze(e,function(){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++){var i=t[r].head,a=_r(e.doc,i.line).text;if(a)if(i.ch==a.length&&(i=new aa(i.line,i.ch-1)),i.ch>0)i=new aa(i.line,i.ch+1),e.replaceRange(a.charAt(i.ch-1)+a.charAt(i.ch-2),aa(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var o=_r(e.doc,i.line-1).text;o&&e.replaceRange(a.charAt(0)+"\n"+o.charAt(o.length-1),aa(i.line-1,o.length-1),aa(i.line,1),"+transpose")}n.push(new X(i,i))}e.setSelections(n)})},newlineAndIndent:function(e){Ze(e,function(){for(var t=e.listSelections().length,n=0;t>n;n++){var r=e.listSelections()[n];e.replaceRange("\n",r.anchor,r.head,"+input"),e.indentLine(r.from().line+1,null,!0),ln(e)}})},toggleOverwrite:function(e){e.toggleOverwrite()}},La=e.keyMap={};La.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},La.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},La.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection",fallthrough:["basic","emacsy"]},La.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},La["default"]=Qi?La.macDefault:La.pcDefault;var Ia=e.lookupKey=function(e,t,n){function r(t){t=vn(t);var i=t[e];if(i===!1)return"stop";if(null!=i&&n(i))return!0;if(t.nofallthrough)return"stop";var a=t.fallthrough;if(null==a)return!1;if("[object Array]"!=Object.prototype.toString.call(a))return r(a);for(var o=0;o<a.length;++o){var s=r(a[o]);if(s)return s}return!1}for(var i=0;i<t.length;++i){var a=r(t[i]);if(a)return"stop"!=a}},$a=e.isModifierKey=function(e){var t=_o[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t},Na=e.keyName=function(e,t){if(Ui&&34==e.keyCode&&e["char"])return!1;var n=_o[e.keyCode];return null==n||e.altGraphKey?!1:(e.altKey&&(n="Alt-"+n),(ta?e.metaKey:e.ctrlKey)&&(n="Ctrl-"+n),(ta?e.ctrlKey:e.metaKey)&&(n="Cmd-"+n),!t&&e.shiftKey&&(n="Shift-"+n),n)};e.fromTextArea=function(t,n){function r(){t.value=c.getValue()}if(n||(n={}),n.value=t.value,!n.tabindex&&t.tabindex&&(n.tabindex=t.tabindex),!n.placeholder&&t.placeholder&&(n.placeholder=t.placeholder),null==n.autofocus){var i=hi();n.autofocus=i==t||null!=t.getAttribute("autofocus")&&i==document.body}if(t.form&&(Ga(t.form,"submit",r),!n.leaveSubmitMethodAlone)){var a=t.form,o=a.submit;try{var s=a.submit=function(){r(),a.submit=o,a.submit(),a.submit=s}}catch(l){}}t.style.display="none";var c=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},n);return c.save=r,c.getTextArea=function(){return t},c.toTextArea=function(){r(),t.parentNode.removeChild(c.getWrapperElement()),t.style.display="",t.form&&(Ya(t.form,"submit",r),"function"==typeof t.form.submit&&(t.form.submit=o))},c};var Aa=e.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};Aa.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var n=t==e;else var n=t&&(e.test?e.test(t):e(t));return n?(++this.pos,t):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=io(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?io(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return io(this.string,null,this.tabSize)-(this.lineStart?io(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,n){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&t!==!1&&(this.pos+=r[0].length),r)}var i=function(e){return n?e.toLowerCase():e},a=this.string.substr(this.pos,e.length);return i(a)==i(e)?(t!==!1&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}};var Ba=e.TextMarker=function(e,t){this.lines=[],this.type=t,this.doc=e};Zr(Ba),Ba.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Ge(e),Yr(this,"clear")){var n=this.find();n&&Vr(this,"clear",n.from,n.to)}for(var r=null,i=null,a=0;a<this.lines.length;++a){var o=this.lines[a],s=Cn(o.markedSpans,this);e&&!this.collapsed?it(e,Cr(o),"text"):e&&(null!=s.to&&(i=Cr(o)),null!=s.from&&(r=Cr(o))),o.markedSpans=Sn(o.markedSpans,s),null==s.from&&this.collapsed&&!Vn(this.doc,o)&&e&&kr(o,Ke(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var a=0;a<this.lines.length;++a){var l=Pn(this.lines[a]),c=f(l);c>e.display.maxLineLength&&(e.display.maxLine=l,e.display.maxLineLength=c,e.display.maxLineChanged=!0)}null!=r&&e&&this.collapsed&&rt(e,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&fe(e.doc)),e&&Vr(e,"markerCleared",e,this),t&&Ye(e),this.parent&&this.parent.clear()}},Ba.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var n,r,i=0;i<this.lines.length;++i){var a=this.lines[i],o=Cn(a.markedSpans,this);if(null!=o.from&&(n=aa(t?a:Cr(a),o.from),-1==e))return n;if(null!=o.to&&(r=aa(t?a:Cr(a),o.to),1==e))return r}return n&&{from:n,to:r}},Ba.prototype.changed=function(){var e=this.find(-1,!0),t=this,n=this.doc.cm;e&&n&&Ze(n,function(){var r=e.line,i=Cr(e.line),a=Ie(n,i);if(a&&(Be(a),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0,!Vn(t.doc,r)&&null!=t.height){var o=t.height;t.height=null;var s=Gn(t)-o;s&&kr(r,r.height+s)}})},Ba.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=ni(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},Ba.prototype.detachLine=function(e){if(this.lines.splice(ni(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}};var Oa=0,za=e.SharedTextMarker=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};Zr(za),za.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Vr(this,"clear")}},za.prototype.find=function(e,t){return this.primary.find(e,t)};var Da=e.LineWidget=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.cm=e,this.node=t};Zr(Da),Da.prototype.clear=function(){var e=this.cm,t=this.line.widgets,n=this.line,r=Cr(n);if(null!=r&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(n.widgets=null);var a=Gn(this);Ze(e,function(){Xn(e,n,-a),it(e,r,"widget"),kr(n,Math.max(0,n.height-a))})}},Da.prototype.changed=function(){var e=this.height,t=this.cm,n=this.line;this.height=null;var r=Gn(this)-e;r&&Ze(t,function(){t.curOp.forceUpdate=!0,Xn(t,n,r),kr(n,n.height+r)})};var ja=e.Line=function(e,t,n){this.text=e,Bn(this,t),this.height=n?n(this):1};Zr(ja),ja.prototype.lineNo=function(){return Cr(this)};var Ra={},qa={};gr.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;r>n;++n){var i=this.lines[n];this.height-=i.height,Qn(i),Vr(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;r>e;++e)if(n(this.lines[e]))return!0}},vr.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(i>e){var a=Math.min(t,i-e),o=r.height;if(r.removeInner(e,a),this.height-=o-r.height,i==a&&(this.children.splice(n--,1),r.parent=null),0==(t-=a))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof gr))){var s=[];this.collapse(s),this.children=[new gr(s)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],a=i.chunkSize();if(a>=e){if(i.insertInner(e,t,n),i.lines&&i.lines.length>50){for(;i.lines.length>50;){var o=i.lines.splice(i.lines.length-25,25),s=new gr(o);i.height-=s.height,this.children.splice(r+1,0,s),s.parent=this}this.maybeSpill()}break}e-=a}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new vr(t);if(e.parent){e.size-=n.size,e.height-=n.height;var r=ni(e.parent.children,e);e.parent.children.splice(r+1,0,n)}else{var i=new vr(e.children);i.parent=e,e.children=[i,n],e=i}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],a=i.chunkSize();if(a>e){var o=Math.min(t,a-e);if(i.iterN(e,o,n))return!0;if(0==(t-=o))break;e=0}else e-=a}}};var Ha=0,Pa=e.Doc=function(e,t,n){if(!(this instanceof Pa))return new Pa(e,t,n);null==n&&(n=0),vr.call(this,[new gr([new ja("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=n;var r=aa(n,0);this.sel=Y(r),this.history=new Er(null),this.id=++Ha,this.modeOption=t,"string"==typeof e&&(e=vo(e)),mr(this,{from:r,to:r,text:e}),ce(this,Y(r),to)};Pa.prototype=ii(vr.prototype,{constructor:Pa,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=xr(this,this.first,this.first+this.size);return e===!1?t:t.join(e||"\n")},setValue:et(function(e){var t=aa(this.first,0),n=this.first+this.size-1;Gt(this,{from:t,to:aa(n,_r(this,n).text.length),text:vo(e),origin:"setValue"},!0),ce(this,Y(t))}),replaceRange:function(e,t,n,r){t=Q(this,t),n=n?Q(this,n):t,tn(this,e,t,n,r)},getRange:function(e,t,n){var r=wr(this,Q(this,e),Q(this,t));return n===!1?r:r.join(n||"\n")},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){return ee(this,e)?_r(this,e):void 0},getLineNumber:function(e){return Cr(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=_r(this,e)),Pn(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Q(this,e)},getCursor:function(e){var t,n=this.sel.primary();return t=null==e||"head"==e?n.head:"anchor"==e?n.anchor:"end"==e||"to"==e||e===!1?n.to():n.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:et(function(e,t,n){oe(this,Q(this,"number"==typeof e?aa(e,t||0):e),null,n)}),setSelection:et(function(e,t,n){oe(this,Q(this,e),Q(this,t||e),n)}),extendSelection:et(function(e,t,n){re(this,Q(this,e),t&&Q(this,t),n)}),extendSelections:et(function(e,t){ie(this,te(this,e,t))}),extendSelectionsBy:et(function(e,t){ie(this,ri(this.sel.ranges,e),t)}),setSelections:et(function(e,t,n){if(e.length){for(var r=0,i=[];r<e.length;r++)i[r]=new X(Q(this,e[r].anchor),Q(this,e[r].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),ce(this,G(i,t),n)}}),addSelection:et(function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new X(Q(this,e),Q(this,t||e))),ce(this,G(r,r.length-1),n)}),getSelection:function(e){for(var t,n=this.sel.ranges,r=0;r<n.length;r++){var i=wr(this,n[r].from(),n[r].to());t=t?t.concat(i):i}return e===!1?t:t.join(e||"\n")},getSelections:function(e){for(var t=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=wr(this,n[r].from(),n[r].to());e!==!1&&(i=i.join(e||"\n")),t[r]=i}return t},replaceSelection:function(e,t,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:et(function(e,t,n){for(var r=[],i=this.sel,a=0;a<i.ranges.length;a++){var o=i.ranges[a];r[a]={from:o.from(),to:o.to(),text:vo(e[a]),origin:n}}for(var s=t&&"end"!=t&&Kt(this,r,t),a=r.length-1;a>=0;a--)Gt(this,r[a]);s?le(this,s):this.cm&&ln(this.cm)}),undo:et(function(){Zt(this,"undo")}),redo:et(function(){Zt(this,"redo")}),undoSelection:et(function(){Zt(this,"undo",!0)}),redoSelection:et(function(){Zt(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var r=0;r<e.undone.length;r++)e.undone[r].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){this.history=new Er(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Rr(this.history.done),undone:Rr(this.history.undone)}},setHistory:function(e){var t=this.history=new Er(this.history.maxGeneration);t.done=Rr(e.done.slice(0),null,!0),t.undone=Rr(e.undone.slice(0),null,!0)},addLineClass:et(function(e,t,n){return dn(this,e,"class",function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"wrapClass";if(e[r]){if(new RegExp("(?:^|\\s)"+n+"(?:$|\\s)").test(e[r]))return!1;e[r]+=" "+n}else e[r]=n;return!0})}),removeLineClass:et(function(e,t,n){return dn(this,e,"class",function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"wrapClass",i=e[r];if(!i)return!1;if(null==n)e[r]=null;else{var a=i.match(new RegExp("(?:^|\\s+)"+n+"(?:$|\\s+)"));if(!a)return!1;var o=a.index+a[0].length;e[r]=i.slice(0,a.index)+(a.index&&o!=i.length?" ":"")+i.slice(o)||null}return!0})}),markText:function(e,t,n){return bn(this,Q(this,e),Q(this,t),n,"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared};return e=Q(this,e),bn(this,e,e,n,"bookmark")},findMarksAt:function(e){e=Q(this,e);var t=[],n=_r(this,e.line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,n){e=Q(this,e),t=Q(this,t);var r=[],i=e.line;return this.iter(e.line,t.line+1,function(a){var o=a.markedSpans;if(o)for(var s=0;s<o.length;s++){var l=o[s];i==e.line&&e.ch>l.to||null==l.from&&i!=e.line||i==t.line&&l.from>t.ch||n&&!n(l.marker)||r.push(l.marker.parent||l.marker)}++i}),r},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&e.push(n[r].marker)}),e},posFromIndex:function(e){var t,n=this.first;return this.iter(function(r){var i=r.text.length+1;return i>e?(t=e,!0):(e-=i,void++n)}),Q(this,aa(n,t))},indexFromPos:function(e){e=Q(this,e);var t=e.ch;return e.line<this.first||e.ch<0?0:(this.iter(this.first,e.line,function(e){t+=e.text.length+1}),t)},copy:function(e){var t=new Pa(xr(this,this.first,this.first+this.size),this.modeOption,this.first);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var r=new Pa(xr(this,t,n),e.mode||this.modeOption,t);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],wn(r,_n(this)),r},unlinkDoc:function(t){if(t instanceof e&&(t=t.doc),this.linked)for(var n=0;n<this.linked.length;++n){var r=this.linked[n];if(r.doc==t){this.linked.splice(n,1),t.unlinkDoc(this),xn(_n(this));break}}if(t.history==this.history){var i=[t.id];br(t,function(e){i.push(e.id)},!0),t.history=new Er(null),t.history.done=Rr(this.history.done,i),t.history.undone=Rr(this.history.undone,i)}},iterLinkedDocs:function(e){br(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),Pa.prototype.eachLine=Pa.prototype.iter;var Wa="iter insert remove copy getEditor".split(" ");for(var Fa in Pa.prototype)Pa.prototype.hasOwnProperty(Fa)&&ni(Wa,Fa)<0&&(e.prototype[Fa]=function(e){return function(){return e.apply(this.doc,arguments)}}(Pa.prototype[Fa]));Zr(Pa);var Ua,Va=e.e_preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},Ka=e.e_stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},Xa=e.e_stop=function(e){Va(e),Ka(e)},Ga=e.on=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={}),i=r[t]||(r[t]=[]);i.push(n)}},Ya=e.off=function(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers&&e._handlers[t];if(!r)return;for(var i=0;i<r.length;++i)if(r[i]==n){r.splice(i,1);break}}},Za=e.signal=function(e,t){var n=e._handlers&&e._handlers[t];if(n)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)},Qa=0,Ja=30,eo=e.Pass={toString:function(){return"CodeMirror.Pass"}},to={scroll:!1},no={origin:"*mouse"},ro={origin:"+move"};Qr.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var io=e.countColumn=function(e,t,n,r,i){null==t&&(t=e.search(/[^\s\u00a0]/),-1==t&&(t=e.length));for(var a=r||0,o=i||0;;){var s=e.indexOf("	",a);if(0>s||s>=t)return o+(t-a);o+=s-a,o+=n-o%n,a=s+1}},ao=[""],oo=function(e){e.select()};Yi?oo=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:qi&&(oo=function(e){try{e.select()}catch(t){}}),[].indexOf&&(ni=function(e,t){return e.indexOf(t)}),[].map&&(ri=function(e,t){return e.map(t)});var so,lo=/[\u00df\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,co=e.isWordChar=function(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||lo.test(e))},uo=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;so=document.createRange?function(e,t,n){var r=document.createRange();return r.setEnd(e,n),r.setStart(e,t),r}:function(e,t,n){var r=document.body.createTextRange();return r.moveToElementText(e.parentNode),r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r},qi&&11>Hi&&(hi=function(){try{return document.activeElement}catch(e){return document.body}});var fo,po,ho,mo=!1,go=function(){if(qi&&9>Hi)return!1;var e=ui("div");return"draggable"in e||"dragDrop"in e}(),vo=e.splitLines=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;r>=t;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var a=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),o=a.indexOf("\r");-1!=o?(n.push(a.slice(0,o)),t+=o+1):(n.push(a),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)},bo=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return t&&t.parentElement()==e?0!=t.compareEndPoints("StartToEnd",t):!1},yo=function(){var e=ui("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),_o={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};e.keyNames=_o,function(){for(var e=0;10>e;e++)_o[e+48]=_o[e+96]=String(e);for(var e=65;90>=e;e++)_o[e]=String.fromCharCode(e);for(var e=1;12>=e;e++)_o[e+111]=_o[e+63235]="F"+e}();var wo,xo=function(){function e(e){return 247>=e?n.charAt(e):e>=1424&&1524>=e?"R":e>=1536&&1773>=e?r.charAt(e-1536):e>=1774&&2220>=e?"r":e>=8192&&8203>=e?"w":8204==e?"b":"L"}function t(e,t,n){this.level=e,this.from=t,this.to=n}var n="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",r="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,a=/[stwN]/,o=/[LRr]/,s=/[Lb1n]/,l=/[1n]/,c="L";return function(n){if(!i.test(n))return!1;for(var r,u=n.length,d=[],f=0;u>f;++f)d.push(r=e(n.charCodeAt(f)));for(var f=0,p=c;u>f;++f){var r=d[f];"m"==r?d[f]=p:p=r}for(var f=0,h=c;u>f;++f){var r=d[f];"1"==r&&"r"==h?d[f]="n":o.test(r)&&(h=r,"r"==r&&(d[f]="R"))}for(var f=1,p=d[0];u-1>f;++f){var r=d[f];"+"==r&&"1"==p&&"1"==d[f+1]?d[f]="1":","!=r||p!=d[f+1]||"1"!=p&&"n"!=p||(d[f]=p),p=r}for(var f=0;u>f;++f){var r=d[f];if(","==r)d[f]="N";else if("%"==r){for(var m=f+1;u>m&&"%"==d[m];++m);for(var g=f&&"!"==d[f-1]||u>m&&"1"==d[m]?"1":"N",v=f;m>v;++v)d[v]=g;f=m-1}}for(var f=0,h=c;u>f;++f){var r=d[f];"L"==h&&"1"==r?d[f]="L":o.test(r)&&(h=r)}for(var f=0;u>f;++f)if(a.test(d[f])){for(var m=f+1;u>m&&a.test(d[m]);++m);for(var b="L"==(f?d[f-1]:c),y="L"==(u>m?d[m]:c),g=b||y?"L":"R",v=f;m>v;++v)d[v]=g;f=m-1}for(var _,w=[],f=0;u>f;)if(s.test(d[f])){var x=f;for(++f;u>f&&s.test(d[f]);++f);w.push(new t(0,x,f))}else{var k=f,C=w.length;for(++f;u>f&&"L"!=d[f];++f);for(var v=k;f>v;)if(l.test(d[v])){v>k&&w.splice(C,0,new t(1,k,v));var S=v;for(++v;f>v&&l.test(d[v]);++v);w.splice(C,0,new t(2,S,v)),k=v}else++v;f>k&&w.splice(C,0,new t(1,k,f))}return 1==w[0].level&&(_=n.match(/^\s+/))&&(w[0].from=_[0].length,w.unshift(new t(0,0,_[0].length))),1==ti(w).level&&(_=n.match(/\s+$/))&&(ti(w).to-=_[0].length,w.push(new t(0,u-_[0].length,u))),w[0].level!=ti(w).level&&w.push(new t(w[0].level,u,u)),w}}();return e.version="4.3.0",e}),define("codemirror",["codemirror/lib/codemirror"],function(e){return e}),define("autoSave",["jquery"],function(e){"use strict";var t,n,r,i;return n=void 0,i=void 0,r=void 0,t=function(){},t.prototype.bind=function(t,i){var a,o,s,l;a=e("#editorStatus"),n=t,this.form=i,r=this,e("[name=title]").on("input",function(){""!==e.trim(e(this).val())&&r.change(),window.localStorage&&localStorage.setItem("autoSaveTitle_"+location.pathname+location.search,e(this).val())}),e("[name=tags]").on("change",function(){""!==e.trim(e(this).val())&&r.change()}),o=e("#license"),o.length&&o.on("change",function(){return r.change()}),l=e(".reasons"),l.length&&l.on("click",function(){return r.change()}),s=e("input[name=noticeAnswerers]"),s.length&&s.on("change",function(){return r.change()}),n.change?n.change(function(){""!==e.trim(n.getVal())&&r.change(),window.localStorage&&window.localStorage.setItem("autoSaveContent_"+location.pathname+location.search,n.getVal())}):n.on("change",function(){""!==e.trim(n.getValue())&&r.change(),window.localStorage&&window.localStorage.setItem("autoSaveContent_"+location.pathname+location.search,n.getValue())}),e("#dropIt").click(function(){e.post("/api/draft/"+e("#draftId").val()+"/delete",function(t){0===t.status?(a.html("已舍弃"),e("#draftId").val(""),window.localStorage&&localStorage.removeItem("autoSaveContent_"+location.pathname),window.localStorage&&localStorage.removeItem("autoSaveTitle_"+location.pathname),window.localStorage&&localStorage.removeItem("autoSaveTag_"+location.pathname)):a.html("舍弃失败"),e("#dropIt").addClass("hidden")})})},t.prototype.change=function(){var t;t=e("#editorStatus"),t.html("保存中...").removeClass("hidden"),e("#dropIt").addClass("hidden"),clearTimeout(i),i=setTimeout(function(){r.save()},4e3)},t.prototype.save=function(){var t,n,r;t=e("#editorStatus"),n=this,e("#answerIt, #publishIt").attr("disabled")||(e("#publishIt, #answerIt").attr("disabled","disabled"),r=new n.form,e.post("/api/"+r.type+"/draft/save",r,function(n){0===n.status?(t.html("已保存草稿"),e("#dropIt").data("id",n.data).removeClass("hidden"),e("#draftId").val(n.data),window.localStorage&&(window.localStorage.removeItem("autoSaveContent_"+location.pathname+location.search),window.localStorage.removeItem("autoSaveTitle_"+location.pathname+location.search))):t.html("保存失败"),e("#publishIt, #answerIt").removeAttr("disabled")}))},new t}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/mode/python/python",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){return new RegExp("^(("+e.join(")|(")+"))\\b")}function n(e){return e.scopes[e.scopes.length-1]}var r=t(["and","or","not","is","in"]),i=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield"],a=["abs","all","any","bin","bool","bytearray","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__","NotImplemented","Ellipsis","__debug__"],o={builtins:["apply","basestring","buffer","cmp","coerce","execfile","file","intern","long","raw_input","reduce","reload","unichr","unicode","xrange","False","True","None"],keywords:["exec","print"]},s={builtins:["ascii","bytes","exec","print"],keywords:["nonlocal","False","True","None"]
};e.registerHelper("hintWords","python",i.concat(a)),e.defineMode("python",function(l,c){function u(e,t){if(e.sol()&&"py"==n(t).type){var r=n(t).offset;if(e.eatSpace()){var i=e.indentation();return i>r?p(e,t,"py"):r>i&&h(e,t)&&(t.errorToken=!0),null}var a=d(e,t);return r>0&&h(e,t)&&(a+=" "+g),a}return d(e,t)}function d(e,t){if(e.eatSpace())return null;var n=e.peek();if("#"==n)return e.skipToEnd(),"comment";if(e.match(/^[0-9\.]/,!1)){var i=!1;if(e.match(/^\d*\.\d+(e[\+\-]?\d+)?/i)&&(i=!0),e.match(/^\d+\.\d*/)&&(i=!0),e.match(/^\.\d+/)&&(i=!0),i)return e.eat(/J/i),"number";var a=!1;if(e.match(/^0x[0-9a-f]+/i)&&(a=!0),e.match(/^0b[01]+/i)&&(a=!0),e.match(/^0o[0-7]+/i)&&(a=!0),e.match(/^[1-9]\d*(e[\+\-]?\d+)?/)&&(e.eat(/J/i),a=!0),e.match(/^0(?![\dx])/i)&&(a=!0),a)return e.eat(/L/i),"number"}return e.match(T)?(t.tokenize=f(e.current()),t.tokenize(e,t)):e.match(w)||e.match(_)?null:e.match(y)||e.match(v)||e.match(r)?"operator":e.match(b)?null:e.match(M)?"keyword":e.match(E)?"builtin":e.match(/^(self|cls)\b/)?"variable-2":e.match(x)?"def"==t.lastToken||"class"==t.lastToken?"def":"variable":(e.next(),g)}function f(e){function t(t,i){for(;!t.eol();)if(t.eatWhile(/[^'"\\]/),t.eat("\\")){if(t.next(),n&&t.eol())return r}else{if(t.match(e))return i.tokenize=u,r;t.eat(/['"]/)}if(n){if(c.singleLineStringErrors)return g;i.tokenize=u}return r}for(;"rub".indexOf(e.charAt(0).toLowerCase())>=0;)e=e.substr(1);var n=1==e.length,r="string";return t.isString=!0,t}function p(e,t,r){var i=0,a=null;if("py"==r)for(;"py"!=n(t).type;)t.scopes.pop();i=n(t).offset+~~("py"==r?l.indentUnit:k),"py"==r||e.match(/^(\s|#.*)*$/,!1)||(a=e.column()+1),t.scopes.push({offset:i,type:r,align:a})}function h(e,t){for(var r=e.indentation();n(t).offset>r;){if("py"!=n(t).type)return!0;t.scopes.pop()}return n(t).offset!=r}function m(e,t){var r=t.tokenize(e,t),i=e.current();if("."==i)return r=e.match(x,!1)?null:g,null==r&&"meta"==t.lastStyle&&(r="meta"),r;if("@"==i)return e.match(x,!1)?"meta":g;"variable"!=r&&"builtin"!=r||"meta"!=t.lastStyle||(r="meta"),("pass"==i||"return"==i)&&(t.dedent+=1),"lambda"==i&&(t.lambda=!0),":"!=i||t.lambda||"py"!=n(t).type||p(e,t,"py");var a=1==i.length?"[({".indexOf(i):-1;if(-1!=a&&p(e,t,"])}".slice(a,a+1)),a="])}".indexOf(i),-1!=a){if(n(t).type!=i)return g;t.scopes.pop()}return t.dedent>0&&e.eol()&&"py"==n(t).type&&(t.scopes.length>1&&t.scopes.pop(),t.dedent-=1),r}var g="error",v=c.singleOperators||new RegExp("^[\\+\\-\\*/%&|\\^~<>!]"),b=c.singleDelimiters||new RegExp("^[\\(\\)\\[\\]\\{\\}@,:`=;\\.]"),y=c.doubleOperators||new RegExp("^((==)|(!=)|(<=)|(>=)|(<>)|(<<)|(>>)|(//)|(\\*\\*))"),_=c.doubleDelimiters||new RegExp("^((\\+=)|(\\-=)|(\\*=)|(%=)|(/=)|(&=)|(\\|=)|(\\^=))"),w=c.tripleDelimiters||new RegExp("^((//=)|(>>=)|(<<=)|(\\*\\*=))"),x=c.identifiers||new RegExp("^[_A-Za-z][_A-Za-z0-9]*"),k=c.hangingIndent||l.indentUnit,C=i,S=a;if(void 0!=c.extra_keywords&&(C=C.concat(c.extra_keywords)),void 0!=c.extra_builtins&&(S=S.concat(c.extra_builtins)),c.version&&3==parseInt(c.version,10)){C=C.concat(s.keywords),S=S.concat(s.builtins);var T=new RegExp("^(([rb]|(br))?('{3}|\"{3}|['\"]))","i")}else{C=C.concat(o.keywords),S=S.concat(o.builtins);var T=new RegExp("^(([rub]|(ur)|(br))?('{3}|\"{3}|['\"]))","i")}var M=t(C),E=t(S),L={startState:function(e){return{tokenize:u,scopes:[{offset:e||0,type:"py",align:null}],lastStyle:null,lastToken:null,lambda:!1,dedent:0}},token:function(e,t){var n=t.errorToken;n&&(t.errorToken=!1);var r=m(e,t);t.lastStyle=r;var i=e.current();return i&&r&&(t.lastToken=i),e.eol()&&t.lambda&&(t.lambda=!1),n?r+" "+g:r},indent:function(t,r){if(t.tokenize!=u)return t.tokenize.isString?e.Pass:0;var i=n(t),a=r&&r.charAt(0)==i.type;return null!=i.align?i.align-(a?1:0):a&&t.scopes.length>1?t.scopes[t.scopes.length-2].offset:i.offset},lineComment:"#",fold:"indent"};return L}),e.defineMIME("text/x-python","python");var l=function(e){return e.split(" ")};e.defineMIME("text/x-cython",{name:"python",extra_keywords:l("by cdef cimport cpdef ctypedef enum exceptextern gil include nogil property publicreadonly struct union DEF IF ELIF ELSE")})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/mode/ruby/ruby",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("ruby",function(e){function t(e){for(var t={},n=0,r=e.length;r>n;++n)t[e[n]]=!0;return t}function n(e,t,n){return n.tokenize.push(e),e(t,n)}function r(e,t){if(c=null,e.sol()&&e.match("=begin")&&e.eol())return t.tokenize.push(l),"comment";if(e.eatSpace())return null;var r,i=e.next();if("`"==i||"'"==i||'"'==i)return n(o(i,"string",'"'==i||"`"==i),e,t);if("/"!=i||e.eol()||" "==e.peek()){if("%"==i){var a="string",u=!0;e.eat("s")?a="atom":e.eat(/[WQ]/)?a="string":e.eat(/[r]/)?a="string-2":e.eat(/[wxq]/)&&(a="string",u=!1);var d=e.eat(/[^\w\s]/);return d?(p.propertyIsEnumerable(d)&&(d=p[d]),n(o(d,a,u,!0),e,t)):"operator"}if("#"==i)return e.skipToEnd(),"comment";if("<"==i&&(r=e.match(/^<-?[\`\"\']?([a-zA-Z_?]\w*)[\`\"\']?(?:;|$)/)))return n(s(r[1]),e,t);if("0"==i)return e.eat("x")?e.eatWhile(/[\da-fA-F]/):e.eat("b")?e.eatWhile(/[01]/):e.eatWhile(/[0-7]/),"number";if(/\d/.test(i))return e.match(/^[\d_]*(?:\.[\d_]+)?(?:[eE][+\-]?[\d_]+)?/),"number";if("?"==i){for(;e.match(/^\\[CM]-/););return e.eat("\\")?e.eatWhile(/\w/):e.next(),"string"}return":"==i?e.eat("'")?n(o("'","atom",!1),e,t):e.eat('"')?n(o('"',"atom",!0),e,t):e.eat(/[\<\>]/)?(e.eat(/[\<\>]/),"atom"):e.eat(/[\+\-\*\/\&\|\:\!]/)?"atom":e.eat(/[a-zA-Z$@_]/)?(e.eatWhile(/[\w]/),e.eat(/[\?\!\=]/),"atom"):"operator":"@"==i&&e.match(/^@?[a-zA-Z_]/)?(e.eat("@"),e.eatWhile(/[\w]/),"variable-2"):"$"==i?(e.eat(/[a-zA-Z_]/)?e.eatWhile(/[\w]/):e.eat(/\d/)?e.eat(/\d/):e.next(),"variable-3"):/[a-zA-Z_]/.test(i)?(e.eatWhile(/[\w]/),e.eat(/[\?\!]/),e.eat(":")?"atom":"ident"):"|"!=i||!t.varList&&"{"!=t.lastTok&&"do"!=t.lastTok?/[\(\)\[\]{}\\;]/.test(i)?(c=i,null):"-"==i&&e.eat(">")?"arrow":/[=+\-\/*:\.^%<>~|]/.test(i)?(e.eatWhile(/[=+\-\/*:\.^%<>~|]/),"operator"):null:(c="|",null)}return e.eat("=")?"operator":n(o(i,"string-2",!0),e,t)}function i(){var e=1;return function(t,n){if("}"==t.peek()){if(e--,0==e)return n.tokenize.pop(),n.tokenize[n.tokenize.length-1](t,n)}else"{"==t.peek()&&e++;return r(t,n)}}function a(){var e=!1;return function(t,n){return e?(n.tokenize.pop(),n.tokenize[n.tokenize.length-1](t,n)):(e=!0,r(t,n))}}function o(e,t,n,r){return function(o,s){var l,c=!1;for("read-quoted-paused"===s.context.type&&(s.context=s.context.prev,o.eat("}"));null!=(l=o.next());){if(l==e&&(r||!c)){s.tokenize.pop();break}if(n&&"#"==l&&!c){if(o.eat("{")){"}"==e&&(s.context={prev:s.context,type:"read-quoted-paused"}),s.tokenize.push(i());break}if(/[@\$]/.test(o.peek())){s.tokenize.push(a());break}}c=!c&&"\\"==l}return t}}function s(e){return function(t,n){return t.match(e)?n.tokenize.pop():t.skipToEnd(),"string"}}function l(e,t){return e.sol()&&e.match("=end")&&e.eol()&&t.tokenize.pop(),e.skipToEnd(),"comment"}var c,u=t(["alias","and","BEGIN","begin","break","case","class","def","defined?","do","else","elsif","END","end","ensure","false","for","if","in","module","next","not","or","redo","rescue","retry","return","self","super","then","true","undef","unless","until","when","while","yield","nil","raise","throw","catch","fail","loop","callcc","caller","lambda","proc","public","protected","private","require","load","require_relative","extend","autoload","__END__","__FILE__","__LINE__","__dir__"]),d=t(["def","class","case","for","while","module","then","catch","loop","proc","begin"]),f=t(["end","until"]),p={"[":"]","{":"}","(":")"};return{startState:function(){return{tokenize:[r],indented:0,context:{type:"top",indented:-e.indentUnit},continuedLine:!1,lastTok:null,varList:!1}},token:function(e,t){e.sol()&&(t.indented=e.indentation());var n,r=t.tokenize[t.tokenize.length-1](e,t);if("ident"==r){var i=e.current();r=u.propertyIsEnumerable(e.current())?"keyword":/^[A-Z]/.test(i)?"tag":"def"==t.lastTok||"class"==t.lastTok||t.varList?"def":"variable",d.propertyIsEnumerable(i)?n="indent":f.propertyIsEnumerable(i)?n="dedent":"if"!=i&&"unless"!=i||e.column()!=e.indentation()?"do"==i&&t.context.indented<t.indented&&(n="indent"):n="indent"}return(c||r&&"comment"!=r)&&(t.lastTok=i||c||r),"|"==c&&(t.varList=!t.varList),"indent"==n||/[\(\[\{]/.test(c)?t.context={prev:t.context,type:c||r,indented:t.indented}:("dedent"==n||/[\)\]\}]/.test(c))&&t.context.prev&&(t.context=t.context.prev),e.eol()&&(t.continuedLine="\\"==c||"operator"==r),r},indent:function(t,n){if(t.tokenize[t.tokenize.length-1]!=r)return 0;var i=n&&n.charAt(0),a=t.context,o=a.type==p[i]||"keyword"==a.type&&/^(?:end|until|else|elsif|when|rescue)\b/.test(n);return a.indented+(o?0:e.indentUnit)+(t.continuedLine?e.indentUnit:0)},electricChars:"}de",lineComment:"#"}}),e.defineMIME("text/x-ruby","ruby")}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/mode/xml/xml",["codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("xml",function(t,n){function r(e,t){function n(n){return t.tokenize=n,n(e,t)}var r=e.next();if("<"==r)return e.eat("!")?e.eat("[")?e.match("CDATA[")?n(o("atom","]]>")):null:e.match("--")?n(o("comment","-->")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),n(s(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=o("meta","?>"),"meta"):(k=e.eat("/")?"closeTag":"openTag",t.tokenize=i,"tag bracket");if("&"==r){var a;return a=e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"),a?"atom":"error"}return e.eatWhile(/[^&<]/),null}function i(e,t){var n=e.next();if(">"==n||"/"==n&&e.eat(">"))return t.tokenize=r,k=">"==n?"endTag":"selfcloseTag","tag bracket";if("="==n)return k="equals",null;if("<"==n){t.tokenize=r,t.state=d,t.tagName=t.tagStart=null;var i=t.tokenize(e,t);return i?i+" tag error":"tag error"}return/[\'\"]/.test(n)?(t.tokenize=a(n),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function a(e){var t=function(t,n){for(;!t.eol();)if(t.next()==e){n.tokenize=i;break}return"string"};return t.isInAttribute=!0,t}function o(e,t){return function(n,i){for(;!n.eol();){if(n.match(t)){i.tokenize=r;break}n.next()}return e}}function s(e){return function(t,n){for(var i;null!=(i=t.next());){if("<"==i)return n.tokenize=s(e+1),n.tokenize(t,n);if(">"==i){if(1==e){n.tokenize=r;break}return n.tokenize=s(e-1),n.tokenize(t,n)}}return"meta"}}function l(e,t,n){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=n,(S.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function c(e){e.context&&(e.context=e.context.prev)}function u(e,t){for(var n;;){if(!e.context)return;if(n=e.context.tagName,!S.contextGrabbers.hasOwnProperty(n)||!S.contextGrabbers[n].hasOwnProperty(t))return;c(e)}}function d(e,t,n){return"openTag"==e?(n.tagStart=t.column(),f):"closeTag"==e?p:d}function f(e,t,n){return"word"==e?(n.tagName=t.current(),C="tag",g):(C="error",f)}function p(e,t,n){if("word"==e){var r=t.current();return n.context&&n.context.tagName!=r&&S.implicitlyClosed.hasOwnProperty(n.context.tagName)&&c(n),n.context&&n.context.tagName==r?(C="tag",h):(C="tag error",m)}return C="error",m}function h(e,t,n){return"endTag"!=e?(C="error",h):(c(n),d)}function m(e,t,n){return C="error",h(e,t,n)}function g(e,t,n){if("word"==e)return C="attribute",v;if("endTag"==e||"selfcloseTag"==e){var r=n.tagName,i=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==e||S.autoSelfClosers.hasOwnProperty(r)?u(n,r):(u(n,r),n.context=new l(n,r,i==n.indented)),d}return C="error",g}function v(e,t,n){return"equals"==e?b:(S.allowMissing||(C="error"),g(e,t,n))}function b(e,t,n){return"string"==e?y:"word"==e&&S.allowUnquoted?(C="string",g):(C="error",g(e,t,n))}function y(e,t,n){return"string"==e?y:g(e,t,n)}var _=t.indentUnit,w=n.multilineTagIndentFactor||1,x=n.multilineTagIndentPastTag;null==x&&(x=!0);var k,C,S=n.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1},T=n.alignCDATA;return{startState:function(){return{tokenize:r,state:d,indented:0,tagName:null,tagStart:null,context:null}},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;k=null;var n=t.tokenize(e,t);return(n||k)&&"comment"!=n&&(C=null,t.state=t.state(k||n,e,t),C&&(n="error"==C?n+" error":C)),n},indent:function(t,n,a){var o=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+_;if(o&&o.noIndent)return e.Pass;if(t.tokenize!=i&&t.tokenize!=r)return a?a.match(/^(\s*)/)[0].length:0;if(t.tagName)return x?t.tagStart+t.tagName.length+2:t.tagStart+_*w;if(T&&/<!\[CDATA\[/.test(n))return 0;var s=n&&/^<(\/)?([\w_:\.-]*)/.exec(n);if(s&&s[1])for(;o;){if(o.tagName==s[2]){o=o.prev;break}if(!S.implicitlyClosed.hasOwnProperty(o.tagName))break;o=o.prev}else if(s)for(;o;){var l=S.contextGrabbers[o.tagName];if(!l||!l.hasOwnProperty(s[2]))break;o=o.prev}for(;o&&!o.startOfLine;)o=o.prev;return o?o.indent+_:0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:n.htmlMode?"html":"xml",helperType:n.htmlMode?"html":"xml"}}),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/mode/javascript/javascript",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("javascript",function(t,n){function r(e){for(var t,n=!1,r=!1;null!=(t=e.next());){if(!n){if("/"==t&&!r)return;"["==t?r=!0:r&&"]"==t&&(r=!1)}n=!n&&"\\"==t}}function i(e,t,n){return he=e,me=n,t}function a(e,t){var n=e.next();if('"'==n||"'"==n)return t.tokenize=o(n),t.tokenize(e,t);if("."==n&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return i("number","number");if("."==n&&e.match(".."))return i("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(n))return i(n);if("="==n&&e.eat(">"))return i("=>","operator");if("0"==n&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),i("number","number");if(/\d/.test(n))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),i("number","number");if("/"==n)return e.eat("*")?(t.tokenize=s,s(e,t)):e.eat("/")?(e.skipToEnd(),i("comment","comment")):"operator"==t.lastType||"keyword c"==t.lastType||"sof"==t.lastType||/^[\[{}\(,;:]$/.test(t.lastType)?(r(e),e.eatWhile(/[gimy]/),i("regexp","string-2")):(e.eatWhile(xe),i("operator","operator",e.current()));if("`"==n)return t.tokenize=l,l(e,t);if("#"==n)return e.skipToEnd(),i("error","error");if(xe.test(n))return e.eatWhile(xe),i("operator","operator",e.current());e.eatWhile(/[\w\$_]/);var a=e.current(),c=we.propertyIsEnumerable(a)&&we[a];return c&&"."!=t.lastType?i(c.type,c.style,a):i("variable","variable",a)}function o(e){return function(t,n){var r,o=!1;if(be&&"@"==t.peek()&&t.match(ke))return n.tokenize=a,i("jsonld-keyword","meta");for(;null!=(r=t.next())&&(r!=e||o);)o=!o&&"\\"==r;return o||(n.tokenize=a),i("string","string")}}function s(e,t){for(var n,r=!1;n=e.next();){if("/"==n&&r){t.tokenize=a;break}r="*"==n}return i("comment","comment")}function l(e,t){for(var n,r=!1;null!=(n=e.next());){if(!r&&("`"==n||"$"==n&&e.eat("{"))){t.tokenize=a;break}r=!r&&"\\"==n}return i("quasi","string-2",e.current())}function c(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var n=e.string.indexOf("=>",e.start);if(!(0>n)){for(var r=0,i=!1,a=n-1;a>=0;--a){var o=e.string.charAt(a),s=Ce.indexOf(o);if(s>=0&&3>s){if(!r){++a;break}if(0==--r)break}else if(s>=3&&6>s)++r;else if(/[$\w]/.test(o))i=!0;else if(i&&!r){++a;break}}i&&!r&&(t.fatArrowAt=a)}}function u(e,t,n,r,i,a){this.indented=e,this.column=t,this.type=n,this.prev=i,this.info=a,null!=r&&(this.align=r)}function d(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var r=e.context;r;r=r.prev)for(var n=r.vars;n;n=n.next)if(n.name==t)return!0}function f(e,t,n,r,i){var a=e.cc;for(Te.state=e,Te.stream=i,Te.marked=null,Te.cc=a,Te.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){var o=a.length?a.pop():ye?x:w;if(o(n,r)){for(;a.length&&a[a.length-1].lex;)a.pop()();return Te.marked?Te.marked:"variable"==n&&d(e,r)?"variable-2":t}}}function p(){for(var e=arguments.length-1;e>=0;e--)Te.cc.push(arguments[e])}function h(){return p.apply(null,arguments),!0}function m(e){function t(t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}var r=Te.state;if(r.context){if(Te.marked="def",t(r.localVars))return;r.localVars={name:e,next:r.localVars}}else{if(t(r.globalVars))return;n.globalVars&&(r.globalVars={name:e,next:r.globalVars})}}function g(){Te.state.context={prev:Te.state.context,vars:Te.state.localVars},Te.state.localVars=Me}function v(){Te.state.localVars=Te.state.context.vars,Te.state.context=Te.state.context.prev}function b(e,t){var n=function(){var n=Te.state,r=n.indented;"stat"==n.lexical.type&&(r=n.lexical.indented),n.lexical=new u(r,Te.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function y(){var e=Te.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function _(e){function t(n){return n==e?h():";"==e?p():h(t)}return t}function w(e,t){return"var"==e?h(b("vardef",t.length),W,_(";"),y):"keyword a"==e?h(b("form"),x,w,y):"keyword b"==e?h(b("form"),w,y):"{"==e?h(b("}"),q,y):";"==e?h():"if"==e?("else"==Te.state.lexical.info&&Te.state.cc[Te.state.cc.length-1]==y&&Te.state.cc.pop()(),h(b("form"),x,w,y,X)):"function"==e?h(ee):"for"==e?h(b("form"),G,w,y):"variable"==e?h(b("stat"),A):"switch"==e?h(b("form"),x,b("}","switch"),_("{"),q,y,y):"case"==e?h(x,_(":")):"default"==e?h(_(":")):"catch"==e?h(b("form"),g,_("("),te,_(")"),w,y,v):"module"==e?h(b("form"),g,oe,v,y):"class"==e?h(b("form"),ne,y):"export"==e?h(b("form"),se,y):"import"==e?h(b("form"),le,y):p(b("stat"),x,_(";"),y)}function x(e){return C(e,!1)}function k(e){return C(e,!0)}function C(e,t){if(Te.state.fatArrowAt==Te.stream.start){var n=t?N:$;if("("==e)return h(g,b(")"),j(F,")"),y,_("=>"),n,v);if("variable"==e)return p(g,F,_("=>"),n,v)}var r=t?E:M;return Se.hasOwnProperty(e)?h(r):"function"==e?h(ee,r):"keyword c"==e?h(t?T:S):"("==e?h(b(")"),S,pe,_(")"),y,r):"operator"==e||"spread"==e?h(t?k:x):"["==e?h(b("]"),de,y,r):"{"==e?R(O,"}",null,r):"quasi"==e?p(L,r):h()}function S(e){return e.match(/[;\}\)\],]/)?p():p(x)}function T(e){return e.match(/[;\}\)\],]/)?p():p(k)}function M(e,t){return","==e?h(x):E(e,t,!1)}function E(e,t,n){var r=0==n?M:E,i=0==n?x:k;return"=>"==t?h(g,n?N:$,v):"operator"==e?/\+\+|--/.test(t)?h(r):"?"==t?h(x,_(":"),i):h(i):"quasi"==e?p(L,r):";"!=e?"("==e?R(k,")","call",r):"."==e?h(B,r):"["==e?h(b("]"),S,_("]"),y,r):void 0:void 0}function L(e,t){return"quasi"!=e?p():"${"!=t.slice(t.length-2)?h(L):h(x,I)}function I(e){return"}"==e?(Te.marked="string-2",Te.state.tokenize=l,h(L)):void 0}function $(e){return c(Te.stream,Te.state),p("{"==e?w:x)}function N(e){return c(Te.stream,Te.state),p("{"==e?w:k)}function A(e){return":"==e?h(y,w):p(M,_(";"),y)}function B(e){return"variable"==e?(Te.marked="property",h()):void 0}function O(e,t){return"variable"==e||"keyword"==Te.style?(Te.marked="property",h("get"==t||"set"==t?z:D)):"number"==e||"string"==e?(Te.marked=be?"property":Te.style+" property",h(D)):"jsonld-keyword"==e?h(D):"["==e?h(x,_("]"),D):void 0}function z(e){return"variable"!=e?p(D):(Te.marked="property",h(ee))}function D(e){return":"==e?h(k):"("==e?p(ee):void 0}function j(e,t){function n(r){if(","==r){var i=Te.state.lexical;return"call"==i.info&&(i.pos=(i.pos||0)+1),h(e,n)}return r==t?h():h(_(t))}return function(r){return r==t?h():p(e,n)}}function R(e,t,n){for(var r=3;r<arguments.length;r++)Te.cc.push(arguments[r]);return h(b(t,n),j(e,t),y)}function q(e){return"}"==e?h():p(w,q)}function H(e){return _e&&":"==e?h(P):void 0}function P(e){return"variable"==e?(Te.marked="variable-3",h()):void 0}function W(){return p(F,H,V,K)}function F(e,t){return"variable"==e?(m(t),h()):"["==e?R(F,"]"):"{"==e?R(U,"}"):void 0}function U(e,t){return"variable"!=e||Te.stream.match(/^\s*:/,!1)?("variable"==e&&(Te.marked="property"),h(_(":"),F,V)):(m(t),h(V))}function V(e,t){return"="==t?h(k):void 0}function K(e){return","==e?h(W):void 0}function X(e,t){return"keyword b"==e&&"else"==t?h(b("form","else"),w,y):void 0}function G(e){return"("==e?h(b(")"),Y,_(")"),y):void 0}function Y(e){return"var"==e?h(W,_(";"),Q):";"==e?h(Q):"variable"==e?h(Z):p(x,_(";"),Q)}function Z(e,t){return"in"==t||"of"==t?(Te.marked="keyword",h(x)):h(M,Q)}function Q(e,t){return";"==e?h(J):"in"==t||"of"==t?(Te.marked="keyword",h(x)):p(x,_(";"),J)}function J(e){")"!=e&&h(x)}function ee(e,t){return"*"==t?(Te.marked="keyword",h(ee)):"variable"==e?(m(t),h(ee)):"("==e?h(g,b(")"),j(te,")"),y,w,v):void 0}function te(e){return"spread"==e?h(te):p(F,H)}function ne(e,t){return"variable"==e?(m(t),h(re)):void 0}function re(e,t){return"extends"==t?h(x,re):"{"==e?h(b("}"),ie,y):void 0}function ie(e,t){return"variable"==e||"keyword"==Te.style?(Te.marked="property","get"==t||"set"==t?h(ae,ee,ie):h(ee,ie)):"*"==t?(Te.marked="keyword",h(ie)):";"==e?h(ie):"}"==e?h():void 0}function ae(e){return"variable"!=e?p():(Te.marked="property",h())}function oe(e,t){return"string"==e?h(w):"variable"==e?(m(t),h(ue)):void 0}function se(e,t){return"*"==t?(Te.marked="keyword",h(ue,_(";"))):"default"==t?(Te.marked="keyword",h(x,_(";"))):p(w)}function le(e){return"string"==e?h():p(ce,ue)}function ce(e,t){return"{"==e?R(ce,"}"):("variable"==e&&m(t),h())}function ue(e,t){return"from"==t?(Te.marked="keyword",h(x)):void 0}function de(e){return"]"==e?h():p(k,fe)}function fe(e){return"for"==e?p(pe,_("]")):","==e?h(j(k,"]")):p(j(k,"]"))}function pe(e){return"for"==e?h(G,pe):"if"==e?h(x,pe):void 0}var he,me,ge=t.indentUnit,ve=n.statementIndent,be=n.jsonld,ye=n.json||be,_e=n.typescript,we=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),r=e("keyword c"),i=e("operator"),a={type:"atom",style:"atom"},o={"if":e("if"),"while":t,"with":t,"else":n,"do":n,"try":n,"finally":n,"return":r,"break":r,"continue":r,"new":r,"delete":r,"throw":r,"debugger":r,"var":e("var"),"const":e("var"),let:e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":i,"typeof":i,"instanceof":i,"true":a,"false":a,"null":a,undefined:a,NaN:a,Infinity:a,"this":e("this"),module:e("module"),"class":e("class"),"super":e("atom"),"yield":r,"export":e("export"),"import":e("import"),"extends":r};if(_e){var s={type:"variable",style:"variable-3"},l={"interface":e("interface"),"extends":e("extends"),constructor:e("constructor"),"public":e("public"),"private":e("private"),"protected":e("protected"),"static":e("static"),string:s,number:s,bool:s,any:s};for(var c in l)o[c]=l[c]}return o}(),xe=/[+\-*&%=<>!?|~^]/,ke=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,Ce="([{}])",Se={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},Te={state:null,column:null,marked:null,cc:null},Me={name:"this",next:{name:"arguments"}};return y.lex=!0,{startState:function(e){var t={tokenize:a,lastType:"sof",cc:[],lexical:new u((e||0)-ge,0,"block",!1),localVars:n.localVars,context:n.localVars&&{vars:n.localVars},indented:0};return n.globalVars&&"object"==typeof n.globalVars&&(t.globalVars=n.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),c(e,t)),t.tokenize!=s&&e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==he?n:(t.lastType="operator"!=he||"++"!=me&&"--"!=me?he:"incdec",f(t,n,he,me,e))},indent:function(t,r){if(t.tokenize==s)return e.Pass;if(t.tokenize!=a)return 0;var i=r&&r.charAt(0),o=t.lexical;if(!/^\s*else\b/.test(r))for(var l=t.cc.length-1;l>=0;--l){var c=t.cc[l];if(c==y)o=o.prev;else if(c!=X)break}"stat"==o.type&&"}"==i&&(o=o.prev),ve&&")"==o.type&&"stat"==o.prev.type&&(o=o.prev);var u=o.type,d=i==u;return"vardef"==u?o.indented+("operator"==t.lastType||","==t.lastType?o.info+1:0):"form"==u&&"{"==i?o.indented:"form"==u?o.indented+ge:"stat"==u?o.indented+("operator"==t.lastType||","==t.lastType?ve||ge:0):"switch"!=o.info||d||0==n.doubleIndentSwitch?o.align?o.column+(d?0:1):o.indented+(d?0:ge):o.indented+(/^(?:case|default)\b/.test(r)?ge:2*ge)},electricChars:":{}",blockCommentStart:ye?null:"/*",blockCommentEnd:ye?null:"*/",lineComment:ye?null:"//",fold:"brace",helperType:ye?"json":"javascript",jsonldMode:be,jsonMode:ye}}),e.registerHelper("wordChars","javascript",/[\\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/mode/css/css",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=!0;return t}function n(e,t){for(var n,r=!1;null!=(n=e.next());){if(r&&"/"==n){t.tokenize=null;break}r="*"==n}return["comment","comment"]}function r(e,t){return e.skipTo("-->")?(e.match("-->"),t.tokenize=null):e.skipToEnd(),["comment","comment"]}e.defineMode("css",function(t,n){function r(e,t){return p=t,e}function i(e,t){var n=e.next();if(g[n]){var i=g[n](e,t);if(i!==!1)return i}return"@"==n?(e.eatWhile(/[\w\\\-]/),r("def",e.current())):"="==n||("~"==n||"|"==n)&&e.eat("=")?r(null,"compare"):'"'==n||"'"==n?(t.tokenize=a(n),t.tokenize(e,t)):"#"==n?(e.eatWhile(/[\w\\\-]/),r("atom","hash")):"!"==n?(e.match(/^\s*\w*/),r("keyword","important")):/\d/.test(n)||"."==n&&e.eat(/\d/)?(e.eatWhile(/[\w.%]/),r("number","unit")):"-"!==n?/[,+>*\/]/.test(n)?r(null,"select-op"):"."==n&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?r("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(n)?r(null,n):"u"==n&&e.match("rl(")?(e.backUp(1),t.tokenize=o,r("property","word")):/[\w\\\-]/.test(n)?(e.eatWhile(/[\w\\\-]/),r("property","word")):r(null,null):/[\d.]/.test(e.peek())?(e.eatWhile(/[\w.%]/),r("number","unit")):e.match(/^\w+-/)?r("meta","meta"):void 0}function a(e){return function(t,n){for(var i,a=!1;null!=(i=t.next());){if(i==e&&!a){")"==e&&t.backUp(1);break}a=!a&&"\\"==i}return(i==e||!a&&")"!=e)&&(n.tokenize=null),r("string","string")}}function o(e,t){return e.next(),e.match(/\s*[\"\')]/,!1)?t.tokenize=null:t.tokenize=a(")"),r(null,"(")}function s(e,t,n){this.type=e,this.indent=t,this.prev=n}function l(e,t,n){return e.context=new s(n,t.indentation()+m,e.context),n}function c(e){return e.context=e.context.prev,e.context.type}function u(e,t,n){return S[n.context.type](e,t,n)}function d(e,t,n,r){for(var i=r||1;i>0;i--)n.context=n.context.prev;return u(e,t,n)}function f(e){var t=e.current().toLowerCase();h=x.hasOwnProperty(t)?"atom":w.hasOwnProperty(t)?"keyword":"variable"}n.propertyKeywords||(n=e.resolveMode("text/css"));var p,h,m=t.indentUnit,g=n.tokenHooks,v=n.mediaTypes||{},b=n.mediaFeatures||{},y=n.propertyKeywords||{},_=n.nonStandardPropertyKeywords||{},w=n.colorKeywords||{},x=n.valueKeywords||{},k=n.fontProperties||{},C=n.allowNested,S={};return S.top=function(e,t,n){if("{"==e)return l(n,t,"block");if("}"==e&&n.context.prev)return c(n);if("@media"==e)return l(n,t,"media");if("@font-face"==e)return"font_face_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(e))return"keyframes";if(e&&"@"==e.charAt(0))return l(n,t,"at");if("hash"==e)h="builtin";else if("word"==e)h="tag";else{if("variable-definition"==e)return"maybeprop";if("interpolation"==e)return l(n,t,"interpolation");if(":"==e)return"pseudo";if(C&&"("==e)return l(n,t,"parens")}return n.context.type},S.block=function(e,t,n){if("word"==e){var r=t.current().toLowerCase();return y.hasOwnProperty(r)?(h="property","maybeprop"):_.hasOwnProperty(r)?(h="string-2","maybeprop"):C?(h=t.match(/^\s*:/,!1)?"property":"tag","block"):(h+=" error","maybeprop")}return"meta"==e?"block":C||"hash"!=e&&"qualifier"!=e?S.top(e,t,n):(h="error","block")},S.maybeprop=function(e,t,n){return":"==e?l(n,t,"prop"):u(e,t,n)},S.prop=function(e,t,n){if(";"==e)return c(n);if("{"==e&&C)return l(n,t,"propBlock");if("}"==e||"{"==e)return d(e,t,n);if("("==e)return l(n,t,"parens");if("hash"!=e||/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t.current())){if("word"==e)f(t);else if("interpolation"==e)return l(n,t,"interpolation")}else h+=" error";return"prop"},S.propBlock=function(e,t,n){return"}"==e?c(n):"word"==e?(h="property","maybeprop"):n.context.type},S.parens=function(e,t,n){return"{"==e||"}"==e?d(e,t,n):")"==e?c(n):"("==e?l(n,t,"parens"):("word"==e&&f(t),"parens")},S.pseudo=function(e,t,n){return"word"==e?(h="variable-3",n.context.type):u(e,t,n)},S.media=function(e,t,n){if("("==e)return l(n,t,"media_parens");if("}"==e)return d(e,t,n);if("{"==e)return c(n)&&l(n,t,C?"block":"top");if("word"==e){var r=t.current().toLowerCase();h="only"==r||"not"==r||"and"==r?"keyword":v.hasOwnProperty(r)?"attribute":b.hasOwnProperty(r)?"property":"error"}return n.context.type},S.media_parens=function(e,t,n){return")"==e?c(n):"{"==e||"}"==e?d(e,t,n,2):S.media(e,t,n)},S.font_face_before=function(e,t,n){return"{"==e?l(n,t,"font_face"):u(e,t,n)},S.font_face=function(e,t,n){return"}"==e?c(n):"word"==e?(h=k.hasOwnProperty(t.current().toLowerCase())?"property":"error","maybeprop"):"font_face"},S.keyframes=function(e,t,n){return"word"==e?(h="variable","keyframes"):"{"==e?l(n,t,"top"):u(e,t,n)},S.at=function(e,t,n){return";"==e?c(n):"{"==e||"}"==e?d(e,t,n):("word"==e?h="tag":"hash"==e&&(h="builtin"),"at")},S.interpolation=function(e,t,n){return"}"==e?c(n):"{"==e||";"==e?d(e,t,n):("variable"!=e&&(h="error"),"interpolation")},{startState:function(e){return{tokenize:null,state:"top",context:new s("top",e||0,null)}},token:function(e,t){if(!t.tokenize&&e.eatSpace())return null;var n=(t.tokenize||i)(e,t);return n&&"object"==typeof n&&(p=n[1],n=n[0]),h=n,t.state=S[t.state](p,e,t),h},indent:function(e,t){var n=e.context,r=t&&t.charAt(0),i=n.indent;return"prop"!=n.type||"}"!=r&&")"!=r||(n=n.prev),!n.prev||("}"!=r||"block"!=n.type&&"top"!=n.type&&"interpolation"!=n.type&&"font_face"!=n.type)&&(")"!=r||"parens"!=n.type&&"media_parens"!=n.type)&&("{"!=r||"at"!=n.type&&"media"!=n.type)||(i=n.indent-m,n=n.prev),i},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}});var i=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],a=t(i),o=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"],s=t(o),l=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-position","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],c=t(l),u=["scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-3d-light-color","scrollbar-track-color","shape-inside","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","zoom"],u=t(u),d=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],f=t(d),p=["above","absolute","activeborder","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","auto","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","column","compact","condensed","contain","content","content-box","context-menu","continuous","copy","cover","crop","cross","crosshair","currentcolor","cursive","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ew-resize","expanded","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-table","inset","inside","intrinsic","invert","italic","justify","kannada","katakana","katakana-iroha","keep-all","khmer","landscape","lao","large","larger","left","level","lighter","line-through","linear","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","single","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","x-large","x-small","xor","xx-large","xx-small"],h=t(p),m=["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],g=t(m),v=i.concat(o).concat(l).concat(u).concat(d).concat(p);
e.registerHelper("hintWords","css",v),e.defineMIME("text/css",{mediaTypes:a,mediaFeatures:s,propertyKeywords:c,nonStandardPropertyKeywords:u,colorKeywords:f,valueKeywords:h,fontProperties:g,tokenHooks:{"<":function(e,t){return e.match("!--")?(t.tokenize=r,r(e,t)):!1},"/":function(e,t){return e.eat("*")?(t.tokenize=n,n(e,t)):!1}},name:"css"}),e.defineMIME("text/x-scss",{mediaTypes:a,mediaFeatures:s,propertyKeywords:c,nonStandardPropertyKeywords:u,colorKeywords:f,valueKeywords:h,fontProperties:g,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=n,n(e,t)):["operator","operator"]},":":function(e){return e.match(/\s*\{/)?[null,"{"]:!1},$:function(e){return e.match(/^[\w-]+/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(e){return e.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"}),e.defineMIME("text/x-less",{mediaTypes:a,mediaFeatures:s,propertyKeywords:c,nonStandardPropertyKeywords:u,colorKeywords:f,valueKeywords:h,fontProperties:g,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=n,n(e,t)):["operator","operator"]},"@":function(e){return e.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/,!1)?!1:(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"),require("../css/css")):"function"==typeof define&&define.amd?define("codemirror/mode/htmlmixed/htmlmixed",["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("htmlmixed",function(t,n){function r(e,t){var n=t.htmlState.tagName,r=s.token(e,t.htmlState);if("script"==n&&/\btag\b/.test(r)&&">"==e.current()){var i=e.string.slice(Math.max(0,e.pos-100),e.pos).match(/\btype\s*=\s*("[^"]+"|'[^']+'|\S+)[^<]*$/i);i=i?i[1]:"",i&&/[\"\']/.test(i.charAt(0))&&(i=i.slice(1,i.length-1));for(var u=0;u<c.length;++u){var d=c[u];if("string"==typeof d.matches?i==d.matches:d.matches.test(i)){d.mode&&(t.token=a,t.localMode=d.mode,t.localState=d.mode.startState&&d.mode.startState(s.indent(t.htmlState,"")));break}}}else"style"==n&&/\btag\b/.test(r)&&">"==e.current()&&(t.token=o,t.localMode=l,t.localState=l.startState(s.indent(t.htmlState,"")));return r}function i(e,t,n){var r,i=e.current(),a=i.search(t);return a>-1?e.backUp(i.length-a):(r=i.match(/<\/?$/))&&(e.backUp(i.length),e.match(t,!1)||e.match(i)),n}function a(e,t){return e.match(/^<\/\s*script\s*>/i,!1)?(t.token=r,t.localState=t.localMode=null,r(e,t)):i(e,/<\/\s*script\s*>/,t.localMode.token(e,t.localState))}function o(e,t){return e.match(/^<\/\s*style\s*>/i,!1)?(t.token=r,t.localState=t.localMode=null,r(e,t)):i(e,/<\/\s*style\s*>/,l.token(e,t.localState))}var s=e.getMode(t,{name:"xml",htmlMode:!0,multilineTagIndentFactor:n.multilineTagIndentFactor,multilineTagIndentPastTag:n.multilineTagIndentPastTag}),l=e.getMode(t,"css"),c=[],u=n&&n.scriptTypes;if(c.push({matches:/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,mode:e.getMode(t,"javascript")}),u)for(var d=0;d<u.length;++d){var f=u[d];c.push({matches:f.matches,mode:f.mode&&e.getMode(t,f.mode)})}return c.push({matches:/./,mode:e.getMode(t,"text/plain")}),{startState:function(){var e=s.startState();return{token:r,localMode:null,localState:null,htmlState:e}},copyState:function(t){if(t.localState)var n=e.copyState(t.localMode,t.localState);return{token:t.token,localMode:t.localMode,localState:n,htmlState:e.copyState(s,t.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(t,n){return!t.localMode||/^\s*<\//.test(n)?s.indent(t.htmlState,n):t.localMode.indent?t.localMode.indent(t.localState,n):e.Pass},innerMode:function(e){return{state:e.localState||e.htmlState,mode:e.localMode||s}}}},"xml","javascript","css"),e.defineMIME("text/html","htmlmixed")}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/mode/clike/clike",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){for(var t={},n=e.split(" "),r=0;r<n.length;++r)t[n[r]]=!0;return t}function n(e,t){if(!t.startOfLine)return!1;for(;;){if(!e.skipTo("\\")){e.skipToEnd(),t.tokenize=null;break}if(e.next(),e.eol()){t.tokenize=n;break}}return"meta"}function r(e,t){if(e.backUp(1),e.match(/(R|u8R|uR|UR|LR)/)){var n=e.match(/"([^\s\\()]{0,16})\(/);return n?(t.cpp11RawStringDelim=n[1],t.tokenize=a,a(e,t)):!1}return e.match(/(u8|u|U|L)/)?e.match(/["']/,!1)?"string":!1:(e.next(),!1)}function i(e,t){for(var n;null!=(n=e.next());)if('"'==n&&!e.eat('"')){t.tokenize=null;break}return"string"}function a(e,t){var n=t.cpp11RawStringDelim.replace(/[^\w\s]/g,"\\$&"),r=e.match(new RegExp(".*?\\)"+n+'"'));return r?t.tokenize=null:e.skipToEnd(),"string"}function o(t,n){function r(e){if(e)for(var t in e)e.hasOwnProperty(t)&&i.push(t)}"string"==typeof t&&(t=[t]);var i=[];r(n.keywords),r(n.builtin),r(n.atoms),i.length&&(n.helperType=t[0],e.registerHelper("hintWords",t[0],i));for(var a=0;a<t.length;++a)e.defineMIME(t[a],n)}e.defineMode("clike",function(t,n){function r(e,t){var n=e.next();if(v[n]){var r=v[n](e,t);if(r!==!1)return r}if('"'==n||"'"==n)return t.tokenize=i(n),t.tokenize(e,t);if(/[\[\]{}\(\),;\:\.]/.test(n))return c=n,null;if(/\d/.test(n))return e.eatWhile(/[\w\.]/),"number";if("/"==n){if(e.eat("*"))return t.tokenize=a,a(e,t);if(e.eat("/"))return e.skipToEnd(),"comment"}if(y.test(n))return e.eatWhile(y),"operator";e.eatWhile(/[\w\$_]/);var o=e.current();return p.propertyIsEnumerable(o)?(m.propertyIsEnumerable(o)&&(c="newstatement"),"keyword"):h.propertyIsEnumerable(o)?(m.propertyIsEnumerable(o)&&(c="newstatement"),"builtin"):g.propertyIsEnumerable(o)?"atom":"variable"}function i(e){return function(t,n){for(var r,i=!1,a=!1;null!=(r=t.next());){if(r==e&&!i){a=!0;break}i=!i&&"\\"==r}return(a||!i&&!b)&&(n.tokenize=null),"string"}}function a(e,t){for(var n,r=!1;n=e.next();){if("/"==n&&r){t.tokenize=null;break}r="*"==n}return"comment"}function o(e,t,n,r,i){this.indented=e,this.column=t,this.type=n,this.align=r,this.prev=i}function s(e,t,n){var r=e.indented;return e.context&&"statement"==e.context.type&&(r=e.context.indented),e.context=new o(r,t,n,null,e.context)}function l(e){var t=e.context.type;return(")"==t||"]"==t||"}"==t)&&(e.indented=e.context.indented),e.context=e.context.prev}var c,u=t.indentUnit,d=n.statementIndentUnit||u,f=n.dontAlignCalls,p=n.keywords||{},h=n.builtin||{},m=n.blockKeywords||{},g=n.atoms||{},v=n.hooks||{},b=n.multiLineStrings,y=/[+\-*&%=<>!?|\/]/;return{startState:function(e){return{tokenize:null,context:new o((e||0)-u,0,"top",!1),indented:0,startOfLine:!0}},token:function(e,t){var n=t.context;if(e.sol()&&(null==n.align&&(n.align=!1),t.indented=e.indentation(),t.startOfLine=!0),e.eatSpace())return null;c=null;var i=(t.tokenize||r)(e,t);if("comment"==i||"meta"==i)return i;if(null==n.align&&(n.align=!0),";"!=c&&":"!=c&&","!=c||"statement"!=n.type)if("{"==c)s(t,e.column(),"}");else if("["==c)s(t,e.column(),"]");else if("("==c)s(t,e.column(),")");else if("}"==c){for(;"statement"==n.type;)n=l(t);for("}"==n.type&&(n=l(t));"statement"==n.type;)n=l(t)}else c==n.type?l(t):(("}"==n.type||"top"==n.type)&&";"!=c||"statement"==n.type&&"newstatement"==c)&&s(t,e.column(),"statement");else l(t);return t.startOfLine=!1,i},indent:function(t,n){if(t.tokenize!=r&&null!=t.tokenize)return e.Pass;var i=t.context,a=n&&n.charAt(0);"statement"==i.type&&"}"==a&&(i=i.prev);var o=a==i.type;return"statement"==i.type?i.indented+("{"==a?0:d):!i.align||f&&")"==i.type?")"!=i.type||o?i.indented+(o?0:u):i.indented+d:i.column+(o?0:1)},electricChars:"{}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"brace"}});var s="auto if break int case long char register continue return default short do sizeof double static else struct entry switch extern typedef float union for unsigned goto while enum void const signed volatile";o(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:t(s),blockKeywords:t("case do else for if switch while struct"),atoms:t("null"),hooks:{"#":n},modeProps:{fold:["brace","include"]}}),o(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:t(s+" asm dynamic_cast namespace reinterpret_cast try bool explicit new static_cast typeid catch operator template typename class friend private this using const_cast inline public throw virtual delete mutable protected wchar_t alignas alignof constexpr decltype nullptr noexcept thread_local final static_assert override"),blockKeywords:t("catch class do else finally for if struct switch try while"),atoms:t("true false null"),hooks:{"#":n,u:r,U:r,L:r,R:r},modeProps:{fold:["brace","include"]}}),o("text/x-java",{name:"clike",keywords:t("abstract assert boolean break byte case catch char class const continue default do double else enum extends final finally float for goto if implements import instanceof int interface long native new package private protected public return short static strictfp super switch synchronized this throw throws transient try void volatile while"),blockKeywords:t("catch class do else finally for if switch try while"),atoms:t("true false null"),hooks:{"@":function(e){return e.eatWhile(/[\w\$_]/),"meta"}},modeProps:{fold:["brace","import"]}}),o("text/x-csharp",{name:"clike",keywords:t("abstract as base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),blockKeywords:t("catch class do else finally for foreach if struct switch try while"),builtin:t("Boolean Byte Char DateTime DateTimeOffset Decimal Double Guid Int16 Int32 Int64 Object SByte Single String TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),atoms:t("true false null"),hooks:{"@":function(e,t){return e.eat('"')?(t.tokenize=i,i(e,t)):(e.eatWhile(/[\w\$_]/),"meta")}}}),o("text/x-scala",{name:"clike",keywords:t("abstract case catch class def do else extends false final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try trye type val var while with yield _ : = => <- <: <% >: # @ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector :: #:: Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),blockKeywords:t("catch class do else finally for forSome if match switch try while"),atoms:t("true false null"),hooks:{"@":function(e){return e.eatWhile(/[\w\$_]/),"meta"}}}),o(["x-shader/x-vertex","x-shader/x-fragment"],{name:"clike",keywords:t("float int bool void vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 mat2 mat3 mat4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadowconst attribute uniform varying break continue discard return for while do if else struct in out inout"),blockKeywords:t("for while do if else struct"),builtin:t("radians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smootstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not texture1D texture1DProj texture1DLod texture1DProjLod texture2D texture2DProj texture2DLod texture2DProjLod texture3D texture3DProj texture3DLod texture3DProjLod textureCube textureCubeLod shadow1D shadow2D shadow1DProj shadow2DProj shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod dFdx dFdy fwidth noise1 noise2 noise3 noise4"),atoms:t("true false gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_FogCoord gl_Position gl_PointSize gl_ClipVertex gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor gl_TexCoord gl_FogFragCoord gl_FragCoord gl_FrontFacing gl_FragColor gl_FragData gl_FragDepth gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse gl_TexureMatrixTranspose gl_ModelViewMatrixInverseTranspose gl_ProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixInverseTranspose gl_TextureMatrixInverseTranspose gl_NormalScale gl_DepthRange gl_ClipPlane gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel gl_FrontLightModelProduct gl_BackLightModelProduct gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ gl_FogParameters gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits gl_MaxDrawBuffers"),hooks:{"#":n},modeProps:{fold:["brace","include"]}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../htmlmixed/htmlmixed"),require("../clike/clike")):"function"==typeof define&&define.amd?define("codemirror/mode/php/php",["../../lib/codemirror","../htmlmixed/htmlmixed","../clike/clike"],e):e(CodeMirror)}(function(e){"use strict";function t(e){for(var t={},n=e.split(" "),r=0;r<n.length;++r)t[n[r]]=!0;return t}function n(e){return function(t,n){return t.match(e)?n.tokenize=null:t.skipToEnd(),"string"}}function r(e){return 0==e.length?i:function(t,n){for(var a=e[0],o=0;o<a.length;o++)if(t.match(a[o][0]))return n.tokenize=r(e.slice(1)),a[o][1];return n.tokenize=i,"string"}}function i(e,t){var n,i=!1,a=!1;if('"'==e.current())return"string";if(e.match("${",!1)||e.match("{$",!1))return t.tokenize=null,"string";if(e.match(/\$[a-zA-Z_][a-zA-Z0-9_]*/))return e.match("[",!1)&&(t.tokenize=r([[["[",null]],[[/\d[\w\.]*/,"number"],[/\$[a-zA-Z_][a-zA-Z0-9_]*/,"variable-2"],[/[\w\$]+/,"variable"]],[["]",null]]])),e.match(/\-\>\w/,!1)&&(t.tokenize=r([[["->",null]],[[/[\w]+/,"variable"]]])),"variable-2";for(;!e.eol()&&!e.match("{$",!1)&&(!e.match(/(\$[a-zA-Z_][a-zA-Z0-9_]*|\$\{)/,!1)||i);){if(n=e.next(),!i&&'"'==n){a=!0;break}i=!i&&"\\"==n}return a&&(t.tokenize=null,t.phpEncapsStack.pop()),"string"}var a="abstract and array as break case catch class clone const continue declare default do else elseif enddeclare endfor endforeach endif endswitch endwhile extends final for foreach function global goto if implements interface instanceof namespace new or private protected public static switch throw trait try use var while xor die echo empty exit eval include include_once isset list require require_once return print unset __halt_compiler self static parent yield insteadof finally",o="true false null TRUE FALSE NULL __CLASS__ __DIR__ __FILE__ __LINE__ __METHOD__ __FUNCTION__ __NAMESPACE__ __TRAIT__",s="func_num_args func_get_arg func_get_args strlen strcmp strncmp strcasecmp strncasecmp each error_reporting define defined trigger_error user_error set_error_handler restore_error_handler get_declared_classes get_loaded_extensions extension_loaded get_extension_funcs debug_backtrace constant bin2hex hex2bin sleep usleep time mktime gmmktime strftime gmstrftime strtotime date gmdate getdate localtime checkdate flush wordwrap htmlspecialchars htmlentities html_entity_decode md5 md5_file crc32 getimagesize image_type_to_mime_type phpinfo phpversion phpcredits strnatcmp strnatcasecmp substr_count strspn strcspn strtok strtoupper strtolower strpos strrpos strrev hebrev hebrevc nl2br basename dirname pathinfo stripslashes stripcslashes strstr stristr strrchr str_shuffle str_word_count strcoll substr substr_replace quotemeta ucfirst ucwords strtr addslashes addcslashes rtrim str_replace str_repeat count_chars chunk_split trim ltrim strip_tags similar_text explode implode setlocale localeconv parse_str str_pad chop strchr sprintf printf vprintf vsprintf sscanf fscanf parse_url urlencode urldecode rawurlencode rawurldecode readlink linkinfo link unlink exec system escapeshellcmd escapeshellarg passthru shell_exec proc_open proc_close rand srand getrandmax mt_rand mt_srand mt_getrandmax base64_decode base64_encode abs ceil floor round is_finite is_nan is_infinite bindec hexdec octdec decbin decoct dechex base_convert number_format fmod ip2long long2ip getenv putenv getopt microtime gettimeofday getrusage uniqid quoted_printable_decode set_time_limit get_cfg_var magic_quotes_runtime set_magic_quotes_runtime get_magic_quotes_gpc get_magic_quotes_runtime import_request_variables error_log serialize unserialize memory_get_usage var_dump var_export debug_zval_dump print_r highlight_file show_source highlight_string ini_get ini_get_all ini_set ini_alter ini_restore get_include_path set_include_path restore_include_path setcookie header headers_sent connection_aborted connection_status ignore_user_abort parse_ini_file is_uploaded_file move_uploaded_file intval floatval doubleval strval gettype settype is_null is_resource is_bool is_long is_float is_int is_integer is_double is_real is_numeric is_string is_array is_object is_scalar ereg ereg_replace eregi eregi_replace split spliti join sql_regcase dl pclose popen readfile rewind rmdir umask fclose feof fgetc fgets fgetss fread fopen fpassthru ftruncate fstat fseek ftell fflush fwrite fputs mkdir rename copy tempnam tmpfile file file_get_contents stream_select stream_context_create stream_context_set_params stream_context_set_option stream_context_get_options stream_filter_prepend stream_filter_append fgetcsv flock get_meta_tags stream_set_write_buffer set_file_buffer set_socket_blocking stream_set_blocking socket_set_blocking stream_get_meta_data stream_register_wrapper stream_wrapper_register stream_set_timeout socket_set_timeout socket_get_status realpath fnmatch fsockopen pfsockopen pack unpack get_browser crypt opendir closedir chdir getcwd rewinddir readdir dir glob fileatime filectime filegroup fileinode filemtime fileowner fileperms filesize filetype file_exists is_writable is_writeable is_readable is_executable is_file is_dir is_link stat lstat chown touch clearstatcache mail ob_start ob_flush ob_clean ob_end_flush ob_end_clean ob_get_flush ob_get_clean ob_get_length ob_get_level ob_get_status ob_get_contents ob_implicit_flush ob_list_handlers ksort krsort natsort natcasesort asort arsort sort rsort usort uasort uksort shuffle array_walk count end prev next reset current key min max in_array array_search extract compact array_fill range array_multisort array_push array_pop array_shift array_unshift array_splice array_slice array_merge array_merge_recursive array_keys array_values array_count_values array_reverse array_reduce array_pad array_flip array_change_key_case array_rand array_unique array_intersect array_intersect_assoc array_diff array_diff_assoc array_sum array_filter array_map array_chunk array_key_exists pos sizeof key_exists assert assert_options version_compare ftok str_rot13 aggregate session_name session_module_name session_save_path session_id session_regenerate_id session_decode session_register session_unregister session_is_registered session_encode session_start session_destroy session_unset session_set_save_handler session_cache_limiter session_cache_expire session_set_cookie_params session_get_cookie_params session_write_close preg_match preg_match_all preg_replace preg_replace_callback preg_split preg_quote preg_grep overload ctype_alnum ctype_alpha ctype_cntrl ctype_digit ctype_lower ctype_graph ctype_print ctype_punct ctype_space ctype_upper ctype_xdigit virtual apache_request_headers apache_note apache_lookup_uri apache_child_terminate apache_setenv apache_response_headers apache_get_version getallheaders mysql_connect mysql_pconnect mysql_close mysql_select_db mysql_create_db mysql_drop_db mysql_query mysql_unbuffered_query mysql_db_query mysql_list_dbs mysql_list_tables mysql_list_fields mysql_list_processes mysql_error mysql_errno mysql_affected_rows mysql_insert_id mysql_result mysql_num_rows mysql_num_fields mysql_fetch_row mysql_fetch_array mysql_fetch_assoc mysql_fetch_object mysql_data_seek mysql_fetch_lengths mysql_fetch_field mysql_field_seek mysql_free_result mysql_field_name mysql_field_table mysql_field_len mysql_field_type mysql_field_flags mysql_escape_string mysql_real_escape_string mysql_stat mysql_thread_id mysql_client_encoding mysql_get_client_info mysql_get_host_info mysql_get_proto_info mysql_get_server_info mysql_info mysql mysql_fieldname mysql_fieldtable mysql_fieldlen mysql_fieldtype mysql_fieldflags mysql_selectdb mysql_createdb mysql_dropdb mysql_freeresult mysql_numfields mysql_numrows mysql_listdbs mysql_listtables mysql_listfields mysql_db_name mysql_dbname mysql_tablename mysql_table_name pg_connect pg_pconnect pg_close pg_connection_status pg_connection_busy pg_connection_reset pg_host pg_dbname pg_port pg_tty pg_options pg_ping pg_query pg_send_query pg_cancel_query pg_fetch_result pg_fetch_row pg_fetch_assoc pg_fetch_array pg_fetch_object pg_fetch_all pg_affected_rows pg_get_result pg_result_seek pg_result_status pg_free_result pg_last_oid pg_num_rows pg_num_fields pg_field_name pg_field_num pg_field_size pg_field_type pg_field_prtlen pg_field_is_null pg_get_notify pg_get_pid pg_result_error pg_last_error pg_last_notice pg_put_line pg_end_copy pg_copy_to pg_copy_from pg_trace pg_untrace pg_lo_create pg_lo_unlink pg_lo_open pg_lo_close pg_lo_read pg_lo_write pg_lo_read_all pg_lo_import pg_lo_export pg_lo_seek pg_lo_tell pg_escape_string pg_escape_bytea pg_unescape_bytea pg_client_encoding pg_set_client_encoding pg_meta_data pg_convert pg_insert pg_update pg_delete pg_select pg_exec pg_getlastoid pg_cmdtuples pg_errormessage pg_numrows pg_numfields pg_fieldname pg_fieldsize pg_fieldtype pg_fieldnum pg_fieldprtlen pg_fieldisnull pg_freeresult pg_result pg_loreadall pg_locreate pg_lounlink pg_loopen pg_loclose pg_loread pg_lowrite pg_loimport pg_loexport http_response_code get_declared_traits getimagesizefromstring socket_import_stream stream_set_chunk_size trait_exists header_register_callback class_uses session_status session_register_shutdown echo print global static exit array empty eval isset unset die include require include_once require_once";e.registerHelper("hintWords","php",[a,o,s].join(" ").split(" ")),e.registerHelper("wordChars","php",/[\\w$]/);var l={name:"clike",helperType:"php",keywords:t(a),blockKeywords:t("catch do else elseif for foreach if switch try while finally"),atoms:t(o),builtin:t(s),multiLineStrings:!0,hooks:{$:function(e){return e.eatWhile(/[\w\$_]/),"variable-2"},"<":function(e,t){return e.match(/<</)?(e.eatWhile(/[\w\.]/),t.tokenize=n(e.current().slice(3)),t.tokenize(e,t)):!1},"#":function(e){for(;!e.eol()&&!e.match("?>",!1);)e.next();return"comment"},"/":function(e){if(e.eat("/")){for(;!e.eol()&&!e.match("?>",!1);)e.next();return"comment"}return!1},'"':function(e,t){return t.phpEncapsStack||(t.phpEncapsStack=[]),t.phpEncapsStack.push(0),t.tokenize=i,t.tokenize(e,t)},"{":function(e,t){return t.phpEncapsStack&&t.phpEncapsStack.length>0&&t.phpEncapsStack[t.phpEncapsStack.length-1]++,!1},"}":function(e,t){return t.phpEncapsStack&&t.phpEncapsStack.length>0&&0==--t.phpEncapsStack[t.phpEncapsStack.length-1]&&(t.tokenize=i),!1}}};e.defineMode("php",function(t,n){function r(e,t){var n=t.curMode==a;if(e.sol()&&t.pending&&'"'!=t.pending&&"'"!=t.pending&&(t.pending=null),n)return n&&null==t.php.tokenize&&e.match("?>")?(t.curMode=i,t.curState=t.html,"meta"):a.token(e,t.curState);if(e.match(/^<\?\w*/))return t.curMode=a,t.curState=t.php,"meta";if('"'==t.pending||"'"==t.pending){for(;!e.eol()&&e.next()!=t.pending;);var r="string"}else if(t.pending&&e.pos<t.pending.end){e.pos=t.pending.end;var r=t.pending.style}else var r=i.token(e,t.curState);t.pending&&(t.pending=null);var o,s=e.current(),l=s.search(/<\?/);return-1!=l&&("string"==r&&(o=s.match(/[\'\"]$/))&&!/\?>/.test(s)?t.pending=o[0]:t.pending={end:e.pos,style:r},e.backUp(s.length-l)),r}var i=e.getMode(t,"text/html"),a=e.getMode(t,l);return{startState:function(){var t=e.startState(i),r=e.startState(a);return{html:t,php:r,curMode:n.startOpen?a:i,curState:n.startOpen?r:t,pending:null}},copyState:function(t){var n,r=t.html,o=e.copyState(i,r),s=t.php,l=e.copyState(a,s);return n=t.curMode==i?o:l,{html:o,php:l,curMode:t.curMode,curState:n,pending:t.pending}},token:r,indent:function(e,t){return e.curMode!=a&&/^\s*<\//.test(t)||e.curMode==a&&/^\?>/.test(t)?i.indent(e.html,t):e.curMode.indent(e.curState,t)},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",innerMode:function(e){return{state:e.curState,mode:e.curMode}}}},"htmlmixed","clike"),e.defineMIME("application/x-httpd-php","php"),e.defineMIME("application/x-httpd-php-open",{name:"php",startOpen:!0}),e.defineMIME("text/x-php",l)}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/mode/go/go",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("go",function(e){function t(e,t){var i=e.next();if('"'==i||"'"==i||"`"==i)return t.tokenize=n(i),t.tokenize(e,t);if(/[\d\.]/.test(i))return"."==i?e.match(/^[0-9]+([eE][\-+]?[0-9]+)?/):"0"==i?e.match(/^[xX][0-9a-fA-F]+/)||e.match(/^0[0-7]+/):e.match(/^[0-9]*\.?[0-9]*([eE][\-+]?[0-9]+)?/),"number";if(/[\[\]{}\(\),;\:\.]/.test(i))return s=i,null;if("/"==i){if(e.eat("*"))return t.tokenize=r,r(e,t);if(e.eat("/"))return e.skipToEnd(),"comment"}if(d.test(i))return e.eatWhile(d),"operator";e.eatWhile(/[\w\$_]/);var a=e.current();return c.propertyIsEnumerable(a)?(("case"==a||"default"==a)&&(s="case"),"keyword"):u.propertyIsEnumerable(a)?"atom":"variable"}function n(e){return function(n,r){for(var i,a=!1,o=!1;null!=(i=n.next());){if(i==e&&!a){o=!0;break}a=!a&&"\\"==i}return(o||!a&&"`"!=e)&&(r.tokenize=t),"string"}}function r(e,n){for(var r,i=!1;r=e.next();){if("/"==r&&i){n.tokenize=t;break}i="*"==r}return"comment"}function i(e,t,n,r,i){this.indented=e,this.column=t,this.type=n,this.align=r,this.prev=i}function a(e,t,n){return e.context=new i(e.indented,t,n,null,e.context)}function o(e){var t=e.context.type;return(")"==t||"]"==t||"}"==t)&&(e.indented=e.context.indented),e.context=e.context.prev}var s,l=e.indentUnit,c={"break":!0,"case":!0,chan:!0,"const":!0,"continue":!0,"default":!0,defer:!0,"else":!0,fallthrough:!0,"for":!0,func:!0,go:!0,"goto":!0,"if":!0,"import":!0,"interface":!0,map:!0,"package":!0,range:!0,"return":!0,select:!0,struct:!0,"switch":!0,type:!0,"var":!0,bool:!0,"byte":!0,complex64:!0,complex128:!0,float32:!0,float64:!0,int8:!0,int16:!0,int32:!0,int64:!0,string:!0,uint8:!0,uint16:!0,uint32:!0,uint64:!0,"int":!0,uint:!0,uintptr:!0},u={"true":!0,"false":!0,iota:!0,nil:!0,append:!0,cap:!0,close:!0,complex:!0,copy:!0,imag:!0,len:!0,make:!0,"new":!0,panic:!0,print:!0,println:!0,real:!0,recover:!0},d=/[+\-*&^%:=<>!|\/]/;return{startState:function(e){return{tokenize:null,context:new i((e||0)-l,0,"top",!1),indented:0,startOfLine:!0}},token:function(e,n){var r=n.context;if(e.sol()&&(null==r.align&&(r.align=!1),n.indented=e.indentation(),n.startOfLine=!0,"case"==r.type&&(r.type="}")),e.eatSpace())return null;s=null;var i=(n.tokenize||t)(e,n);return"comment"==i?i:(null==r.align&&(r.align=!0),"{"==s?a(n,e.column(),"}"):"["==s?a(n,e.column(),"]"):"("==s?a(n,e.column(),")"):"case"==s?r.type="case":"}"==s&&"}"==r.type?r=o(n):s==r.type&&o(n),n.startOfLine=!1,i)},indent:function(e,n){if(e.tokenize!=t&&null!=e.tokenize)return 0;var r=e.context,i=n&&n.charAt(0);if("case"==r.type&&/^(?:case|default)\b/.test(n))return e.context.type="}",r.indented;var a=i==r.type;return r.align?r.column+(a?0:1):r.indented+(a?0:l)},electricChars:"{}):",fold:"brace",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}}),e.defineMIME("text/x-go","go")}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror",require("../xml/xml"))):"function"==typeof define&&define.amd?define("codemirror/mode/markdown/markdown",["codemirror","codemirror/mode/xml/xml"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("markdown",function(t,n){function r(e,t,n){return t.f=t.inline=n,n(e,t)}function i(e,t,n){return t.f=t.block=n,n(e,t)}function a(e){return e.linkTitle=!1,e.em=!1,e.strong=!1,e.quote=0,y||e.f!=s||(e.f=d,e.block=o),e.trailingSpace=0,e.trailingSpaceNewLine=!1,e.thisLineHasContent=!1,null}function o(e,t){var a=e.sol(),o=t.list!==!1;t.list!==!1&&t.indentationDiff>=0?(t.indentationDiff<4&&(t.indentation-=t.indentationDiff),t.list=null):t.list!==!1&&t.indentation>0?(t.list=null,t.listDepth=Math.floor(t.indentation/4)):t.list!==!1&&(t.list=!1,t.listDepth=0);var s=null;if(t.indentationDiff>=4)return t.indentation-=4,e.skipToEnd(),S;if(e.eatSpace())return null;if(s=e.match(W))return t.header=s[0].length<=6?s[0].length:6,n.highlightFormatting&&(t.formatting="header"),t.f=t.inline,c(t);if(t.prevLineHasContent&&(s=e.match(F)))return t.header="="==s[0].charAt(0)?1:2,n.highlightFormatting&&(t.formatting="header"),t.f=t.inline,c(t);if(e.eat(">"))return t.indentation++,t.quote=a?1:t.quote+1,n.highlightFormatting&&(t.formatting="quote"),e.eatSpace(),c(t);if("["===e.peek())return r(e,t,m);if(e.match(R,!0))return I;if((!t.prevLineHasContent||o)&&(e.match(q,!1)||e.match(H,!1))){var u=null;return e.match(q,!0)?u="ul":(e.match(H,!0),u="ol"),t.indentation+=4,t.list=!0,t.listDepth++,n.taskLists&&e.match(P,!1)&&(t.taskList=!0),t.f=t.inline,n.highlightFormatting&&(t.formatting=["list","list-"+u]),c(t)}return n.fencedCodeBlocks&&e.match(/^```([\w+#]*)/,!0)?(t.localMode=x(RegExp.$1),t.localMode&&(t.localState=t.localMode.startState()),i(e,t,l),n.highlightFormatting&&(t.formatting="code-block"),t.code=!0,c(t)):r(e,t,t.inline)}function s(e,t){var n=_.token(e,t.htmlState);return(y&&null===t.htmlState.tagStart&&!t.htmlState.context||t.md_inside&&e.current().indexOf(">")>-1)&&(t.f=d,t.block=o,t.htmlState=null),n}function l(e,t){if(e.sol()&&e.match(/^```/,!0)){t.localMode=t.localState=null,t.f=d,t.block=o,n.highlightFormatting&&(t.formatting="code-block"),t.code=!0;var r=c(t);return t.code=!1,r}return t.localMode?t.localMode.token(e,t.localState):(e.skipToEnd(),S)}function c(e){var t=[];if(e.formatting){t.push(N),"string"==typeof e.formatting&&(e.formatting=[e.formatting]);for(var r=0;r<e.formatting.length;r++)t.push(N+"-"+e.formatting[r]),"header"===e.formatting[r]&&t.push(N+"-"+e.formatting[r]+"-"+e.header),"quote"===e.formatting[r]&&(!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=e.quote?t.push(N+"-"+e.formatting[r]+"-"+e.quote):t.push("error"));
}if(e.taskOpen)return t.push("meta"),t.length?t.join(" "):null;if(e.taskClosed)return t.push("property"),t.length?t.join(" "):null;if(e.linkHref)return t.push(z),t.length?t.join(" "):null;if(e.strong&&t.push(j),e.em&&t.push(D),e.linkText&&t.push(O),e.code&&t.push(S),e.header&&(t.push(C),t.push(C+"-"+e.header)),e.quote&&(t.push(T),!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=e.quote?t.push(T+"-"+e.quote):t.push(T+"-"+n.maxBlockquoteDepth)),e.list!==!1){var i=(e.listDepth-1)%3;i?1===i?t.push(E):t.push(L):t.push(M)}return e.trailingSpaceNewLine?t.push("trailing-space-new-line"):e.trailingSpace&&t.push("trailing-space-"+(e.trailingSpace%2?"a":"b")),t.length?t.join(" "):null}function u(e,t){return e.match(U,!0)?c(t):void 0}function d(t,r){var a=r.text(t,r);if("undefined"!=typeof a)return a;if(r.list)return r.list=null,c(r);if(r.taskList){var o="x"!==t.match(P,!0)[1];return o?r.taskOpen=!0:r.taskClosed=!0,n.highlightFormatting&&(r.formatting="task"),r.taskList=!1,c(r)}if(r.taskOpen=!1,r.taskClosed=!1,r.header&&t.match(/^#+$/,!0))return n.highlightFormatting&&(r.formatting="header"),c(r);var l=t.sol(),u=t.next();if(r.escape)return r.escape=!1,c(r);if(r.linkTitle){r.linkTitle=!1;var d=u;"("===u&&(d=")"),d=(d+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");var h="^\\s*(?:[^"+d+"\\\\]+|\\\\\\\\|\\\\.)"+d;if(t.match(new RegExp(h),!0))return z}if("`"===u){var m=r.formatting;n.highlightFormatting&&(r.formatting="code");var g=c(r),v=t.pos;t.eatWhile("`");var b=1+t.pos-v;return r.code?b===k?(r.code=!1,g):(r.formatting=m,c(r)):(k=b,r.code=!0,c(r))}if(r.code)return c(r);if("!"===u&&t.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return t.match(/\[[^\]]*\]/),r.inline=r.f=p,$;if("["===u&&t.match(/.*\](\(| ?\[)/,!1))return r.linkText=!0,n.highlightFormatting&&(r.formatting="link"),c(r);if("]"===u&&r.linkText){n.highlightFormatting&&(r.formatting="link");var y=c(r);return r.linkText=!1,r.inline=r.f=p,y}if("<"===u&&t.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1)){r.f=r.inline=f,n.highlightFormatting&&(r.formatting="link");var y=c(r);return y?y+=" ":y="",y+A}if("<"===u&&t.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1)){r.f=r.inline=f,n.highlightFormatting&&(r.formatting="link");var y=c(r);return y?y+=" ":y="",y+B}if("<"===u&&t.match(/^\w/,!1)){if(-1!=t.string.indexOf(">")){var w=t.string.substring(1,t.string.indexOf(">"));/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(w)&&(r.md_inside=!0)}return t.backUp(1),r.htmlState=e.startState(_),i(t,r,s)}if("<"===u&&t.match(/^\/\w*?>/))return r.md_inside=!1,"tag";var x=!1;if(!n.underscoresBreakWords&&"_"===u&&"_"!==t.peek()&&t.match(/(\w)/,!1)){var C=t.pos-2;if(C>=0){var S=t.string.charAt(C);"_"!==S&&S.match(/(\w)/,!1)&&(x=!0)}}if("*"===u||"_"===u&&!x)if(l&&" "===t.peek());else{if(r.strong===u&&t.eat(u)){n.highlightFormatting&&(r.formatting="strong");var g=c(r);return r.strong=!1,g}if(!r.strong&&t.eat(u))return r.strong=u,n.highlightFormatting&&(r.formatting="strong"),c(r);if(r.em===u){n.highlightFormatting&&(r.formatting="em");var g=c(r);return r.em=!1,g}if(!r.em)return r.em=u,n.highlightFormatting&&(r.formatting="em"),c(r)}else if(" "===u&&(t.eat("*")||t.eat("_"))){if(" "===t.peek())return c(r);t.backUp(1)}return" "===u&&(t.match(/ +$/,!1)?r.trailingSpace++:r.trailingSpace&&(r.trailingSpaceNewLine=!0)),c(r)}function f(e,t){var r=e.next();if(">"===r){t.f=t.inline=d,n.highlightFormatting&&(t.formatting="link");var i=c(t);return i?i+=" ":i="",i+A}return e.match(/^[^>]+/,!0),A}function p(e,t){if(e.eatSpace())return null;var r=e.next();return"("===r||"["===r?(t.f=t.inline=h("("===r?")":"]"),n.highlightFormatting&&(t.formatting="link-string"),t.linkHref=!0,c(t)):"error"}function h(e){return function(t,r){var i=t.next();if(i===e){r.f=r.inline=d,n.highlightFormatting&&(r.formatting="link-string");var a=c(r);return r.linkHref=!1,a}return t.match(b(e),!0)&&t.backUp(1),r.linkHref=!0,c(r)}}function m(e,t){return e.match(/^[^\]]*\]:/,!1)?(t.f=g,e.next(),n.highlightFormatting&&(t.formatting="link"),t.linkText=!0,c(t)):r(e,t,d)}function g(e,t){if(e.match(/^\]:/,!0)){t.f=t.inline=v,n.highlightFormatting&&(t.formatting="link");var r=c(t);return t.linkText=!1,r}return e.match(/^[^\]]+/,!0),O}function v(e,t){return e.eatSpace()?null:(e.match(/^[^\s]+/,!0),void 0===e.peek()?t.linkTitle=!0:e.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),t.f=t.inline=d,z)}function b(e){return V[e]||(e=(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),V[e]=new RegExp("^(?:[^\\\\]|\\\\.)*?("+e+")")),V[e]}var y=e.modes.hasOwnProperty("xml"),_=e.getMode(t,y?{name:"xml",htmlMode:!0}:"text/plain"),w={html:"htmlmixed",js:"javascript",json:"application/json",c:"text/x-csrc","c++":"text/x-c++src",java:"text/x-java",csharp:"text/x-csharp","c#":"text/x-csharp",scala:"text/x-scala"},x=function(){var n,r,i={},a={},o=[];for(var s in e.modes)e.modes.propertyIsEnumerable(s)&&o.push(s);for(n=0;n<o.length;n++)i[o[n]]=o[n];var l=[];for(var s in e.mimeModes)e.mimeModes.propertyIsEnumerable(s)&&l.push({mime:s,mode:e.mimeModes[s]});for(n=0;n<l.length;n++)r=l[n].mime,a[r]=l[n].mime;for(var c in w)(w[c]in i||w[c]in a)&&(i[c]=w[c]);return function(n){return i[n]?e.getMode(t,i[n]):null}}();void 0===n.highlightFormatting&&(n.highlightFormatting=!1),void 0===n.maxBlockquoteDepth&&(n.maxBlockquoteDepth=0),void 0===n.underscoresBreakWords&&(n.underscoresBreakWords=!0),void 0===n.fencedCodeBlocks&&(n.fencedCodeBlocks=!1),void 0===n.taskLists&&(n.taskLists=!1);var k=0,C="header",S="comment",T="quote",M="variable-2",E="variable-3",L="keyword",I="hr",$="tag",N="formatting",A="link",B="link",O="link",z="string",D="em",j="strong",R=/^([*\-=_])(?:\s*\1){2,}\s*$/,q=/^[*\-+]\s+/,H=/^[0-9]+\.\s+/,P=/^\[(x| )\](?=\s)/,W=/^#+/,F=/^(?:\={1,}|-{1,})$/,U=/^[^#!\[\]*_\\<>` "'(]+/,V=[],K={startState:function(){return{f:o,prevLineHasContent:!1,thisLineHasContent:!1,block:o,htmlState:null,indentation:0,inline:d,text:u,escape:!1,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,em:!1,strong:!1,header:0,taskList:!1,list:!1,listDepth:0,quote:0,trailingSpace:0,trailingSpaceNewLine:!1}},copyState:function(t){return{f:t.f,prevLineHasContent:t.prevLineHasContent,thisLineHasContent:t.thisLineHasContent,block:t.block,htmlState:t.htmlState&&e.copyState(_,t.htmlState),indentation:t.indentation,localMode:t.localMode,localState:t.localMode?e.copyState(t.localMode,t.localState):null,inline:t.inline,text:t.text,escape:!1,formatting:!1,linkTitle:t.linkTitle,em:t.em,strong:t.strong,header:t.header,taskList:t.taskList,list:t.list,listDepth:t.listDepth,quote:t.quote,trailingSpace:t.trailingSpace,trailingSpaceNewLine:t.trailingSpaceNewLine,md_inside:t.md_inside}},token:function(e,t){if(t.formatting=!1,e.sol()){var n=e.match(/^\s*$/,!0)||t.header;if(t.header=0,n)return t.prevLineHasContent=!1,a(t);t.prevLineHasContent=t.thisLineHasContent,t.thisLineHasContent=!0,t.escape=!1,t.taskList=!1,t.code=!1,t.trailingSpace=0,t.trailingSpaceNewLine=!1,t.f=t.block;var r=e.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length,i=4*Math.floor((r-t.indentation)/4);i>4&&(i=4);var o=t.indentation+i;if(t.indentationDiff=o-t.indentation,t.indentation=o,r>0)return null}var s=t.f(e,t);return e.start==e.pos?this.token(e,t):s},innerMode:function(e){return e.block==s?{state:e.htmlState,mode:_}:e.localState?{state:e.localState,mode:e.localMode}:{state:e,mode:K}},blankLine:a,getType:c,fold:"markdown"};return K},"xml"),e.defineMIME("text/x-markdown","markdown")}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/mode/shell/shell",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("shell",function(){function e(e,t){for(var n=t.split(" "),r=0;r<n.length;r++)i[n[r]]=e}function t(e,t){if(e.eatSpace())return null;var o=e.sol(),s=e.next();if("\\"===s)return e.next(),null;if("'"===s||'"'===s||"`"===s)return t.tokens.unshift(n(s)),r(e,t);if("#"===s)return o&&e.eat("!")?(e.skipToEnd(),"meta"):(e.skipToEnd(),"comment");if("$"===s)return t.tokens.unshift(a),r(e,t);if("+"===s||"="===s)return"operator";if("-"===s)return e.eat("-"),e.eatWhile(/\w/),"attribute";if(/\d/.test(s)&&(e.eatWhile(/\d/),e.eol()||!/\w/.test(e.peek())))return"number";e.eatWhile(/[\w-]/);var l=e.current();return"="===e.peek()&&/\w+/.test(l)?"def":i.hasOwnProperty(l)?i[l]:null}function n(e){return function(t,n){for(var r,i=!1,o=!1;null!=(r=t.next());){if(r===e&&!o){i=!0;break}if("$"===r&&!o&&"'"!==e){o=!0,t.backUp(1),n.tokens.unshift(a);break}o=!o&&"\\"===r}return(i||!o)&&n.tokens.shift(),"`"===e||")"===e?"quote":"string"}}function r(e,n){return(n.tokens[0]||t)(e,n)}var i={};e("atom","true false"),e("keyword","if then do else elif while until for in esac fi fin fil done exit set unset export function"),e("builtin","ab awk bash beep cat cc cd chown chmod chroot clear cp curl cut diff echo find gawk gcc get git grep kill killall ln ls make mkdir openssl mv nc node npm ping ps restart rm rmdir sed service sh shopt shred source sort sleep ssh start stop su sudo tee telnet top touch vi vim wall wc wget who write yes zsh");var a=function(e,t){t.tokens.length>1&&e.eat("$");var i=e.next(),a=/\w/;return"{"===i&&(a=/[^}]/),"("===i?(t.tokens[0]=n(")"),r(e,t)):(/\d/.test(i)||(e.eatWhile(a),e.eat("}")),t.tokens.shift(),"def")};return{startState:function(){return{tokens:[]}},token:function(e,t){return r(e,t)}}}),e.defineMIME("text/x-sh","shell")}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/addon/selection/active-line",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){for(var t=0;t<e.state.activeLines.length;t++)e.removeLineClass(e.state.activeLines[t],"wrap",a),e.removeLineClass(e.state.activeLines[t],"background",o)}function n(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function r(e,r){for(var i=[],s=0;s<r.length;s++){var l=r[s];if(l.empty()){var c=e.getLineHandleVisualStart(l.head.line);i[i.length-1]!=c&&i.push(c)}}n(e.state.activeLines,i)||e.operation(function(){t(e);for(var n=0;n<i.length;n++)e.addLineClass(i[n],"wrap",a),e.addLineClass(i[n],"background",o);e.state.activeLines=i})}function i(e,t){r(e,t.ranges)}var a="CodeMirror-activeline",o="CodeMirror-activeline-background";e.defineOption("styleActiveLine",!1,function(n,a,o){var s=o&&o!=e.Init;a&&!s?(n.state.activeLines=[],r(n,n.listSelections()),n.on("beforeSelectionChange",i)):!a&&s&&(n.off("beforeSelectionChange",i),t(n),delete n.state.activeLines)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/addon/edit/matchbrackets",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e,t,r,i){var a=e.getLineHandle(t.line),l=t.ch-1,c=l>=0&&s[a.text.charAt(l)]||s[a.text.charAt(++l)];if(!c)return null;var u=">"==c.charAt(1)?1:-1;if(r&&u>0!=(l==t.ch))return null;var d=e.getTokenTypeAt(o(t.line,l+1)),f=n(e,o(t.line,l+(u>0?1:0)),u,d||null,i);return null==f?null:{from:o(t.line,l),to:f&&f.pos,match:f&&f.ch==c.charAt(0),forward:u>0}}function n(e,t,n,r,i){for(var a=i&&i.maxScanLineLength||1e4,l=i&&i.maxScanLines||1e3,c=[],u=i&&i.bracketRegex?i.bracketRegex:/[(){}[\]]/,d=n>0?Math.min(t.line+l,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-l),f=t.line;f!=d;f+=n){var p=e.getLine(f);if(p){var h=n>0?0:p.length-1,m=n>0?p.length:-1;if(!(p.length>a))for(f==t.line&&(h=t.ch-(0>n?1:0));h!=m;h+=n){var g=p.charAt(h);if(u.test(g)&&(void 0===r||e.getTokenTypeAt(o(f,h+1))==r)){var v=s[g];if(">"==v.charAt(1)==n>0)c.push(g);else{if(!c.length)return{pos:o(f,h),ch:g};c.pop()}}}}}return f-n==(n>0?e.lastLine():e.firstLine())?!1:null}function r(e,n,r){for(var i=e.state.matchBrackets.maxHighlightLineLength||1e3,s=[],l=e.listSelections(),c=0;c<l.length;c++){var u=l[c].empty()&&t(e,l[c].head,!1,r);if(u&&e.getLine(u.from.line).length<=i){var d=u.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";s.push(e.markText(u.from,o(u.from.line,u.from.ch+1),{className:d})),u.to&&e.getLine(u.to.line).length<=i&&s.push(e.markText(u.to,o(u.to.line,u.to.ch+1),{className:d}))}}if(s.length){a&&e.state.focused&&e.display.input.focus();var f=function(){e.operation(function(){for(var e=0;e<s.length;e++)s[e].clear()})};if(!n)return f;setTimeout(f,800)}}function i(e){e.operation(function(){l&&(l(),l=null),l=r(e,!1,e.state.matchBrackets)})}var a=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),o=e.Pos,s={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},l=null;e.defineOption("matchBrackets",!1,function(t,n,r){r&&r!=e.Init&&t.off("cursorActivity",i),n&&(t.state.matchBrackets="object"==typeof n?n:{},t.on("cursorActivity",i))}),e.defineExtension("matchBrackets",function(){r(this,!0)}),e.defineExtension("findMatchingBracket",function(e,n,r){return t(this,e,n,r)}),e.defineExtension("scanForBracket",function(e,t,r,i){return n(this,e,t,r,i)})}),define("NoteWidget",["main","codemirror","autoSave","codemirror/mode/python/python","codemirror/mode/ruby/ruby","codemirror/mode/php/php","codemirror/mode/css/css","codemirror/mode/clike/clike","codemirror/mode/htmlmixed/htmlmixed","codemirror/mode/go/go","codemirror/mode/markdown/markdown","codemirror/mode/shell/shell","codemirror/mode/javascript/javascript","codemirror/addon/selection/active-line","codemirror/addon/edit/matchbrackets"],function(e,t,n){var r,i;return r=function(){var e,r,i,a;r='<div id="noteWidget" class="noteWidget hidden hidden-xs">\n    <div class="noteWidget-header clearfix">\n        <h2 class="h4 pull-left">记笔记</h2>\n        <ul class="list-inline pull-right mb0">\n            <li id="noteWidgetMinimize"><span class="icon-minimize"></span></li><li id="noteWidgetZoom"><span class="icon-zoom"></span></li><li id="noteWidgetClose"><span class="icon-close"></span></li>\n        </ul>\n    </div>\n    <form method="POST" action="/api/notes/add" role="form">\n        <div class="form-group">\n            <label for="title" class="sr-only">标题</label>\n            <input type="hidden" value="" id="draftId">\n            <input type="text" name="title" data-error="" autocomplete="off" class="form-control" placeholder="笔记描述" value="">\n        </div>\n        <div class="editor-config clearfix">\n            <select name="lang" class="form-control pull-left input-sm">\n                <optgroup label="文本语法">\n                    <option value="text" data-mode="text">纯文本</option>\n                    <option value="markdown" data-mode="markdown">Markdown</option>\n                    <option value="javascript" data-mode="javascript">Javascript</option>\n                    <option value="css" data-mode="css">CSS</option>\n                    <option value="html5" data-mode="htmlmixed">HTML</option>\n                    <option value="php" data-mode="php">PHP</option>\n                    <option value="python" data-mode="python">Python</option>\n                    <option value="ruby" data-mode="ruby">Ruby</option>\n                    <option value="go" data-mode="go">Go</option>\n                    <option value="c" data-mode="clike">C/C++</option>\n                    <option value="java" data-mode="java">Java</option>\n                    <option value="bash" data-mode="shell">Shell/Bash</option>\n                </optgroup>\n            </select>\n            <div class="pull-right hidden-xs">\n                <select name="indentWithTabs" class="form-control inline-block input-sm">\n                    <optgroup label="缩进模式">\n                        <option value="false">空格缩进</option>\n                        <option value="true">Tabs 缩进</option>\n                    </optgroup>\n                </select>\n                <select name="tabSize" class="form-control inline-block input-sm">\n                    <optgroup label="缩进大小">\n                        <option value="2">2</option>\n                        <option value="4" selected="">4</option>\n                    </optgroup>\n                </select>\n                <select name="lineWrap" class="form-control inline-block input-sm">\n                    <optgroup label="换行方式">\n                        <option value="true">自动换行</option>\n                        <option value="false">不换行</option>\n                    </optgroup>\n                </select>\n            </div>\n        </div>\n        <textarea id="codeMirror" class="form-control" style="display: none;"></textarea>\n        <div class="mt20 clearfix">\n            <div class="pull-right">\n                <span class="text-muted hidden" id="editorStatus">已保存</span>\n                <a id="dropIt" href="javascript:void(0);" class="mr10 hidden">[舍弃]</a>\n                <button data-type="note" id="publishIt2" class="btn btn-default ml10" data-id="" data-do="add" data-url="" data-text="保存私密笔记" data-name="">保存私密笔记</button>\n                <button data-type="note" id="publishIt" class="btn btn-primary ml10" data-id="" data-do="add" data-url="" data-text="保存公开笔记" data-name="">保存公开笔记</button>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>',this.content=$(r),$("body").append(this.content),this.option=i={mode:$("#noteWidget [name=lang] option:selected").data("mode"),indentUnit:$("#noteWidget [name=tabSize]").val(),tabSize:$("#noteWidget [name=tabSize]").val(),lineWrapping:"true"===$("#noteWidget [name=lineWrap]").val(),indentWithTabs:"true"===$("#noteWidget [name=indentWithTabs]").val()},e=t.fromTextArea($("#codeMirror")[0],{lineNumbers:!0,styleActiveLine:!0,matchBrackets:!0,mode:i.mode,indentUnit:i.indentUnit,tabSize:i.tabSize,lineWrapping:i.lineWrapping,indentWithTabs:i.indentWithTabs}),t.on($("#noteWidget [name=lang]")[0],"change",function(){var t;return t=$(this).find("option:selected").data("mode"),e.setOption("mode",t)}),$("#noteWidget [name=tabSize]").change(function(){var t;return t=$(this).val(),e.setOption("indentUnit",t),e.setOption("tabSize",t)}),$("#noteWidget [name=lineWrap]").change(function(){var t;return t="true"===$(this).val(),e.setOption("lineWrapping",t)}),$("#noteWidget [name=indentWithTabs]").change(function(){var t;return t="true"===$(this).val(),e.setOption("indentWithTabs",t)}),n.bind(e,function(){return this["do"]="saveNote",this.type="note",this.title=$("#noteWidget [name=title]").val(),this.text=e.getValue(),this.id=$("#draftId").val(),this.noteId=$("#publishIt").data("id"),this.language=$("#noteWidget [name=lang]").val(),this.language=$("#noteWidget [name=lang]").val()}),a=function(t,n){var r,i,a;return r=t,r.text("加载中").attr("disabled","disabled"),a={title:r.parents("form").find("input[name=title]").val(),text:e.getValue(),isPrivate:$("#isEditPrivate").val()||n,language:r.parents("form").find("[name=lang]").val()},i="/api/notes/add",$.post(i,a,function(e){0===e.status?location.href=e.data.url:r.text(r.data("text")).removeAttr("disabled")},"json")},$(".noteWidget form").submit(function(e){return e.preventDefault(),a($("#publishIt"),0),!1}),$("#publishIt2").click(function(e){return e.preventDefault(),a($(this),1)}),$("#noteWidgetMinimize").click(function(){return $("#noteWidget").toggleClass("minimize")}),$("#noteWidgetZoom").click(function(){var t;return $("#noteWidget").toggleClass("zoom"),$("#noteWidget").removeClass("minimize"),$("#noteWidget").hasClass("zoom")?(t=$(window).height()-215,e.setSize("100%",t)):e.setSize("100%",240),e.refresh()}),$("#noteWidgetClose").click(function(){return $("#noteWidget").removeClass("zoom minimize"),$("#noteWidget").addClass("hidden")}),this.codemirror=e},r.prototype.init=function(e,t){var n,r,i,a;$("#noteWidget").removeClass("hidden"),i=[],$("#noteWidget [name=lang] option").each(function(){return i.push($(this).attr("value"))}),r={javascript:/^(js|coffeescript)$/i,markdown:/^md$/i,c:/^(|cs|cpp|oc|objective-c)$/i,php:/^php[1-6]$/i,html5:/^(xml|html|html5|xhtml)$/i};for(n in r)t.match(r[n])&&(t=n);return-1!==i.indexOf(t)?a=$("#noteWidget [name=lang] option[value="+t+"]").data("mode"):(t="text",a="text"),$("#noteWidget [name=lang]").val(t),this.codemirror.setOption("mode",a),this.codemirror.setValue(e)},i=new r,$("body").on("click",".saveToNote",function(){var e,t,n,r,a;return $("#saveToNote").remove(),n=window.getSelection().toString(),n?i.init(n,"text"):(t=$(this).parents("pre"),e=t.find("code"),r=e.text(),a=e.attr("class")?e.attr("class"):t.attr("class").replace("hljs ",""),i.init(r,a))}),e.hasOwnProperty("notePortal")&&"on"===e.notePortal&&$(".fmt").mouseup(function(e){var t,n;return $("#saveToNote").length&&$("#saveToNote").remove(),n=window.getSelection(),n.toString()&&$(n.focusNode).parents(".fmt").length?(t=$('<button id="saveToNote" class="hidden-xs btn btn-xs widget-saveToNote saveToNote" style="color: #FFF; left: '+(e.pageX-65)+"px; top:"+(e.pageY-40)+'px">放进笔记</button>'),$("body").append(t)):void 0}),r}),define("emojiList",[],function(){return["+1","-1","100","1234","8ball","a","ab","abc","abcd","accept","aerial_tramway","airplane","alarm_clock","alien","ambulance","anchor","angel","anger","angry","anguished","ant","apple","aquarius","aries","arrow_backward","arrow_double_down","arrow_double_up","arrow_down","arrow_down_small","arrow_forward","arrow_heading_down","arrow_heading_up","arrow_left","arrow_lower_left","arrow_lower_right","arrow_right","arrow_right_hook","arrow_up","arrow_up_down","arrow_up_small","arrow_upper_left","arrow_upper_right","arrows_clockwise","arrows_counterclockwise","art","articulated_lorry","astonished","atm","b","baby","baby_bottle","baby_chick","baby_symbol","back","baggage_claim","balloon","ballot_box_with_check","bamboo","banana","bangbang","bank","bar_chart","barber","baseball","basketball","bath","bathtub","battery","bear","bee","beer","beers","beetle","beginner","bell","bento","bicyclist","bike","bikini","bird","birthday","black_circle","black_joker","black_medium_small_square","black_medium_square","black_nib","black_small_square","black_square","black_square_button","blossom","blowfish","blue_book","blue_car","blue_heart","blush","boar","boat","bomb","book","bookmark","bookmark_tabs","books","boom","boot","bouquet","bow","bowling","bowtie","boy","bread","bride_with_veil","bridge_at_night","briefcase","broken_heart","bug","bulb","bullettrain_front","bullettrain_side","bus","busstop","bust_in_silhouette","busts_in_silhouette","cactus","cake","calendar","calling","camel","camera","cancer","candy","capital_abcd","capricorn","car","card_index","carousel_horse","cat","cat2","cd","chart","chart_with_downwards_trend","chart_with_upwards_trend","checkered_flag","cherries","cherry_blossom","chestnut","chicken","children_crossing","chocolate_bar","christmas_tree","church","cinema","circus_tent","city_sunrise","city_sunset","cl","clap","clapper","clipboard","clock1","clock10","clock1030","clock11","clock1130","clock12","clock1230","clock130","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","closed_book","closed_lock_with_key","closed_umbrella","cloud","clubs","cn","cocktail","coffee","cold_sweat","collision","computer","confetti_ball","confounded","confused","congratulations","construction","construction_worker","convenience_store","cookie","cool","cop","copyright","corn","couple","couple_with_heart","couplekiss","cow","cow2","credit_card","crescent_moon","crocodile","crossed_flags","crown","cry","crying_cat_face","crystal_ball","cupid","curly_loop","currency_exchange","curry","custard","customs","cyclone","dancer","dancers","dango","dart","dash","date","de","deciduous_tree","department_store","diamond_shape_with_a_dot_inside","diamonds","disappointed","disappointed_relieved","dizzy","dizzy_face","do_not_litter","dog","dog2","dollar","dolls","dolphin","donut","door","doughnut","dragon","dragon_face","dress","dromedary_camel","droplet","dvd","e-mail","ear","ear_of_rice","earth_africa","earth_americas","earth_asia","egg","eggplant","eight","eight_pointed_black_star","eight_spoked_asterisk","electric_plug","elephant","email","end","envelope","es","euro","european_castle","european_post_office","evergreen_tree","exclamation","expressionless","eyeglasses","eyes","facepunch","factory","fallen_leaf","family","fast_forward","fax","fearful","feelsgood","feet","ferris_wheel","file_folder","finnadie","fire","fire_engine","fireworks","first_quarter_moon","first_quarter_moon_with_face","fish","fish_cake","fishing_pole_and_fish","fist","five","flags","flashlight","floppy_disk","flower_playing_cards","flushed","foggy","football","fork_and_knife","fountain","four","four_leaf_clover","fr","free","fried_shrimp","fries","frog","frowning","fu","fuelpump","full_moon","full_moon_with_face","game_die","gb","gem","gemini","ghost","gift","gift_heart","girl","globe_with_meridians","goat","goberserk","godmode","golf","grapes","green_apple","green_book","green_heart","grey_exclamation","grey_question","grimacing","grin","grinning","guardsman","guitar","gun","haircut","hamburger","hammer","hamster","hand","handbag","hankey","hash","hatched_chick","hatching_chick","headphones","hear_no_evil","heart","heart_decoration","heart_eyes","heart_eyes_cat","heartbeat","heartpulse","hearts","heavy_check_mark","heavy_division_sign","heavy_dollar_sign","heavy_exclamation_mark","heavy_minus_sign","heavy_multiplication_x","heavy_plus_sign","helicopter","herb","hibiscus","high_brightness","high_heel","hocho","honey_pot","honeybee","horse","horse_racing","hospital","hotel","hotsprings","hourglass","hourglass_flowing_sand","house","house_with_garden","hurtrealbad","hushed","ice_cream","icecream","id","ideograph_advantage","imp","inbox_tray","incoming_envelope","information_desk_person","information_source","innocent","interrobang","iphone","it","izakaya_lantern","jack_o_lantern","japan","japanese_castle","japanese_goblin","japanese_ogre","jeans","joy","joy_cat","jp","key","keycap_ten","kimono","kiss","kissing","kissing_cat","kissing_closed_eyes","kissing_face","kissing_heart","kissing_smiling_eyes","koala","koko","kr","large_blue_circle","large_blue_diamond","large_orange_diamond","last_quarter_moon","last_quarter_moon_with_face","laughing","leaves","ledger","left_luggage","left_right_arrow","leftwards_arrow_with_hook","lemon","leo","leopard","libra","light_rail","link","lips","lipstick","lock","lock_with_ink_pen","lollipop","loop","loudspeaker","love_hotel","love_letter","low_brightness","m","mag","mag_right","mahjong","mailbox","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","man","man_with_gua_pi_mao","man_with_turban","mans_shoe","maple_leaf","mask","massage","meat_on_bone","mega","melon","memo","mens","metal","metro","microphone","microscope","milky_way","minibus","minidisc","mobile_phone_off","money_with_wings","moneybag","monkey","monkey_face","monorail","mortar_board","mount_fuji","mountain_bicyclist","mountain_cableway","mountain_railway","mouse","mouse2","movie_camera","moyai","muscle","mushroom","musical_keyboard","musical_note","musical_score","mute","nail_care","name_badge","neckbeard","necktie","negative_squared_cross_mark","neutral_face","new","new_moon","new_moon_with_face","newspaper","ng","nine","no_bell","no_bicycles","no_entry","no_entry_sign","no_good","no_mobile_phones","no_mouth","no_pedestrians","no_smoking","non-potable_water","nose","notebook","notebook_with_decorative_cover","notes","nut_and_bolt","o","o2","ocean","octocat","octopus","oden","office","ok","ok_hand","ok_woman","older_man","older_woman","on","oncoming_automobile","oncoming_bus","oncoming_police_car","oncoming_taxi","one","open_file_folder","open_hands","open_mouth","ophiuchus","orange_book","outbox_tray","ox","package","page_facing_up","page_with_curl","pager","palm_tree","panda_face","paperclip","parking","part_alternation_mark","partly_sunny","passport_control","paw_prints","peach","pear","pencil","pencil2","penguin","pensive","performing_arts","persevere","person_frowning","person_with_blond_hair","person_with_pouting_face","phone","pig","pig2","pig_nose","pill","pineapple","pisces","pizza","plus1","point_down","point_left","point_right","point_up","point_up_2","police_car","poodle","poop","post_office","postal_horn","postbox","potable_water","pouch","poultry_leg","pound","pouting_cat","pray","princess","punch","purple_heart","purse","pushpin","put_litter_in_its_place","question","rabbit","rabbit2","racehorse","radio","radio_button","rage","rage1","rage2","rage3","rage4","railway_car","rainbow","raised_hand","raised_hands","raising_hand","ram","ramen","rat","recycle","red_car","red_circle","registered","relaxed","relieved","repeat","repeat_one","restroom","revolving_hearts","rewind","ribbon","rice","rice_ball","rice_cracker","rice_scene","ring","rocket","roller_coaster","rooster","rose","rotating_light","round_pushpin","rowboat","ru","rugby_football","runner","running","running_shirt_with_sash","sa","sagittarius","sailboat","sake","sandal","santa","satellite","satisfied","saxophone","school","school_satchel","scissors","scorpius","scream","scream_cat","scroll","seat","secret","see_no_evil","seedling","seven","shaved_ice","sheep","shell","ship","shipit","shirt","shit","shoe","shower","signal_strength","six","six_pointed_star","ski","skull","sleeping","sleepy","slot_machine","small_blue_diamond","small_orange_diamond","small_red_triangle","small_red_triangle_down","smile","smile_cat","smiley","smiley_cat","smiling_imp","smirk","smirk_cat","smoking","snail","snake","snowboarder","snowflake","snowman","sob","soccer","soon","sos","sound","space_invader","spades","spaghetti","sparkle","sparkler","sparkles","sparkling_heart","speak_no_evil","speaker","speech_balloon","speedboat","squirrel","star","star2","stars","station","statue_of_liberty","steam_locomotive","stew","straight_ruler","strawberry","stuck_out_tongue","stuck_out_tongue_closed_eyes","stuck_out_tongue_winking_eye","sun_with_face","sunflower","sunglasses","sunny","sunrise","sunrise_over_mountains","surfer","sushi","suspect","suspension_railway","sweat","sweat_drops","sweat_smile","sweet_potato","swimmer","symbols","syringe","tada","tanabata_tree","tangerine","taurus","taxi","tea","telephone","telephone_receiver","telescope","tennis","tent","thought_balloon","three","thumbsdown","thumbsup","ticket","tiger","tiger2","tired_face","tm","toilet","tokyo_tower","tomato","tongue","top","tophat","tractor","traffic_light","train","train2","tram","triangular_flag_on_post","triangular_ruler","trident","triumph","trolleybus","trollface","trophy","tropical_drink","tropical_fish","truck","trumpet","tshirt","tulip","turtle","tv","twisted_rightwards_arrows","two","two_hearts","two_men_holding_hands","two_women_holding_hands","u5272","u5408","u55b6","u6307","u6708","u6709","u6e80","u7121","u7533","u7981","u7a7a","uk","umbrella","unamused","underage","unlock","up","us","v","vertical_traffic_light","vhs","vibration_mode","video_camera","video_game","violin","virgo","volcano","vs","walking","waning_crescent_moon","waning_gibbous_moon","warning","watch","water_buffalo","watermelon","wave","wavy_dash","waxing_crescent_moon","waxing_gibbous_moon","wc","weary","wedding","whale","whale2","wheelchair","white_check_mark","white_circle","white_flower","white_large_square","white_medium_small_square","white_medium_square","white_small_square","white_square_button","wind_chime","wine_glass","wink","wolf","woman","womans_clothes","womans_hat","womens","worried","wrench","x","yellow_heart","yen","yum","zap","zero","zzz"]}),define("highLight",["main","highlightjs","math","flowChart","sequenceChart","ZeroClipboard","NoteWidget","emojiList","jquery_hoverIntent"],function(e,t,n,r,i,a,o,s){"use strict";return function(o){var l,c,u,d,f;d=function(t){var n;return n=t.attr("class").trim().replace(/emoji[ \-]/g,""),-1!==s.indexOf(n)?(t.after('<img src="'+e.staticUrl+"/global/img/emojis/"+n+'.png" class="emoji" alt="'+n+'" title="'+n+'" />'),t.remove()):void 0;
},o?o.find("span.emoji").each(function(){return d($(this))}):$(".fmt span.emoji").each(function(){return d($(this))}),f=function(e){var t,n,r,i;return t=document,i=e.get(0),t.body.createTextRange?(n=t.body.createTextRange(),n.moveToElementText(i),n.select()):window.getSelection?(r=window.getSelection(),n=t.createRange(),n.selectNodeContents(i),r.removeAllRanges(),r.addRange(n)):void 0},c=function(e){var t,n,r,i,o;return o='<div class="widget-codetool" style="display:none;"><button class="selectCode btn btn-xs">全选</button><button href="javascript:void(0);" class="copyCode btn btn-xs" data-clipboard-text="" data-toggle="tooltip" data-placement="top" title="">复制</button><button href="javascript:void(0);" class="saveToNote btn btn-xs">放进笔记</button></div>',r=$(o),e.prepend(r),n=r.find(".copyCode"),t=e.children("code"),e.hoverIntent(function(){return r.fadeIn(),n.attr("title",""),n.tooltip("destroy")},function(){return r.is(":hover")||n.hasClass("zeroclipboard-is-hover")?void 0:r.fadeOut()}),r.hoverIntent(function(){},function(){return e.is(":hover")?void 0:r.fadeOut()}),r.find(".selectCode").click(function(){return f(t)}),n.attr("data-clipboard-text",t.text()),i=new a(r.find(".copyCode")),i.on("ready",function(e){return i.on("aftercopy",function(e){return n.attr("title","已复制"),n.tooltip("show")})})},u=function(e){var n,a,s,l,u,d,f,p,h,m,g,v;g=e,d={actionscript:/^as[1-3]$/i,cmake:/^(make|makefile)$/i,cs:/^csharp$/i,css:/^css[1-3]$/i,javascript:/^js$/i,markdown:/^md$/i,objectivec:/^(oc|objective-c)$/i,php:/^php[1-6]$/i,sql:/^mysql$/i,xml:/^(html|html5|xhtml)$/i,flow:/^flow$/i,sequence:/^sequence$/i},l=void 0,u=t.listLanguages(),s=void 0,n=void 0,h=!1,2===g.children("code").length?(n=g.children("code").first().text(),g.children("code").first().remove(),s=g.children("code").addClass(n)):(s=g.children("code"),1===s.text().split("\n").length&&s.css({"word-break":"break-word","white-space":"initial"}),n=s.attr("class")),n&&(a=n.split(/\s+/),-1!==a.indexOf("nohighlight")&&(h=!0),a.forEach(function(e){var t,n;if(n=e.toLowerCase(),-1!==u.indexOf(n))l=n;else for(t in d)n.match(d[t])&&(l=t)})),l?"flow"===l?(p=$(".flowChart").length,s.parent().after('<div id="flowDiagram'+p+'" class="flowChart"></div>'),r(s.text(),"flowDiagram"+p),s.parent().remove()):"sequence"===l?(o=s.parent(),v=s.text(),p=$(".sequenceChart").length,o.replaceWith('<div id="sequenceDiagram'+p+'" class="sequenceChart">'+v+"</div>"),i($("#sequenceDiagram"+p))):(m=t.highlight(l,s.text(),!0),s.html(m.value)):h||(f=g.html(),f.length<1e4&&t.highlightBlock(g[0])),c(g)},"undefined"!=typeof t&&(o?(o.hasClass("fmt")&&o.find("table").each(function(){$(this).wrap('<div class="x-scroll"></div>')}),l=o.text().indexOf("$$"),-1!==l&&n(o),o.find("pre").each(function(){u($(this))})):(l=!1,$(".fmt").each(function(){-1!==$(this).text().indexOf("$$")&&(l=!0)}),l&&n(),$(".fmt pre").each(function(){u($(this))})))}});var _slicedToArray=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(l){i=!0,a=l}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Parser=function(){function e(){_classCallCheck(this,e),this.commonWhiteList="kbd|b|i|strong|em|sup|sub|br|code|del|a|hr|small",this.specialWhiteList={table:"table|tbody|thead|tfoot|tr|td|th"},this.footnotes,this.blocks,this.current,this.pos,this.definitions,this.hooks={},this.holders,this.uniqid,this.id}return _createClass(e,[{key:"md5",value:function(e,t){"undefined"==typeof e&&(e="");var n,r=function(e,t){return e=parseInt(e,10).toString(16),t<e.length?e.slice(e.length-t):t>e.length?Array(1+(t-e.length)).join("0")+e:e},i=Math.floor(123456789*Math.random());return i++,n=e,n+=r(parseInt((new Date).getTime()/1e3,10),8),n+=r(i,5),t&&(n+=(10*Math.random()).toFixed(8).toString()),n}},{key:"makeHtml",value:function(e){this.footnotes=[],this.definitions=[],this.holders=[],this.uniqid=this.md5(),this.id=0,e=this.initText(e);var t=this.parse(e);return t=this.makeFootnotes(t),this.hooks.afterParse&&(t=this.call("afterParse",t)),t}},{key:"hook",value:function(e,t){this.hooks[e]?this.hooks[e].push(t):this.hooks[e]=[t]}},{key:"makeHolder",value:function(e){var t="|\r"+this.uniqid+this.id+"\r|";return this.id++,this.holders[t]=e,t}},{key:"initText",value:function(e){return e?(e=e.replace(/\t/g,"    "),e=e.replace(/\r/g,"")):e="",e}},{key:"makeFootnotes",value:function(e){if(this.footnotes.length>0){e+='<div class="footnotes"><hr><ol>';for(var t=1,n=this.footnotes.shift();n;)"string"==typeof n?n+=' <a href="#fnref-'+t+'" class="footnote-backref">&#8617;</a>':(n[n.length-1]+=' <a href="#fnref-'+t+'" class="footnote-backref">&#8617;</a>',n=n.length>1?this.parse(n.join("\n")):this.parseInline(n[0])),e+='<li id="fn-'+t+'">'+n+"</li>",t++,n=this.footnotes.shift();e+="</ol></div>"}return e}},{key:"parse",value:function(e){var t=this,n=e.split("\n"),r=this.parseBlock(e,n),i="";return r.forEach(function(e){var r=_slicedToArray(e,4),a=r[0],o=r[1],s=r[2],l=r[3],c=n.slice(o,s+1),u="parse"+a.slice(0,1).toUpperCase()+a.slice(1),d="before"+u.slice(0,1).toUpperCase()+u.slice(1);c=t.call(d,c,l);var f=t[u](c,l);f=t.call("after"+u.slice(0,1).toUpperCase()+u.slice(1),f,l),i+=f}),i}},{key:"call",value:function(e,t){if(!this.hooks[e])return t;var n=[].slice.call(arguments);return n=n.slice(1),this.hooks[e].forEach(function(e){t=e.apply(null,n),n[0]=t}),t}},{key:"releaseHolder",value:function(e){for(var t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],n=0;-1!==e.indexOf("|\r")&&10>n;){for(var r in this.holders){var i=this.holders[r];e=e.replace(r,i)}n++}return t&&(this.holders=[]),e}},{key:"parseInline",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?"":arguments[1],r=arguments.length<=2||void 0===arguments[2]?!0:arguments[2];e=this.call("beforeParseInline",e);var i=this;e=e.replace(/(^|[^\\])(`+)(.+?)\2/g,function(e,t,n,r){return t+i.makeHolder("<code>"+i.htmlspecialchars(r)+"</code>")}),e=e.replace(/<(https?:\/\/.+)>/gi,function(e,t){return i.makeHolder('<a href="'+t+'">'+t+"</a>")}),e=e.replace(/<(\/?)([a-z0-9-]+)(\s+[^>]*)?>/gi,function(e,t,r,a){var o=i.commonWhiteList+"|"+n;return-1!==o.toLowerCase().indexOf(r.toLowerCase())?i.makeHolder(e):i.htmlspecialchars(e)}),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;");var a=/\[\^((?:[^\]]|\]|\[)+?)\]/g;e=e.replace(a,function(e,n,r){var a=i.footnotes.indexOf(n);return-1===a&&(a=i.footnotes.length,i.footnotes.push(t.parseInline(n,"",!1))),i.makeHolder('<sup id="fnref-'+(a+1)+'"><a href="#fn-'+(a+1)+'" class="footnote-ref">'+(a+1)+"</a></sup>")});var o=/!\[((?:[^\]]|\]|\[)*?)\]\(((?:[^\)]|\)|\()+?)\)/g;e=e.replace(o,function(e,t,n){var r=i.escapeBracket(t),a=i.escapeBracket(n);return i.makeHolder('<img src="'+a+'" alt="'+r+'" title="'+r+'">')});var s=/!\[((?:[^\]]|\]|\[)*?)\]\[((?:[^\]]|\]|\[)+?)\]/g;e=e.replace(s,function(e,t,n){var r=i.escapeBracket(t),a="";return a=i.definitions[n]?'<img src="'+i.definitions[n]+'" alt="'+r+'" title="'+r+'">':r,i.makeHolder(a)});var l=/\[((?:[^\]]|\]|\[)+?)\]\(((?:[^\)]|\)|\()+?)\)/g;e=e.replace(l,function(e,t,n){var r=i.parseInline(i.escapeBracket(t),"",!1),a=i.escapeBracket(n);return i.makeHolder('<a href="'+a+'">'+r+"</a>")});var c=/\[((?:[^\]]|\]|\[)+?)\]\[((?:[^\]]|\]|\[)+?)\]/g;return e=e.replace(c,function(e,t,n){var r=i.parseInline(i.escapeBracket(t),"",!1),a=i.definitions[n]?'<a href="'+i.definitions[n]+'">'+r+"</a>":r;return i.makeHolder(a)}),e=e.replace(/\\(`|\*|_|~)/g,function(e,t){return i.makeHolder(i.htmlspecialchars(t))}),e=this.parseInlineCallback(e),e=e.replace(/<([_a-z0-9-\.\+]+@[^@]+\.[a-z]{2,})>/gi,'<a href="mailto:$1">$1</a>'),e=e.replace(/(^|[^"])((http|https|ftp|mailto):[_a-z0-9-\.\/%#@\?\+=~\|\,&\(\)]+)($|[^"])/gi,'$1<a href="$2">$2</a>$4'),e=this.call("afterParseInlineBeforeRelease",e),e=this.releaseHolder(e,r),e=this.call("afterParseInline",e)}},{key:"parseInlineCallback",value:function(e){var t=this;return e=e.replace(/(\*{3})(.+?)\1/g,function(e,n,r){return"<strong><em>"+t.parseInlineCallback(r)+"</em></strong>"}),e=e.replace(/(\*{2})(.+?)\1/g,function(e,n,r){return"<strong>"+t.parseInlineCallback(r)+"</strong>"}),e=e.replace(/(\*)(.+?)\1/g,function(e,n,r){return"<em>"+t.parseInlineCallback(r)+"</em>"}),e=e.replace(/(\s+|^)(_{3})(.+?)\2(\s+|$)/g,function(e,n,r,i,a){return n+"<strong><em>"+t.parseInlineCallback(i)+"</em></strong>"+a}),e=e.replace(/(\s+|^)(_{2})(.+?)\2(\s+|$)/g,function(e,n,r,i,a){return n+"<strong>"+t.parseInlineCallback(i)+"</strong>"+a}),e=e.replace(/(\s+|^)(_)(.+?)\2(\s+|$)/g,function(e,n,r,i,a){return n+"<em>"+t.parseInlineCallback(i)+"</em>"+a}),e=e.replace(/(~{2})(.+?)\1/g,function(e,n,r){return"<del>"+t.parseInlineCallback(r)+"</del>"})}},{key:"parseBlock",value:function(e,t){var n=this;this.blocks=[],this.current="normal",this.pos=-1;var r=Object.keys(this.specialWhiteList).join("|"),i=0;for(var a in t){a=parseInt(a);var o=t[a],s=this.getBlock(),l=o.match(/^(\s*)(~|`){3,}([^`~]*)$/i);if(l)if(this.isBlock("code")){var c=s[3][2];c?this.combineBlock().setBlock(a):this.setBlock(a).endBlock()}else{var c=!1;if(this.isBlock("list")){var u=s[3];c=u>0&&l[1].length>=u||l[1].length>u}this.startBlock("code",a,[l[1],l[3],c])}else if(this.isBlock("code"))this.setBlock(a);else{var d=new RegExp("^s*<("+r+")(s+[^>]*)?>","i"),f=new RegExp("</("+r+")>s*$","i"),p=o.match(d),h=o.match(f);if(p){var m=p[1].toLowerCase();this.isBlock("html",m)||this.isBlock("pre")||this.startBlock("html",a,m)}else if(h){var m=h[1].toLowerCase();this.isBlock("html",m)&&this.setBlock(a).endBlock()}else if(this.isBlock("html"))this.setBlock(a);else switch(!0){case/^(\s*)((?:[0-9a-z]+\.)|\-|\+|\*)\s+/.test(o):var g=o.match(/^(\s*)((?:[0-9a-z]+\.)|\-|\+|\*)\s+/),v=g[1].length;i=0,this.isBlock("list")?this.setBlock(a,v):this.startBlock("list",a,v);break;case/^\[\^((?:[^\]]|\]|\[)+?)\]:/.test(o):var b=/^\[\^((?:[^\]]|\]|\[)+?)\]:/.exec(o),y=b[0].length-1;this.startBlock("footnote",a,[y,b[1]]);break;case/^\s*\[((?:[^\]]|\]|\[)+?)\]:\s*(.+)$/.test(o):var _=o.match(/^\s*\[((?:[^\]]|\]|\[)+?)\]:\s*(.+)$/);this.definitions[_[1]]=_[2],this.startBlock("definition",a).endBlock();break;case/^\s*>/.test(o):this.isBlock("quote")?this.setBlock(a):this.startBlock("quote",a);break;case/^ {4}/.test(o):i=0,this.isBlock("pre")||this.isBlock("list")?this.setBlock(a):this.isBlock("normal")&&this.startBlock("pre",a);break;case/^((?:(?:(?:[ :]*\-[ :]*)+(?:\||\+))|(?:(?:\||\+)(?:[ :]*\-[ :]*)+)|(?:(?:[ :]*\-[ :]*)+(?:\||\+)(?:[ :]*\-[ :]*)+))+)$/g.test(o):var w=/^((?:(?:(?:[ :]*\-[ :]*)+(?:\||\+))|(?:(?:\||\+)(?:[ :]*\-[ :]*)+)|(?:(?:[ :]*\-[ :]*)+(?:\||\+)(?:[ :]*\-[ :]*)+))+)$/g.exec(o);this.isBlock("normal")&&!function(){var e=!1;0===s.length||"normal"!==s[0]||/^\s*$/.test(t[s[2]])?n.startBlock("table",a):(e=!0,n.backBlock(1,"table")),"|"==w[1][0]&&(w[1]=w[1].substr(1),"|"==w[1][w[1].length-1]&&(w[1]=w[1].slice(0,-1)));var r=w[1].split(/[\+|\|]/),i=[];r.forEach(function(e){var t="none",n=e.match(/^\s*(:?)\-+(:?)\s*$/);n&&(n[1]==n[2]?t="center":n[1]?t="left":n[2]&&(t="right")),i.push(t)}),n.setBlock(a,[e,i])}();break;case/^(#+)(.*)$/.test(o):var x=o.match(/^(#+)(.*)$/),k=Math.min(x[1].length,6);this.startBlock("sh",a,k).endBlock();break;case/^\s*((=|-){2,})\s*$/.test(o)&&s&&"normal"===s[0]&&!/^\s*$/.test(t[s[2]]):var C=o.match(/^\s*((=|-){2,})\s*$/);this.isBlock("normal")?this.backBlock(1,"mh","="==C[1][0]?1:2).setBlock(a).endBlock():this.startBlock("normal",a);break;case/^[-\*]{3,}\s*$/.test(o):this.startBlock("hr",a).endBlock();break;default:if(this.isBlock("list"))/^(\s*)/.test(o)?(i>0?this.startBlock("normal",a):this.setBlock(a),i++):0===i?this.setBlock(a):this.startBlock("normal",a);else if(this.isBlock("footnote")){var S=o.match(/^(\s*)/);S[1].length>=s[3][0]?this.setBlock(a):this.startBlock("normal",a)}else this.isBlock("table")?-1!==o.indexOf("|")?this.setBlock(a):this.startBlock("normal",a):this.isBlock("pre")?/^\s*$/.test(o)?(i>0?this.startBlock("normal",a):this.setBlock(a),i++):this.startBlock("normal",a):this.isBlock("quote")?/^(\s*)/.test(o)?(i>0?this.startBlock("normal",a):this.setBlock(a),i++):0==i?this.setBlock(a):this.startBlock("normal",a):null===s||0===s.length||"normal"!==s[0]?this.startBlock("normal",a):this.setBlock(a)}}}return this.optimizeBlocks(this.blocks,t)}},{key:"optimizeBlocks",value:function(e,t){return e=this.call("beforeOptimizeBlocks",e,t),e.forEach(function(n,r){var i=e[r-1]?e[r-1]:null,a=e[r+1]?e[r+1]:null,o=_slicedToArray(n,3),s=o[0],l=o[1],c=o[2];if("pre"===s){var u=t.reduce(function(e,t){return t.match(/^\s*$/)&&e},!0);u&&(n[0]=s="normal")}if("normal"===s){var d=["list","quote"];l===c&&t[l].match(/^\s*$/)&&i&&a&&i[0]==a[0]&&-1!==d.indexOf(i[0])&&(e[r-1]=[i[0],i[1],a[2],null],e.splice(r,2))}}),this.call("afterOptimizeBlocks",e,t)}},{key:"parseCode",value:function(e,t){var n=_slicedToArray(t,2),r=n[0],i=n[1];i=i.trim();var a=r.length;/^[_a-z0-9-\+\#]+$/i.test(i)||(i=null),e=e.slice(1,-1).map(function(e){var t=new RegExp("/^[ ]{"+a+"}/");return e.replace(t,"")});var o=e.join("\n");return/^\s*$/.test(o)?"":"<pre><code"+(i?' class="'+i+'"':"")+">"+this.htmlspecialchars(e.join("\n"))+"</code></pre>"}},{key:"parsePre",value:function(e){var t=this;e.forEach(function(n,r){e[r]=t.htmlspecialchars(n.substr(4))});var n=e.join("\n");return/^\s*$/.test(n)?"":"<pre><code>"+n+"</code></pre>"}},{key:"parseSh",value:function(e,t){if(e[0]){var n=this.parseInline(e[0].trim().replace(/^#+|#+$/g,""));return/^\s*$/.test(n)?"":"<h"+t+">"+n+"</h"+t+">"}return""}},{key:"parseMh",value:function(e,t){if(e[0]){var n=this.parseInline(e[0].trim().replace(/^#+|#+$/g,""));return/^\s*$/.test(n)?"":"<h"+t+">"+n+"</h"+t+">"}return""}},{key:"parseQuote",value:function(e){e.forEach(function(t,n){e[n]=t.replace(/^\s*> ?/,"")});var t=e.join("\n");return/^\s*$/.test(t)?"":"<blockquote>"+this.parse(t)+"</blockquote>"}},{key:"parseList",value:function(e){var t=this,n="",r=99999,i=[];e.forEach(function(e,t){var n=e.match(/^(\s*)((?:[0-9a-z]+\.?)|\-|\+|\*)(\s+)(.*)$/);if(n){var a=n[1].length,o=/[\+\-\*]/.test(n[2])?"ul":"ol";r=Math.min(a,r),i.push([a,o,e,n[4]])}else i.push(e)});var a=!1,o=99999;i.forEach(function(e){Array.isArray(e)&&e[0]!=r&&(o=Math.min(o,e[0]),a=!0)}),o=a?0:r;var s="",l=[];return i.forEach(function(e){if(Array.isArray(e)){var i=_slicedToArray(e,4),a=i[0],c=i[1],u=i[2],d=i[3];if(a!==r){var f=new RegExp("^s{"+o+"}");l.push(u.replace(f,""))}else l.length&&(n+="<li>"+t.parse(l.join("\n"))+"</li>"),s!==c&&(s.length&&(n+="</"+s+">"),n+="<"+c+">"),l=[d],s=c}else{var f=new RegExp("^s{"+o+"}");l.push(e.replace(f,""))}}),l.length&&(n+="<li>"+this.parse(l.join("\n"))+("</li></"+s+">")),n}},{key:"parseTable",value:function(e,t){var n=this,r=_slicedToArray(t,2),i=r[0],a=r[1],o=i?1:0,s="<table>",l=!1,c=function(t){var r=e[t];if(parseInt(t)===o)return i=!1,l=!0,"continue";r&&(r=r.trim()),"|"===r[0]&&(r=r.substr(1),"|"===r[r.length-1]&&(r=r.slice(0,-1)));var c=r.split("|").map(function(e){return e.match(/^\s+$/)?" ":e.trim()}),u=[],d=-1;c.forEach(function(e){e.length>0?(d++,u[d]=[u[d]?u[d][0]+1:1,e]):u[d]?u[d][0]++:u[0]=[1,e]}),i===!0?s+="<thead>":l===!0&&(s+="<tbody>"),s+="<tr>",u.forEach(function(e,t){var r=_slicedToArray(e,2),o=r[0],l=r[1],c=i?"th":"td";s+="<"+c,o>1&&(s+=' colspan="'+o+'"'),a[t]&&"none"!=a[t]&&(s+=' align="'+a[t]+'"'),s+=">"+n.parseInline(l)+("</"+c+">")}),s+="</tr>",i?s+="</thead>":l&&(l=!1)};for(var u in e){c(u)}return null!==l&&(s+="</tbody>"),s+="</table>"}},{key:"parseHr",value:function(){return"<hr>"}},{key:"parseNormal",value:function(e){var t=this;e=e.map(function(e){return t.parseInline(e)});var n=e.join("\n").trim();return n=n.replace(/(\n\s*){2,}/g,"</p><p>"),n=n.replace(/\n/g,"<br>"),/^\s*$/.test(n)?"":"<p>"+n+"</p>"}},{key:"parseFootnote",value:function(e,t){var n=t[1],r=this.footnotes.indexOf(n);return-1!==r&&(e[0]&&(e[0]=e[0].replace(/^\[\^((?:[^\]]|\]|\[)+?)\]:/,"")),this.footnotes[r]=e),""}},{key:"parseDefinition",value:function(){return""}},{key:"parseHtml",value:function(e,t){var n=this;return e.forEach(function(e){e=n.parseInline(e,n.specialWhiteList[t]?n.specialWhiteList[t]:"")}),e.join("\n")}},{key:"escapeBracket",value:function(e){return e?(e=e.replace(/\[/g,"["),e=e.replace(/\]/g,"]"),e=e.replace(/\(/g,"("),e=e.replace(/\)/g,")")):void 0}},{key:"startBlock",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?null:arguments[2];return this.pos++,this.current=e,this.blocks[this.pos]=[e,t,t,n],this}},{key:"endBlock",value:function(){return this.current="normal",this}},{key:"isBlock",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];return this.current==e&&(null===t?!0:this.blocks[this.pos][3]==t)}},{key:"getBlock",value:function(){return this.blocks[this.pos]?this.blocks[this.pos]:null}},{key:"setBlock",value:function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0],t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];return null!==e&&(this.blocks[this.pos][2]=e),null!==t&&(this.blocks[this.pos][3]=t),this}},{key:"backBlock",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?null:arguments[2];if(this.pos<0)return this.startBlock(t,0,n);var r=this.blocks[this.pos][2];return this.blocks[this.pos][2]=r-e,this.blocks[this.pos][1]<=this.blocks[this.pos][2]&&this.pos++,this.current=t,this.blocks[this.pos]=[t,r-e+1,r,n],this}},{key:"htmlspecialchars",value:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,function(e){return t[e]})}},{key:"combineBlock",value:function(){if(this.pos<1)return this;var e=this.blocks[this.pos-1],t=this.blocks[this.pos];return e[2]=t[2],this.blocks[this.pos-1]=e,this.current=e[0],this.blocks.splice(this.pos,1),this.pos--,this}}]),e}();define("hyperdown",[],function(){return Parser}),define("pagedown_converter",["hyperdown","emojiList"],function(e,t){"use strict";function n(e){return e}function r(e){return!1}function i(){}function a(){}var o={};i.prototype={chain:function(e,t){var r=this[e];if(!r)throw new Error("unknown hook "+e);r===n?this[e]=t:this[e]=function(e){var n=Array.prototype.slice.call(arguments,0);return n[0]=r.apply(null,n),t.apply(null,n)}},set:function(e,t){if(!this[e])throw new Error("unknown hook "+e);this[e]=t},addNoop:function(e){this[e]=n},addFalse:function(e){this[e]=r}},o.HookCollection=i,a.prototype={set:function(e,t){this["s_"+e]=t},get:function(e){return this["s_"+e]}},o.Converter=new e;var s=o.Converter.hooks=new i;return s.addNoop("plainLinkText"),s.addNoop("preConversion"),s.addNoop("postNormalization"),s.addNoop("preBlockGamut"),s.addNoop("postBlockGamut"),s.addNoop("preSpanGamut"),s.addNoop("postSpanGamut"),s.addNoop("postConversion"),o.Converter.hook("beforeParseInline",function(e){return e=e.replace(/\$\$(.+?)\$\$/g,function(e){return o.Converter.makeHolder("$$"+o.Converter.htmlspecialchars(e)+"$$")})}),o.Converter.hook("afterParseInlineBeforeRelease",function(e){return e=e.replace(/:([_a-z0-9]+):/g,function(e,n){if(-1!==t.indexOf(n)){var r='<img src="'+SF.staticUrl+"/global/img/emojis/"+n+'.png" class="emoji" alt="'+n+'" title="'+n+'">';return o.Converter.makeHolder(r)}return e})}),o}),define("pagedown_sanitizer",["pagedown_converter"],function(e){"use strict";function t(e){return e.replace(/<[^>]*>?/gi,n)}function n(e){return e.match(o)||e.match(s)||e.match(l)?e:""}function r(e){if(""==e)return"";var t=/<\/?\w+[^>]*(\s|$|>)/g,n=e.toLowerCase().match(t),r=(n||[]).length;if(0==r)return e;for(var i,a,o,s="<p><img><br><li><hr><th>",l=[],c=[],u=!1,d=0;r>d;d++)if(i=n[d].replace(/<\/?(\w+).*/,"$1"),!(l[d]||s.search("<"+i+">")>-1)){if(a=n[d],o=-1,!/^<\//.test(a))for(var f=d+1;r>f;f++)if(!l[f]&&n[f]=="</"+i+">"){o=f;break}-1==o?u=c[d]=!0:l[o]=!0}if(!u)return e;var d=0;return e=e.replace(t,function(e){var t=c[d]?"":e;return d++,t})}var i,a;"object"==typeof exports&&"function"==typeof require?(i=exports,a=require("../hyperdown/hyperdown.js")):(i=e,a=i.Converter),i.getSanitizingConverter=function(){var e=a;return e.hooks.chain("postConversion",t),e.hooks.chain("postConversion",r),e};var o=/^(<\/?(b|blockquote|code|del|dd|dl|dt|em|h1|h2|h3|h4|i|kbd|li|ol|p|pre|s|sup|sub|strong|strike|ul|table|td|tbody|th|thead|tr)>|<(br|hr)\s?\/?>)$/i,s=/^(<a\shref="((https?|ftp):\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\stitle="[^"<>]+")?\s?>|<\/a>)$/i,l=/^(<img\ssrc="(https?:\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\swidth="\d{1,3}")?(\sheight="\d{1,3}")?(\salt="[^"<>]*")?(\stitle="[^"<>]*")?\s?\/?>)$/i;return i}),define("pagedown_extra",["pagedown_converter"],function(e){function t(e){return e.replace(/^\s+|\s+$/g,"")}function n(e){return e.replace(/\s+$/g,"")}function r(e){return e.replace(new RegExp("^(\\t|[ ]{1,4})","gm"),"")}function i(e,t){return-1!=e.indexOf(t)}function a(e,t){return e.replace(/<[^>]*>?/gi,function(e){return e.match(t)?e:""})}function o(e,t){for(var n={},r=0;r<e.length;r++)n[e[r]]=e[r];for(r=0;r<t.length;r++)n[t[r]]=t[r];var i=[];for(var a in n)n.hasOwnProperty(a)&&i.push(n[a]);return i}function s(e){return""!=e.charAt(0)&&(e=""+e),""!=e.charAt(e.length-1)&&(e+=""),e}function l(e){return""==e.charAt(0)&&(e=e.substr(1)),""==e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),e}function c(e,t){return a(u(e,t),g)}function u(e,t){var n=t.blockGamutHookCallback(e);return n=p(n),n=n.replace(/~D/g,"$$").replace(/~T/g,"~"),n=t.previousPostConversion(n)}function d(e){return e.replace(/\\\|/g,"~I").replace(/\\:/g,"~i")}function f(e){return e.replace(/~I/g,"|").replace(/~i/g,":")}function p(e){return e=e.replace(/~E(\d+)E/g,function(e,t){var n=parseInt(t);return String.fromCharCode(n)})}function h(e){return e.toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}function m(e,t){var n=t;return n=n.replace(/&\#8220;/g,'"'),n=n.replace(/&\#8221;/g,'"'),n=n.replace(/&\#8216;/g,"'"),n=n.replace(/&\#8217;/g,"'"),n=n.replace(/&\#8212;/g,"---"),n=n.replace(/&\#8211;/g,"--"),n=n.replace(/&\#8230;/g,"...")}var g=new RegExp(["^(<\\/?(a|abbr|acronym|applet|area|b|basefont|","bdo|big|button|cite|code|del|dfn|em|figcaption|","font|i|iframe|img|input|ins|kbd|label|map|","mark|meter|object|param|progress|q|ruby|rp|rt|s|","samp|script|select|small|span|strike|strong|","sub|sup|textarea|time|tt|u|var|wbr)[^>]*>|","<(br)\\s?\\/?>)$"].join(""),"i");Array.indexOf||(Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]==e)return t;return-1}),e.Extra=function(){this.converter=null,this.hashBlocks=[],this.footnotes={},this.usedFootnotes=[],this.attributeBlocks=!1,this.googleCodePrettify=!1,this.highlightJs=!1,this.tableClass="",this.tabWidth=4},e.Extra.init=function(t,n){var r=new e.Extra,a=[],o=[],s=[],l=["unHashExtraBlocks"];return n=n||{},n.extensions=n.extensions||["all"],i(n.extensions,"all")&&(n.extensions=["tables","fenced_code_gfm","def_list","attr_list","footnotes","smartypants","strikethrough","newlines"]),o.push("wrapHeaders"),i(n.extensions,"attr_list")&&(a.push("hashFcbAttributeBlocks"),o.push("hashHeaderAttributeBlocks"),l.push("applyAttributeBlocks"),r.attributeBlocks=!0),i(n.extensions,"fenced_code_gfm")&&(o.push("fencedCodeBlocks"),a.push("fencedCodeBlocks")),i(n.extensions,"tables")&&o.push("tables"),i(n.extensions,"def_list")&&o.push("definitionLists"),i(n.extensions,"footnotes")&&(a.push("stripFootnoteDefinitions"),o.push("doFootnotes"),l.push("printFootnotes")),i(n.extensions,"smartypants")&&l.push("runSmartyPants"),i(n.extensions,"strikethrough")&&s.push("strikethrough"),i(n.extensions,"newlines")&&s.push("newlines"),t.hooks.chain("postNormalization",function(e){return r.doTransform(a,e)+"\n"}),t.hooks.chain("preBlockGamut",function(e,t){return r.blockGamutHookCallback=t,e=d(e),e=r.doTransform(o,e)+"\n",e=f(e)}),t.hooks.chain("postSpanGamut",function(e){return r.doTransform(s,e)}),r.previousPostConversion=t.hooks.postConversion,t.hooks.chain("postConversion",function(e){return e=r.doTransform(l,e),r.hashBlocks=[],r.footnotes={},r.usedFootnotes=[],e}),"highlighter"in n&&(r.googleCodePrettify="prettify"===n.highlighter,r.highlightJs="highlight"===n.highlighter),"table_class"in n&&(r.tableClass=n.table_class),r.converter=t,r},e.Extra.prototype.doTransform=function(e,t){for(var n=0;n<e.length;n++)t=this[e[n]](t);return t},e.Extra.prototype.hashExtraBlock=function(e){return"\n<p>~X"+(this.hashBlocks.push(e)-1)+"X</p>\n"},e.Extra.prototype.hashExtraInline=function(e){return"~X"+(this.hashBlocks.push(e)-1)+"X"},e.Extra.prototype.unHashExtraBlocks=function(e){function t(){var r=!1;e=e.replace(/(?:<p>)?~X(\d+)X(?:<\/p>)?/g,function(e,t){r=!0;var i=parseInt(t,10);return n.hashBlocks[i]}),r===!0&&t()}var n=this;return t(),e},e.Extra.prototype.wrapHeaders=function(e){function t(e){return"\n"+e+"\n"}return e=e.replace(/^.+[ \t]*\n=+[ \t]*\n+/gm,t),e=e.replace(/^.+[ \t]*\n-+[ \t]*\n+/gm,t),e=e.replace(/^\#{1,6}[ \t]*.+?[ \t]*\#*\n+/gm,t)};var v="\\{[ \\t]*((?:[#.][-_:a-zA-Z0-9]+[ \\t]*)+)\\}",b=new RegExp("^(#{1,6}.*#{0,6})[ \\t]+"+v+"[ \\t]*(?:\\n|0x03)","gm"),y=new RegExp("^(.*)[ \\t]+"+v+"[ \\t]*\\n(?=[\\-|=]+\\s*(?:\\n|0x03))","gm"),_=new RegExp("^(```[ \\t]*[^{\\s]*)[ \\t]+"+v+"[ \\t]*\\n(?=([\\s\\S]*?)\\n```[ \\t]*(\\n|0x03))","gm");e.Extra.prototype.hashHeaderAttributeBlocks=function(e){function t(e,t,r){return"<p>~XX"+(n.hashBlocks.push(r)-1)+"XX</p>\n"+t+"\n"}var n=this;return e=e.replace(b,t),e=e.replace(y,t)},e.Extra.prototype.hashFcbAttributeBlocks=function(e){function t(e,t,r){return"<p>~XX"+(n.hashBlocks.push(r)-1)+"XX</p>\n"+t+"\n"}var n=this;return e.replace(_,t)},e.Extra.prototype.applyAttributeBlocks=function(e){var t=this,n=new RegExp('<p>~XX(\\d+)XX</p>[\\s]*(?:<(h[1-6]|pre)(?: +class="(\\S+)")?(>[\\s\\S]*?</\\2>))',"gm");return e=e.replace(n,function(e,n,r,i,a){if(!r)return"";for(var s=parseInt(n,10),l=t.hashBlocks[s],c=l.match(/#[^\s#.]+/g)||[],u=c[0]?' id="'+c[0].substr(1,c[0].length-1)+'"':"",d=l.match(/\.[^\s#.]+/g)||[],f=0;f<d.length;f++)d[f]=d[f].substr(1,d[f].length-1);var p="";return i&&(d=o(d,[i])),d.length>0&&(p=' class="'+d.join(" ")+'"'),"<"+r+u+p+a})},e.Extra.prototype.tables=function(e){function n(e,n,i,a,o,s){n=n.replace(/^ *[|]/m,""),i=i.replace(/^ *[|]/m,""),a=a.replace(/^ *[|]/gm,""),n=n.replace(/[|] *$/m,""),i=i.replace(/[|] *$/m,""),a=a.replace(/[|] *$/gm,""),alignspecs=i.split(/ *[|] */),align=[];for(var l=0;l<alignspecs.length;l++){var u=alignspecs[l];u.match(/^ *-+: *$/m)?align[l]=' style="text-align:right;"':u.match(/^ *:-+: *$/m)?align[l]=' style="text-align:center;"':u.match(/^ *:-+ *$/m)?align[l]=' style="text-align:left;"':align[l]=""}var d=n.split(/ *[|] */),f=d.length,p=r.tableClass?' class="'+r.tableClass+'"':"",h=["<table",p,">\n","<thead>\n","<tr>\n"].join("");for(l=0;f>l;l++){var m=c(t(d[l]),r);h+=["  <th",align[l],">",m,"</th>\n"].join("")}h+="</tr>\n</thead>\n";var g=a.split("\n");for(l=0;l<g.length;l++)if(!g[l].match(/^\s*$/)){for(var v=g[l].split(/ *[|] */),b=f-v.length,y=0;b>y;y++)v.push("");for(h+="<tr>\n",y=0;f>y;y++){var _=c(t(v[y]),r);h+=["  <td",align[y],">",_,"</td>\n"].join("")}h+="</tr>\n"}return h+="</table>\n",r.hashExtraBlock(h)}var r=this,i=new RegExp(["^","[ ]{0,3}","[|]","(.+)\\n","[ ]{0,3}","[|]([ ]*[-:]+[-| :]*)\\n","(","(?:[ ]*[|].*\\n?)*",")","(?:\\n|$)"].join(""),"gm"),a=new RegExp(["^","[ ]{0,3}","(\\S.*[|].*)\\n","[ ]{0,3}","([-:]+[ ]*[|][-| :]*)\\n","(","(?:.*[|].*\\n?)*",")","(?:\\n|$)"].join(""),"gm");return e=e.replace(i,n),e=e.replace(a,n)},e.Extra.prototype.stripFootnoteDefinitions=function(e){var t=this;return e=e.replace(/\n[ ]{0,3}\[\^(.+?)\]\:[ \t]*\n?([\s\S]*?)\n{1,2}((?=\n[ ]{0,3}\S)|$)/g,function(e,n,r){return n=h(n),r+="\n",r=r.replace(/^[ ]{0,3}/g,""),t.footnotes[n]=r,"\n"})},e.Extra.prototype.doFootnotes=function(e){var t=this;if(t.isConvertingFootnote===!0)return e;var n=0;return e=e.replace(/\[\^(.+?)\]/g,function(e,r){var i=h(r),a=t.footnotes[i];if(void 0===a)return e;n++,t.usedFootnotes.push(i);var o='<a href="#fn:'+i+'" id="fnref:'+i+'" title="See footnote" class="footnote">'+n+"</a>";return t.hashExtraInline(o)})},e.Extra.prototype.printFootnotes=function(e){var t=this;if(0===t.usedFootnotes.length)return e;e+='\n\n<div class="footnotes">\n<hr>\n<ol>\n\n';for(var n=0;n<t.usedFootnotes.length;n++){var r=t.usedFootnotes[n],i=t.footnotes[r];t.isConvertingFootnote=!0;var a=c(i,t);delete t.isConvertingFootnote,e+='<li id="fn:'+r+'">'+a+' <a href="#fnref:'+r+'" title="Return to article" class="reversefootnote">&#8617;</a></li>\n\n'}return e+="</ol>\n</div>"},e.Extra.prototype.fencedCodeBlocks=function(e){function t(e){return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/~D/g,"$$"),e=e.replace(/~T/g,"~")}var n=this;return e=e.replace(/(?:^|\n)```[ \t]*(\S*)[ \t]*\n([\s\S]*?)\n```[ \t]*(?=\n)/g,function(e,r,i){var a=r,o=i,s=n.googleCodePrettify?' class="prettyprint"':"",l="";a&&(l=n.googleCodePrettify||n.highlightJs?' class="language-'+a+'"':' class="'+a+'"');var c=["<pre",s,"><code",l,">",t(o),"</code></pre>"].join("");return n.hashExtraBlock(c)})},e.Extra.prototype.educatePants=function(e){var t=this,n="",r=0;e.replace(/(?:<!--[\s\S]*?-->)|(<)([a-zA-Z1-6]+)([^\n]*?>)([\s\S]*?)(<\/\2>)/g,function(i,a,o,s,l,c,u){var d=e.substring(r,u);return n+=t.applyPants(d),t.smartyPantsLastChar=n.substring(n.length-1),r=u+i.length,a?(/code|kbd|pre|script|noscript|iframe|math|ins|del|pre/i.test(o)?t.smartyPantsLastChar=l.substring(l.length-1):l=t.educatePants(l),void(n+=a+o+s+l+c)):void(n+=i)});var i=e.substring(r);return n+=t.applyPants(i),t.smartyPantsLastChar=n.substring(n.length-1),n},e.Extra.prototype.applyPants=function(e){return e=e.replace(/---/g,"&#8212;").replace(/--/g,"&#8211;"),e=e.replace(/\.\.\./g,"&#8230;").replace(/\.\s\.\s\./g,"&#8230;"),e=e.replace(/``/g,"&#8220;").replace(/''/g,"&#8221;"),/^'$/.test(e)?/\S/.test(this.smartyPantsLastChar)?"&#8217;":"&#8216;":/^"$/.test(e)?/\S/.test(this.smartyPantsLastChar)?"&#8221;":"&#8220;":(e=e.replace(/^'(?=[!"#\$\%'()*+,\-.\/:;<=>?\@\[\\]\^_`{|}~]\B)/,"&#8217;"),e=e.replace(/^"(?=[!"#\$\%'()*+,\-.\/:;<=>?\@\[\\]\^_`{|}~]\B)/,"&#8221;"),e=e.replace(/"'(?=\w)/g,"&#8220;&#8216;"),e=e.replace(/'"(?=\w)/g,"&#8216;&#8220;"),e=e.replace(/'(?=\d{2}s)/g,"&#8217;"),e=e.replace(/(\s|&nbsp;|--|&[mn]dash;|&\#8211;|&\#8212;|&\#x201[34];)'(?=\w)/g,"$1&#8216;"),e=e.replace(/([^\s\[\{\(\-])'/g,"$1&#8217;"),e=e.replace(/'(?=\s|s\b)/g,"&#8217;"),e=e.replace(/'/g,"&#8216;"),e=e.replace(/(\s|&nbsp;|--|&[mn]dash;|&\#8211;|&\#8212;|&\#x201[34];)"(?=\w)/g,"$1&#8220;"),e=e.replace(/([^\s\[\{\(\-])"/g,"$1&#8221;"),e=e.replace(/"(?=\s)/g,"&#8221;"),e=e.replace(/"/gi,"&#8220;"))},e.Extra.prototype.runSmartyPants=function(e){return this.smartyPantsLastChar="",e=this.educatePants(e),e=e.replace(/(<([a-zA-Z1-6]+)\b([^\n>]*?)(\/)?>)/g,m)},e.Extra.prototype.definitionLists=function(e){var n=new RegExp(["(\\x02\\n?|\\n\\n)","(?:","(","(","[ ]{0,3}","((?:[ \\t]*\\S.*\\n)+)","\\n?","[ ]{0,3}:[ ]+",")","([\\s\\S]+?)","(","(?=\\0x03)","|","(?=","\\n{2,}","(?=\\S)","(?!","[ ]{0,3}","(?:\\S.*\\n)+?","\\n?","[ ]{0,3}:[ ]+",")","(?!","[ ]{0,3}:[ ]+",")",")",")",")",")"].join(""),"gm"),r=this;return e=s(e),e=e.replace(n,function(e,n,i){var a=t(r.processDefListItems(i));return a="<dl>\n"+a+"\n</dl>",n+r.hashExtraBlock(a)+"\n\n"}),l(e)},e.Extra.prototype.processDefListItems=function(e){var i=this,a=new RegExp(["(\\x02\\n?|\\n\\n+)","(","[ ]{0,3}","(?![:][ ]|[ ])","(?:\\S.*\\n)+?",")","(?=\\n?[ ]{0,3}:[ ])"].join(""),"gm"),o=new RegExp(["\\n(\\n+)?","(","[ ]{0,3}","[:][ ]+",")","([\\s\\S]+?)","(?=\\n*","(?:","\\n[ ]{0,3}[:][ ]|","<dt>|\\x03",")",")"].join(""),"gm");
return e=s(e),e=e.replace(/\n{2,}(?=\\x03)/,"\n"),e=e.replace(a,function(e,n,r){for(var a=t(r).split("\n"),o="",s=0;s<a.length;s++){var l=a[s];l=c(t(l),i),o+="\n<dt>"+l+"</dt>"}return o+"\n"}),e=e.replace(o,function(e,t,a,o){return t||o.match(/\n{2,}/)?(o=Array(a.length+1).join(" ")+o,o=r(o)+"\n\n",o="\n"+u(o,i)+"\n"):(o=n(o),o=c(r(o),i)),"\n<dd>"+o+"</dd>\n"}),l(e)},e.Extra.prototype.strikethrough=function(e){return e.replace(/([\W_]|^)~T~T(?=\S)([^\r]*?\S[\*_]*)~T~T([\W_]|$)/g,"$1<del>$2</del>$3")},e.Extra.prototype.newlines=function(e){return e.replace(/(<(?:br|\/li)>)?\n/g,function(e,t){return t?e:" <br>\n"})}}),function(){var e=window.log||$.noop,t={fileError:function(e,t,n){window.alert(n)}},n=window.FileReader||window.File&&window.File.prototype.getAsBinary,r=!!window.FormData,i=window.FileReader||window.File&&window.File.prototype.getAsDataURL,a=!!document.createElement("canvas").toDataURL,o=a&&window.atob,s=!!document.createElement("canvas").mozGetAsFile,l=window.XMLHttpRequest&&window.XMLHttpRequest.prototype.sendAsBinary||window.Blob&&window.Uint8Array&&window.ProgressEvent||window.ArrayBuffer&&window.BlobBuilder,c=!!window.FormData,u=!!document.createElement("canvas").toDataURL,d=n&&l||r&&c,f=i&&(o&&l||s&&c),p=i,h=i&&a,m=function(e){return e.substring(e.indexOf(",")+1,e.length)},g=function(t,n){var i={type:n.type||"",size:n.size||n.fileSize,name:n.name||n.fileName};if(t.resizeImage&&!f&&t.allowUploadOriginalImage&&(e("WARN: Fall back to upload original un-resized image."),t.resizeImage=!1),!t.resizeImage){if(t.fileType&&t.fileType.test&&!t.fileType.test(i.name.substr(i.name.lastIndexOf(".")+1)))return e("ERROR: Invalid Filetype."),void t.fileError.call(this,i,"INVALID_FILETYPE","Invalid filetype.");if(t.fileMaxSize&&n.size>t.fileMaxSize)return e("ERROR: File exceeds size limit."),void t.fileError.call(this,i,"FILE_EXCEEDS_SIZE_LIMIT","File exceeds size limit.")}if(!t.resizeImage&&r)e("INFO: Bypass file reading, insert file object into FormData object directly."),b(t,"file",n,i);else if(window.FileReader){e("INFO: Using FileReader to do asynchronously file reading.");var a=new FileReader;a.onerror=function(n){if(n.target.error)switch(n.target.error){case 8:e("ERROR: File not found."),t.fileError.call(this,i,"FILE_NOT_FOUND","File not found.");break;case 24:e("ERROR: File not readable."),t.fileError.call(this,i,"IO_ERROR","File not readable.");break;case 18:e("ERROR: File cannot be access due to security constrant."),t.fileError.call(this,i,"SECURITY_ERROR","File cannot be access due to security constrant.");break;case 20:}},t.resizeImage?(a.onloadend=function(e){var r=e.target.result;v(t,r,i,n)},a.readAsDataURL(n)):l?(a.onloadend=function(e){var n=e.target.result;b(t,"bin",n,i)},a.readAsBinaryString(n)):t.allowDataInBase64?(a.onloadend=function(e){b(t,"base64",m(e.target.result),i)},a.readAsDataURL(n)):(e("ERROR: No available method to extract file; allowDataInBase64 not set."),t.fileError.call(this,i,"NO_BIN_SUPPORT_AND_BASE64_NOT_SET","No available method to extract file; allowDataInBase64 not set."))}else if(window.File&&window.File.prototype.getAsBinary)if(e("WARN: FileReader does not exist, UI will be blocked when reading big file."),t.resizeImage){try{var o=n.getAsDataURL()}catch(s){return e("ERROR: File not readable."),void t.fileError.call(this,i,"IO_ERROR","File not readable.")}v(t,dataurl,i,n)}else{try{var o=n.getAsBinary()}catch(s){return e("ERROR: File not readable."),void t.fileError.call(this,i,"IO_ERROR","File not readable.")}b(t,"bin",o,i)}else t.fallback?t.fallback():t.fileError.call(this,i,"NOT_SUPPORT","ERROR: No available method to extract file; this browser is not supported.")},v=function(t,n,r,i){var d=new Image;d.onerror=function(){e("ERROR: <img> failed to load, file is not a supported image format."),t.fileError.call(this,r,"FILE_NOT_IMAGE","File is not a supported image format.")},d.onload=function(){var n=document.createElement("canvas"),f=function(n){t.imageType&&"auto"!==t.imageType||("image/jpeg"===r.type?t.imageType="jpeg":t.imageType="png");var d={type:"image/"+t.imageType,name:r.name.substr(0,r.name.indexOf("."))+".resized."+t.imageType};if(s&&c){var f=n.mozGetAsFile(d.name,"image/"+t.imageType);d.size=i.size||i.fileSize,b(t,"file",f,d)}else if(o&&l){var p=window.atob(m(n.toDataURL("image/"+t.imageType)));d.size=p.length,b(t,"bin",p,d)}else t.allowDataInBase64&&a&&u?b(t,"base64",m(n.toDataURL("image/"+t.imageType)),d):(e("ERROR: No available method to extract image; allowDataInBase64 not set."),t.fileError.call(this,r,"NO_BIN_SUPPORT_AND_BASE64_NOT_SET","No available method to extract file; allowDataInBase64 not set."))};t.resizeImage(d,n,f)},d.src=n},b=function(t,n,r,i){if(c&&"file"===n){e("INFO: Using FormData to construct form.");var a=new FormData;a.append(t.name,r),t.processData=!1,t.contentType=!1,t.__beforeSend=t.beforeSend,t.beforeSend=function(e,t){return t.data=a,t.__beforeSend?t.__beforeSend.call(this,e,t):void 0}}else if(l&&"bin"===n){e("INFO: Concat our own multipart/form-data data string."),i.type||(i.type="application/octet-stream"),/[^\x20-\x7E]/.test(i.name)&&(e("INFO: Filename contains non-ASCII code, do UTF8-binary string conversion."),i.name_bin=unescape(encodeURIComponent(i.name)));var o="xhrupload-"+parseInt(Math.random()*(2<<16));t.contentType="multipart/form-data; boundary="+o;var a="--"+o+'\ncontent-disposition: form-data; name="'+t.name+'"; filename="'+(i.name_bin||i.name)+'"\nContent-Type: '+i.type+"\n\n"+r+"\n\n--"+o+"--";if(window.XMLHttpRequest&&window.XMLHttpRequest.prototype.sendAsBinary)e("INFO: Pass binary string to xhr."),t.data=a;else if(window.Blob&&window.Uint8Array&&window.ProgressEvent){e("INFO: Make XH2 blob string");for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);var d=s.buffer;t.processData=!1,t.__beforeSend=t.beforeSend,t.beforeSend=function(e,t){return t.data=d,t.__beforeSend?t.__beforeSend.call(this,e,t):void 0}}else{e("INFO: Convert binary string into Blob.");var f=new ArrayBuffer(a.length),s=new Uint8Array(f);$.each(a,function(e,t){s[e]=t.charCodeAt(0)});var p=new BlobBuilder;p.append(f);var d=p.getBlob();t.processData=!1,t.__beforeSend=t.beforeSend,t.beforeSend=function(e,t){return t.data=d,t.__beforeSend?t.__beforeSend.call(this,e,t):void 0}}}else{if(!t.allowDataInBase64||"base64"!==n)return e("ERROR: Data is not given in processable form."),void t.fileError.call(this,i,"INTERNAL_ERROR","Data is not given in processable form.");e("INFO: Concat our own multipart/form-data data string; send the file in base64 because binary xhr is not supported."),i.type||(i.type="application/octet-stream"),t.url+="?enc=base64";var o="xhrupload-"+parseInt(Math.random()*(2<<16));t.contentType="multipart/form-data; boundary="+o,t.data="--"+o+'\ncontent-disposition: form-data; name="'+t.name+'"; filename="'+encodeURIComponent(i.name)+'.base64"\nContent-Transfer-Encoding: base64\nContent-Type: '+i.type+"\n\n"+r+"\n\n--"+o+"--"}y(t)},y=function(t){e("INFO: Sending file."),"string"==typeof t.data&&l&&(e("INFO: Using xhr.sendAsBinary."),t.___beforeSend=t.beforeSend,t.beforeSend=function(e,t){return window.XMLHttpRequest.prototype.sendAsBinary&&(e.send=e.sendAsBinary),t.___beforeSend?t.___beforeSend.call(this,e,t):void 0}),$.ajax(t)};$.fn.fileUpload=function(n){return this.each(function(r,i){$(i).is("input[type=file]")&&(e("INFO: binding onchange event to a input[type=file]."),$(i).bind("change",function(){if(!this.files)return void(n.fallback&&n.fallback());if(!this.files.length)return void e("ERROR: no file selected.");this.files.length>1&&e("WARN: Multiple file upload not implemented yet, only first file will be uploaded."),n.name=$(this).attr("name");var r=this.files[0];if(n.callback){var a=function(e){n.url=n.url||e,g($.extend({},t,n),r)};n.callback(a)}else if($(i).parents("#localPic").length){var o=$(i).val();-1!==o.indexOf("\\fakepath")&&(o=o.split("\\fakepath\\")[1]),$("#fileName").val(o),$(".done-btn").click(function(){g($.extend({},t,n),r)})}else g($.extend({},t,n),this.files[0]);this.form?this.form.reset():e("WARN: Unable to reset file selection, upload won't be triggered again if user selects the same file.")})),$(i).is("form")?e("ERROR: <form> not implemented yet."):(e("INFO: binding ondrop event."),$(i).bind("dragover",function(e){return!1}).bind("drop",function(r){return r.originalEvent.dataTransfer.files?r.originalEvent.dataTransfer.files.length?(!r.originalEvent.dataTransfer.files.length>1&&e("WARN: Multiple file upload not implemented yet, only first file will be uploaded."),g($.extend({},t,n),r.originalEvent.dataTransfer.files[0]),!1):(e('ERROR: User had dropped a virual file (e.g. "My Computer")'),!1):(e("ERROR: No FileList object present; user might had dropped text."),!1)}))}),this},$.fileUploadSupported=d,$.imageUploadSupported=f,$.fileUploadAsBase64Supported=p,$.imageUploadAsBase64Supported=h}(),define("fileUpload",["jquery"],function(e){return function(){var t;return t||e.$.fn.fileUpload}}(this)),define("pagedown_editor",["jquery","pagedown_sanitizer","sfModal","pagedown_extra","fileUpload"],function(e,t,n){"use strict";function r(){}function i(e,t){t=t||"wmd-input",this.buttonBar=h.getElementById("wmd-button-bar"+e),this.preview=h.getElementById("wmd-preview"+e),this.input=h.getElementById(t+e)}function a(e,t){var n,r,i,a=this,s=[],l=0,c="none",u=function(e,t){c!=e&&(c=e,t||p()),b.isIE&&"moving"==c?i=null:r=setTimeout(f,1)},f=function(e){i=new o(t,e),r=void 0};this.setCommandMode=function(){c="command",p(),r=setTimeout(f,0)},this.canUndo=function(){return l>1},this.canRedo=function(){return s[l+1]?!0:!1},this.undo=function(){a.canUndo()&&(n?(n.restore(),n=null):(s[l]=new o(t),s[--l].restore(),e&&e())),c="none",t.input.focus(),f()},this.redo=function(){a.canRedo()&&(s[++l].restore(),e&&e()),c="none",t.input.focus(),f()};var p=function(){var r=i||new o(t);return r?"moving"==c?void(n||(n=r)):(n&&(s[l-1].text!=n.text&&(s[l++]=n),n=null),s[l++]=r,s[l+1]=null,void(e&&e())):!1},h=function(e){var t=!1;if((e.ctrlKey||e.metaKey)&&!e.altKey){var n=e.charCode||e.keyCode,r=String.fromCharCode(n);switch(r.toLowerCase()){case"y":a.redo(),t=!0;break;case"z":e.shiftKey?a.redo():a.undo(),t=!0}}return t?(e.preventDefault&&e.preventDefault(),void(window.event&&(window.event.returnValue=!1))):void 0},m=function(e){if(!e.ctrlKey&&!e.metaKey){var t=e.keyCode;t>=33&&40>=t||t>=63232&&63235>=t?u("moving"):8==t||46==t||127==t?u("deleting"):13==t?u("newlines"):27==t?u("escape"):(16>t||t>20||9===t)&&91!=t&&u("typing")}},g=function(){d.addEvent(t.input,"keypress",function(e){!e.ctrlKey&&!e.metaKey||e.altKey||89!=e.keyCode&&90!=e.keyCode||e.preventDefault()});var e=function(){(b.isIE||i&&i.text!=t.input.value)&&void 0==r&&(c="paste",p(),f())};d.addEvent(t.input,"keydown",h),d.addEvent(t.input,"keydown",m),d.addEvent(t.input,"mousedown",function(){u("moving")}),t.input.onpaste=e,t.input.ondrop=e},v=function(){g(),f(!0),p()};v()}function o(e,t){var n=this,i=e.input;this.init=function(){d.isVisible(i)&&(t||!h.activeElement||h.activeElement===i)&&(this.setInputAreaSelectionStartEnd(),this.scrollTop=i.scrollTop,(!this.text&&i.selectionStart||0===i.selectionStart)&&(this.text=i.value))},this.setInputAreaSelection=function(){if(d.isVisible(i))if(void 0===i.selectionStart||b.isOpera){if(h.selection){if(h.activeElement&&h.activeElement!==i)return;i.focus();var e=i.createTextRange();e.moveStart("character",-i.value.length),e.moveEnd("character",-i.value.length),e.moveEnd("character",n.end),e.moveStart("character",n.start),e.select()}}else i.focus(),i.selectionStart=n.start,i.selectionEnd=n.end,i.scrollTop=n.scrollTop},this.setInputAreaSelectionStartEnd=function(){if(e.ieCachedRange||!i.selectionStart&&0!==i.selectionStart){if(h.selection){n.text=d.fixEolChars(i.value);var t=e.ieCachedRange||h.selection.createRange(),r=d.fixEolChars(t.text),a="",o=a+r+a;t.text=o;var s=d.fixEolChars(i.value);t.moveStart("character",-o.length),t.text=r,n.start=s.indexOf(a),n.end=s.lastIndexOf(a)-a.length;var l=n.text.length-d.fixEolChars(i.value).length;if(l){for(t.moveStart("character",-r.length);l--;)r+="\n",n.end+=1;t.text=r}e.ieCachedRange&&(n.scrollTop=e.ieCachedScrollTop),e.ieCachedRange=null,this.setInputAreaSelection()}}else n.start=i.selectionStart,n.end=i.selectionEnd},this.restore=function(){void 0!=n.text&&n.text!=i.value&&(i.value=n.text),this.setInputAreaSelection(),i.scrollTop=n.scrollTop},this.getChunks=function(){var e=new r;return e.before=d.fixEolChars(n.text.substring(0,n.start)),e.startTag="",e.selection=d.fixEolChars(n.text.substring(n.start,n.end)),e.endTag="",e.after=d.fixEolChars(n.text.substring(n.end)),e.scrollTop=n.scrollTop,e},this.setChunks=function(e){e.before=e.before+e.startTag,e.after=e.endTag+e.after,this.start=e.before.length,this.end=e.before.length+e.selection.length,this.text=e.before+e.selection+e.after,this.scrollTop=e.scrollTop},this.init()}function s(e,t,n){var r,i,a,o=3e3,s="delayed",l=function(e,t){d.addEvent(e,"input",t),e.onpaste=t,e.ondrop=t,d.addEvent(e,"keypress",t),d.addEvent(e,"keydown",t)},c=function(){var e=0;return window.innerHeight?e=window.pageYOffset:h.documentElement&&h.documentElement.scrollTop?e=h.documentElement.scrollTop:h.body&&(e=h.body.scrollTop),e},u=function(){if(t.preview){var n=t.input.value;if(!n||n!=a){a=n;var r=(new Date).getTime();n=e.makeHtml(n);var o=(new Date).getTime();i=o-r,k(n)}}},p=function(){if(r&&(clearTimeout(r),r=void 0),"manual"!==s){var e=0;"delayed"===s&&(e=i),e>o&&(e=o),r=setTimeout(u,e)}},m=function(e){return e.scrollHeight<=e.clientHeight?1:e.scrollTop/(e.scrollHeight-e.clientHeight)},g=function(){t.preview&&(t.preview.scrollTop=(t.preview.scrollHeight-t.preview.clientHeight)*m(t.preview))};this.refresh=function(e){e?(a="",u()):p()},this.processingTime=function(){return i};var v,y=!0,_=function(e){var n=t.preview,r=n.parentNode,i=n.nextSibling;r.removeChild(n),n.innerHTML=e,i?r.insertBefore(n,i):r.appendChild(n)},w=function(e){t.preview.innerHTML=e},x=function(e){if(v)return v(e);try{w(e),v=w}catch(t){v=_,v(e)}},k=function(e){var r=f.getTop(t.input)-c();if(t.preview&&(x(e),n()),g(),y)return void(y=!1);var i=f.getTop(t.input)-c();b.isIE?setTimeout(function(){window.scrollBy(0,i-r)},0):window.scrollBy(0,i-r)},C=function(){l(t.input,p),u(),t.preview&&(t.preview.scrollTop=0)};C()}function l(e,t,n,r,i,a,s){function l(e){if(m.focus(),e.textOp){n&&n.setCommandMode();var i=new o(t);if(!i)return;var a=i.getChunks(),s=function(){m.focus(),a&&i.setChunks(a),i.restore(),r.refresh()},l=e.textOp(a,s);l||s()}e.execute&&e.execute(n)}function c(e,n){var r="0px",i="-20px",a="-40px",o=e.getElementsByTagName("a")[0];n?(o.style.backgroundPosition=e.XShift+" "+r,e.onmouseover=function(){o.style.backgroundPosition=this.XShift+" "+a},e.onmouseout=function(){o.style.backgroundPosition=this.XShift+" "+r},b.isIE&&(e.onmousedown=function(){h.activeElement&&h.activeElement!==t.input||(t.ieCachedRange=document.selection.createRange(),t.ieCachedScrollTop=t.input.scrollTop)}),e.isHelp||(e.onclick=function(){return this.onmouseout&&this.onmouseout(),l(this),!1})):(o.style.backgroundPosition=e.XShift+" "+i,e.onmouseover=e.onmouseout=e.onclick=function(){})}function u(e){return"string"==typeof e&&(e=i[e]),function(){e.apply(i,arguments)}}function f(){var n=t.buttonBar,r=document.createElement("ul");r.id="wmd-button-row"+e,r.className="editor__menu clearfix",r=n.appendChild(r);var i=0,o=function(t,n,a,o){var s=document.createElement("li");s.className="wmd-button",s.style.left=i+"px",i+=25;var l=document.createElement("a");return l.className="editor__menu--bold",s.id=t+e,s.appendChild(l),s.title=n,s.XShift=a,o&&(s.textOp=o),c(s,!0),r.appendChild(s),s},l=function(t){var n=document.createElement("li");n.className="editor__menu--divider wmd-spacer"+t,n.id="wmd-spacer"+t+e,r.appendChild(n),i+=25};v.bold=o("wmd-bold-button",s("bold"),"0px",u("doBold")),v.italic=o("wmd-italic-button",s("italic"),"-20px",u("doItalic")),l(1),v.link=o("wmd-link-button",s("link"),"-40px",u(function(e,t){return this.doLinkOrImage(e,t,!1)})),v.quote=o("wmd-quote-button",s("quote"),"-60px",u("doBlockquote")),v.code=o("wmd-code-button",s("code"),"-80px",u("doCode")),v.image=o("wmd-image-button",s("image"),"-100px",u(function(e,t){return this.doLinkOrImage(e,t,!0)})),l(2),v.olist=o("wmd-olist-button",s("olist"),"-120px",u(function(e,t){this.doList(e,t,!0)})),v.ulist=o("wmd-ulist-button",s("ulist"),"-140px",u(function(e,t){this.doList(e,t,!1)})),v.heading=o("wmd-heading-button",s("heading"),"-160px",u("doHeading")),v.hr=o("wmd-hr-button",s("hr"),"-180px",u("doHorizontalRule")),l(3),v.undo=o("wmd-undo-button",s("undo"),"-200px",null),v.undo.execute=function(e){e&&e.undo()};var d=s(/win/.test(g.platform.toLowerCase())?"redo":"redomac");if(v.redo=o("wmd-redo-button",d,"-220px",null),v.redo.execute=function(e){e&&e.redo()},a){var f=document.createElement("li"),h=document.createElement("span");f.appendChild(h),f.className="wmd-button wmd-help-button",f.id="wmd-help-button"+e,f.XShift="-240px",f.isHelp=!0,f.style.right="0px",f.title=s("help"),f.onclick=a.handler,c(f,!0),r.appendChild(f),v.help=f}p(),l(4),v.help=o("wmd-help-button",s("help"),"-300px")}function p(){n&&(c(v.undo,n.canUndo()),c(v.redo,n.canRedo()))}var m=t.input,v={};f();var y="keydown";b.isOpera&&(y="keypress"),d.addEvent(m,y,function(e){if((e.ctrlKey||e.metaKey)&&!e.altKey&&!e.shiftKey){var t=e.charCode||e.keyCode,n=String.fromCharCode(t).toLowerCase();switch(n){case"b":e.preventDefault(),l(v.bold);break;case"i":e.preventDefault(),l(v.italic);break;case"l":e.preventDefault(),l(v.link);break;case"q":e.preventDefault(),l(v.quote);break;case"k":e.preventDefault(),l(v.code);break;case"g":e.preventDefault(),l(v.image);break;case"o":e.preventDefault(),l(v.olist);break;case"u":e.preventDefault(),l(v.ulist);break;case"h":e.preventDefault(),l(v.heading);break;case"r":e.preventDefault(),l(v.hr);break;case"y":e.preventDefault(),l(v.redo);break;case"z":e.shiftKey?(e.preventDefault(),l(v.redo)):(e.preventDefault(),l(v.undo));break;default:return}}}),d.addEvent(m,"keyup",function(e){if(e.shiftKey&&!e.ctrlKey&&!e.metaKey){var t=e.charCode||e.keyCode;if(13===t){var n={};n.textOp=u("doAutoindent"),l(n)}}}),b.isIE&&d.addEvent(m,"keydown",function(e){var t=e.keyCode;return 27===t?!1:void 0}),this.setUndoRedoButtonStates=p}function c(e,t){this.hooks=e,this.getString=t}function u(e){return e.replace(/^\s*(.*?)(?:\s+"(.+)")?\s*$/,function(e,t,n){return t=t.replace(/\?.*$/,function(e){return e.replace(/\+/g," ")}),t=decodeURIComponent(t),t=encodeURI(t).replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29"),t=t.replace(/\?.*$/,function(e){return e.replace(/\+/g,"%2b")}),n&&(n=n.trim?n.trim():n.replace(/^\s*/,"").replace(/\s*$/,""),n=n.replace(/"/g,"quot;").replace(/\(/g,"&#40;").replace(/\)/g,"&#41;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),n?t+' "'+n+'"':t})}var d={},f={},p={},h=window.document,m=window.RegExp,g=window.navigator,v={lineLength:72},b={isIE:/msie/.test(g.userAgent.toLowerCase()),isIE_5or6:/msie 6/.test(g.userAgent.toLowerCase())||/msie 5/.test(g.userAgent.toLowerCase()),isOpera:/opera/.test(g.userAgent.toLowerCase())},y={bold:"加粗 <strong> Ctrl+B",boldexample:"加粗文字",italic:"斜体 <em> Ctrl+I",italicexample:"斜体文字",link:"链接 <a> Ctrl+L",linkdescription:"链接描述",linkdialog:'<input type="text" id="editorLinkText" class="form-control text-28" placeholder="请输入链接地址">',quote:"引用 <blockquote> Ctrl+Q",quoteexample:"引用文字",code:"代码 <pre><code> Ctrl+K",codeexample:"请输入代码",image:"图片 <img> Ctrl+G",imagedescription:"图片描述",imagedialog:'<ul class="nav nav-tabs" role="tablist"><li class="active"><a href="#localPic" role="tab" data-toggle="tab">本地上传</a></li>    <li><a href="#remotePic" role="tab" data-toggle="tab">远程地址获取</a></li></ul><div class="tab-content">    <div class="tab-pane fade active in pt20 form-horizontal" id="localPic">        <span class="text-muted">图片体积不得大于 4 MB</span>        <br>        <div class="widget-upload form-group">        <input type="file" id="editorUpload" name="image" class="widget-upload__file">        <div class="col-sm-8">        <input type="text" id="fileName" class="form-control col-sm-10 widget-upload__text" placeholder="拖动图片到这里" readonly="">        </div>        <a href="javascript:void(0);" class="btn col-sm-2 btn-default">选择图片</a>        </div>    </div>    <div class="tab-pane fade pt20" id="remotePic">    <input type="url" name="img" id="remotePicUrl" class="form-control text-28" placeholder="请输入图片所在网址">    </div></div>',olist:"数字列表 <ol> Ctrl+O",ulist:"普通列表 <ul> Ctrl+U",litem:"列表项目",heading:"标题 <h1>/<h2> Ctrl+H",headingexample:"标题文字",hr:"分割线 <hr> Ctrl+R",undo:"撤销 - Ctrl+Z",redo:"重做 - Ctrl+Y",redomac:"重做 - Ctrl+Shift+Z",zen:"全屏",help:"Markdown 语法"};t.Editor=function(e,n,r){r=r||{},"function"==typeof r.handler&&(r={helpButton:r}),r.strings=r.strings||{},r.helpButton&&(r.strings.help=r.strings.help||r.helpButton.title);var o=function(e){return r.strings[e]||y[e]};n=n||"";var u=this.hooks=new t.HookCollection;u.addNoop("onPreviewRefresh"),u.addNoop("postBlockquoteCreation"),u.addFalse("insertImageDialog"),this.getConverter=function(){return e};var d,f=this;this.run=function(t){if(!d){d=new i(n,t);var p,m,g=new c(u,o),v=new s(e,d,function(){u.onPreviewRefresh()});/\?noundo/.test(h.location.href)||(p=new a(function(){v.refresh(),m&&m.setUndoRedoButtonStates()},d),this.textOperation=function(e){p.setCommandMode(),e(),f.refreshPreview()}),m=new l(n,d,p,v,g,r.helpButton,o),m.setUndoRedoButtonStates();var b=f.refreshPreview=function(){v.refresh(!0)};b()}}},r.prototype.findTags=function(e,t){var n,r=this;e&&(n=d.extendRegExp(e,"","$"),this.before=this.before.replace(n,function(e){return r.startTag=r.startTag+e,""}),n=d.extendRegExp(e,"^",""),this.selection=this.selection.replace(n,function(e){return r.startTag=r.startTag+e,""})),t&&(n=d.extendRegExp(t,"","$"),this.selection=this.selection.replace(n,function(e){return r.endTag=e+r.endTag,""}),n=d.extendRegExp(t,"^",""),this.after=this.after.replace(n,function(e){return r.endTag=e+r.endTag,""}))},r.prototype.trimWhitespace=function(e){var t,n,r=this;e?t=n="":(t=function(e){return r.before+=e,""},n=function(e){return r.after=e+r.after,""}),this.selection=this.selection.replace(/^(\s*)/,t).replace(/(\s*)$/,n)},r.prototype.skipLines=function(e,t,n){void 0===e&&(e=1),void 0===t&&(t=1),e++,t++;var r,i;if(navigator.userAgent.match(/Chrome/)&&"X".match(/()./),this.selection=this.selection.replace(/(^\n*)/,""),this.startTag=this.startTag+m.$1,this.selection=this.selection.replace(/(\n*$)/,""),this.endTag=this.endTag+m.$1,this.startTag=this.startTag.replace(/(^\n*)/,""),this.before=this.before+m.$1,this.endTag=this.endTag.replace(/(\n*$)/,""),this.after=this.after+m.$1,this.before){for(r=i="";e--;)r+="\\n?",i+="\n";n&&(r="\\n*"),this.before=this.before.replace(new m(r+"$",""),i)}if(this.after){for(r=i="";t--;)r+="\\n?",i+="\n";n&&(r="\\n*"),this.after=this.after.replace(new m(r,""),i)}},d.isVisible=function(e){return window.getComputedStyle?"none"!==window.getComputedStyle(e,null).getPropertyValue("display"):e.currentStyle?"none"!==e.currentStyle.display:void 0},d.addEvent=function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n,!1)},d.removeEvent=function(e,t,n){e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener(t,n,!1)},d.fixEolChars=function(e){return e=e.replace(/\r\n/g,"\n"),e=e.replace(/\r/g,"\n")},d.extendRegExp=function(e,t,n){(null===t||void 0===t)&&(t=""),(null===n||void 0===n)&&(n="");var r,i=e.toString();return i=i.replace(/\/([gim]*)$/,function(e,t){return r=t,""}),i=i.replace(/(^\/|\/$)/g,""),i=t+i+n,new m(i,r)},f.getTop=function(e,t){var n=e.offsetTop;if(!t)for(;e=e.offsetParent;)n+=e.offsetTop;return n},f.getHeight=function(e){return e.offsetHeight||e.scrollHeight},f.getWidth=function(e){return e.offsetWidth||e.scrollWidth},f.getPageSize=function(){var e,t,n,r;self.innerHeight&&self.scrollMaxY?(e=h.body.scrollWidth,t=self.innerHeight+self.scrollMaxY):h.body.scrollHeight>h.body.offsetHeight?(e=h.body.scrollWidth,t=h.body.scrollHeight):(e=h.body.offsetWidth,t=h.body.offsetHeight),self.innerHeight?(n=self.innerWidth,r=self.innerHeight):h.documentElement&&h.documentElement.clientHeight?(n=h.documentElement.clientWidth,r=h.documentElement.clientHeight):h.body&&(n=h.body.clientWidth,r=h.body.clientHeight);var i=Math.max(e,n),a=Math.max(t,r);return[i,a,n,r]},p.createBackground=function(){var e=h.createElement("div"),t=e.style;e.className="modal-backdrop wmd-prompt-background",t.position="absolute",t.top="0",t.zIndex="1000",b.isIE?t.filter="alpha(opacity=50)":t.opacity="0.5";var n=f.getPageSize();return t.height=n[1]+"px",b.isIE?(t.left=h.documentElement.scrollLeft,t.width=h.documentElement.clientWidth):(t.left="0",t.width="100%"),h.body.appendChild(e),e},p.prompt=function(e,t,n,r){var i,a;void 0===n&&(n="");var o=function(e){var t=e.charCode||e.keyCode;27===t&&s(!0)},s=function(e){d.removeEvent(h.body,"keydown",o);var t=a.value;return e?t=null:(t=t.replace(/^http:\/\/(https?|ftp):\/\//,"$1://"),/^(?:https?|ftp):\/\//.test(t)||(t="http://"+t)),i.parentNode.removeChild(i),r(t),!1},l=function(){i=h.createElement("div"),i.className="modal-content wmd-prompt-dialog",i.style.padding="10px;",i.style.position="fixed",i.style.width="600px",i.style.zIndex="1001";var r=h.createElement("div");r.className="modal-header",r.innerHTML='<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button><h4 class="ml20">'+e+"</h4>",i.appendChild(r);var l=h.createElement("div");l.innerHTML=t,l.style.padding="5px",l.style.margin="20px",i.appendChild(l);var c=h.createElement("form"),u=c.style;c.onsubmit=function(){return s(!1)},u.padding="0",u.margin="0 0 20px",u.cssFloat="left",u.width="100%",u.textAlign="center",u.position="relative",i.appendChild(c),a=h.createElement("input"),a.className="form-control text-28",a.type="text",a.value=n,u=a.style,u.display="block",u.width="80%",u.marginLeft=u.marginRight="auto",c.appendChild(a);var p=h.createElement("input");p.className="btn btn-primary",p.type="button",p.onclick=function(){return s(!1)},p.value="确定",u=p.style,u.margin="10px",u.display="inline",u.width="7em";var m=h.createElement("input");m.className="btn btn-default",m.type="button",m.onclick=function(){return s(!0)},m.value="取消",u=m.style,u.margin="10px",u.display="inline",u.width="7em",c.appendChild(p),c.appendChild(m),d.addEvent(h.body,"keydown",o),i.style.top="50%",i.style.left="50%",i.style.display="block",b.isIE_5or6&&(i.style.position="absolute",i.style.top=h.documentElement.scrollTop+200+"px",i.style.left="50%"),h.body.appendChild(i),i.style.marginTop=-(f.getHeight(i)/2)+"px",i.style.marginLeft=-(f.getWidth(i)/2)+"px"};setTimeout(function(){l();var e=n.length;if(void 0!==a.selectionStart)a.selectionStart=0,a.selectionEnd=e;else if(a.createTextRange){var t=a.createTextRange();t.collapse(!1),t.moveStart("character",-e),t.moveEnd("character",e),t.select()}a.focus()},0)};var _=c.prototype;return _.prefixes="(?:\\s{4,}|\\s*>|\\s*-\\s+|\\s*\\d+\\.|=|\\+|-|_|\\*|#|\\s*\\[[^\n]]+\\]:)",_.unwrap=function(e){var t=new m("([^\\n])\\n(?!(\\n|"+this.prefixes+"))","g");e.selection=e.selection.replace(t,"$1 $2")},_.wrap=function(e,t){this.unwrap(e);var n=new m("(.{1,"+t+"})( +|$\\n?)","gm"),r=this;e.selection=e.selection.replace(n,function(e,t){return new m("^"+r.prefixes,"").test(e)?e:t+"\n"}),e.selection=e.selection.replace(/\s+$/,"")},_.doBold=function(e,t){return this.doBorI(e,t,2,this.getString("boldexample"))},_.doItalic=function(e,t){return this.doBorI(e,t,1,this.getString("italicexample"))},_.doBorI=function(e,t,n,r){e.trimWhitespace(),e.selection=e.selection.replace(/\n{2,}/g,"\n");var i=/(\**$)/.exec(e.before)[0],a=/(^\**)/.exec(e.after)[0],o=Math.min(i.length,a.length);if(o>=n&&(2!=o||1!=n))e.before=e.before.replace(m("[*]{"+n+"}$",""),""),e.after=e.after.replace(m("^[*]{"+n+"}",""),"");else if(!e.selection&&a){e.after=e.after.replace(/^([*_]*)/,""),e.before=e.before.replace(/(\s?)$/,"");var s=m.$1;e.before=e.before+a+s}else{e.selection||a||(e.selection=r);var l=1>=n?"*":"**";e.before=e.before+l,e.after=l+e.after}},_.stripLinkDefs=function(e,t){return e=e.replace(/^[ ]{0,3}\[(\d+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|$)/gm,function(e,n,r,i,a){return t[n]=e.replace(/\s*$/,""),i?(t[n]=e.replace(/["(](.+?)[")]$/,""),i+a):""})},_.addLinkDef=function(e,t){var n=0,r={};e.before=this.stripLinkDefs(e.before,r),e.selection=this.stripLinkDefs(e.selection,r),e.after=this.stripLinkDefs(e.after,r);var i="",a=/(\[)((?:\[[^\]]*\]|[^\[\]])*)(\][ ]?(?:\n[ ]*)?\[)(\d+)(\])/g,o=function(e){n++,e=e.replace(/^[ ]{0,3}\[(\d+)\]:/,"  ["+n+"]:"),i+="\n"+e},s=function(e,t,i,l,c,u){return i=i.replace(a,s),r[c]?(o(r[c]),t+i+l+n+u):e};e.before=e.before.replace(a,s),t?o(t):e.selection=e.selection.replace(a,s);var l=n;return e.after=e.after.replace(a,s),e.after&&(e.after=e.after.replace(/\n*$/,"")),e.after||(e.selection=e.selection.replace(/\n*$/,"")),e.after+="\n\n"+i,l},_.doLinkOrImage=function(t,r,i){t.trimWhitespace(),t.findTags(/\s*!?\[/,/\][ ]?(?:\n[ ]*)?(\[.*?\])?/);if(!(t.endTag.length>1&&t.startTag.length>0)){if(t.selection=t.startTag+t.selection+t.endTag,t.startTag=t.endTag="",/\n\n/.test(t.selection))return void this.addLinkDef(t,null);var a=this,o=function(e,o){if(n("hide"),null!==e){t.selection=(" "+t.selection).replace(/([^\\](?:\\\\)*)(?=[[\]])/g,"$1\\").substr(1);var s=" [999]: "+u(e),l=a.addLinkDef(t,s);t.startTag=i?"![":"[",t.endTag="]["+l+"]",t.selection||(i?t.selection=o||a.getString("imagedescription"):t.selection=a.getString("linkdescription"))}r()};if(i){if(!this.hooks.insertImageDialog(o)){var s,l,c=this.getString("imagedialog");n({title:"插入图片",content:c,closeText:"取消",doneText:"插入",hidden:function(){e(".wmd-input").focus()},show:function(){e("#editorUpload").fileUpload({url:"/img/upload/image",type:"POST",dataType:"json",beforeSend:function(){var t=e("#editorUpload").val();-1!==t.indexOf("\\fakepath")&&(t=t.split("\\fakepath\\")[1]),t||t.trick(),e("#fileName").addClass("loading"),e(".done-btn").attr("disabled","disabled")},complete:function(){e("#fileName").removeClass("loading"),e(".done-btn").attr("disabled",!1)},success:function(e){var t=e[0],r=e[1];t?n("对不起，上传图片失败，请联系管理员或稍后再试。"):(l=r,o(l,s))}})},doneFn:function(t){t.preventDefault(),e("#remotePic").hasClass("active")&&e("#remotePicUrl").val()&&(e("#remotePicUrl").addClass("loading"),e(".done-btn").attr("disabled","disabled"),s=e("#remotePicUrl").val().match(/\/([^\/]+)$/)[1],e.post("/img/fetch/image",{src:e("#remotePicUrl").val()},function(t){e(".done-btn").attr("disabled",!1),e("#remotePicUrl").removeClass("loading");var r=t.match(/\[(\d),/)[1],i=t.match(/\[\d,"(\S*)"\]/)[1];i=i.replace(/\\/g,""),"0"!==r?n(i):(l=i,o(l,s))},"text"))}})}}else{var c=this.getString("linkdialog");n({title:"插入链接",content:c,closeText:"取消",doneText:"插入",doneFn:function(){o(e("#editorLinkText").val())},show:function(){setTimeout(function(){e("#editorLinkText").focus()},100),e("#editorLinkText").keydown(function(t){13===t.which&&(t.preventDefault(),o(e(this).val()))})},hidden:function(){e(".wmd-input").focus()}})}return!0}t.startTag=t.startTag.replace(/!?\[/,""),t.endTag="",this.addLinkDef(t,null)},_.doAutoindent=function(e,t){var n=this,r=!1;e.before=e.before.replace(/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]*\n$/,"\n\n"),e.before=e.before.replace(/(\n|^)[ ]{0,3}>[ \t]*\n$/,"\n\n"),e.before=e.before.replace(/(\n|^)[ \t]+\n$/,"\n\n"),e.selection||/^[ \t]*(?:\n|$)/.test(e.after)||(e.after=e.after.replace(/^[^\n]*/,function(t){return e.selection=t,""}),r=!0),/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]+.*\n$/.test(e.before)&&n.doList&&n.doList(e),/(\n|^)[ ]{0,3}>[ \t]+.*\n$/.test(e.before)&&n.doBlockquote&&n.doBlockquote(e),/(\n|^)(\t|[ ]{4,}).*\n$/.test(e.before)&&n.doCode&&n.doCode(e),r&&(e.after=e.selection+e.after,e.selection="")},_.doBlockquote=function(e,t){e.selection=e.selection.replace(/^(\n*)([^\r]+?)(\n*)$/,function(t,n,r,i){return e.before+=n,e.after=i+e.after,
r}),e.before=e.before.replace(/(>[ \t]*)$/,function(t,n){return e.selection=n+e.selection,""}),e.selection=e.selection.replace(/^(\s|>)+$/,""),e.selection=e.selection||this.getString("quoteexample");var n,r="",i="";if(e.before){for(var a=e.before.replace(/\n$/,"").split("\n"),o=!1,s=0;s<a.length;s++){var l=!1;n=a[s],o=o&&n.length>0,/^>/.test(n)?(l=!0,!o&&n.length>1&&(o=!0)):l=/^[ \t]*$/.test(n)?!0:o,l?r+=n+"\n":(i+=r+n,r="\n")}/(^|\n)>/.test(r)||(i+=r,r="")}e.startTag=r,e.before=i,e.after&&(e.after=e.after.replace(/^\n?/,"\n")),e.after=e.after.replace(/^(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*)/,function(t){return e.endTag=t,""});var c=function(t){var n=t?"> ":"";e.startTag&&(e.startTag=e.startTag.replace(/\n((>|\s)*)\n$/,function(e,t){return"\n"+t.replace(/^[ ]{0,3}>?[ \t]*$/gm,n)+"\n"})),e.endTag&&(e.endTag=e.endTag.replace(/^\n((>|\s)*)\n/,function(e,t){return"\n"+t.replace(/^[ ]{0,3}>?[ \t]*$/gm,n)+"\n"}))};/^(?![ ]{0,3}>)/m.test(e.selection)?(this.wrap(e,v.lineLength-2),e.selection=e.selection.replace(/^/gm,"> "),c(!0),e.skipLines()):(e.selection=e.selection.replace(/^[ ]{0,3}> ?/gm,""),this.unwrap(e),c(!1),!/^(\n|^)[ ]{0,3}>/.test(e.selection)&&e.startTag&&(e.startTag=e.startTag.replace(/\n{0,2}$/,"\n\n")),!/(\n|^)[ ]{0,3}>.*$/.test(e.selection)&&e.endTag&&(e.endTag=e.endTag.replace(/^\n{0,2}/,"\n\n"))),e.selection=this.hooks.postBlockquoteCreation(e.selection),/\n/.test(e.selection)||(e.selection=e.selection.replace(/^(> *)/,function(t,n){return e.startTag+=n,""}))},_.doCode=function(e,t){var n=/\S[ ]*$/.test(e.before),r=/^[ ]*\S/.test(e.after);if(!r&&!n||/\n/.test(e.selection)){e.before=e.before.replace(/[ ]{4}$/,function(t){return e.selection=t+e.selection,""});var i=1,a=1;/(\n|^)(\t|[ ]{4,}).*\n$/.test(e.before)&&(i=0),/^\n(\t|[ ]{4,})/.test(e.after)&&(a=0),e.skipLines(i,a),e.selection?/^[ ]{0,3}\S/m.test(e.selection)?/\n/.test(e.selection)?e.selection=e.selection.replace(/^/gm,"    "):e.before+="    ":e.selection=e.selection.replace(/^(?:[ ]{4}|[ ]{0,3}\t)/gm,""):(e.startTag="```\n",e.selection=this.getString("codeexample"),e.endTag="\n```")}else e.trimWhitespace(),e.findTags(/`/,/`/),e.startTag||e.endTag?e.endTag&&!e.startTag?(e.before+=e.endTag,e.endTag=""):e.startTag=e.endTag="":(e.startTag=e.endTag="`",e.selection||(e.selection=this.getString("codeexample")))},_.doList=function(e,t,n){var r=/(\n|^)(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*$/,i=/^\n*(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*/,a="-",o=1,s=function(){var e;return n?(e=" "+o+". ",o++):e=" "+a+" ",e},l=function(e){return void 0===n&&(n=/^\s*\d/.test(e)),e=e.replace(/^[ ]{0,3}([*+-]|\d+[.])\s/gm,function(e){return s()})};if(e.findTags(/(\n|^)*[ ]{0,3}([*+-]|\d+[.])\s+/,null),!e.before||/\n$/.test(e.before)||/^\n/.test(e.startTag)||(e.before+=e.startTag,e.startTag=""),e.startTag){var c=/\d+[.]/.test(e.startTag);if(e.startTag="",e.selection=e.selection.replace(/\n[ ]{4}/g,"\n"),this.unwrap(e),e.skipLines(),c&&(e.after=e.after.replace(i,l)),n==c)return}var u=1;e.before=e.before.replace(r,function(e){return/^\s*([*+-])/.test(e)&&(a=m.$1),u=/[^\n]\n\n[^\n]/.test(e)?1:0,l(e)}),e.selection||(e.selection=this.getString("litem"));var d=s(),f=1;e.after=e.after.replace(i,function(e){return f=/[^\n]\n\n[^\n]/.test(e)?1:0,l(e)}),e.trimWhitespace(!0),e.skipLines(u,f,!0),e.startTag=d;var p=d.replace(/./g," ");this.wrap(e,v.lineLength-p.length),e.selection=e.selection.replace(/\n/g,"\n"+p)},_.doHeading=function(e,t){if(e.selection=e.selection.replace(/\s+/g," "),e.selection=e.selection.replace(/(^\s+|\s+$)/g,""),!e.selection)return e.startTag="## ",e.selection=this.getString("headingexample"),void(e.endTag=" ##");var n=0;e.findTags(/#+[ ]*/,/[ ]*#+/),/#+/.test(e.startTag)&&(n=m.lastMatch.length),e.startTag=e.endTag="",e.findTags(null,/\s?(-+|=+)/),/=+/.test(e.endTag)&&(n=1),/-+/.test(e.endTag)&&(n=2),e.startTag=e.endTag="",e.skipLines(1,1);var r=0==n?2:n-1;if(r>0){var i=r>=2?"-":"=",a=e.selection.length;for(a>v.lineLength&&(a=v.lineLength),e.endTag="\n";a--;)e.endTag+=i}},_.doHorizontalRule=function(e,t){e.startTag="----------\n",e.selection="",e.skipLines(2,1,!0)},t}),define("tabIndent",[],function(){"use strict";var e={version:"0.1.8",config:{tab:"	"},events:{keydown:function(t){var n=e.config.tab,r=n.length;if(9===t.keyCode){t.preventDefault();var i=this.selectionStart,a=this.selectionEnd;if(t.shiftKey===!1)if(e.isMultiLine(this)){for(var o=e.findStartIndices(this),s=o.length,l=void 0,c=void 0,u=0;s--;){var d=o[s];o[s+1]&&i!=o[s+1]&&(d=o[s+1]),d>=i&&o[s]<a&&(this.value=this.value.slice(0,o[s])+n+this.value.slice(o[s]),l=o[s],c||(c=o[s+1]?o[s+1]-1:"end"),u++)}this.selectionStart=l,this.selectionEnd="end"!==c?c+r*u:this.value.length}else this.value=this.value.slice(0,i)+n+this.value.slice(i),this.selectionStart=i+r,this.selectionEnd=a+r;else if(e.isMultiLine(this)){for(var o=e.findStartIndices(this),s=o.length,l=void 0,c=void 0,u=0;s--;){var d=o[s];o[s+1]&&i!=o[s+1]&&(d=o[s+1]),d>=i&&o[s]<a&&(this.value.substr(o[s],r)==n&&(this.value=this.value.slice(0,o[s])+this.value.slice(o[s]+r),u++),l=o[s],c||(c=o[s+1]?o[s+1]-1:"end"))}this.selectionStart=l,this.selectionEnd="end"!==c?c-u*r:this.value.length}else this.value.substr(i-r,r)==n?(this.value=this.value.substr(0,i-r)+this.value.substr(i),this.selectionStart=i-r,this.selectionEnd=a-r):"\n"==this.value.substr(i-1,1)&&this.value.substr(i,r)==n&&(this.value=this.value.substring(0,i)+this.value.substr(i+r),this.selectionStart=i,this.selectionEnd=a-r)}else if(27===t.keyCode)e.events.disable(t);else if(13===t.keyCode&&t.shiftKey===!1){for(var f=e,p=this.selectionStart,o=f.findStartIndices(this),h=o.length,m=0,g=0,v=new RegExp("^"+n.replace("	","\\t").replace(/ /g,"\\s")+"+","g"),b="",y=null,_=0;h>_;_++){if(o[_+1]&&p>=o[_]&&p<o[_+1]){m=o[_],g=o[_+1]-1;break}m=o[h-1],g=this.value.length}if(b=this.value.slice(m,g),y=b.match(v),null!==y){t.preventDefault();var w=y[0],x=w.length,k=p-m;x>k&&(x=k,w=w.slice(0,k)),this.value=this.value.slice(0,p)+"\n"+w+this.value.slice(p),this.selectionStart=p+x+1,this.selectionEnd=this.selectionStart}}},disable:function(t){e.remove(t.target)},focus:function(){var t=e,n=this,r=setTimeout(function(){var e=(n.getAttribute("class")||"").split(" "),r=e.indexOf("tabIndent");n.addEventListener("keydown",t.events.keydown),n.style.backgroundPosition="top right",n.style.backgroundRepeat="no-repeat",-1!==r&&e.splice(r,1),e.push("tabIndent-rendered"),n.setAttribute("class",e.join(" ")),n.removeEventListener("focus",t.events.keydown)},500);n.addEventListener("blur",function i(){clearTimeout(r),n.removeEventListener("blur",i)})}},render:function(e){var t=this;"TEXTAREA"===e.nodeName&&(e.addEventListener("focus",t.events.focus),e.addEventListener("blur",function(e){t.events.disable(e)}))},renderAll:function(){for(var e=document.getElementsByTagName("textarea"),t=e.length,n=-1,r=[],i=void 0;t--;)r=(e[t].getAttribute("class")||"").split(" "),n=r.indexOf("tabIndent"),-1!==n&&(i=e[t],this.render(i)),n=-1,r=[],i=void 0},remove:function(e){if("TEXTAREA"===e.nodeName){var t=(e.getAttribute("class")||"").split(" "),n=t.indexOf("tabIndent-rendered");-1!==n&&(e.removeEventListener("keydown",this.events.keydown),e.style.backgroundImage="",t.splice(n,1),t.push("tabIndent"),e.setAttribute("class",t.length>1?t.join(" "):t[0]))}},removeAll:function(){for(var e=document.getElementsByTagName("textarea"),t=e.length,n=-1,r=[],i=void 0;t--;)r=(e[t].getAttribute("class")||"").split(" "),n=r.indexOf("tabIndent-rendered"),-1!==n&&(i=e[t],this.remove(i)),n=-1,r=[],i=void 0},isMultiLine:function(e){var t=e.value.slice(e.selectionStart,e.selectionEnd),n=new RegExp(/\n/);return n.test(t)?!0:!1},findStartIndices:function(e){for(var t=e.value,n=[],r=0;t.match(/\n/)&&t.match(/\n/).length>0;){r=n.length>0?n[n.length-1]:0;var i=t.search("\n");n.push(i+r+1),t=t.substring(i+1)}return n.unshift(0),n}};return e}),define("diff_match_patch",[],function(){function e(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}var t=-1,n=1,r=0;return e.Diff,e.prototype.diff_main=function(e,t,n,i){"undefined"==typeof i&&(i=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var a=i;if(null==e||null==t)throw new Error("Null input. (diff_main)");if(e==t)return e?[[r,e]]:[];"undefined"==typeof n&&(n=!0);var o=n,s=this.diff_commonPrefix(e,t),l=e.substring(0,s);e=e.substring(s),t=t.substring(s),s=this.diff_commonSuffix(e,t);var c=e.substring(e.length-s);e=e.substring(0,e.length-s),t=t.substring(0,t.length-s);var u=this.diff_compute_(e,t,o,a);return l&&u.unshift([r,l]),c&&u.push([r,c]),this.diff_cleanupMerge(u),u},e.prototype.diff_compute_=function(e,i,a,o){var s;if(!e)return[[n,i]];if(!i)return[[t,e]];var l=e.length>i.length?e:i,c=e.length>i.length?i:e,u=l.indexOf(c);if(-1!=u)return s=[[n,l.substring(0,u)],[r,c],[n,l.substring(u+c.length)]],e.length>i.length&&(s[0][0]=s[2][0]=t),s;if(1==c.length)return[[t,e],[n,i]];var d=this.diff_halfMatch_(e,i);if(d){var f=d[0],p=d[1],h=d[2],m=d[3],g=d[4],v=this.diff_main(f,h,a,o),b=this.diff_main(p,m,a,o);return v.concat([[r,g]],b)}return a&&e.length>100&&i.length>100?this.diff_lineMode_(e,i,o):this.diff_bisect_(e,i,o)},e.prototype.diff_lineMode_=function(e,i,a){var o=this.diff_linesToChars_(e,i);e=o.chars1,i=o.chars2;var s=o.lineArray,l=this.diff_main(e,i,!1,a);this.diff_charsToLines_(l,s),this.diff_cleanupSemantic(l),l.push([r,""]);for(var c=0,u=0,d=0,f="",p="";c<l.length;){switch(l[c][0]){case n:d++,p+=l[c][1];break;case t:u++,f+=l[c][1];break;case r:if(u>=1&&d>=1){l.splice(c-u-d,u+d),c=c-u-d;for(var o=this.diff_main(f,p,!1,a),h=o.length-1;h>=0;h--)l.splice(c,0,o[h]);c+=o.length}d=0,u=0,f="",p=""}c++}return l.pop(),l},e.prototype.diff_bisect_=function(e,r,i){for(var a=e.length,o=r.length,s=Math.ceil((a+o)/2),l=s,c=2*s,u=new Array(c),d=new Array(c),f=0;c>f;f++)u[f]=-1,d[f]=-1;u[l+1]=0,d[l+1]=0;for(var p=a-o,h=p%2!=0,m=0,g=0,v=0,b=0,y=0;s>y&&!((new Date).getTime()>i);y++){for(var _=-y+m;y-g>=_;_+=2){var w,x=l+_;w=_==-y||_!=y&&u[x-1]<u[x+1]?u[x+1]:u[x-1]+1;for(var k=w-_;a>w&&o>k&&e.charAt(w)==r.charAt(k);)w++,k++;if(u[x]=w,w>a)g+=2;else if(k>o)m+=2;else if(h){var C=l+p-_;if(C>=0&&c>C&&-1!=d[C]){var S=a-d[C];if(w>=S)return this.diff_bisectSplit_(e,r,w,k,i)}}}for(var T=-y+v;y-b>=T;T+=2){var S,C=l+T;S=T==-y||T!=y&&d[C-1]<d[C+1]?d[C+1]:d[C-1]+1;for(var M=S-T;a>S&&o>M&&e.charAt(a-S-1)==r.charAt(o-M-1);)S++,M++;if(d[C]=S,S>a)b+=2;else if(M>o)v+=2;else if(!h){var x=l+p-T;if(x>=0&&c>x&&-1!=u[x]){var w=u[x],k=l+w-x;if(S=a-S,w>=S)return this.diff_bisectSplit_(e,r,w,k,i)}}}}return[[t,e],[n,r]]},e.prototype.diff_bisectSplit_=function(e,t,n,r,i){var a=e.substring(0,n),o=t.substring(0,r),s=e.substring(n),l=t.substring(r),c=this.diff_main(a,o,!1,i),u=this.diff_main(s,l,!1,i);return c.concat(u)},e.prototype.diff_linesToChars_=function(e,t){function n(e){for(var t="",n=0,a=-1,o=r.length;a<e.length-1;){a=e.indexOf("\n",n),-1==a&&(a=e.length-1);var s=e.substring(n,a+1);n=a+1,(i.hasOwnProperty?i.hasOwnProperty(s):void 0!==i[s])?t+=String.fromCharCode(i[s]):(t+=String.fromCharCode(o),i[s]=o,r[o++]=s)}return t}var r=[],i={};r[0]="";var a=n(e),o=n(t);return{chars1:a,chars2:o,lineArray:r}},e.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var r=e[n][1],i=[],a=0;a<r.length;a++)i[a]=t[r.charCodeAt(a)];e[n][1]=i.join("")}},e.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,r=Math.min(e.length,t.length),i=r,a=0;i>n;)e.substring(a,i)==t.substring(a,i)?(n=i,a=n):r=i,i=Math.floor((r-n)/2+n);return i},e.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,r=Math.min(e.length,t.length),i=r,a=0;i>n;)e.substring(e.length-i,e.length-a)==t.substring(t.length-i,t.length-a)?(n=i,a=n):r=i,i=Math.floor((r-n)/2+n);return i},e.prototype.diff_commonOverlap_=function(e,t){var n=e.length,r=t.length;if(0==n||0==r)return 0;n>r?e=e.substring(n-r):r>n&&(t=t.substring(0,n));var i=Math.min(n,r);if(e==t)return i;for(var a=0,o=1;;){var s=e.substring(i-o),l=t.indexOf(s);if(-1==l)return a;o+=l,(0==l||e.substring(i-o)==t.substring(0,o))&&(a=o,o++)}},e.prototype.diff_halfMatch_=function(e,t){function n(e,t,n){for(var r,i,a,s,l=e.substring(n,n+Math.floor(e.length/4)),c=-1,u="";-1!=(c=t.indexOf(l,c+1));){var d=o.diff_commonPrefix(e.substring(n),t.substring(c)),f=o.diff_commonSuffix(e.substring(0,n),t.substring(0,c));u.length<f+d&&(u=t.substring(c-f,c)+t.substring(c,c+d),r=e.substring(0,n-f),i=e.substring(n+d),a=t.substring(0,c-f),s=t.substring(c+d))}return 2*u.length>=e.length?[r,i,a,s,u]:null}if(this.Diff_Timeout<=0)return null;var r=e.length>t.length?e:t,i=e.length>t.length?t:e;if(r.length<4||2*i.length<r.length)return null;var a,o=this,s=n(r,i,Math.ceil(r.length/4)),l=n(r,i,Math.ceil(r.length/2));if(!s&&!l)return null;a=l?s&&s[4].length>l[4].length?s:l:s;var c,u,d,f;e.length>t.length?(c=a[0],u=a[1],d=a[2],f=a[3]):(d=a[0],f=a[1],c=a[2],u=a[3]);var p=a[4];return[c,u,d,f,p]},e.prototype.diff_cleanupSemantic=function(e){for(var i=!1,a=[],o=0,s=null,l=0,c=0,u=0,d=0,f=0;l<e.length;)e[l][0]==r?(a[o++]=l,c=d,u=f,d=0,f=0,s=e[l][1]):(e[l][0]==n?d+=e[l][1].length:f+=e[l][1].length,s&&s.length<=Math.max(c,u)&&s.length<=Math.max(d,f)&&(e.splice(a[o-1],0,[t,s]),e[a[o-1]+1][0]=n,o--,o--,l=o>0?a[o-1]:-1,c=0,u=0,d=0,f=0,s=null,i=!0)),l++;for(i&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),l=1;l<e.length;){if(e[l-1][0]==t&&e[l][0]==n){var p=e[l-1][1],h=e[l][1],m=this.diff_commonOverlap_(p,h),g=this.diff_commonOverlap_(h,p);m>=g?(m>=p.length/2||m>=h.length/2)&&(e.splice(l,0,[r,h.substring(0,m)]),e[l-1][1]=p.substring(0,p.length-m),e[l+1][1]=h.substring(m),l++):(g>=p.length/2||g>=h.length/2)&&(e.splice(l,0,[r,p.substring(0,g)]),e[l-1][0]=n,e[l-1][1]=h.substring(0,h.length-g),e[l+1][0]=t,e[l+1][1]=p.substring(g),l++),l++}l++}},e.prototype.diff_cleanupSemanticLossless=function(t){function n(t,n){if(!t||!n)return 6;var r=t.charAt(t.length-1),i=n.charAt(0),a=r.match(e.nonAlphaNumericRegex_),o=i.match(e.nonAlphaNumericRegex_),s=a&&r.match(e.whitespaceRegex_),l=o&&i.match(e.whitespaceRegex_),c=s&&r.match(e.linebreakRegex_),u=l&&i.match(e.linebreakRegex_),d=c&&t.match(e.blanklineEndRegex_),f=u&&n.match(e.blanklineStartRegex_);return d||f?5:c||u?4:a&&!s&&l?3:s||l?2:a||o?1:0}for(var i=1;i<t.length-1;){if(t[i-1][0]==r&&t[i+1][0]==r){var a=t[i-1][1],o=t[i][1],s=t[i+1][1],l=this.diff_commonSuffix(a,o);if(l){var c=o.substring(o.length-l);a=a.substring(0,a.length-l),o=c+o.substring(0,o.length-l),s=c+s}for(var u=a,d=o,f=s,p=n(a,o)+n(o,s);o.charAt(0)===s.charAt(0);){a+=o.charAt(0),o=o.substring(1)+s.charAt(0),s=s.substring(1);var h=n(a,o)+n(o,s);h>=p&&(p=h,u=a,d=o,f=s)}t[i-1][1]!=u&&(u?t[i-1][1]=u:(t.splice(i-1,1),i--),t[i][1]=d,f?t[i+1][1]=f:(t.splice(i+1,1),i--))}i++}},e.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,e.whitespaceRegex_=/\s/,e.linebreakRegex_=/[\r\n]/,e.blanklineEndRegex_=/\n\r?\n$/,e.blanklineStartRegex_=/^\r?\n\r?\n/,e.prototype.diff_cleanupEfficiency=function(e){for(var i=!1,a=[],o=0,s=null,l=0,c=!1,u=!1,d=!1,f=!1;l<e.length;)e[l][0]==r?(e[l][1].length<this.Diff_EditCost&&(d||f)?(a[o++]=l,c=d,u=f,s=e[l][1]):(o=0,s=null),d=f=!1):(e[l][0]==t?f=!0:d=!0,s&&(c&&u&&d&&f||s.length<this.Diff_EditCost/2&&c+u+d+f==3)&&(e.splice(a[o-1],0,[t,s]),e[a[o-1]+1][0]=n,o--,s=null,c&&u?(d=f=!0,o=0):(o--,l=o>0?a[o-1]:-1,d=f=!1),i=!0)),l++;i&&this.diff_cleanupMerge(e)},e.prototype.diff_cleanupMerge=function(e){e.push([r,""]);for(var i,a=0,o=0,s=0,l="",c="";a<e.length;)switch(e[a][0]){case n:s++,c+=e[a][1],a++;break;case t:o++,l+=e[a][1],a++;break;case r:o+s>1?(0!==o&&0!==s&&(i=this.diff_commonPrefix(c,l),0!==i&&(a-o-s>0&&e[a-o-s-1][0]==r?e[a-o-s-1][1]+=c.substring(0,i):(e.splice(0,0,[r,c.substring(0,i)]),a++),c=c.substring(i),l=l.substring(i)),i=this.diff_commonSuffix(c,l),0!==i&&(e[a][1]=c.substring(c.length-i)+e[a][1],c=c.substring(0,c.length-i),l=l.substring(0,l.length-i))),0===o?e.splice(a-s,o+s,[n,c]):0===s?e.splice(a-o,o+s,[t,l]):e.splice(a-o-s,o+s,[t,l],[n,c]),a=a-o-s+(o?1:0)+(s?1:0)+1):0!==a&&e[a-1][0]==r?(e[a-1][1]+=e[a][1],e.splice(a,1)):a++,s=0,o=0,l="",c=""}""===e[e.length-1][1]&&e.pop();var u=!1;for(a=1;a<e.length-1;)e[a-1][0]==r&&e[a+1][0]==r&&(e[a][1].substring(e[a][1].length-e[a-1][1].length)==e[a-1][1]?(e[a][1]=e[a-1][1]+e[a][1].substring(0,e[a][1].length-e[a-1][1].length),e[a+1][1]=e[a-1][1]+e[a+1][1],e.splice(a-1,1),u=!0):e[a][1].substring(0,e[a+1][1].length)==e[a+1][1]&&(e[a-1][1]+=e[a+1][1],e[a][1]=e[a][1].substring(e[a+1][1].length)+e[a+1][1],e.splice(a+1,1),u=!0)),a++;u&&this.diff_cleanupMerge(e)},e.prototype.diff_xIndex=function(e,r){var i,a=0,o=0,s=0,l=0;for(i=0;i<e.length&&(e[i][0]!==n&&(a+=e[i][1].length),e[i][0]!==t&&(o+=e[i][1].length),!(a>r));i++)s=a,l=o;return e.length!=i&&e[i][0]===t?l:l+(r-s)},e.prototype.diff_prettyHtml=function(e){for(var i=[],a=/&/g,o=/</g,s=/>/g,l=/\n/g,c=0;c<e.length;c++){var u=e[c][0],d=e[c][1],f=d.replace(a,"&amp;").replace(o,"&lt;").replace(s,"&gt;").replace(l,"&para;<br>");switch(u){case n:i[c]='<ins style="background:#e6ffe6;">'+f+"</ins>";break;case t:i[c]='<del style="background:#ffe6e6;">'+f+"</del>";break;case r:i[c]="<span>"+f+"</span>"}}return i.join("")},e.prototype.diff_text1=function(e){for(var t=[],r=0;r<e.length;r++)e[r][0]!==n&&(t[r]=e[r][1]);return t.join("")},e.prototype.diff_text2=function(e){for(var n=[],r=0;r<e.length;r++)e[r][0]!==t&&(n[r]=e[r][1]);return n.join("")},e.prototype.diff_levenshtein=function(e){for(var i=0,a=0,o=0,s=0;s<e.length;s++){var l=e[s][0],c=e[s][1];switch(l){case n:a+=c.length;break;case t:o+=c.length;break;case r:i+=Math.max(a,o),a=0,o=0}}return i+=Math.max(a,o)},e.prototype.diff_toDelta=function(e){for(var i=[],a=0;a<e.length;a++)switch(e[a][0]){case n:i[a]="+"+encodeURI(e[a][1]);break;case t:i[a]="-"+e[a][1].length;break;case r:i[a]="="+e[a][1].length}return i.join("	").replace(/%20/g," ")},e.prototype.diff_fromDelta=function(e,i){for(var a=[],o=0,s=0,l=i.split(/\t/g),c=0;c<l.length;c++){var u=l[c].substring(1);switch(l[c].charAt(0)){case"+":try{a[o++]=[n,decodeURI(u)]}catch(d){throw new Error("Illegal escape in diff_fromDelta: "+u)}break;case"-":case"=":var f=parseInt(u,10);if(isNaN(f)||0>f)throw new Error("Invalid number in diff_fromDelta: "+u);var p=e.substring(s,s+=f);"="==l[c].charAt(0)?a[o++]=[r,p]:a[o++]=[t,p];break;default:if(l[c])throw new Error("Invalid diff operation in diff_fromDelta: "+l[c])}}if(s!=e.length)throw new Error("Delta length ("+s+") does not equal source text length ("+e.length+").");return a},e.prototype.match_main=function(e,t,n){if(null==e||null==t||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1},e.prototype.match_bitap_=function(e,t,n){function r(e,r){var i=e/t.length,o=Math.abs(n-r);return a.Match_Distance?i+o/a.Match_Distance:o?1:i}if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var i=this.match_alphabet_(t),a=this,o=this.Match_Threshold,s=e.indexOf(t,n);-1!=s&&(o=Math.min(r(0,s),o),s=e.lastIndexOf(t,n+t.length),-1!=s&&(o=Math.min(r(0,s),o)));var l=1<<t.length-1;s=-1;for(var c,u,d,f=t.length+e.length,p=0;p<t.length;p++){for(c=0,u=f;u>c;)r(p,n+u)<=o?c=u:f=u,u=Math.floor((f-c)/2+c);f=u;var h=Math.max(1,n-u+1),m=Math.min(n+u,e.length)+t.length,g=Array(m+2);g[m+1]=(1<<p)-1;for(var v=m;v>=h;v--){var b=i[e.charAt(v-1)];if(0===p?g[v]=(g[v+1]<<1|1)&b:g[v]=(g[v+1]<<1|1)&b|((d[v+1]|d[v])<<1|1)|d[v+1],g[v]&l){var y=r(p,v-1);if(o>=y){if(o=y,s=v-1,!(s>n))break;h=Math.max(1,2*n-s)}}}if(r(p+1,n)>o)break;d=g}return s},e.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(var n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},e.prototype.patch_addContext_=function(e,t){if(0!=t.length){for(var n=t.substring(e.start2,e.start2+e.length1),i=0;t.indexOf(n)!=t.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)i+=this.Patch_Margin,n=t.substring(e.start2-i,e.start2+e.length1+i);i+=this.Patch_Margin;var a=t.substring(e.start2-i,e.start2);a&&e.diffs.unshift([r,a]);var o=t.substring(e.start2+e.length1,e.start2+e.length1+i);o&&e.diffs.push([r,o]),e.start1-=a.length,e.start2-=a.length,e.length1+=a.length+o.length,e.length2+=a.length+o.length}},e.prototype.patch_make=function(i,a,o){var s,l;if("string"==typeof i&&"string"==typeof a&&"undefined"==typeof o)s=i,l=this.diff_main(s,a,!0),l.length>2&&(this.diff_cleanupSemantic(l),this.diff_cleanupEfficiency(l));else if(i&&"object"==typeof i&&"undefined"==typeof a&&"undefined"==typeof o)l=i,s=this.diff_text1(l);else if("string"==typeof i&&a&&"object"==typeof a&&"undefined"==typeof o)s=i,l=a;else{if("string"!=typeof i||"string"!=typeof a||!o||"object"!=typeof o)throw new Error("Unknown call format to patch_make.");s=i,l=o}if(0===l.length)return[];for(var c=[],u=new e.patch_obj,d=0,f=0,p=0,h=s,m=s,g=0;g<l.length;g++){var v=l[g][0],b=l[g][1];switch(d||v===r||(u.start1=f,u.start2=p),v){case n:u.diffs[d++]=l[g],u.length2+=b.length,m=m.substring(0,p)+b+m.substring(p);break;case t:u.length1+=b.length,u.diffs[d++]=l[g],m=m.substring(0,p)+m.substring(p+b.length);break;case r:b.length<=2*this.Patch_Margin&&d&&l.length!=g+1?(u.diffs[d++]=l[g],u.length1+=b.length,u.length2+=b.length):b.length>=2*this.Patch_Margin&&d&&(this.patch_addContext_(u,h),c.push(u),u=new e.patch_obj,d=0,h=m,f=p)}v!==n&&(f+=b.length),v!==t&&(p+=b.length)}return d&&(this.patch_addContext_(u,h),c.push(u)),c},e.prototype.patch_deepCopy=function(t){for(var n=[],r=0;r<t.length;r++){var i=t[r],a=new e.patch_obj;a.diffs=[];for(var o=0;o<i.diffs.length;o++)a.diffs[o]=i.diffs[o].slice();a.start1=i.start1,a.start2=i.start2,a.length1=i.length1,a.length2=i.length2,n[r]=a}return n},e.prototype.patch_apply=function(e,i){if(0==e.length)return[i,[]];e=this.patch_deepCopy(e);var a=this.patch_addPadding(e);i=a+i+a,this.patch_splitMax(e);for(var o=0,s=[],l=0;l<e.length;l++){var c,u=e[l].start2+o,d=this.diff_text1(e[l].diffs),f=-1;if(d.length>this.Match_MaxBits?(c=this.match_main(i,d.substring(0,this.Match_MaxBits),u),-1!=c&&(f=this.match_main(i,d.substring(d.length-this.Match_MaxBits),u+d.length-this.Match_MaxBits),(-1==f||c>=f)&&(c=-1))):c=this.match_main(i,d,u),-1==c)s[l]=!1,o-=e[l].length2-e[l].length1;else{s[l]=!0,o=c-u;var p;if(p=-1==f?i.substring(c,c+d.length):i.substring(c,f+this.Match_MaxBits),d==p)i=i.substring(0,c)+this.diff_text2(e[l].diffs)+i.substring(c+d.length);else{var h=this.diff_main(d,p,!1);if(d.length>this.Match_MaxBits&&this.diff_levenshtein(h)/d.length>this.Patch_DeleteThreshold)s[l]=!1;else{this.diff_cleanupSemanticLossless(h);for(var m,g=0,v=0;v<e[l].diffs.length;v++){var b=e[l].diffs[v];b[0]!==r&&(m=this.diff_xIndex(h,g)),b[0]===n?i=i.substring(0,c+m)+b[1]+i.substring(c+m):b[0]===t&&(i=i.substring(0,c+m)+i.substring(c+this.diff_xIndex(h,g+b[1].length))),b[0]!==t&&(g+=b[1].length)}}}}}return i=i.substring(a.length,i.length-a.length),[i,s]},e.prototype.patch_addPadding=function(e){for(var t=this.Patch_Margin,n="",i=1;t>=i;i++)n+=String.fromCharCode(i);for(var i=0;i<e.length;i++)e[i].start1+=t,e[i].start2+=t;var a=e[0],o=a.diffs;if(0==o.length||o[0][0]!=r)o.unshift([r,n]),a.start1-=t,a.start2-=t,a.length1+=t,a.length2+=t;else if(t>o[0][1].length){var s=t-o[0][1].length;o[0][1]=n.substring(o[0][1].length)+o[0][1],a.start1-=s,a.start2-=s,a.length1+=s,a.length2+=s}if(a=e[e.length-1],o=a.diffs,0==o.length||o[o.length-1][0]!=r)o.push([r,n]),a.length1+=t,a.length2+=t;else if(t>o[o.length-1][1].length){var s=t-o[o.length-1][1].length;o[o.length-1][1]+=n.substring(0,s),a.length1+=s,a.length2+=s}return n},e.prototype.patch_splitMax=function(i){for(var a=this.Match_MaxBits,o=0;o<i.length;o++)if(!(i[o].length1<=a)){var s=i[o];i.splice(o--,1);for(var l=s.start1,c=s.start2,u="";0!==s.diffs.length;){var d=new e.patch_obj,f=!0;for(d.start1=l-u.length,d.start2=c-u.length,""!==u&&(d.length1=d.length2=u.length,d.diffs.push([r,u]));0!==s.diffs.length&&d.length1<a-this.Patch_Margin;){var p=s.diffs[0][0],h=s.diffs[0][1];p===n?(d.length2+=h.length,c+=h.length,d.diffs.push(s.diffs.shift()),f=!1):p===t&&1==d.diffs.length&&d.diffs[0][0]==r&&h.length>2*a?(d.length1+=h.length,l+=h.length,f=!1,d.diffs.push([p,h]),s.diffs.shift()):(h=h.substring(0,a-d.length1-this.Patch_Margin),d.length1+=h.length,l+=h.length,p===r?(d.length2+=h.length,c+=h.length):f=!1,d.diffs.push([p,h]),h==s.diffs[0][1]?s.diffs.shift():s.diffs[0][1]=s.diffs[0][1].substring(h.length))}u=this.diff_text2(d.diffs),u=u.substring(u.length-this.Patch_Margin);var m=this.diff_text1(s.diffs).substring(0,this.Patch_Margin);""!==m&&(d.length1+=m.length,d.length2+=m.length,0!==d.diffs.length&&d.diffs[d.diffs.length-1][0]===r?d.diffs[d.diffs.length-1][1]+=m:d.diffs.push([r,m])),f||i.splice(++o,0,d)}}},e.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")},e.prototype.patch_fromText=function(i){var a=[];if(!i)return a;for(var o=i.split("\n"),s=0,l=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;s<o.length;){var c=o[s].match(l);if(!c)throw new Error("Invalid patch string: "+o[s]);var u=new e.patch_obj;for(a.push(u),u.start1=parseInt(c[1],10),""===c[2]?(u.start1--,u.length1=1):"0"==c[2]?u.length1=0:(u.start1--,u.length1=parseInt(c[2],10)),u.start2=parseInt(c[3],10),""===c[4]?(u.start2--,u.length2=1):"0"==c[4]?u.length2=0:(u.start2--,u.length2=parseInt(c[4],10)),s++;s<o.length;){var d=o[s].charAt(0);try{var f=decodeURI(o[s].substring(1))}catch(p){throw new Error("Illegal escape in patch_fromText: "+f)}if("-"==d)u.diffs.push([t,f]);else if("+"==d)u.diffs.push([n,f]);else if(" "==d)u.diffs.push([r,f]);else{if("@"==d)break;if(""!==d)throw new Error('Invalid patch mode "'+d+'" in: '+f)}s++}}return a},e.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},e.patch_obj.prototype.toString=function(){var e,i;e=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1,i=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2;for(var a,o=["@@ -"+e+" +"+i+" @@\n"],s=0;s<this.diffs.length;s++){switch(this.diffs[s][0]){case n:a="+";break;case t:a="-";break;case r:a=" "}o[s+1]=a+encodeURI(this.diffs[s][1])+"\n"}return o.join("").replace(/%20/g," ")},this.diff_match_patch=e,this.DIFF_DELETE=t,this.DIFF_INSERT=n,this.DIFF_EQUAL=r,e}),function(e){"use strict";e("jquery_scrollTo",["jquery"],function(e){function t(t){return e.isFunction(t)||e.isPlainObject(t)?t:{top:t,left:t}}var n=e.scrollTo=function(t,n,r){return e(window).scrollTo(t,n,r)};return n.defaults={axis:"xy",duration:0,limit:!0},n.window=function(){return e(window)._scrollable()},e.fn._scrollable=function(){return this.map(function(){var t=this,n=!t.nodeName||-1!==e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"]);if(!n)return t;var r=(t.contentWindow||t).document||t.ownerDocument||t;return/webkit/i.test(navigator.userAgent)||"BackCompat"===r.compatMode?r.body:r.documentElement})},e.fn.scrollTo=function(r,i,a){return"object"==typeof i&&(a=i,i=0),"function"==typeof a&&(a={onAfter:a}),"max"===r&&(r=9e9),a=e.extend({},n.defaults,a),i=i||a.duration,a.queue=a.queue&&a.axis.length>1,a.queue&&(i/=2),a.offset=t(a.offset),a.over=t(a.over),this._scrollable().each(function(){function o(e){c.animate(d,i,a.easing,e&&function(){e.call(this,u,a)})}if(null!==r){var s,l=this,c=e(l),u=r,d={},f=c.is("html,body");switch(typeof u){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(u)){u=t(u);break}if(u=f?e(u):e(u,this),!u.length)return;case"object":(u.is||u.style)&&(s=(u=e(u)).offset())}var p=e.isFunction(a.offset)&&a.offset(l,u)||a.offset;e.each(a.axis.split(""),function(e,t){var r="x"===t?"Left":"Top",i=r.toLowerCase(),h="scroll"+r,m=l[h],g=n.max(l,t);if(s)d[h]=s[i]+(f?0:m-c.offset()[i]),a.margin&&(d[h]-=parseInt(u.css("margin"+r),10)||0,d[h]-=parseInt(u.css("border"+r+"Width"),10)||0),d[h]+=p[i]||0,a.over[i]&&(d[h]+=u["x"===t?"width":"height"]()*a.over[i]);else{var v=u[i];d[h]=v.slice&&"%"===v.slice(-1)?parseFloat(v)/100*g:v}a.limit&&/^\d+$/.test(d[h])&&(d[h]=d[h]<=0?0:Math.min(d[h],g)),!e&&a.queue&&(m!==d[h]&&o(a.onAfterFirst),delete d[h])}),o(a.onAfter)}}).end()},n.max=function(t,n){var r="x"===n?"Width":"Height",i="scroll"+r;if(!e(t).is("html,body"))return t[i]-e(t)[r.toLowerCase()]();var a="client"+r,o=t.ownerDocument.documentElement,s=t.ownerDocument.body;return Math.max(o[i],s[i])-Math.min(o[a],s[a])},n})}("function"==typeof define&&define.amd?define:function(e,t){"use strict";"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}),function(e){var t;return e.event.fix=function(e){return function(t){return t=e.apply(this,arguments),(0===t.type.indexOf("copy")||0===t.type.indexOf("paste"))&&(t.clipboardData=t.originalEvent.clipboardData),t}}(e.event.fix),t={callback:e.noop,matchType:/image.*/},e.fn.pasteImageReader=function(n){return"function"==typeof n&&(n={callback:n}),n=e.extend({},t,n),this.each(function(){var t,r;return r=this,t=e(this),t.bind("paste",function(e){var t,i;return i=!1,t=e.clipboardData,Array.prototype.forEach.call(t.types,function(e,a){var o,s;if(!i)return e.match(n.matchType)||t.items[a].type.match(n.matchType)?(o=t.items[a].getAsFile(),s=new FileReader,s.onload=function(e){return n.callback.call(r,{dataURL:e.target.result,event:e,file:o,name:o.name})},s.readAsDataURL(o),i=!0):void 0})})})}}(jQuery),define("jquery_pasteImage",["jquery"],function(e){return function(){var t;return t||e.$.fn.pasteImageReader}}(this)),function(){!function(e){return"function"==typeof define&&define.amd?define("atwho",["jquery"],e):e(window.jQuery)}(function(e){var t,n,r,i,a,o,s,l,c=[].slice;r=function(){function t(t){this.current_flag=null,this.controllers={},this.alias_maps={},this.$inputor=e(t),this.iframe=null,this.setIframe(),this.listen()}return t.prototype.setIframe=function(e){return e?(this.window=e.contentWindow,this.document=e.contentDocument||this.window.document,this.iframe=e):(this.document=document,this.window=window,this.iframe=null)},t.prototype.controller=function(e){var t,n,r,i;if(this.alias_maps[e])n=this.controllers[this.alias_maps[e]];else{i=this.controllers;for(r in i)if(t=i[r],r===e){n=t;break}}return n?n:this.controllers[this.current_flag]},t.prototype.set_context_for=function(e){return this.current_flag=e,this},t.prototype.reg=function(e,t){var n,r;return n=(r=this.controllers)[e]||(r[e]=new i(this,e)),t.alias&&(this.alias_maps[t.alias]=e),n.init(t),this},t.prototype.listen=function(){return this.$inputor.on("keyup.atwhoInner",function(e){return function(t){return e.on_keyup(t)}}(this)).on("keydown.atwhoInner",function(e){return function(t){return e.on_keydown(t)}}(this)).on("scroll.atwhoInner",function(e){return function(t){var n;return null!=(n=e.controller())?n.view.hide(t):void 0}}(this)).on("blur.atwhoInner",function(e){return function(t){var n;return(n=e.controller())?n.view.hide(t,n.get_opt("display_timeout")):void 0}}(this)).on("click.atwhoInner",function(e){return function(t){var n;return null!=(n=e.controller())?n.view.hide(t):void 0}}(this))},t.prototype.shutdown=function(){var e,t,n;n=this.controllers;for(t in n)e=n[t],e.destroy(),delete this.controllers[t];return this.$inputor.off(".atwhoInner")},t.prototype.dispatch=function(){return e.map(this.controllers,function(e){return function(t){var n;return(n=t.get_opt("delay"))?(clearTimeout(e.delayedCallback),e.delayedCallback=setTimeout(function(){return t.look_up()?e.set_context_for(t.at):void 0},n)):t.look_up()?e.set_context_for(t.at):void 0}}(this))},t.prototype.on_keyup=function(t){var n;switch(t.keyCode){case o.ESC:t.preventDefault(),null!=(n=this.controller())&&n.view.hide();break;case o.DOWN:case o.UP:case o.CTRL:e.noop();break;case o.P:case o.N:t.ctrlKey||this.dispatch();break;default:
this.dispatch()}},t.prototype.on_keydown=function(t){var n,r;if(n=null!=(r=this.controller())?r.view:void 0,n&&n.visible())switch(t.keyCode){case o.ESC:t.preventDefault(),n.hide(t);break;case o.UP:t.preventDefault(),n.prev();break;case o.DOWN:t.preventDefault(),n.next();break;case o.P:if(!t.ctrlKey)return;t.preventDefault(),n.prev();break;case o.N:if(!t.ctrlKey)return;t.preventDefault(),n.next();break;case o.TAB:case o.ENTER:if(!n.visible())return;t.preventDefault(),n.choose(t);break;default:e.noop()}},t}(),i=function(){function n(n,r){this.app=n,this.at=r,this.$inputor=this.app.$inputor,this.id=this.$inputor[0].id||this.uid(),this.setting=null,this.query=null,this.pos=0,this.cur_rect=null,this.range=null,t.append(this.$el=e("<div id='atwho-ground-"+this.id+"'></div>")),this.model=new s(this),this.view=new l(this)}return n.prototype.uid=function(){return(Math.random().toString(16)+"000000000").substr(2,8)+(new Date).getTime()},n.prototype.init=function(t){return this.setting=e.extend({},this.setting||e.fn.atwho["default"],t),this.view.init(),this.model.reload(this.setting.data)},n.prototype.destroy=function(){return this.trigger("beforeDestroy"),this.model.destroy(),this.view.destroy(),this.$el.remove()},n.prototype.call_default=function(){var t,n,r;r=arguments[0],t=2<=arguments.length?c.call(arguments,1):[];try{return a[r].apply(this,t)}catch(i){return n=i,e.error(""+n+" Or maybe At.js doesn't have function "+r)}},n.prototype.trigger=function(e,t){var n,r;return null==t&&(t=[]),t.push(this),n=this.get_opt("alias"),r=n?""+e+"-"+n+".atwho":""+e+".atwho",this.$inputor.trigger(r,t)},n.prototype.callbacks=function(e){return this.get_opt("callbacks")[e]||a[e]},n.prototype.get_opt=function(e,t){var n;try{return this.setting[e]}catch(r){return n=r,null}},n.prototype.content=function(){return this.$inputor.is("textarea, input")?this.$inputor.val():this.$inputor.text()},n.prototype.catch_query=function(){var e,t,n,r,i,a;return t=this.content(),e=this.$inputor.caret("pos",{iframe:this.app.iframe}),a=t.slice(0,e),r=this.callbacks("matcher").call(this,this.at,a,this.get_opt("start_with_space")),"string"==typeof r&&r.length<=this.get_opt("max_len",20)?(i=e-r.length,n=i+r.length,this.pos=i,r={text:r,head_pos:i,end_pos:n},this.trigger("matched",[this.at,r.text])):(r=null,this.view.hide()),this.query=r},n.prototype.rect=function(){var e,t;if(e=this.$inputor.caret("offset",this.pos-1,{iframe:this.app.iframe}))return"true"===this.$inputor.attr("contentEditable")&&(e=this.cur_rect||(this.cur_rect=e)||e),t=this.app.document.selection?0:2,{left:e.left,top:e.top,bottom:e.top+e.height+t}},n.prototype.reset_rect=function(){return"true"===this.$inputor.attr("contentEditable")?this.cur_rect=null:void 0},n.prototype.mark_range=function(){return"true"===this.$inputor.attr("contentEditable")&&(this.app.window.getSelection&&(this.range=this.app.window.getSelection().getRangeAt(0)),this.app.document.selection)?this.ie8_range=this.app.document.selection.createRange():void 0},n.prototype.insert_content_for=function(t){var n,r,i;return r=t.data("value"),i=this.get_opt("insert_tpl"),this.$inputor.is("textarea, input")||!i?r:(n=e.extend({},t.data("item-data"),{"atwho-data-value":r,"atwho-at":this.at}),this.callbacks("tpl_eval").call(this,i,n))},n.prototype.insert=function(t,n){var r,i,a,o,s,l,c,u,d;return r=this.$inputor,d=this.callbacks("inserting_wrapper").call(this,r,t,this.get_opt("suffix")),r.is("textarea, input")?(l=r.val(),c=l.slice(0,Math.max(this.query.head_pos-this.at.length,0)),u=""+c+d+l.slice(this.query.end_pos||0),r.val(u),r.caret("pos",c.length+d.length,{iframe:this.app.iframe})):(o=this.range)?(a=o.startOffset-(this.query.end_pos-this.query.head_pos)-this.at.length,o.setStart(o.endContainer,Math.max(a,0)),o.setEnd(o.endContainer,o.endOffset),o.deleteContents(),i=e(d,this.app.document)[0],o.insertNode(i),o.setEndAfter(i),o.collapse(!1),s=this.app.window.getSelection(),s.removeAllRanges(),s.addRange(o)):(o=this.ie8_range)&&(o.moveStart("character",this.query.end_pos-this.query.head_pos-this.at.length),o.pasteHTML(d),o.collapse(!1),o.select()),r.is(":focus")||r.focus(),r.change()},n.prototype.render_view=function(e){var t;return t=this.get_opt("search_key"),e=this.callbacks("sorter").call(this,this.query.text,e.slice(0,1001),t),this.view.render(e.slice(0,this.get_opt("limit")))},n.prototype.look_up=function(){var t,n;if(t=this.catch_query())return n=function(e){return e&&e.length>0?this.render_view(e):this.view.hide()},this.model.query(t.text,e.proxy(n,this)),t},n}(),s=function(){function t(e){this.context=e,this.at=this.context.at,this.storage=this.context.$inputor}return t.prototype.destroy=function(){return this.storage.data(this.at,null)},t.prototype.saved=function(){return this.fetch()>0},t.prototype.query=function(e,t){var n,r,i;return n=this.fetch(),r=this.context.get_opt("search_key"),n=this.context.callbacks("filter").call(this.context,e,n,r)||[],i=this.context.callbacks("remote_filter"),n.length>0||!i&&0===n.length?t(n):i.call(this.context,e,t)},t.prototype.fetch=function(){return this.storage.data(this.at)||[]},t.prototype.save=function(e){return this.storage.data(this.at,this.context.callbacks("before_save").call(this.context,e||[]))},t.prototype.load=function(e){return!this.saved()&&e?this._load(e):void 0},t.prototype.reload=function(e){return this._load(e)},t.prototype._load=function(t){return"string"==typeof t?e.ajax(t,{dataType:"json"}).done(function(e){return function(t){return e.save(t)}}(this)):this.save(t)},t}(),l=function(){function t(t){this.context=t,this.$el=e("<div class='atwho-view'><ul class='atwho-view-ul'></ul></div>"),this.timeout_id=null,this.context.$el.append(this.$el),this.bind_event()}return t.prototype.init=function(){var e;return e=this.context.get_opt("alias")||this.context.at.charCodeAt(0),this.$el.attr({id:"at-view-"+e})},t.prototype.destroy=function(){return this.$el.remove()},t.prototype.bind_event=function(){var t;return t=this.$el.find("ul"),t.on("mouseenter.atwho-view","li",function(n){return t.find(".cur").removeClass("cur"),e(n.currentTarget).addClass("cur")}).on("click",function(e){return function(t){return e.choose(t),t.preventDefault()}}(this))},t.prototype.visible=function(){return this.$el.is(":visible")},t.prototype.choose=function(e){var t,n;return(t=this.$el.find(".cur")).length&&(n=this.context.insert_content_for(t),this.context.insert(this.context.callbacks("before_insert").call(this.context,n,t),t),this.context.trigger("inserted",[t,e]),this.hide(e)),this.context.get_opt("hide_without_suffix")?this.stop_showing=!0:void 0},t.prototype.reposition=function(t){var n,r;return t.bottom+this.$el.height()-e(window).scrollTop()>e(window).height()&&(t.bottom=t.top-this.$el.height()),n={left:t.left,top:t.bottom},null!=(r=this.context.callbacks("before_reposition"))&&r.call(this.context,n),this.$el.offset(n),this.context.trigger("reposition",[n])},t.prototype.next=function(){var e,t;return e=this.$el.find(".cur").removeClass("cur"),t=e.next(),t.length||(t=this.$el.find("li:first")),t.addClass("cur")},t.prototype.prev=function(){var e,t;return e=this.$el.find(".cur").removeClass("cur"),t=e.prev(),t.length||(t=this.$el.find("li:last")),t.addClass("cur")},t.prototype.show=function(){var e;return this.stop_showing?void(this.stop_showing=!1):(this.context.mark_range(),this.visible()||(this.$el.show(),this.context.trigger("shown")),(e=this.context.rect())?this.reposition(e):void 0)},t.prototype.hide=function(e,t){var n;if(this.visible())return isNaN(t)?(this.context.reset_rect(),this.$el.hide(),this.context.trigger("hidden",[e])):(n=function(e){return function(){return e.hide()}}(this),clearTimeout(this.timeout_id),this.timeout_id=setTimeout(n,t))},t.prototype.render=function(t){var n,r,i,a,o,s,l;if(!(e.isArray(t)&&t.length>0))return void this.hide();for(this.$el.find("ul").empty(),r=this.$el.find("ul"),o=this.context.get_opt("tpl"),s=0,l=t.length;l>s;s++)i=t[s],i=e.extend({},i,{"atwho-at":this.context.at}),a=this.context.callbacks("tpl_eval").call(this.context,o,i),n=e(this.context.callbacks("highlighter").call(this.context,a,this.context.query.text)),n.data("item-data",i),r.append(n);return this.show(),this.context.get_opt("highlight_first")?r.find("li:first").addClass("cur"):void 0},t}(),o={DOWN:40,UP:38,ESC:27,TAB:9,ENTER:13,CTRL:17,P:80,N:78},a={before_save:function(t){var n,r,i,a;if(!e.isArray(t))return t;for(a=[],r=0,i=t.length;i>r;r++)n=t[r],e.isPlainObject(n)?a.push(n):a.push({name:n});return a},matcher:function(e,t,n){var r,i;return e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),n&&(e="(?:^|\\s)"+e),i=new RegExp(e+"([A-Za-z0-9_+-]*)$|"+e+"([^\\x00-\\xff]*)$","gi"),r=i.exec(t),r?r[2]||r[1]:null},filter:function(e,t,n){var r,i,a,o;for(o=[],i=0,a=t.length;a>i;i++)r=t[i],~r[n].toLowerCase().indexOf(e.toLowerCase())&&o.push(r);return o},remote_filter:null,sorter:function(e,t,n){var r,i,a,o;if(!e)return t;for(o=[],i=0,a=t.length;a>i;i++)r=t[i],r.atwho_order=r[n].toLowerCase().indexOf(e.toLowerCase()),r.atwho_order>-1&&o.push(r);return o.sort(function(e,t){return e.atwho_order-t.atwho_order})},tpl_eval:function(e,t){var n;try{return e.replace(/\$\{([^\}]*)\}/g,function(e,n,r){return t[n]})}catch(r){return n=r,""}},highlighter:function(e,t){var n;return t?(n=new RegExp(">\\s*(\\w*?)("+t.replace("+","\\+")+")(\\w*)\\s*<","ig"),e.replace(n,function(e,t,n,r){return"> "+t+"<strong>"+n+"</strong>"+r+" <"})):e},before_insert:function(e,t){return e},inserting_wrapper:function(e,t,n){var r,i;return r=""===n?n:n||" ",e.is("textarea, input")?""+t+r:"true"===e.attr("contentEditable")?(r=""===n?n:n||"&nbsp;",/firefox/i.test(navigator.userAgent)?i="<span>"+t+r+"</span>":(n="<span contenteditable='false'>"+r+"<span>",i="<span contenteditable='false'>"+t+n+"</span>"),this.app.document.selection&&(i="<span contenteditable='true'>"+t+"</span>"),i):void 0}},n={load:function(e,t){var n;return(n=this.controller(e))?n.model.load(t):void 0},setIframe:function(e){return this.setIframe(e),null},run:function(){return this.dispatch()},destroy:function(){return this.shutdown(),this.$inputor.data("atwho",null)}},t=e("<div id='atwho-container'></div>"),e.fn.atwho=function(i){var a,o;return o=arguments,e("body").append(t),a=null,this.filter("textarea, input, [contenteditable=true]").each(function(){var t,s;return(s=(t=e(this)).data("atwho"))||t.data("atwho",s=new r(this)),"object"!=typeof i&&i?n[i]&&s?a=n[i].apply(s,Array.prototype.slice.call(o,1)):e.error("Method "+i+" does not exist on jQuery.caret"):s.reg(i.at,i)}),a||this},e.fn.atwho["default"]={at:void 0,alias:void 0,data:null,tpl:"<li data-value='${atwho-at}${name}'>${name}</li>",insert_tpl:"<span id='${id}'>${atwho-data-value}</span>",callbacks:a,search_key:"name",suffix:void 0,hide_without_suffix:!1,start_with_space:!0,highlight_first:!0,limit:5,max_len:20,display_timeout:300,delay:null}})}.call(this),function(){!function(e){return"function"==typeof define&&define.amd?define("caret",["jquery"],e):e(window.jQuery)}(function(e){"use strict";var t,n,r,i,a,o,s,l,c,u,d;return u="caret",t=function(){function t(e){this.$inputor=e,this.domInputor=this.$inputor[0]}return t.prototype.setPos=function(){return this.domInputor},t.prototype.getIEPosition=function(){return e.noop()},t.prototype.getPosition=function(){return e.noop()},t.prototype.getOldIEPos=function(){var e,t;return t=s.selection.createRange(),e=s.body.createTextRange(),e.moveToElementText(this.domInputor),e.setEndPoint("EndToEnd",t),e.text.length},t.prototype.getPos=function(){var e,t,n;return(n=this.range())?(e=n.cloneRange(),e.selectNodeContents(this.domInputor),e.setEnd(n.endContainer,n.endOffset),t=e.toString().length,e.detach(),t):s.selection?this.getOldIEPos():void 0},t.prototype.getOldIEOffset=function(){var e,t;return e=s.selection.createRange().duplicate(),e.moveStart("character",-1),t=e.getBoundingClientRect(),{height:t.bottom-t.top,left:t.left,top:t.top}},t.prototype.getOffset=function(){var t,n,r,i;if(c.getSelection&&(r=this.range())){if(r.endOffset-1<0)return null;t=r.cloneRange(),t.setStart(r.endContainer,r.endOffset-1),t.setEnd(r.endContainer,r.endOffset),i=t.getBoundingClientRect(),n={height:i.height,left:i.left+i.width,top:i.top},t.detach()}else s.selection&&(n=this.getOldIEOffset());return n&&!l&&(n.top+=e(c).scrollTop(),n.left+=e(c).scrollLeft()),n},t.prototype.range=function(){var e;return c.getSelection?(e=c.getSelection(),e.rangeCount>0?e.getRangeAt(0):null):void 0},t}(),n=function(){function t(e){this.$inputor=e,this.domInputor=this.$inputor[0]}return t.prototype.getIEPos=function(){var e,t,n,r,i,a,o;return t=this.domInputor,a=s.selection.createRange(),i=0,a&&a.parentElement()===t&&(r=t.value.replace(/\r\n/g,"\n"),n=r.length,o=t.createTextRange(),o.moveToBookmark(a.getBookmark()),e=t.createTextRange(),e.collapse(!1),i=o.compareEndPoints("StartToEnd",e)>-1?n:-o.moveStart("character",-n)),i},t.prototype.getPos=function(){return s.selection?this.getIEPos():this.domInputor.selectionStart},t.prototype.setPos=function(e){var t,n;return t=this.domInputor,s.selection?(n=t.createTextRange(),n.move("character",e),n.select()):t.setSelectionRange&&t.setSelectionRange(e,e),t},t.prototype.getIEOffset=function(e){var t,n,r,i;return n=this.domInputor.createTextRange(),e||(e=this.getPos()),n.move("character",e),r=n.boundingLeft,i=n.boundingTop,t=n.boundingHeight,{left:r,top:i,height:t}},t.prototype.getOffset=function(t){var n,r,i;return n=this.$inputor,s.selection?(r=this.getIEOffset(t),r.top+=e(c).scrollTop()+n.scrollTop(),r.left+=e(c).scrollLeft()+n.scrollLeft(),r):(r=n.offset(),i=this.getPosition(t),r={left:r.left+i.left-n.scrollLeft(),top:r.top+i.top-n.scrollTop(),height:i.height})},t.prototype.getPosition=function(e){var t,n,i,a,o,s,l;return t=this.$inputor,a=function(e){return e.replace(/</g,"&lt").replace(/>/g,"&gt").replace(/`/g,"&#96").replace(/"/g,"&quot").replace(/\r\n|\r|\n/g,"<br />")},void 0===e&&(e=this.getPos()),l=t.val().slice(0,e),i=t.val().slice(e),o="<span style='position: relative; display: inline;'>"+a(l)+"</span>",o+="<span id='caret' style='position: relative; display: inline;'>|</span>",o+="<span style='position: relative; display: inline;'>"+a(i)+"</span>",s=new r(t),n=s.create(o).rect()},t.prototype.getIEPosition=function(e){var t,n,r,i,a;return r=this.getIEOffset(e),n=this.$inputor.offset(),i=r.left-n.left,a=r.top-n.top,t=r.height,{left:i,top:a,height:t}},t}(),r=function(){function t(e){this.$inputor=e}return t.prototype.css_attr=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopWidth","boxSizing","fontFamily","fontSize","fontWeight","height","letterSpacing","lineHeight","marginBottom","marginLeft","marginRight","marginTop","outlineWidth","overflow","overflowX","overflowY","paddingBottom","paddingLeft","paddingRight","paddingTop","textAlign","textOverflow","textTransform","whiteSpace","wordBreak","wordWrap"],t.prototype.mirrorCss=function(){var t,n=this;return t={position:"absolute",left:-9999,top:0,zIndex:-2e4},"TEXTAREA"===this.$inputor.prop("tagName")&&this.css_attr.push("width"),e.each(this.css_attr,function(e,r){return t[r]=n.$inputor.css(r)}),t},t.prototype.create=function(t){return this.$mirror=e("<div></div>"),this.$mirror.css(this.mirrorCss()),this.$mirror.html(t),this.$inputor.after(this.$mirror),this},t.prototype.rect=function(){var e,t,n;return e=this.$mirror.find("#caret"),t=e.position(),n={left:t.left,top:t.top,height:e.height()},this.$mirror.remove(),n},t}(),i={contentEditable:function(e){return!(!e[0].contentEditable||"true"!==e[0].contentEditable)}},o={pos:function(e){return e||0===e?this.setPos(e):this.getPos()},position:function(e){return s.selection?this.getIEPosition(e):this.getPosition(e)},offset:function(t){var n,r;return r=this.getOffset(t),l&&(n=e(l).offset(),r.top+=n.top,r.left+=n.left),r}},s=null,c=null,l=null,d=function(e){var t;return(t=null!=e?e.iframe:void 0)?(l=t,c=t.contentWindow,s=t.contentDocument||c.document):(l=void 0,c=window,s=document)},a=function(e){var t;s=e[0].ownerDocument,c=s.defaultView||s.parentWindow;try{return l=c.frameElement}catch(n){t=n}},e.fn.caret=function(r,a,s){var l;return o[r]?(e.isPlainObject(a)?(d(a),a=void 0):d(s),l=i.contentEditable(this)?new t(this):new n(this),o[r].apply(l,[a])):e.error("Method "+r+" does not exist on jQuery.caret")},e.fn.caret.EditableCaret=t,e.fn.caret.InputCaret=n,e.fn.caret.Utils=i,e.fn.caret.apis=o})}.call(this),define("Editor",["main","sfModal","template","highLight","highlightjs","pagedown_editor","tabIndent","diff_match_patch","jquery_scrollTo","jquery_pasteImage","atwho","caret","fileUpload"],function(e,t,n,r,i,a,o,s){var l,c,u,d,f,p;return l=function(e){e=$.extend({toolbar:l.toolbar,statusbar:!0,status:l.statusbar},e),this.options=e,this.converter=null,this.isBig=!1,this.isLive=!1,this.originHeight=420},c=function(e){var t,n;return t=null!=(n=$.cookie("editor-code-detect-disabled"))?n:0,t>0?$(".code-detect").addClass("hide"):(e.find("p").each(function(e){var t,n;return t=$(this),n=i.highlightAuto(t.text()),n.r>2&&n.language?($(".code-detect").removeClass("hide"),t.addClass("bg-danger")):$(".code-detect").addClass("hide")}),e.find(".bg-danger").length>0?$(".code-detect").removeClass("hide"):void 0)},p=function(e){var t,n;n=function(){$(".editor__menu--zen").addClass("editor__menu--unzen").removeClass("editor__menu--zen"),$(".editor").addClass("editor_fullscreen"),$("body").addClass("noscroll"),$(".editor__resize").hide(),$(".wmd-input").css("height","100%"),e.isBig=!0},t=function(){$(".editor__resize").show(),$(".editor__menu--unzen").addClass("editor__menu--zen").removeClass("editor__menu--unzen"),$(".editor").removeClass("editor_fullscreen"),$("body").removeClass("noscroll"),e.isBig=!1},$(".editor__menu--zen").length?n():t&&t()},f=function(e){e.mode="preview",$(".editor").removeClass("liveMode editMode").addClass("previewMode"),$(".editor-mode a").removeClass("muted"),$(".editor__menu--preview").addClass("muted"),r($("#wmd-preview"))},u=function(e){e.mode="edit",$(".editor").removeClass("liveMode previewMode").addClass("editMode"),$(".editor-mode a").removeClass("muted"),$(".editor__menu--edit").addClass("muted")},d=function(e){e.mode="live",$(".editor").removeClass("editMode previewMode").addClass("liveMode"),$(".editor-mode a").removeClass("muted"),$(".editor__menu--live").addClass("muted"),r($("#wmd-preview"))},l.prototype.getVal=function(){return $(".wmd-input").val()},l.prototype.setVal=function(e){var t;return t=$(".wmd-input").val(e),this.pagedownEditor.refreshPreview(),t},l.prototype.change=function(e){e&&$(".wmd-input").on("input",function(){e()})},l.prototype.render=function(n,i,l){var u,d,f,p,h,m,g,v,b,y,_,w,x,k,C,S,T,M,E,L,I,N,A,B,O,z,D,j;if(A=this,!this._rendered||this._rendered!==n){if($("body").on("click",".code-detect",function(){return t({title:"使用代码格式化改进排版",modalSize:"modal-lg",content:'<video style="width: 100%;" autoplay loop src="'+e.staticUrl+'/global/video/editor-code-func.mp4" autoplay poster="posterimage.jpg"></video>',closeText:"不再提示",doneText:"我已了解",closeClass:"close-btn btn-default",closeFn:function(){return $.cookie("editor-code-detect-disabled",1,{expires:365}),A.pagedownEditor.refreshPreview(),$(".code-detect").addClass("hide")}})}),document.cookie.indexOf("typemode")>-1)return void $(n).addClass("wmd-input");i=i||"live",$(n).removeClass("hidden hide").addClass("mono form-control wmd-input"),$(n).before('<div class="editor-toolbar" id="wmd-button-bar"><ul class="editor-mode"></ul></div>'),$(n).wrap('<div class="wmd"></div>'),$(".wmd").after("<div class=\"editor-line\"></div><div class=\"editor-preview\"><div class='fmt' id='wmd-preview'></div></div>"),$(".wmd").append("<div style='position: absolute;z-index: 100;top: 31px;right: 0;cursor: pointer;' class=\"alert alert-info code-detect hide\" role=\"alert\">使用代码格式化改进排版<span style='margin-left: 10px;'>✕</span> </div>"),o.config.tab="    ",o.render($(n)[0]),$(".wmd-input").pasteImageReader(function(e){_(e.name,e.dataURL)}),_=function(e,r){var i,a,o,s,l;return s=$(".wmd-input").val(),a=$(".wmd-input")[0].selectionStart,$(".wmd-input").val(s.slice(0,a)+"\n![图片上传中...]\n"+s.slice(a)),l="image/png",o={type:"POST"},o.url="/img/upload/image?enc=base64",o.name="image",i="xhrupload-"+parseInt(Math.random()*(2<<16)),o.contentType="multipart/form-data; boundary="+i,o.data="--"+i+'\ncontent-disposition: form-data; enc="base64"; name="'+o.name+'"; filename="'+encodeURIComponent(e)+'.base64"\nContent-Transfer-Encoding: base64\nContent-Type: '+l+"\n\n"+r.slice(22)+"\n\n--"+i+"--",$.ajax(o).success(function(e){var r,i,o,l;l=e[0],r=e[1],i="clipboard.png",l?(t(r),$(n).val(s.slice(0,a)+s.slice(a+13))):(o="\n!["+i+"]("+r+")\n",s=$(n).val(),$(n).val(s.slice(0,a)+o+s.slice(a+13)),A.pagedownEditor.refreshPreview(),$(".wmd-input")[0].setSelectionRange(a+1,a+1))}).error(function(e){return 413===e.status?$(n).val(s.slice(0,a)+s.slice(a+13)):void 0})},M=function(e){return $(".editor").addClass("dragging")},S=function(e){return $(".editor").removeClass("dragging")},T=function(e){return e.originalEvent.dataTransfer.dropEffect="copy"},C=function(e){var t,n,r,i,a,o;for($(".editor").removeClass("dragging"),a=e.originalEvent.dataTransfer.files,o=[],r=0,i=a.length;i>r;r++)t=a[r],window.FileReader?(e.preventDefault(),e.stopPropagation(),n=new FileReader,n.onload=function(e){return _(t.name,e.currentTarget.result)},o.push(n.readAsDataURL(t))):o.push(void 0);return o},$(".wmd-input").on({"dragenter.dragevent":M,"dragleave.dragevent":S,"dragover.dragevent":T,"drop.dragevent":C}),$(n).atwho({at:"@",callbacks:{remote_filter:function(e,t){var n,r;if(r={q:e},!e&&$("#answerIt").length)n=$("#answerIt").data("id"),r={questionId:n};else if(!e)return;$.getJSON("/api/users/search",r,function(e){e.status||t(e.data)})},tpl_eval:function(e,t){return'<li data-value="@'+t.name+'">'+(t.avatarUrl?'<img class="avatar-24 mr10" src="'+t.avatarUrl+'" />':"")+t.name+" &nbsp; <small>@"+t.slug+"</small></li>"}}}),this.element=$(n)[0],E=this.options,h=new a.getSanitizingConverter,a.Extra.init(h),g=new a.Editor(h),g.run(n.slice(1)),this.converter=h,this.pagedownEditor=g,m=new s,x="@mark"+Math.ceil(1e8*Math.random())+"@",I=$("#wmd-preview"),w="",B='<span class="diff" />',h.hook("afterParse",function(e){var t,n,r,i,a,o,s,l,c,u,d,f,p,h;if(n=m.diff_main(w,e),w=e,n.length>0){for(p=[],s=x,i=0;i<n.length;)t=n[i],c=t[0],h=t[1],f=h.lastIndexOf("<"),r=h.lastIndexOf(">"),0!==c?(f>=0&&f>r?c>0?p.push(h.substring(0,f)+s+h.substring(f)):(o=p[p.length-1],a=o.lastIndexOf("<"),p[p.length-1]=o.substring(0,a)+s+o.substring(a)):c>0?p.push(h+s):p.push(s),s=""):p.push(h),i++;e=p.join(""),s||(u=e.indexOf(x),d=e.substring(0,u),l=e.substr(u+x.length),f=d.lastIndexOf("<"),r=d.lastIndexOf(">"),e=f>=0&&f>r?d.substring(0,f)+B+d.substring(f)+l:d+B+l)}return e}),j=void 0,p=null,g.hooks.chain("onPreviewRefresh",function(){var e,t,n,i,a;($("#wmd-preview pre").length||-1!==$("#wmd-preview").text().indexOf("$$"))&&r(I),t=$(".diff",I),a=!1,j&&clearTimeout(j),e=$(".diff",I).parent(),e.is(I)||(e.css("background-color","#D9EDF7"),j=setTimeout(function(){e.css("background-color","transparent")},4500)),t.length>0&&(i=t.position(),n=t.parent().css("line-height"),n=n?parseInt(n):0,(i.top<0||i.top>$(".editor-preview").height()-n)&&($(".editor-preview").scrollTo(t),a=!0)),p&&clearTimeout(p),p=setTimeout(function(){return c(I)},200)}),E.toolbar!==!1&&this.createToolbar(),N='<a class="editor__resize" href="javascript:void(0);">调整高度</a>',$(".editor").after(N),z=void 0,b=0,y=32,D=void 0,O=function(e){return D=$(".wmd-input"),b=k(e).y,z=D.height()-b,D.css("opacity",.3),$(document).mousemove(L).mouseup(v),!1},L=function(e){var t,n;return n=k(e).y,t=z+n,b>=n&&(t-=5),b=n,t=Math.max(y,t),D.height(t+"px"),y>t&&v(e),!1},v=function(){$(document).unbind("mousemove",L).unbind("mouseup",v),D.css({opacity:1}),D.focus(),D=null,z=null,b=0},k=function(e){return{x:e.clientX+document.documentElement.scrollLeft,y:e.clientY+document.documentElement.scrollTop}},$(".editor__resize").on("mousedown",O),$(window).scroll(function(){var e,t,n,r;A.isBig||(r=$(".editor").width(),n=$(".editor").offset().top,t=$(this).scrollTop(),e=62+$(".editor-help .tab-content").height(),t>=n?($(".editor-help-content.active").removeClass("active"),$(".editor__menu").css({position:"fixed",top:0,"z-index":1e3,width:r,"border-bottom":"1px solid #CCC"}),$(".editor-help").css({position:"fixed",top:"31px","z-index":1e3,width:r})):$(".editor__menu, .editor-help").css({position:"static",width:"auto","border-bottom":"none"}))}),this._rendered=n,"live"===i?$(".editor__menu--live").trigger("click"):"edit"===i?$(".editor__menu--edit").trigger("click"):"preview"===i&&$(".editor__menu--preview").trigger("click"),window.localStorage&&(u="autoSaveContent_"+location.pathname+location.search,f="autoSaveTitle_"+location.pathname+location.search,d="autoSaveTags_"+location.pathname+location.search,localStorage[u]&&$(n).val(localStorage[u]),localStorage[f]&&$("#myTitle").val(localStorage[f])),l&&l(A)}},l.prototype.createToolbar=function(e){var t,n,r,i,a,o;r=this,a='<li class="pull-right"><a class="editor__menu--preview" title="预览模式"></a></li><li class="pull-right"><a class="editor__menu--live" title="实况模式"></a></li><li class="pull-right"><a class="editor__menu--edit" title="编辑模式"></a></li><li class="pull-right editor__menu--divider"></li><li id="wmd-zen-button" class="pull-right" title="全屏"><a class="editor__menu--zen"></a></li>',i=$(a),$(".editor-mode").append(i),$(".editor").delegate(".editor__menu--edit","click",function(){$(this).hasClass("muted")||u(r)}),$(".editor").delegate(".editor__menu--preview","click",function(){$(this).hasClass("muted")||f(r)}),$(".editor").delegate(".editor__menu--live","click",function(){$(this).hasClass("muted")||d(r)}),$("#wmd-zen-button").find("a").removeClass("editor__menu--bold").addClass("editor__menu--zen"),$("#wmd-zen-button").click(function(){p(r)}),t='<title>Markdown 语法指南</title><link rel="stylesheet" href="'+$('head link[rel="stylesheet"]').attr("href")+'"><script src="http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script><script src="http://cdn.bootcss.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>',n=t+'<body style="background-color:#FAF2CC"><div class="editor-help"><ul class="editor-help-tabs nav nav-tabs" id="editorHelpTab" role="tablist">    <li rel="heading"><a href="#editorHelpHeading" role="tab" data-toggle="tab">标题 / 粗斜体</a></li>    <li rel="code"><a href="#editorHelpCode" role="tab" data-toggle="tag">代码</a></li>    <li rel="link"><a href="#editorHelpLink" role="tab" data-toggle="tag">链接</a></li>    <li rel="image"><a href="#editorHelpImage" role="tab" data-toggle="tag">图片</a></li>    <li rel="split"><a href="#editorHelpSplit" role="tab" data-toggle="tag">换行 / 分隔符</a></li>    <li rel="list"><a href="#editorHelpList" role="tab" data-toggle="tag">列表 / 引用</li></a>    <li class="pull-right"><a href="http://segmentfault.com/markdown" target="_blank">高级技巧</a></li>    </ul><div class="tab-content"><!-- 粗斜体、标题 --><div class="editor-help-content tab-pane fade" id="editorHelpHeading" rel="heading"><p>文章内容较多时，可以用标题分段：</p><pre>## 大标题 ##\n### 小标题 ###</pre><p>粗体 / 斜体</p><pre>*斜体文本*    _斜体文本_\n**粗体文本**    __粗体文本__\n***粗斜体文本***    ___粗斜体文本___</pre></div><!-- end 粗斜体、标题 --><!-- 代码 --><div class="editor-help-content tab-pane fade" id="editorHelpCode" rel="code"><p>如果你只想高亮语句中的某个函数名或关键字，可以使用 <code>`function_name()`</code> 实现</p><p>通常我们会根据您的代码片段适配合适的高亮方法，但你也可以用 <code>```</code> 包裹一段代码，并指定一种语言</p><pre>```<strong>javascript</strong>\n$(document).ready(function () {\n    alert(\'hello world\');\n});\n```</pre><p>支持的语言：<code>actionscript, apache, bash, clojure, cmake, coffeescript, cpp, cs, css, d, delphi, django, erlang, go, haskell, html, http, ini, java, javascript, json, lisp, lua, markdown, matlab, nginx, objectivec, perl, php, python, r, ruby, scala, smalltalk, sql, tex, vbscript, xml</code></p><p>您也可以使用 4 空格缩进，再贴上代码，实现相同的的效果</p><pre><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i>def g(x):\n<i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i>yield from range(x, 0, -1)\n<i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i>yield from range(x)</pre></div><!-- end 代码 --><!-- 链接 --><div class="editor-help-content tab-pane fade" rel="link" id="editorHelpLink"><p>常用链接方法</p><pre>文字链接 [链接名称](http://链接网址)\n网址链接 &lt;http://链接网址&gt;</pre><p>高级链接技巧</p><pre>这个链接用 1 作为网址变量 [Google][1].\n这个链接用 yahoo 作为网址变量 [Yahoo!][yahoo].\n然后在文档的结尾为变量赋值（网址）\n\n<i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i>[1]: http://www.google.com/\n<i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i>[yahoo]: http://www.yahoo.com/</pre></div><!-- end 链接 --><!-- 图片 --><div class="editor-help-content tab-pane fade" id="editorHelpImage" rel="image"><p>跟链接的方法区别在于前面加了个感叹号 <code>!</code>，这样是不是觉得好记多了呢？</p><pre>![图片名称](http://图片网址)</pre><p>当然，你也可以像网址那样对图片网址使用变量</p><pre>这个链接用 1 作为网址变量 [Google][1].\n然后在文档的结尾位变量赋值（网址）\n\n<i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i>[1]: http://www.google.com/logo.png</pre></div><!-- end 图片 --><!-- 换行、分隔符 --><div class="editor-help-content tab-pane fade" id="editorHelpSplit" rel="split"><p>如果另起一行，只需在当前行结尾加 2 个空格</p><pre>在当前行的结尾加 2 个空格<i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i>\n这行就会新起一行</pre><p>如果是要起一个新段落，只需要空出一行即可。</p><p>如果你有写分割线的习惯，可以新起一行输入三个减号 <code>-</code>：</p><pre>---\n</pre></div><!-- end 换行、分隔符 --><!-- 列表、引用 --><div class="editor-help-content tab-pane fade" id="editorHelpList" rel="list"><p>普通列表</p><pre>-<i class="nbsp">&nbsp;</i>列表文本前使用 [减号+空格]\n+<i class="nbsp">&nbsp;</i>列表文本前使用 [加号+空格]\n*<i class="nbsp">&nbsp;</i>列表文本前使用 [星号+空格]</pre><p>带数字的列表</p><pre>1.<i class="nbsp">&nbsp;</i>列表前使用 [数字+空格]\n2.<i class="nbsp">&nbsp;</i>我们会自动帮你添加数字\n7.<i class="nbsp">&nbsp;</i>不用担心数字不对，显示的时候我们会自动把这行的 7 纠正为 3</pre><p>引用</p><pre>&gt;<i class="nbsp">&nbsp;</i>引用文本前使用 [大于号+空格]\n&gt;<i class="nbsp">&nbsp;</i>折行可以不加，新起一行都要加上哦</pre></div><!-- end 列表、引用 --></div></div><script>$("#editorHelpTab a").eq(0).tab("show");$("#editorHelpTab a").click(function (e) {    var _$wrap = $(this).parent();    if(! _$wrap.hasClass("pull-right")) {        e.preventDefault();        $(this).tab("show");    }});</script></body>',o=null,$("#wmd-help-button").click(function(){o&&o.window?o.focus():(o=window.open("","Markdown Help","channelmode=yes, toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, width=505, height=400, top=100, left=100"),o.document.write(n))})},l}),define("cityInfoLite",[],function(){"use strict";return SF.cityInfo=[{name:"中国"},{name:"阿富汗"},{name:"奥兰群岛"},{name:"阿拉斯加"},{name:"阿尔巴尼亚"},{name:"阿尔及利亚"},{name:"东萨摩亚(美)"},{name:"安道尔"},{name:"安哥拉"},{name:"安圭拉岛(英)"},{name:"南极"},{name:"安提瓜和巴布达"},{name:"阿根廷"},{name:"亚美尼亚"},{name:"阿鲁巴岛"},{name:"澳大利亚"},{name:"奥地利"},{name:"阿塞拜疆"},{name:"巴林"},{name:"根西岛(英)"},{name:"孟加拉国"},{name:"巴巴多斯"},{name:"白俄罗斯"},{name:"比利时"},{name:"伯利兹"},{name:"贝宁"},{name:"百慕大群岛(英)"},{name:"不丹"},{name:"玻利维亚"},{name:"波斯尼亚和黑塞哥维那"},{name:"博茨瓦纳"},{name:"巴西"},{name:"保加利亚"},{name:"布基纳法索"},{name:"布隆迪"},{name:"喀麦隆"},{name:"加拿大"},{name:"加那利群岛"},{name:"佛得角"},{name:"开曼群岛(英)"},{name:"中非"},{name:"乍得"},{name:"智利"},{name:"圣诞岛"},{name:"科科斯岛"},{name:"哥伦比亚"},{name:"科摩罗"},{name:"刚果"},{name:"科克群岛(新)"},{name:"哥斯达黎加"},{name:"克罗地亚"},{name:"古巴"},{name:"塞浦路斯"},{name:"捷克"},{name:"刚果(金)"},{name:"丹麦"},{name:"迪戈加西亚岛"},{name:"吉布提"},{name:"多米尼克国"},{name:"多米尼加共和国"},{name:"厄瓜多尔"},{name:"埃及"},{name:"萨尔瓦多"},{name:"赤道几内亚"},{name:"厄立特里亚"},{name:"爱沙尼亚"},{name:"埃塞俄比亚"},{name:"福克兰群岛"},{name:"法罗群岛(丹)"},{name:"斐济"},{name:"芬兰"},{name:"法国"},{name:"法属波里尼西亚"},{name:"加蓬"},{name:"冈比亚"},{name:"格鲁吉亚"},{name:"德国"},{name:"加纳"},{name:"直布罗陀(英)"},{name:"希腊"},{name:"格陵兰岛"},{name:"格林纳达"
},{name:"瓜德罗普岛(法)"},{name:"关岛(美)"},{name:"危地马拉"},{name:"几内亚"},{name:"几内亚比绍"},{name:"法属圭亚那"},{name:"圭亚那"},{name:"海地"},{name:"洪都拉斯"},{name:"匈牙利"},{name:"冰岛"},{name:"印度"},{name:"印度尼西亚"},{name:"伊郎"},{name:"伊拉克"},{name:"爱尔兰"},{name:"马恩岛(英)"},{name:"以色列"},{name:"意大利"},{name:"科特迪瓦"},{name:"牙买加"},{name:"日本"},{name:"泽西岛(英)"},{name:"约旦"},{name:"柬埔塞"},{name:"哈萨克斯坦"},{name:"肯尼亚"},{name:"基里巴斯"},{name:"科威特"},{name:"吉尔吉斯斯坦"},{name:"老挝"},{name:"拉脱维亚"},{name:"黎巴嫩"},{name:"莱索托"},{name:"利比里亚"},{name:"利比亚"},{name:"列支敦士登"},{name:"立陶宛"},{name:"卢森堡"},{name:"马其顿"},{name:"马达加斯加"},{name:"马拉维"},{name:"马来西亚"},{name:"马尔代夫"},{name:"马里"},{name:"马耳他"},{name:"马绍尔群岛"},{name:"马提尼克(法)"},{name:"毛里塔尼亚"},{name:"毛里求斯"},{name:"马约特岛"},{name:"墨西哥"},{name:"密克罗尼西亚(美)"},{name:"中途岛(美)"},{name:"摩纳哥"},{name:"蒙古"},{name:"黑山"},{name:"蒙特塞拉特岛(英)"},{name:"摩洛哥"},{name:"莫桑比克"},{name:"缅甸"},{name:"纳米比亚"},{name:"瑙鲁"},{name:"尼泊尔"},{name:"荷兰"},{name:"荷属安的列斯群岛"},{name:"新喀里多尼亚群岛(法)"},{name:"新西兰"},{name:"尼加拉瓜"},{name:"尼日尔"},{name:"尼日利亚"},{name:"纽埃岛(新)"},{name:"诺福克岛(澳)"},{name:"朝鲜"},{name:"马里亚纳群岛"},{name:"挪威"},{name:"阿曼"},{name:"巴基斯坦"},{name:"帕劳(美)"},{name:"巴拿马"},{name:"巴布亚新几内亚"},{name:"巴拉圭"},{name:"秘鲁"},{name:"菲律宾"},{name:"波兰"},{name:"葡萄牙"},{name:"波多黎各(美)"},{name:"卡塔尔"},{name:"摩尔多瓦"},{name:"留尼汪岛"},{name:"罗马尼亚"},{name:"俄罗斯"},{name:"卢旺达"},{name:"阿森松(英)"},{name:"圣赫勒拿"},{name:"圣克里斯托弗和尼维斯"},{name:"圣卢西亚"},{name:"圣皮埃尔岛及密克隆岛"},{name:"圣文森特岛(英)"},{name:"西萨摩亚"},{name:"圣马力诺"},{name:"圣多美和普林西比"},{name:"沙特阿拉伯"},{name:"塞内加尔"},{name:"塞尔维亚"},{name:"塞舌尔"},{name:"塞拉利昂"},{name:"新加坡"},{name:"圣马丁(荷)"},{name:"斯洛伐克"},{name:"斯洛文尼亚"},{name:"所罗门群岛"},{name:"索马里"},{name:"南非"},{name:"南乔治亚与南桑威奇群岛"},{name:"韩国"},{name:"西班牙"},{name:"斯里兰卡"},{name:"苏丹"},{name:"苏里南"},{name:"斯瓦尔巴群岛(挪)"},{name:"斯威士兰"},{name:"瑞典"},{name:"瑞士"},{name:"叙利亚"},{name:"塔吉克斯坦"},{name:"泰国"},{name:"巴哈马国"},{name:"梵蒂冈"},{name:"东帝汶"},{name:"多哥"},{name:"托克劳群岛(新)"},{name:"汤加"},{name:"特立尼达和多巴哥"},{name:"突尼斯"},{name:"土耳其"},{name:"土库曼斯坦"},{name:"特克斯和凯科斯群岛(英)"},{name:"图瓦卢"},{name:"乌干达"},{name:"乌克兰"},{name:"阿拉伯联合酋长国"},{name:"英国"},{name:"坦桑尼亚"},{name:"美国本土外小岛屿"},{name:"美国"},{name:"乌拉圭"},{name:"乌兹别克斯坦"},{name:"瓦努阿图"},{name:"委内瑞拉"},{name:"越南"},{name:"维尔京群岛(英)"},{name:"维尔京群岛(美)"},{name:"瓦里斯和富士那群岛(法)"},{name:"西撒哈拉"},{name:"也门"},{name:"南斯拉夫"},{name:"赞比亚"},{name:"桑给巴尔"},{name:"津巴布韦"},{name:"槟榔屿"},{name:"北海"},{name:"槟城"},{name:"玻璃"},{name:"大山脚"},{name:"高渊"},{name:"加央"},{name:"丁加奴"},{name:"甘马挽"},{name:"瓜拉丁加奴"},{name:"龙运"},{name:"马江"},{name:"实兆"},{name:"乌鲁"},{name:"勿述"},{name:"吉打"},{name:"巴东得腊"},{name:"笨筒"},{name:"浮罗交怡"},{name:"哥打士打"},{name:"古邦巴素"},{name:"瓜拉姆达"},{name:"华玲"},{name:"居林"},{name:"万拉峇鲁"},{name:"吉兰丹"},{name:"巴西富地"},{name:"巴西马"},{name:"丹那美拉"},{name:"道北"},{name:"登卓"},{name:"哥打巴鲁"},{name:"瓜拉吉赖"},{name:"话望生"},{name:"马樟"},{name:"日里"},{name:"吉隆坡"},{name:"马六甲"},{name:"亚罗牙也"},{name:"野新"},{name:"纳闽"},{name:"纳闽"},{name:"维多利亚"},{name:"彭亨"},{name:"百乐"},{name:"北根"},{name:"淡马鲁"},{name:"而连突"},{name:"关丹"},{name:"金马仑高原"},{name:"劳勿"},{name:"立卑"},{name:"马兰"},{name:"文冬"},{name:"云冰"},{name:"霹雳"},{name:"安顺"},{name:"丹绒马林"},{name:"和丰"},{name:"紅土坎"},{name:"华都牙也"},{name:"江沙"},{name:"太平"},{name:"怡保"},{name:"柔佛"},{name:"笨珍"},{name:"丰盛港"},{name:"哥打丁宜"},{name:"居銮"},{name:"峇株巴辖"},{name:"麻坡"},{name:"昔加末"},{name:"新山"},{name:"森美兰"},{name:"波德申"},{name:"淡边"},{name:"芙蓉"},{name:"瓜拉庇劳"},{name:"林茂"},{name:"仁保"},{name:"日叻务"},{name:"沙巴"},{name:"吧巴"},{name:"保佛"},{name:"比鲁兰"},{name:"必达士"},{name:"兵南邦"},{name:"担布南"},{name:"丹南"},{name:"斗湖"},{name:"斗亚兰"},{name:"哥打基纳巴鲁"},{name:"哥打马鲁都"},{name:"根地咬"},{name:"古达"},{name:"古打毛律"},{name:"古纳"},{name:"瓜拉班尤"},{name:"京那巴登岸"},{name:"兰脑"},{name:"拿笃"},{name:"纳巴湾"},{name:"山打根"},{name:"西比陶"},{name:"仙本那"},{name:"沙捞越"},{name:"古晋"},{name:"加帛"},{name:"林梦"},{name:"美里"},{name:"民都鲁"},{name:"木胶"},{name:"木中"},{name:"三马拉汉"},{name:"斯里阿曼"},{name:"泗里街"},{name:"泗务"},{name:"雪兰莪"},{name:"八打灵"},{name:"鹅麦"},{name:"瓜拉冷岳"},{name:"瓜拉雪兰莪"},{name:"沙白安南"},{name:"乌鲁冷岳"},{name:"乌鲁雪兰莪"},{name:"雪邦"},{name:"北京"},{name:"天津"},{name:"石家庄"},{name:"唐山"},{name:"秦皇岛"},{name:"邯郸"},{name:"邢台"},{name:"保定"},{name:"张家口"},{name:"承德"},{name:"沧州"},{name:"霸州"},{name:"三河"},{name:"衡水"},{name:"太原"},{name:"大同"},{name:"阳泉"},{name:"长治"},{name:"晋城"},{name:"朔州"},{name:"晋中"},{name:"运城"},{name:"忻州"},{name:"侯马"},{name:"霍州"},{name:"吕梁"},{name:"呼和浩特"},{name:"包头"},{name:"乌海"},{name:"赤峰"},{name:"通辽"},{name:"鄂尔多斯"},{name:"呼伦贝尔"},{name:"巴彦淖尔"},{name:"乌兰察布"},{name:"兴安盟"},{name:"锡林郭勒盟"},{name:"阿拉善盟"},{name:"沈阳"},{name:"大连"},{name:"鞍山"},{name:"抚顺"},{name:"本溪"},{name:"丹东"},{name:"锦州"},{name:"营口"},{name:"阜新"},{name:"灯塔"},{name:"盘锦"},{name:"铁岭"},{name:"朝阳"},{name:"葫芦岛"},{name:"长春"},{name:"吉林"},{name:"四平"},{name:"辽源"},{name:"通化"},{name:"白山"},{name:"松原"},{name:"白城"},{name:"延边朝鲜族自治州"},{name:"哈尔滨"},{name:"齐齐哈尔"},{name:"鸡西"},{name:"鹤岗"},{name:"双鸭山"},{name:"大庆"},{name:"伊春"},{name:"佳木斯"},{name:"七台河"},{name:"绥芬河"},{name:"海林"},{name:"宁安"},{name:"穆棱"},{name:"黑河"},{name:"绥化"},{name:"大兴安岭地区"},{name:"上海"},{name:"南京"},{name:"无锡"},{name:"徐州"},{name:"常州"},{name:"苏州"},{name:"南通"},{name:"连云港"},{name:"淮安"},{name:"盐城"},{name:"镇江"},{name:"泰州"},{name:"宿迁"},{name:"杭州"},{name:"宁波"},{name:"温州"},{name:"嘉兴"},{name:"湖州"},{name:"绍兴"},{name:"金华"},{name:"衢州"},{name:"舟山"},{name:"温岭"},{name:"临海"},{name:"丽水"},{name:"合肥"},{name:"芜湖"},{name:"蚌埠"},{name:"淮南"},{name:"马鞍山"},{name:"淮北"},{name:"铜陵"},{name:"安庆"},{name:"滁州"},{name:"阜阳"},{name:"宿州"},{name:"六安"},{name:"亳州"},{name:"池州"},{name:"宣城"},{name:"福州"},{name:"厦门"},{name:"莆田"},{name:"三明"},{name:"泉州"},{name:"漳州"},{name:"南平"},{name:"龙岩"},{name:"宁德"},{name:"南昌"},{name:"景德镇"},{name:"萍乡"},{name:"九江"},{name:"新余"},{name:"鹰潭"},{name:"赣州"},{name:"吉安"},{name:"宜春"},{name:"上饶"},{name:"济南"},{name:"青岛"},{name:"淄博"},{name:"枣庄"},{name:"东营"},{name:"烟台"},{name:"潍坊"},{name:"济宁"},{name:"泰安"},{name:"文登"},{name:"荣成"},{name:"乳山"},{name:"日照"},{name:"莱芜"},{name:"临沂"},{name:"德州"},{name:"聊城"},{name:"滨州"},{name:"菏泽"},{name:"郑州"},{name:"开封"},{name:"洛阳"},{name:"平顶山"},{name:"安阳"},{name:"鹤壁"},{name:"新乡"},{name:"焦作"},{name:"济源"},{name:"濮阳"},{name:"禹州"},{name:"长葛"},{name:"漯河"},{name:"三门峡"},{name:"南阳"},{name:"商丘"},{name:"信阳"},{name:"周口"},{name:"驻马店"},{name:"武汉"},{name:"黄石"},{name:"十堰"},{name:"宜昌"},{name:"襄阳"},{name:"鄂州"},{name:"荆门"},{name:"孝感"},{name:"石首"},{name:"洪湖"},{name:"松滋"},{name:"黄冈"},{name:"咸宁"},{name:"随州"},{name:"恩施土家族苗族自治州"},{name:"仙桃"},{name:"潜江"},{name:"天门"},{name:"神农架林区"},{name:"长沙"},{name:"株洲"},{name:"湘潭"},{name:"衡阳"},{name:"邵阳"},{name:"岳阳"},{name:"常德"},{name:"张家界"},{name:"益阳"},{name:"资兴"},{name:"永州"},{name:"怀化"},{name:"娄底"},{name:"湘西土家族苗族自治州"},{name:"广州"},{name:"韶关"},{name:"深圳"},{name:"珠海"},{name:"汕头"},{name:"佛山"},{name:"江门"},{name:"湛江"},{name:"茂名"},{name:"肇庆"},{name:"惠州"},{name:"梅州"},{name:"汕尾"},{name:"河源"},{name:"阳江"},{name:"清远"},{name:"东莞"},{name:"潮州"},{name:"揭阳"},{name:"云浮"},{name:"南宁"},{name:"柳州"},{name:"桂林"},{name:"梧州"},{name:"北海"},{name:"防城港"},{name:"钦州"},{name:"贵港"},{name:"玉林"},{name:"贺州"},{name:"河池"},{name:"来宾"},{name:"崇左"},{name:"海口"},{name:"三亚"},{name:"五指山"},{name:"琼海"},{name:"儋州"},{name:"文昌"},{name:"万宁"},{name:"东方"},{name:"西沙群岛"},{name:"南沙群岛"},{name:"中沙群岛的岛礁及其海域"},{name:"重庆"},{name:"成都"},{name:"自贡"},{name:"攀枝花"},{name:"泸州"},{name:"德阳"},{name:"绵阳"},{name:"广元"},{name:"遂宁"},{name:"市中区"},{name:"东兴区"},{name:"威远县"},{name:"资中县"},{name:"隆昌县"},{name:"其它区"},{name:"乐山"},{name:"南充"},{name:"眉山"},{name:"宜宾"},{name:"广安"},{name:"达州"},{name:"雅安"},{name:"巴中"},{name:"阿坝藏族羌族自治州"},{name:"甘孜藏族自治州"},{name:"凉山彝族自治州"},{name:"贵阳"},{name:"六盘水"},{name:"遵义"},{name:"安顺"},{name:"铜仁地区"},{name:"黔西南布依族苗族自治州"},{name:"毕节地区"},{name:"黔东南苗族侗族自治州"},{name:"黔南布依族苗族自治州"},{name:"昆明"},{name:"曲靖"},{name:"玉溪"},{name:"保山"},{name:"昭通"},{name:"丽江"},{name:"普洱"},{name:"临沧"},{name:"楚雄彝族自治州"},{name:"红河哈尼族彝族自治州"},{name:"文山壮族苗族自治州"},{name:"西双版纳傣族自治州"},{name:"大理白族自治州"},{name:"德宏傣族景颇族自治州"},{name:"怒江傈僳族自治州"},{name:"迪庆藏族自治州"},{name:"拉萨"},{name:"昌都地区"},{name:"山南地区"},{name:"日喀则地区"},{name:"那曲地区"},{name:"阿里地区"},{name:"林芝地区"},{name:"西安"},{name:"铜川"},{name:"宝鸡"},{name:"咸阳"},{name:"渭南"},{name:"延安"},{name:"汉中"},{name:"榆林"},{name:"安康"},{name:"兰州"},{name:"嘉峪关"},{name:"金昌"},{name:"白银"},{name:"天水"},{name:"武威"},{name:"张掖"},{name:"平凉"},{name:"酒泉"},{name:"定西"},{name:"陇南"},{name:"临夏回族自治州"},{name:"合作"},{name:"西宁"},{name:"海东地区"},{name:"海北藏族自治州"},{name:"黄南藏族自治州"},{name:"海南藏族自治州"},{name:"果洛藏族自治州"},{name:"玉树藏族自治州"},{name:"海西蒙古族藏族自治州"},{name:"银川"},{name:"石嘴山"},{name:"吴忠"},{name:"固原"},{name:"中卫"},{name:"乌鲁木齐"},{name:"克拉玛依"},{name:"吐鲁番地区"},{name:"哈密地区"},{name:"昌吉回族自治州"},{name:"博尔塔拉蒙古自治州"},{name:"巴音郭楞蒙古自治州"},{name:"阿克苏地区"},{name:"喀什地区"},{name:"和田地区"},{name:"伊宁"},{name:"奎屯"},{name:"阿勒泰地区"},{name:"石河子"},{name:"阿拉尔"},{name:"图木舒克"},{name:"五家渠"},{name:"台北"},{name:"高雄"},{name:"台南"},{name:"台中"},{name:"金门县"},{name:"南投县"},{name:"基隆"},{name:"新竹"},{name:"嘉义"},{name:"新北"},{name:"香港岛"},{name:"九龙"},{name:"新界"},{name:"澳门半岛"},{name:"离岛"},{name:"海外"},{name:"中山"}],SF.cityInfo}),function(e){"use strict";function t(t,n){this.itemsArray=[],this.$element=e(t),this.$element.hide(),this.isSelect="SELECT"===t.tagName,this.multiple=this.isSelect&&t.hasAttribute("multiple"),this.objectItems=n&&n.itemValue,this.placeholderText=t.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.inputSize=Math.max(1,this.placeholderText.length),this.$container=e('<div class="bootstrap-tagsinput"></div>'),this.$input=e('<input type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.after(this.$container);var r=(this.inputSize<3?3:this.inputSize)+"em";this.$input.get(0).style.cssText="width: "+r+" !important;",this.build(n)}function n(e,t){if("function"!=typeof e[t]){var n=e[t];e[t]=function(e){return e[n]}}}function r(e,t){if("function"!=typeof e[t]){var n=e[t];e[t]=function(){return n}}}function i(e){return e?l.text(e).html():""}function a(e){var t=0;if(document.selection){e.focus();var n=document.selection.createRange();n.moveStart("character",-e.value.length),t=n.text.length}else(e.selectionStart||"0"==e.selectionStart)&&(t=e.selectionStart);return t}function o(t,n){var r=!1;return e.each(n,function(e,n){if("number"==typeof n&&t.which===n)return r=!0,!1;if(t.which===n.which){var i=!n.hasOwnProperty("altKey")||t.altKey===n.altKey,a=!n.hasOwnProperty("shiftKey")||t.shiftKey===n.shiftKey,o=!n.hasOwnProperty("ctrlKey")||t.ctrlKey===n.ctrlKey;if(i&&a&&o)return r=!0,!1}}),r}var s={tagClass:function(e){return""},itemValue:function(e){return e?e.toString():e},itemText:function(e){return this.itemValue(e)},freeInput:!0,addOnBlur:!0,maxTags:void 0,maxChars:void 0,confirmKeys:[13,44,32],onTagExists:function(e,t){t.hide().fadeIn()},trimValue:!1,allowDuplicates:!1};t.prototype={constructor:t,add:function(t,n){var r=this;if(!(r.options.maxTags&&r.itemsArray.length>=r.options.maxTags)&&(t===!1||t)){if("string"==typeof t&&r.options.trimValue&&(t=e.trim(t)),"object"==typeof t&&!r.objectItems)throw"Can't add objects when itemValue option is not set";if(!t.toString().match(/^\s*$/)){if(r.isSelect&&!r.multiple&&r.itemsArray.length>0&&r.remove(r.itemsArray[0]),"string"==typeof t&&"INPUT"===this.$element[0].tagName){var a=t.split(",");if(a.length>1){for(var o=0;o<a.length;o++)this.add(a[o],!0);return void(n||r.pushVal())}}var s=r.options.itemValue(t),l=r.options.itemText(t),c=r.options.tagClass(t),u=e.grep(r.itemsArray,function(e){return r.options.itemValue(e)===s})[0];if(!u||r.options.allowDuplicates){if(!(r.items().toString().length+t.length+1>r.options.maxInputLength)){var d=e.Event("beforeItemAdd",{item:t,cancel:!1});if(r.$element.trigger(d),!d.cancel){r.itemsArray.push(t);var f=e('<span class="tag '+i(c)+'">'+i(l)+' <span class="fa fa-times" data-role="remove"></span></span>');if(f.data("item",t),r.findInputWrapper().before(f),f.after(" "),r.isSelect&&!e('option[value="'+encodeURIComponent(s)+'"]',r.$element)[0]){var p=e("<option selected>"+i(l)+"</option>");p.data("item",t),p.attr("value",s),r.$element.append(p)}n||r.pushVal(),(r.options.maxTags===r.itemsArray.length||r.items().toString().length===r.options.maxInputLength)&&r.$container.addClass("bootstrap-tagsinput-max"),r.$element.trigger(e.Event("itemAdded",{item:t}))}}}else if(r.options.onTagExists){var h=e(".tag",r.$container).filter(function(){return e(this).data("item")===u});r.options.onTagExists(t,h)}}}},remove:function(t,n){var r=this;if(r.objectItems&&(t="object"==typeof t?e.grep(r.itemsArray,function(e){return r.options.itemValue(e)==r.options.itemValue(t)}):e.grep(r.itemsArray,function(e){return r.options.itemValue(e)==t}),t=t[t.length-1]),t){var i=e.Event("beforeItemRemove",{item:t,cancel:!1});if(r.$element.trigger(i),i.cancel)return;e(".tag",r.$container).filter(function(){return e(this).data("item")===t}).remove(),e("option",r.$element).filter(function(){return e(this).data("item")===t}).remove(),-1!==e.inArray(t,r.itemsArray)&&r.itemsArray.splice(e.inArray(t,r.itemsArray),1)}n||r.pushVal(),r.options.maxTags>r.itemsArray.length&&r.$container.removeClass("bootstrap-tagsinput-max"),r.$element.trigger(e.Event("itemRemoved",{item:t}))},removeAll:function(){var t=this;for(e(".tag",t.$container).remove(),e("option",t.$element).remove();t.itemsArray.length>0;)t.itemsArray.pop();t.pushVal()},refresh:function(){var t=this;e(".tag",t.$container).each(function(){var n=e(this),r=n.data("item"),a=t.options.itemValue(r),o=t.options.itemText(r),s=t.options.tagClass(r);if(n.attr("class",null),n.addClass("tag "+i(s)),n.contents().filter(function(){return 3==this.nodeType})[0].nodeValue=i(o),t.isSelect){var l=e("option",t.$element).filter(function(){return e(this).data("item")===r});l.attr("value",a)}})},items:function(){return this.itemsArray},pushVal:function(){var t=this,n=e.map(t.items(),function(e){return t.options.itemValue(e).toString()});t.$element.val(n,!0).trigger("change")},build:function(t){var i=this;if(i.options=e.extend({},s,t),i.objectItems&&(i.options.freeInput=!1),n(i.options,"itemValue"),n(i.options,"itemText"),r(i.options,"tagClass"),i.options.typeahead){var l=i.options.typeahead||{};r(l,"source"),i.$input.typeahead(e.extend({},l,{source:function(t,n){function r(e){for(var t=[],r=0;r<e.length;r++){var o=i.options.itemText(e[r]);a[o]=e[r],t.push(o)}n(t)}this.map={};var a=this.map,o=l.source(t);e.isFunction(o.success)?o.success(r):e.isFunction(o.then)?o.then(r):e.when(o).then(r)},updater:function(e){i.add(this.map[e])},matcher:function(e){return-1!==e.toLowerCase().indexOf(this.query.trim().toLowerCase())},sorter:function(e){return e.sort()},highlighter:function(e){var t=new RegExp("("+this.query+")","gi");return e.replace(t,"<strong>$1</strong>")}}))}if(i.options.typeaheadjs){var c=i.options.typeaheadjs||{};i.$input.typeahead(null,c).on("typeahead:selected",e.proxy(function(e,t){c.valueKey?i.add(t[c.valueKey]):i.add(t),i.$input.typeahead("val","")},i))}i.$container.on("click",e.proxy(function(e){i.$element.attr("disabled")||i.$input.removeAttr("disabled"),i.$input.focus()},i)),i.options.addOnBlur&&i.options.freeInput&&i.$input.on("focusout",e.proxy(function(t){0===e(".typeahead, .twitter-typeahead",i.$container).length&&(i.add(i.$input.val()),i.$input.val(""))},i)),i.$container.on("keydown","input",e.proxy(function(t){var n=e(t.target),r=i.findInputWrapper();if(i.$element.attr("disabled"))return void i.$input.attr("disabled","disabled");switch(t.which){case 8:if(0===a(n[0])){var o=r.prev();o&&i.remove(o.data("item"))}break;case 46:if(0===a(n[0])){var s=r.next();s&&i.remove(s.data("item"))}break;case 37:var l=r.prev();0===n.val().length&&l[0]&&(l.before(r),n.focus());break;case 39:var c=r.next();0===n.val().length&&c[0]&&(c.after(r),n.focus())}var u=n.val().length;Math.ceil(u/5);n.attr("size",Math.max(this.inputSize,n.val().length))},i)),i.$container.on("keypress","input",e.proxy(function(t){var n=e(t.target);if(i.$element.attr("disabled"))return void i.$input.attr("disabled","disabled");var r=n.val(),a=i.options.maxChars&&r.length>=i.options.maxChars;i.options.freeInput&&(o(t,i.options.confirmKeys)||a)&&(i.add(a?r.substr(0,i.options.maxChars):r),n.val(""),t.preventDefault());var s=n.val().length;Math.ceil(s/5);n.attr("size",Math.max(this.inputSize,n.val().length))},i)),i.$container.on("click","[data-role=remove]",e.proxy(function(t){i.$element.attr("disabled")||i.remove(e(t.target).closest(".tag").data("item"))},i)),i.options.itemValue===s.itemValue&&("INPUT"===i.$element[0].tagName?i.add(i.$element.val()):e("option",i.$element).each(function(){i.add(e(this).attr("value"),!0)}))},destroy:function(){var e=this;e.$container.off("keypress","input"),e.$container.off("click","[role=remove]"),e.$container.remove(),e.$element.removeData("tagsinput"),e.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var t=this.$input[0],n=this.$container[0];t&&t.parentNode!==n;)t=t.parentNode;return e(t)}},e.fn.tagsinput=function(n,r){var i=[];return this.each(function(){var a=e(this).data("tagsinput");if(a)if(n||r){if(void 0!==a[n]){var o=a[n](r);void 0!==o&&i.push(o)}}else i.push(a);else a=new t(this,n),e(this).data("tagsinput",a),i.push(a),"SELECT"===this.tagName&&e("option",e(this)).attr("selected","selected"),e(this).val(e(this).val())}),"string"==typeof n?i.length>1?i:i[0]:i},e.fn.tagsinput.Constructor=t;var l=e("<div />")}(window.jQuery),define("tagsinput",["jquery","bootstrap"],function(e){return function(){var t;return t||e.$.fn.tagsinput}}(this)),define("autoComplete",["jquery","template","sfModal","cityInfoLite","underscore","tagsinput"],function(e,t,n,r){"use strict";e.fn.autoComplete=function(r){var i,a,o,s,l,c,u,d,f,p,h;o=function(t){p.onEmpty&&l.append(p.onEmpty+t+"</strong></a></li>"),l.delegate(".createNewTag","click",function(){l.hide(),e(h).val(""),n({title:"创建标签",content:'<form id="tag"><input type="text" name="name" id="tagName" class="form-control mb20" value="'+t+'" placeholder="标签名称"><textarea name="text" id="tagText" placeholder="请对此标签补充一些描述资料, 以供他人参考" class="form-control" rows="5"></textarea></form>',doneFn:function(){e.post("/api/tags/add",{name:e("#tagName").val(),text:e("#tagText").val()},function(e){var t;0===e.status&&(p.onEnter.call(h,e.data),t=null,n("hide"))})}})})},i=function(t,n){var r,i,a,s,c,u;for(a=p.onResult(t,n),r=!1,s=!1,a.forEach(function(e){e.name===n&&(s=!0)}),p.canCreate&&"tag"===p.dataType&&(a&&0!==a.length||o(n)),h.trigger("dropdown"),l.html(""),c=0;c<a.length;)u=e(p.resultsFormatter(a[c],n)).data("data",a[c]).appendTo(l).click(function(){var t,n;n=e(this).data("data"),n&&(p.onEnter.call(h,n),t=null,l.hide())}),!r&&p.preSelect&&(u.addClass(p.currentClass),i=a[c],r=!0),c++;p.canCreate&&("tag"!==p.dataType||s||o(n))},p=e.extend({dataType:"tag",className:"autoComplete-list dropdown-menu",currentClass:"active",preSelect:!0,cache:!0,searchParam:"q","do":"search",insertAfter:null,button:null,url:null,canCreate:!0,onResult:function(e){var t,n;return n=[],t=[],e.data.forEach(function(e){return-1===t.indexOf(e.id)?"city"===p.dataType?(n.push({city:e}),t.push(e)):(n.push(e),t.push(e.id)):void 0}),n},onLoading:null,onEnter:function(t){var n,i,a,o,s;if("tag"===p.dataType){if(s=!1,n=null,o=[],e(".bootstrap-tagsinput .tag").each(function(){var r,i;r=e(this).data("name"),i=e(this).data("id"),o.push(r+":"+i),t.name===r&&(n=e(this).parents("li"),s=!0)}),s)return i=e(this),void i.val("");o.push(t.name+":"+t.id),r&&r.onAfterEnter&&r.onAfterEnter(t),window.localStorage&&(a="autoSaveTags_"+location.pathname+location.search,localStorage.setItem(a,o))}e(this).parents(".bootstrap-tagsinput").siblings(".tagsInput").tagsinput("add",t),e(this).val("")},resultsFormatter:function(e,n){var r,i;return"tag"===p.dataType?(-1!==n.indexOf("+")&&(n=n.replace(/\+/g,"")),r=new RegExp(n),e.nameHtml=e.name.replace(r,"<strong>"+n+"</strong>"),i=e.iconUrl?'<li><a href="javascript:void(0);"><img class="mr10" style="max-height:16px;" src="{{iconUrl}}" />{{nameHtml}}</a></li>':'<li><a href="javascript:void(0);">{{nameHtml}}</a></li>',t(i,e)):"city"===p.dataType?'<li><a href="javascript:void(0);">'+e.city+"</a></li>":void 0}},r),f="",h=this,a={},d=void 0,c=!1,u=!1,l=e('<ul class="'+p.className+'"></ul>').insertAfter(p.insertAfter?p.insertAfter:this).hide().hover(function(){u=!0},function(){u=!1}),s=void 0,p.url||("tag"===p.dataType&&(p.url="/api/tags/search",p.onEmpty='<li><a href="javascript:void(0)" class="createNewTag">创建标签 <strong>'),"city"===p.dataType&&(p.url="",p.source=_.map(SF.cityInfo,function(e){return e.name}))),this.focus(function(){var t;"city"!==p.dataType||e(this).siblings(".tag.label").length||(t=h.parents(".bootstrap-tagsinput").siblings("input[name=cities]").data("tags"),i({data:["北京","上海","广州","深圳","杭州","成都","南京","武汉","西安"]},""),l.show().css({left:0})),c=!0,h.css("text-transform","lowercase"),d=setInterval(function(){var t,n,r,o,c,u;return u=h.val().trim().toLowerCase(),t=u.match(/[^0-9a-zA-Z\u4e00-\u9fa5#,' ，._\-\+]/g),t&&0!==t.length?void h.val(""):((","===u.slice(-1)||"，"===u.slice(-1))&&(u=u.replace(/[,，]/g,""),h.val(u),l.find(".active").click()),void(u!==f&&(n=void 0,"tag"===p.dataType?(n=e(h).offset().left-e(h).parents(".bootstrap-tagsinput").offset().left,l.css("left",n)):"job"===p.dataType&&l.css("left",15),l.show(),s=null,u.length>0?(p.onLoading&&p.onLoading.call(h),a[u]?i(a[u],u):(c={},-1===u.indexOf("<")?c[p.searchParam]=u:c[p.searchParam]=" ",p.url.length>0?e.getJSON(p.url,c,function(e){p.cache&&(a[u]=e),i(e,u)}):(r=_.filter(p.source,function(e){return-1!==e.indexOf(c.q)}),o={data:r},p.cache&&(a[u]=o),i(o,u)))):l.hide().html(""),f=u)))},200)}).blur(function(){var t;c=u||!1,d&&(clearInterval(d),d=null),"disabled"!==e(this).attr("disabled")&&e(this).val(""),f="",t=setTimeout(function(){c||l.hide(),clearTimeout(t),t=null},200)}).keydown(function(t){var n,r,i,a;switch(n=e("."+p.currentClass,l),r=t.charCode||t.keyCode||t.which){case 38:n.length>0?(a=n.prev(),n.removeClass(p.currentClass),(a.length>0||!p.preSelect?a:e("*:last",l)).addClass(p.currentClass)):e("*:last",l).addClass(p.currentClass);break;case 40:n.length>0?(i=n.next(),n.removeClass(p.currentClass),(i.length>0||!p.preSelect?i:e("*:first",l)).addClass(p.currentClass)):e("*:first",l).addClass(p.currentClass);break;case 13:return n.find("a").trigger("click"),!1;case 32:return n.find("a").trigger("click"),!1}s=e("."+p.currentClass,l).data("data")})}}),define("sf_typeHelperExtend",[],function(){var e;return e={realm:function(e){var t,n,r,i,a;return i=e.$input,r=$("#realmTags"),n=r.find(".js-close"),t=$("#realmTags input[type=checkbox]"),a=function(){return e.result.length===e.opt.maxNum?t.not(":checked").attr("disabled","disabled"):t.not(":checked").removeAttr("disabled")},a(),i.on("focus",function(){return r.show()}),n.on("click",function(){return r.hide()}),e.opt.afterAdd=function(e){return $("input[data-id="+e.id+"]").prop("checked",!0),a()},e.opt.afterRemove=function(e){return $("input[data-id="+e.id+"]").prop("checked",!1),a()},t.change(function(){var t,n,r;return n=$(this).data("id"),r=$(this).val(),t={name:r,id:n},$(this).prop("checked")?e.add(t):e.remove(t),a()})},techTag:function(e){var t,n,r;return n=e.$container.next(".techTags-panel"),r=n.find(".close"),t=n.find(".tag"),e.$container.find(".sf-typeHelper-input").on("focus",function(){return $(".techTags-panel").hide(),n.show()}),$("body").on("click",function(e){return 0!==$(e.target).parents(".techTags-panel").length||0!==$(e.target).parents(".sf-typeHelper").length||$(e.target).hasClass("sf-typeHelper")?void 0:n.hide()}),e.opt.afterAdd=function(e){var t,n;return e&&(t=$(".tagsInput"),t.length)?(n=t.val(),n?t.val(n+","+e.id):t.val(e.id),t.trigger("change")):void 0},e.opt.afterRemove=function(e){var t,n,r;return e&&(t=$(".tagsInput"),t.length)?(r=t.val().split(","),n=r.indexOf(e.id+""),-1!==n&&r.splice(n,1),t.val(r.join(",")),t.trigger("change")):void 0},t.click(function(t){var n,r,i,a,o;return a=$(this).data("id"),o=$(this).text(),i={name:o,id:a},r=-1,e.result.forEach(function(e,t){return~~e.id===~~i.id?r=t:void 0}),-1!==r?(n=e.$container.find(".sf-typeHelper-item").eq(r),n.addClass("blink").css("background-color","#FCF8E3"),setTimeout(function(){return n.css("background-color","#E7F2ED")},1e3)):e.result.length===e.opt.maxNum&&0!==e.opt.maxNum?t.preventDefault():e.add(i)})}}}),function(e,t){var n,r;return r={initData:[],remoteData:[],inputTpl:'<span class="sf-typeHelper-item <%= itemClass %> "> <%= name %> <span class="fa fa-times" data-role="remove"></span></span>',tpl:"<li data-id='<%= id %>' ><a data-role='typeHelper' href='javascript:;'><% if (typeof(img)!='undefined'){ %> <img class='avatar-24' src='<%= img %>'> <% } %> <%= name %> </a></li>",maxNum:5,confirmKeys:[13,44,32],emptyTip:"",emptyFunc:function(){},afterAdd:function(){},afterRemove:function(){},beforeAdd:function(){}},n=function(n,i){return 0===n.length?void console.warn("element not found in DOM"):(t.each(r,function(e,t){var n;return i[t]=null!=(n=i[t])?n:e}),this.opt=i,this.items=[],this.result=[],this.query="",this.$element=e(n),this.$element.addClass("hidden"),n.hasAttribute("placeholder")?this.placeholderText=this.$element.attr("placeholder"):this.placeholderText="",this.$container=e('<div class="sf-typeHelper"></div>'),this.$input=e('<input type="text" data-role="sf_typeHelper-input" class="sf-typeHelper-input" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$list=e('<ul class="sf-typeHelper-list dropdown-menu"></ul>'),this.$element.after(this.$container),this.$container.append(this.$list),this.build(i))},n.prototype={constructor:n,formatter:function(e){var n;return e=null!=e?e:[],n=t.map(e,function(e,t){var n,r,i,a;return"object"!=typeof e&&(n={},n.name=e,n.id=t,e=n),e.name=null!=(r=e.name)?r:e,e.id=null!=(i=e.id)?i:t,e.img=null!=(a=e.img)?a:e.avatarUrl,e})},getRemoteData:function(n,r){var i,a;return a=this,i=[],"object"!=typeof a.opt.remoteData?(a.timer&&clearTimeout(a.timer),a.timer=setTimeout(function(){return e.ajax({url:a.opt.remoteData,data:{q:n},dataType:"json",success:function(e){return i=e.data,i=a.formatter(i),r?r(i):void 0}})},300)):(i=a.formatter(a.opt.remoteData),i=t.filter(i,function(e){return-1!==e.name.search(n)}),r?r(i):void 0)},renderList:function(e){var n,r;return r=this,e.length>0?r.getRemoteData(e,function(n){var i;return n=t.difference(n,r.result),0===n.length&&r.opt.emptyTip.length>0&&n.push({id:-1,name:r.opt.emptyTip.replace("{{query}}",e)}),r.items=n,i=t.reduce(n,function(e,n){return e+t.template(r.opt.tpl)(n)},""),i.length>0?r.$list.show():r.$list.hide(),r.$list.html(i),r.$list.find("li:first").addClass("active")}):(n="",r.$list.hide(),r.$list.html(n))},renderInput:function(){var e,n,r;return r=this,r.$container.find(".sf-typeHelper-item").remove(),r.$container.find(".sf-typeHelper-item-single").remove(),n="",1===r.opt.maxNum&&(n="sf-typeHelper-item-single btn btn-default",r.opt.maxNum===r.result.length?this.$container.addClass("sf-typeHelper-single"):this.$container.removeClass("sf-typeHelper-single")),r.opt.inputTpl.length>0&&(e=t.reduce(r.result,function(e,i){return i.itemClass=n,e+t.template(r.opt.inputTpl)(i)},""),r.$container.prepend(e)),0===r.opt.maxNum||r.result.length!==r.opt.maxNum?r.$input.attr("placeholder",this.placeholderText):void r.$input.attr("placeholder","")},add:function(e){var t;return t=this,t.$list.trigger("hide"),t.result.push(e),t.renderInput(),t.opt.afterAdd?t.opt.afterAdd(e,t):void 0},remove:function(e){var n;return n=this,n.result=t.filter(n.result,function(t){return t.name!==e.name}),n.renderInput(),n.opt.afterRemove?n.opt.afterRemove(e,n):void 0},init:function(e){var t;return t=this,t.result=t.formatter(e.initData),t.renderInput()},build:function(n){var r;r=this,r.placeholderText.length>0&&r.$input.css("width",r.placeholderText.length+"em"),n.initData.length>0&&r.init(n),r.$container.on("click",function(){return r.$container.trigger("focus"),r.$input.trigger("focus")}),r.$list.on("hide",function(){return r.$input.val(""),r.renderList(""),r.query=""}),r.$input.on("keydown",function(e){var n;return n=e.keyCode,8===n&&0===r.query.length&&(r.remove(t.last(r.result)),r.renderInput()),13===n&&e.preventDefault(),r.result.length===r.opt.maxNum&&0!==r.opt.maxNum?e.preventDefault():void 0}),r.$input.on("keyup",function(n){var i,a,o,s;if(r.result.length!==r.opt.maxNum||0===r.opt.maxNum)switch(r.query=e(this).val(),s=n.keyCode,a=function(){var e,n;return e=r.$list.find("li.active").index(),n=r.items[e],-1===n.id||t.find(r.result,function(e){return e.id===n.id})?r.opt.emptyFunc&&r.opt.emptyFunc(r.query,r):r.add(n),r.$list.trigger("hide")},s){case 8:return r.renderList(r.query);case 188:return a();case 186:return a();case 13:return a();case 38:if(i=r.$list.find("li.active"),o=i.index(),o>0)return i.removeClass("active"),i.prev("li").addClass("active");break;case 40:if(i=r.$list.find("li.active"),o=i.index(),o<r.items.length-1)return i.removeClass("active"),i.next("li").addClass("active");break;default:return r.renderList(r.query)}}),e("body").on("click",function(t){var n,i;return n=e(t.target),i=n.attr("data-role"),"typeHelper"!==i?r.$list.trigger("hide"):void 0}),r.$container.on("click","[data-role=remove]",function(){var t,n,i,a;return t=e(this),n=t.closest(".sf-typeHelper-item"),a=n.index(),i=r.result[a],r.remove(i)}),r.$list.on("click","li",function(){var n,i;return n=e(this).index(),i=r.items[n],-1===i.id||t.find(r.result,function(e){return e.id===i.id})?r.opt.emptyFunc&&r.opt.emptyFunc(r.query,r):r.add(i),r.$list.trigger("hide")})}},e.fn.typeHelper=function(t){return new n(e(this)[0],t)}}($,_),define("sf_typeHelper",["jquery","underscore"],function(e){return function(){var t;return t||e.$.fn.typeHelper}}(this)),define("publish",["jquery","sf_typeHelperExtend","sfModal","sf_typeHelper","jquery_cookie"],function(e,t,n){"use strict";var r,i,a,o;i=e("input[name=tags]"),i.length>0&&(o=i.typeHelper({maxNum:5,initData:i.data("init"),remoteData:"/api/tags/search",emptyTip:"创建标签 <strong>{{query}}</strong>",emptyFunc:function(t,r){n({title:"创建标签",content:'<form id="tag"><input type="text" name="name" id="tagName" class="form-control mb20" value="'+t+'" placeholder="标签名称"><textarea name="text" id="tagText" placeholder="请对此标签补充一些描述资料, 以供他人参考" class="form-control" rows="5"></textarea></form>',doneFn:function(){e.post("/api/tags/add",{name:e("#tagName").val(),text:e("#tagText").val()},function(e){0===e.status&&(r.add(e.data),n("hide"))})}})}}),t.techTag(o),r=[],i.data("init")&&i.data("init").length&&(i.data("init").forEach(function(e){return r.push(e.id)}),i.val(r.join(",")))),e("#myTitle").focus(),a=e(window).height()-520,a>420&&(e(".editor").css("min-height",a+"px"),e("#myEditor").css("min-height",a+"px")),"false"===e.cookie("dontlikeShare")?e("#shareToWeibo").attr("checked","checked"):e("#shareToWeibo").removeAttr("checked"),e("#shareToWeibo").click(function(t){e("#shareToWeibo:checked").length>0?e.cookie("dontlikeShare",!1,{path:"/"}):e.cookie("dontlikeShare",!0,{path:"/"})})}),requirejs(["jquery","getRelated","Editor","autoSave","autoComplete","publish","main"],function(e,t,n,r){"use strict";var i,a,o;a='<li><a href="{{url}}" class="mr10">{{acceptedWord}} {{title}}</a><span class="text-muted">{{answers}} 个回答</span></li>',o=void 0,e("#myTitle").keydown(function(){o&&clearTimeout(o),o=setTimeout(function(){t(e("#myTitle").val(),a,"#qList",'<p class="mb0 text-muted">没有找到相似问题</p>')},500)}),e(".widget-suggest__close").click(function(){e("#titleSuggest").addClass("hidden"),clearTimeout(o),e("#myTitle").off("keydown")}),i=new n,e("#myEditor").attr("placeholder","1. 描述你的问题\n\n2. 贴上相关代码\n\n3. 贴上报错信息\n\n4. 贴上相关截图\n\n5. 已经尝试过哪些方法仍然没解决（附上相关链接）"),i.render("#myEditor"),r.bind(i,function(){var t;this["do"]="saveQuestion",this.type="question",this.title=e("#myTitle").val(),this.text=i.getVal(),this.weibo=e("#shareToWeibo:checked").length,this.id=e("#draftId").val(),t=e(".tagsInput").val().split(","),this.tags=t}),document.cookie.indexOf("typemode")>0&&(e("#myEditor").removeClass("hidden").addClass("form-control").attr("rows","14"),e(".editor").removeClass("editor")),e("#question").submit(function(t){var n,r,a;t.preventDefault(),n=e("#publishIt"),a=e(".tagsInput").val().split(","),n.text("加载中").attr("disabled","disabled"),r={title:e("#myTitle").val(),text:i.getVal(),tags:a,weibo:e("#shareToWeibo:checked").length,
draftId:e("#draftId").val(),siteId:e("#siteId").val()},e.post("/api/questions/add",r,function(e){0===e.status?(window.localStorage&&localStorage.removeItem("autoSaveContent_"+location.pathname),window.localStorage&&localStorage.removeItem("autoSaveTitle_"+location.pathname),window.localStorage&&localStorage.removeItem("autoSaveTag_"+location.pathname),r.weibo?location.href=e.data.url+"#shareToWeibo":location.href=e.data.url):n.text(n.data("text")).removeAttr("disabled")},"json")}),e("#publishIt").click(function(){return e("#question").submit()})}),define("qa_ask",function(){});